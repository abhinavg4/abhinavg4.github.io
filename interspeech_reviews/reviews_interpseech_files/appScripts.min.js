!function(e,t){"use strict";t&&(t.jsonHandler&&(t.jsonHandler.recognizeDates=!0),e.OData||(e.OData=t))}(window,window&&window.odatajs&&window.odatajs.oData),function(e,s){"use strict";e.cookies={getValue:function(e){return e&&this.contains(e)?unescape(s.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setValue:function(e,t,o,a,n,i){if(e&&!/^(?:expires|max\-age|path|domain|secure)$/.test(e)){var r="";if(o)switch(typeof o){case"number":r="; max-age="+o;break;case"string":r="; expires="+o;break;case"object":o.hasOwnProperty("toGMTString")&&(r="; expires="+o.toGMTString())}s.cookie=escape(e)+"="+escape(t)+r+(n?"; domain="+n:"")+(a?"; path="+a:"")+(i?"; secure":"")}},remove:function(e){var t;e&&this.hasItem(e)&&((t=new Date).setDate(t.getDate()-1),s.cookie=escape(e)+"=; expires="+t.toGMTString()+"; path=/")},contains:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}}}(window.app,window.document),function(){"use strict";window.app.enums={userRole:{author:"Author",reviewer:"Reviewer",externalReviewer:"External Reviewer",metaReviewer:"Meta-Reviewer",seniorMetaReviewer:"Senior Meta-Reviewer",trackChair:"Track Chair",reference:"Reference",chair:"Chair",settingsReader:"Settings Reader",proceedingEditor:"Proceeding Editor",presentationChair:"Presentation Chair"},userRoleCodeRoleMap:{CH:"Chair",AT:"Author",ER:"External Reviewer",MR:"Meta-Reviewer",SM:"Senior Meta-Reviewer",RV:"Reviewer",TC:"Track Chair",SR:"Settings Reader",RF:"Reference",PE:"Proceeding Editor",PC:"Presentation Chair",NS:"Not Set"},questionType:{agreement:1,comment:2,options:3,optionsWithValue:4,optionsWithUserInput:5,optionsWithOther:6},optionsType:{radioButtonList:1,checkboxList:2,dropDown:3,listBox:4},formType:{submission:1,review:2,cameraready:3,authorfeedback:4,metareview:5,chairnote:6,reproducibility:7,metareviewernote:8,seniormetareviewernote:9,reviewernote:10,userinformation:11},aggregateType:{average:1,minimum:2,maximum:4,spread:8},objectType:{track:"Track",session:"Session",submission:"Submission"},activityType:{newPaperSubmission:1,editPaperSubmission:2,reviewSubmission:3,reviewDiscussion:4,authorNotification:5,cameraReadySubmission:6,reviewerBidding:7,authorFeedback:8,supplementaryMaterial:9,metaReviewSubmission:10,metaReviewerBidding:11},httpStatusCodes:{success:{ok:200,noContent:204},failure:{badRequest:400,notFound:404,conflict:409}},disputedConflictStatus:{NotDisputed:"Not Disputed",Pending:"Pending",Kept:"Conflict Kept",Deleted:"Conflict Deleted"},hasFlag:function(e,t){return(e&t)==t},reviewersStatPageMode:{metaReviewer:"metaReviewer",seniorMetaReviewer:"seniorMetaReviewer",chair:"chair"},inviteType:{reviewer:0,metaReviewer:1,seniorMetaReviewer:2},trackUserType:{reviewer:0,metaReviewer:1,seniorMetaReviewer:2},bidOptions:{1:"Not Entered",2:"Not Willing",3:"In A Pinch",4:"Willing",5:"Eager"},assignmentType:{reviewer:0,metaReviewer:1,seniorMetaReviewer:2},externalProfile:{googleScholar:"https://scholar.google.com/citations?user={0}",semanticScholar:"https://www.semanticscholar.org/author/{0}",dblp:"https://dblp.org/pid/{0}",openReview:"https://openreview.net/profile?id={0}"},inviteStatusOptions:["NotResponded","Accepted","Declined"],inviteStatusOptionsSubstitutions:{NotResponded:"Not responded",Accepted:"Accepted",Declined:"Declined"},iThenticateFileStatuses:["NotSent","Sent","Pending","Done","Error"],iThenticateFileStatusSubstitutions:{NotSent:"Not Sent",Sent:"Sent",Pending:"Pending",Done:"Done",Error:"Error"},iThenticateFileTypes:["SubmissionFile","CameraReadyFile"],iThenticateFileTypeSubstitutions:{SubmissionFile:"Submission",CameraReadyFile:"Camera-Ready"},noteType:{reviewer:0,metaReviewer:1,seniorMetaReviewer:2,chair:3}}}(),function(s,e,t,o,n,a){"use strict";var u=function(){a&&Function.prototype.bind.call(a.log,a).apply(a,arguments)},i=function(){a&&Function.prototype.bind.call(a.error,a).apply(a,arguments)},l=function(){return""};t.defaultError=function(e){var t,o,a;if(e.response.body)a=e.response.headers["Content-Type"]&&-1!=e.response.headers["Content-Type"].indexOf("text/html")?(t="{0} ({1}).".format(e.response.statusText,e.response.statusCode)+l(),o=e.response.body,"html"):(t="{0} ({1}):".format(e.response.statusText,e.response.statusCode),o=s.getODataErrorMessage(e).message+l(),"text");else{switch(e.response.statusCode){case 400:t="Bad Request",o="";break;case 401:t="Unauthorized:",o="Your session has timed out or you are trying to access resource not allowed.";break;case 403:t="Forbidden:",o="You are trying to access resource not allowed.";break;case 404:t="Not Found",o="";break;default:t="",o="Response status code: "+e.response.statusCode}a="text"}s.addMessage(o,t,"error",a),i(e)},s.processXmlHttpRequestError=function(e){var t="{0} ({1}):".format(e.statusText,e.status),o=s.getWebApiErrorMessage(e)+l();s.addMessage(o,t,"error"),i(e)},o(e).ajaxError(function(e,t,o){var a,n,i,r;t.errorHandled||(a="{0} ({1}):".format(t.statusText,t.status),n="",null!=t.responseJSON&&(null!=t.responseJSON.Message?n+=t.responseJSON.Message:"object"==typeof t.responseJSON&&(i=t.responseJSON,void 0!==(r=Object.keys(t.responseJSON).filter(function(e){return i.hasOwnProperty(e)})[0])&&("string"==typeof i[r]?n+=i[r]:Array.isArray(i[r])&&0<i[r].length&&"string"==typeof i[r][0]&&(n+=i[r][0])))),n+=l(),s.addMessage(n,a,"error"),u(e,t,o))}),s.getODataErrorMessage=function(e){var t=e.message||e.response.statusText,o="";"."!=t[t.length-1]&&(t+=".");var a=(a=e.response.headers["Content-Type"])||e.response.headers["content-type"];return null==n||!a||-1==a.indexOf("json")||(e=n.parse(e.response.body).error)&&(e.code&&(o=e.code),e.message&&(t=e.message),e.innererror&&(t+=" "+e.innererror.message)),{errorCode:o,message:t}},s.getWebApiErrorMessage=function(t){var e,t=t.responseText||t.response;if(null!=n){try{e=n.parse(t)}catch(e){return t}e.Message&&(t=e.Message,e.ExceptionMessage&&(t+=" "+e.ExceptionMessage))}return t},s.processException=function(e){var t=e.toString();"."!=t[t.length-1]&&(t+="."),t+=l(),s.addMessage(t,null,"error"),i(e.toString()),u(e.stack)}}(window.app,window.document,window.OData,window.jQuery,window.JSON,window.console),function(a,c){"use strict";ko.validation.init({insertMessages:!1,errorClass:null,errorElementClass:null,errorMessageClass:null,stubProperty:null}),ko.validation.localize({required:"Value is required.",min:"Value must be greater than or equal to {0}.",max:"Value must be less than or equal to {0}.",minLength:"Value must contain at least {0} characters.",maxLength:"Value must contain no more than {0} characters.",pattern:"Value is incorrect.",step:"Value must increment by {0}.",email:"Value must be email address.",date:"Value must be a date.",dateISO:"Value must be a date.",number:"Value must be a number.",digit:"Value must be a whole number.",phoneUS:"Value must be a phone number.",equal:"Values must equal.",notEqual:"Values must not equal.",unique:"Value must be unique."}),ko.validation.rules.requiredCheckbox={validator:function(e){return!!e}},ko.validation.registerExtenders(),ko.bindingHandlers.allowBindings={init:function(e,t){return{controlsDescendantBindings:!ko.utils.unwrapObservable(t())}}},ko.virtualElements.allowedBindings.allowBindings=!0,ko.bindingHandlers.formatChildLinks={update:function(e,t,o,a,n){var i=t();if(null!=i){if(c.isArray(i))for(var r=0;r<i.length;r++)i[r]=ko.unwrap(i[r]);else i=[ko.unwrap(i)];c(e).find("a").each(function(){var e=c(this);null==e.data("href")&&e.data("href",e.attr("href")),e.attr("href",e.data("href").format(i))})}}},ko.bindingHandlers.fadeVisible={init:function(e,t){t=t();c(e).toggle(ko.unwrap(t))},update:function(e,t){t=t();ko.unwrap(t)?c(e).fadeIn():c(e).fadeOut()}},ko.bindingHandlers.slideDownVisible={init:function(e,t){t=t();c(e).toggle(ko.unwrap(t))},update:function(e,t){t=t();ko.unwrap(t)?c(e).slideDown():c(e).slideUp()}},ko.bindingHandlers.valueWithInit={init:function(e,t,o,a){t()(e.value),ko.bindingHandlers.value.init(e,t,o,a)},update:ko.bindingHandlers.value.update},ko.bindingHandlers.iframeHtml={update:function(e,t){t=t(),t=ko.unwrap(t);e.contentDocument.write(t)}},ko.bindingHandlers.triggerClickOnEnterKey={init:function(t){c(t).keydown(function(e){13===(e.which||e.keyCode)&&c(t).click()})}},ko.bindingHandlers.tooltip={init:function(e,t){var o=ko.utils.unwrapObservable(t()),t={};ko.utils.extend(t,ko.bindingHandlers.tooltip.options),ko.utils.extend(t,o),c(e).tooltip(t),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){c(e).tooltip("destroy")})},options:{placement:"right",trigger:"hover",html:!0}},ko.applyBindingsAndShow=function(e,t){var o=a.getElementById(t);if(!o)throw new Error("Element with id='{0}' does not exist.".format(t));ko.applyBindings(e,o),o.style.display="block"},ko.observableArray.fn.withPausing=function(){return this.pauseNotifications=!1,this.suspendNotifications=function(){this.pauseNotifications=!0},this.resumeNotifications=function(){this.pauseNotifications=!1},this.notifySubscribers=function(){this.pauseNotifications||ko.subscribable.fn.notifySubscribers.apply(this,arguments)},this},ko.observable.fn.withPausing=function(){return this.pauseNotifications=!1,this.suspendNotifications=function(){this.pauseNotifications=!0},this.resumeNotifications=function(){this.pauseNotifications=!1},this.notifySubscribers=function(){this.pauseNotifications||ko.subscribable.fn.notifySubscribers.apply(this,arguments)},this},ko.setupWizardSteps=function(e,t){var o=e;o.steps=[],o.backButtonTitles=[],o.fwdButtonTitles=[],o.currentStep=ko.observable(-1),o.mayGoFwd=null,o.mayGoBack=null,o.beforeNextStepInvoked=null,o.afterNextStepInvoked=null,o.beforePrevStepInvoked=null,o.afterPrevStepInvoked=null;for(var a=0;a<t;a++)o.steps[a]={isVisible:ko.observable(!1),skip:ko.observable(!1)};function n(e){o.currentStep(e),o.hideSteps(),o.steps[o.currentStep()].isVisible(!0),null!=o.afterNextStepInvoked&&o.afterNextStepInvoked()}function i(e){o.currentStep(e),o.hideSteps(),o.steps[o.currentStep()].isVisible(!0),null!=o.afterPrevStepInvoked&&o.afterPrevStepInvoked()}o.startOver=function(){o.hideSteps(),o.currentStep(-1),o.nextStep()},o.nextStep=function(){var e=o.nextStepNum();null!=e&&(null!=o.beforeNextStepInvoked&&!o.beforeNextStepInvoked(function(){n(e)})||n(e))},o.prevStep=function(){var e=o.prevStepNum();null!=e&&(null!=o.beforePrevStepInvoked&&!o.beforePrevStepInvoked(function(){i(e)})||i(e))},o.hideSteps=function(){for(var e=0;e<o.steps.length;e++)o.steps[e].isVisible(!1)},o.prevStepNum=ko.computed(function(){for(var e=o.currentStep();0<=--e&&o.steps[e].skip(););return 0<=e?e:null}),o.nextStepNum=ko.computed(function(){for(var e=o.currentStep();++e<t&&o.steps[e].skip(););return e<t?e:null}),o.canGoBack=ko.computed(function(){return null!=o.prevStepNum()&&(null==o.mayGoBack||o.mayGoBack())}),o.canGoFwd=ko.computed(function(){return null!=o.nextStepNum()&&(null==o.mayGoFwd||o.mayGoFwd())}),o.backButtonTitle=ko.computed(function(){var e=o.backButtonTitles[o.currentStep()];return void 0===e||null==e?"Previous":e}),o.fwdButtonTitle=ko.computed(function(){var e=o.fwdButtonTitles[o.currentStep()];return void 0===e||null==e?"Next":e})},ko.extenders.validateBeforeSet=function(e,o){e.validationEnabled=!1;var t=ko.pureComputed({read:function(){return this()},write:function(e){var t=this();!this.validationEnabled||o(e)?(this(e),this.notifySubscribers(e)):this.notifySubscribers(t)},owner:e}).extend({notify:"always"});return t(e()),e.validationEnabled=!0,t.enableValidation=function(){e.validationEnabled=!0},t.disableValidation=function(){e.validationEnabled=!1},t},ko.extenders.trackChanges=function(t,e){return e&&(t.isChanged=ko.observable(!1),t.originalValue=t(),t.subscribe(function(e){t.isChanged(e!=t.originalValue)})),t},ko.bindingHandlers.editableInline={init:function(e,t,o,a,n){var i=ko.utils.unwrapObservable(t()),r={};ko.utils.extend(r,ko.bindingHandlers.editableInline.options),ko.utils.extend(r,i);var t=c(e),i=c("<"+r.viewer.tag+" />",r.viewer.attr).addClass("inline-editable"),s=c("<span />"),e=c("<i />").addClass("icon-edit"),u=c("<"+r.editor.tag+" />",r.editor.attr);i.append(s),i.append(e),t.append(i),t.append(u),ko.applyBindingsToNode(s.get(0),{text:r.text}),ko.applyBindingsToNode(u.get(0),{value:r.text});var l=r.text;function d(){l!=r.text()&&(r.changed&&"function"==typeof r.changed&&r.changed.call(n.$data,n.$data,l,r.text()),l=r.text())}i.click(function(){l=r.text(),u.width(s.width()),s.hide(),u.show(),u.focus()}),u.blur(function(){s.show(),u.hide(),d()}),u.keypress(function(e){13===e.keyCode&&(s.show(),u.hide(),d())})},options:{viewer:{tag:"div",attr:{}},editor:{tag:"input",attr:{type:"text",style:"display: none"}},changed:null}}}(window.document,window.jQuery),function(e){"use strict";function r(){return!0}ko.subscribable.fn.autoMap=function(){return this.isAutoMapped=r,this},e.autoMap=function(e,t){if(void 0===e)return{isAutoMapped:r};var o=void 0===t;o&&(t={});var a,n,i=[];for(a in e=null===e?{}:e)!function(e,t){if(e[t]&&e[t].isAutoMapped&&e[t].isAutoMapped())return!0;if(e.__autoMappedFields__)for(var o=0;o<e.__autoMappedFields__.length;o++)if(e.__autoMappedFields__[o]==t)return!0;return!1}(e,a)||(n=a.substr(0,1).toUpperCase()+a.substr(1,a.length),o?t[n]=ko.unwrap(e[a]):(n=null===t?null:void 0===t[n]?ko.unwrap(t[a]):t[n],ko.isObservable(e[a])?(e[a](n),e[a].isModified&&e[a].isModified(!1)):(e[a]=n,i.push(a))));return 0<i.length&&(e.__autoMappedFields__=i),o?t:e}}(window.app),function(e){var n=this;function t(e,o){this.displayName=e,this.operator=o,this.getFilterString=function(e,t){return e+" "+o+" "+(t="string"==typeof t?"'"+t+"'":t)}}function o(e,o,a){t.call(this,e,o),a=a||"true",this.getFilterString=function(e,t){return"("+o+"("+e+","+(t="string"==typeof t?"'"+t+"'":t)+") eq "+a+")"}}n.operators={equal:new t("equal to","eq"),is:new t("is","eq"),notEqual:new t("not equal to","ne"),isNot:new t("is not","ne"),greaterThan:new t("greater than","gt"),greaterThanOrEqual:new t("greater than or equal","ge"),lessThan:new t("less than","lt"),lessThanOrEqual:new t("less than or equal","le"),contains:new o("contains","contains"),doesNotContain:new o("does not contain","contains","false"),startsWith:new o("starts with","startswith"),doesNotStartWith:new o("does not start with","startswith","false"),endsWith:new o("ends with","endswith"),doesNotEndWith:new o("does not end with","endswith","false")},n.Filter=function(e,t,o){var a=this;a.options=[],a.property=e,a.operators=t,a.operator=ko.observable(o&&o.operator&&a.operators.find(function(e){return e===o.operator})),a.value=ko.observable(o&&o.value),a.getValue=function(){return a.value()||""},this.getFilterString=function(){var e=this.operator();return e?a.getValue()?e.getFilterString(a.property,a.getValue()):null:""}},n.NumericFilter=function(e,t){var o=this,a=[n.operators.equal,n.operators.notEqual,n.operators.greaterThan,n.operators.greaterThanOrEqual,n.operators.lessThan,n.operators.lessThanOrEqual];n.Filter.call(o,e,a,t),o.getValue=function(){return parseInt(o.value())||0}},n.StringFilter=function(e,t){var o=[n.operators.contains,n.operators.doesNotContain,n.operators.equal,n.operators.notEqual,n.operators.startsWith,n.operators.doesNotStartWith,n.operators.endsWith,n.operators.doesNotEndWith];n.Filter.call(this,e,o,t)},n.OptionsFilter=function(e,t){var o=[n.operators.is,n.operators.isNot];n.Filter.call(this,e,o,t),this.options=t&&t.options||[]},e.filtering=this}(window.app),function(s,n,o,u,a){"use strict";function l(e){var t=a.getItem("delayedMessages");return e&&d(null),t&&JSON.parse(t)||[]}function d(e){e?a.setItem("delayedMessages",JSON.stringify(e)):a.removeItem("delayedMessages")}var c=new function(){var t=this;t.visible=ko.observable(!1),t.messages=ko.observableArray([]),t.fadeIn=function(e){1===e.nodeType&&o(e).hide().slideDown()},t.fadeOut=function(e){1===e.nodeType&&o(e).slideUp(function(){o(e).remove()})},t.remove=function(e){t.messages.remove(e)}};s.narratorMessages={allFiltersCleared:"All filters cleared",showingNumberItemsPerPage:"Showing {0} items per page",sortedBy:"Sorted by {0} {1}",searchingFor:"Searching for {0}",movedUp:"{0} moved up",movedDown:"{0} moved down"},s.announce=function(e){var t=o("<div>").attr("id","div-announce-"+Date.now()).addClass("sr-only").appendTo("#narratorMessages");u(function(){t.text(e)},100),u(function(){t.remove()},1e3)},s.addMessage=function(e,t,o,a,n,i){var r={type:o=o||"success",caption:t,text:"text"==(a=a||"text")?e:null,html:"html"==a?e:null};if(n)return e=r,(n=l(!1)).push(e),void d(n);0!=c.messages().length||c.visible()||c.visible(!0),s.settings.stackMessages||c.messages.pop(),c.messages.push(r),"error"!=o&&(i=i||s.settings.messagesShowTime,u(function(){c.messages.remove(r)},i))},s.addErrorMessage=function(e,t,o,a){s.addMessage(e,t,"error",o,a)},o(function(){var e=n.getElementById(s.settings.messagesBlockId);e&&ko.applyBindings(c,e);var t=l(!0);if(t)for(var o=0;o<t.length;o++){var a=t[o];s.addMessage(a.html||a.text,a.caption,a.type,a.html?"html":"text",!1)}})}(window.app,window.document,window.jQuery,window.setTimeout,window.sessionStorage),function(e,t){"use strict";e.page={scrollToId:function(e){e=t.getElementById(e);null!=e&&t.body.scrollTop>e.offsetTop&&(t.body.scrollTop=e.offsetTop)},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},saveState:function(e,t){sessionStorage&&sessionStorage.setItem(e,JSON.stringify(t))},loadState:function(e){if(!sessionStorage)return null;try{return JSON.parse(sessionStorage.getItem(e))}catch(e){}return null},appendToState:function(e,t){var o=(o=this.loadState(e))||{};this.saveState(e,$.extend({},o,t))}}}(window.app,window.document),function(e){"use strict";var o=window.document.getElementById(e.settings.progressIndicatorId);function t(e,t){o.style[e]!=t&&(o.style[e]=t)}e.showProgress=function(){t("display","block"),t("aria-busy","true")},e.hideProgress=function(){t("display","none"),t("aria-busy","false")}}(window.app),function(a,r,n){"use strict";a.url={getUrlParts:function(){return r.pathname.split("/")},queryString:{getValue:function(e,t){e=e&&encodeURIComponent(e);for(var o={},a=(t?1<(t=t.split("?")).length?t[1]:"":r.search).split(/\?|&/),n=0;n<a.length;n++){var i=a[n];if(""!=i){i=i.split("=");if(e){if(e==i[0])return decodeURIComponent(i[1])}else i[1]&&(o[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}}return e?null:o},setValue:function(e,t,o){t=encodeURIComponent(t),o=encodeURIComponent(o);var a=new RegExp("([?|&])"+t+"=.*?(&|$)","i");return e.match(a)?e.replace(a,"$1"+t+"="+o+"$2"):-1==e.indexOf("?")?e+"?"+t+"="+o:e+"&"+t+"="+o}},hash:{getValue:function(e){if(e)return e.split("#")[1];e=r.hash.substr(1,r.hash.length-1);return""==e?null:e},setValue:function(e,t){return t?t.split("#")[0]+("#"==e[0]?"":"#")+(e||""):(r.hash=e||"",r.href)},remove:function(e){return e?e.split("#")[0]:r.hash=""}}},a.url.navigateTo=function(e,t){if(a.showProgress(),t)if("string"==typeof t)e=a.url.hash.setValue(t,e);else for(var o in t)null!=t[o]&&(e=a.url.queryString.setValue(e,o,t[o]));n(function(){r.href=e},1)},a.url.open=function(e,t){if(t)if("string"==typeof t)e=a.url.hash.setValue(t,e);else for(var o in t)null!=t[o]&&(e=a.url.queryString.setValue(e,o,t[o]));n(function(){window.open(e)},1)}}(window.app,window.location,window.setTimeout),function(d){"use strict";function o(e){var t=""+(e.getMonth()+1),o=""+e.getDate(),a=e.getFullYear(),n=""+e.getHours(),i=""+e.getMinutes(),e=""+e.getSeconds();return t.length<2&&(t="0"+t),o.length<2&&(o="0"+o),n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),e.length<2&&(e="0"+e),[a,t,o].join("-")+" "+[n,i,e].join(":")}d.capitalize=function(e){return e.replace(/^(.)|\s(.)/g,function(e){return e.toUpperCase()})},d.highlight=function(e,t){t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("(\\b"+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},d.getPublicationUrlPattern=function(){return new RegExp("^https?://[0-9a-zA-Z]([-.w]*[0-9a-zA-Z])*(:(0-9)*)*(/?)([a-zA-Z0-9-.?,'/\\+&amp;%$=#_~]*)?$","i")},d.formatUndefinableDateTime=function(e){if(!e)return"never";switch(typeof e){case"string":var t=e.toString();return t.substring(0,t.indexOf(".")).replace("T"," ");case"object":return e instanceof Date?o(e):"";default:return""}},d.computeSubjectAreaColumnPairs=function(e){for(var t=[],o=Math.floor(e.length/2);o<e.length-1&&(null===e[o].parentSubjectAreaId&&null!==e[o+1].parentSubjectAreaId&&e[o].id===e[o+1].parentSubjectAreaId||null!==e[o].parentSubjectAreaId&&null!==e[o+1].parentSubjectAreaId&&e[o].parentSubjectAreaId===e[o+1].parentSubjectAreaId);)o++;for(var a=0;a<o+1;a++){var n=o+1+a<e.length?[e[a],e[o+1+a]]:[e[a]];t.push(n)}return t},d.AggregateColumn=function(e,t,o,a,n,i){var r=this;r.key=e,r.avg=o,r.min=a,r.max=n,r.spread=i,r.id=t},d.QuestionResponseColumn=function(e,t){this.text=t,this.id=e},d.Suggestion=function(e){var t=this;t.id=e.Id,t.firstName=e.FirstName,t.lastName=e.LastName,t.email=e.Email,t.rank=e.Rank,t.getText=function(){return""===t.firstName&&""===t.lastName?t.rank:t.rank+" - "+t.firstName+" "+t.lastName+" ("+t.email+")"}},d.Track=function(){this.id=d.autoMap(),this.name=d.autoMap()},d.TrackWithCheck=function(){this.id=d.autoMap(),this.name=d.autoMap(),this.checked=ko.observable(!0)},d.SubmissionStatus=function(){this.id=d.autoMap(),this.name=d.autoMap(),this.trackId=d.autoMap()},d.UserTag=function(){this.id=d.autoMap(),this.tag=d.autoMap()},d.GetEventFilter=function(e){e=e.target;return ko.contextFor(e).$root.getFilter()},d.disableLink=function(e){setTimeout(function(){e.attr("disabled","disabled")},1)},d.enableLink=function(e){setTimeout(function(){e.removeAttr("disabled")},0)},d.File=function(){var e=this;e.id=d.autoMap(),e.originalName=d.autoMap(),e.size=d.autoMap(),e.formattedSize=d.autoMap(),e.uploadDate=d.autoMap(),e.downloadLink=d.autoMap()},d.LabelSettings=function(){this.allowedFileTypes=d.autoMap(),this.minFileNumber=d.autoMap(),this.maxFileNumber=d.autoMap(),this.maxFileSize=d.autoMap()},d.FileWithFormat=function(){var e=this;e.fileId=d.autoMap(),e.originalName=d.autoMap(),e.size=d.autoMap(),e.updated=d.autoMap(),e.fileLabelId=d.autoMap(),e.fileLabel=d.autoMap(),e.formattedSize=ko.pureComputed(function(){return e.size.formatSize()}),e.localeUploadDate=ko.pureComputed(function(){return new Date(e.updated).toLocaleString()}),e.downloadLink=ko.pureComputed(function(){return"/api/{0}/Files/{1}".format(window.cmt3.conference.name,e.fileId)})},d.FileLabel=function(s,e,u){var l=this;l.id=d.autoMap(),l.name=d.autoMap(),l.files=ko.observableArray(),l.settings=d.autoMap(new d.LabelSettings,e),l.initModel=function(){function o(e){if(l.files().length+e.length>l.settings.maxFileNumber)d.addMessage("You can upload up to {0} files only.".format(l.settings.maxFileNumber),null,"error");else{for(var t={},o=s.files(),a=0;a<o.length;a++)t[o[a].originalName.toLowerCase()]=!0;d.showProgress();for(var n=[],a=0;a<e.length;a++){var i=e[a];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return d.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*l.settings.maxFileSize)return d.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,l.settings.maxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=l.settings.allowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(d.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,l.settings.allowedFileTypes),null,"error"),!1)}(i,t)||n.push($.Deferred(function(t){var e=$.ajaxSettings.xhr();e.open("POST",u,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("File-Name",encodeURIComponent(i.name)),e.send(i),e.addEventListener("load",function(e){200==e.target.status?(r(e.target.responseText),t.resolve()):(d.processXmlHttpRequestError(e.target),t.reject())},!1)}).promise())}$.when.apply($,n).always(d.hideProgress)}}function r(e){try{var t=ko.utils.parseJson(e)}catch(e){return void d.processException(e)}t=d.autoMap(new d.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),l.files.push(t)}l.title=d.autoMap(),l.validateFiles=function(){var e=!0;return l.files().length>l.settings.maxFileNumber&&(l.showFilesMaxErrorMessage(!0),e=!1),l.files().length<l.settings.minFileNumber&&(l.showFilesMinErrorMessage(!0),e=!1),e},l.showFilesMinErrorMessage=ko.observable(!1),l.showFilesMaxErrorMessage=ko.observable(!1),l.files=ko.observableArray(),l.removeFile=function(e){l.files.remove(e)},l.uploadFile=function(){var e=$('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},l.canUploadMoreFiles=ko.computed(function(){return l.files().length<l.settings.maxFileNumber}),l.xhrUploadSupported=function(){return null!=window.FileReader},l.fileUploadDragOver=function(e,t){l.canUploadMoreFiles()&&$(t.target).addClass("dragOver")},l.fileUploadDragLeave=function(e,t){l.canUploadMoreFiles()&&$(t.target).removeClass("dragOver")},l.fileUploadDrop=function(e,t){l.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),l.fileUploadDragLeave(e,t))},l.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},l.parseSingleUploadResult=function(e,t){r(t.target.contentDocument.body.innerText)}}},d.Question=function(){this.order=d.autoMap(),this.details=d.autoMap(),this.answers=[]},d.QuestionAnswer=function(){this.text=d.autoMap(),this.value=d.autoMap()},d.Review=function(){var e=this;e.reviewerNumber=d.autoMap(),e.reviewerName=d.autoMap(),e.isSubmitted=d.autoMap(),e.questions=[],e.files=[],e.isSelf=!1},d.MetaReview=function(){var e=this;e.metaReviewerNumber=d.autoMap(),e.metaReviewerName=d.autoMap(),e.isSubmitted=d.autoMap(),e.questions=[],e.files=[]},d.MessageList=function(t){var e=this;e.id=t.Id,e.isSelf=t.IsSelf,e.replyAuthor=t.ReplyAuthor,e.replyDate=t.ReplyDate,e.date=t.Date,e.topicId=t.TopicId,e.topic=t.Topic,e.message=t.Text.htmlMultiLineEncode(),e.text=ko.observable(),e.reviewer=ko.pureComputed(function(){var e=null;return t.RoleAssignmentNumber&&(e=d.enums.userRole.reviewer===t.Role?"Reviewer #"+t.RoleAssignmentNumber:d.enums.userRole.metaReviewer===t.Role?"Meta-Reviewer #"+t.RoleAssignmentNumber:d.enums.userRole.seniorMetaReviewer===t.Role?"Senior Meta-Reviewer #"+t.RoleAssignmentNumber:d.enums.userRole.chair===t.Role?"Chair #"+t.RoleAssignmentNumber:"User #"+t.RoleAssignmentNumber),t.IsMasked||d.enums.userRole.reviewer!==t.Role&&d.enums.userRole.metaReviewer!==t.Role?e:t.FirstName+" "+t.LastName+" ("+e+")"}),e.dateFormatted=function(){return o(e.date)},e.replyDateFormatted=function(){return e.replyDate?o(e.replyDate):""}},d.copyFeatureModel=function(n,i,e,t){var r=this;r.tracks=ko.observableArray(),r.selectedTracks=ko.observableArray(),r.editInDialog=function(){OData.read(d.odata.getUrl(e,{orderby:"Order"}),function(e){for(var t,o=[],a=0;a<e.value.length;a++)e.value[a].Id!=i&&(t=d.autoMap(new d.Track,e.value[a]),o.push(t));r.tracks(o),r.selectedTracks([]),$(n).modal("show")})},r.save=function(){var e;0!=r.selectedTracks().length&&((e=d.autoMap(r)).TrackId=i,e.ToTrackIds=r.selectedTracks(),e={requestUri:d.odata.getUrl(t,null,"CopyFeatureFromTrack"),method:"POST",data:{Request:e}},OData.request(e,function(){$(n).modal("hide"),d.addMessage("Settings copied!")}))},r.bind=function(){ko.applyBindings(r,n)}}}(window.app),function(e,t){"use strict";t(e).ajaxStart(function(){}),t(e).ajaxStop(function(){})}((window.app,window.document),window.jQuery,(window.setTimeout,window.clearTimeout)),function(l,e,d,c,p){"use strict";var m=e.net.defaultHttpClient;e.defaultSuccess;e.net.defaultHttpClient=new function(){var s=0,u=0;this.request=function(e,t,o){var a,n=null==e.showProgressIndicator||e.showProgressIndicator;null!=e.showProgressIndicator&&!e.showProgressIndicator||(a=e.progressIndicatorTimeout||l.settings.progressIndicatorTimeout,s++,0==a?(l.showProgress(),0!=u&&p(u)):0==u&&(u=c(function(){l.showProgress()},l.settings.progressIndicatorTimeout))),e.recognizeDates=!0,e.headers.Accept="application/json;odata.metadata=full",e.headers.Prefer="return=representation";var i=d.Deferred(),e=m.request(e,function(e){r();try{t&&"function"==typeof t&&t(e),i.resolve(e.data)}catch(e){l.processException(e)}},function(e){r();try{i.reject(e),o&&"function"==typeof o&&o(e)}catch(e){l.processException(e)}});return d.extend(i.promise(),e);function r(){n&&0==--s&&(0!=u&&(p(u),u=0),l.hideProgress())}}},e.defaultSuccess=function(){}}(window.app,window.OData,window.jQuery,window.setTimeout,window.clearTimeout),function(t){"use strict";var e=window.cmt3.context.path||"",i=("/"==e?"":e)+"/api/odata{conferenceName}{entitySet}{key}{action}{queryString}",r={orderby:!0,top:!0,skip:!0,filter:!0,expand:!0,format:!0,select:!0,count:!0};function o(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function n(e,t,o,a,n){if(!t)throw new Error("'entitySet' must be specified.");t={entitySet:"/"+t};return t.conferenceName=e?"/"+e:"","object"==typeof o&&(n=o,o=null),"object"==typeof a&&(n=a,a=null),t.key=o?"({0})".format(o):"",t.action=a?"/"+a:"",t.queryString=n?function(e){var t,o="?";for(t in e)null!=e[t]&&(o+=encodeURIComponent((r[t]?"$":"")+t)+"="+encodeURIComponent(e[t])+"&");return o.substring(0,o.length-1)}(n):"",i.format(t)}t.odata={escapeParam:function(e){return null==(e=e)||"string"!=typeof e?e:e.replace(new RegExp(o("'"),"g"),"''")},unescapeParam:function(e){return null==(e=e)||"string"!=typeof e?e:e.replace(new RegExp(o("''"),"g"),"'")},getUrl:function(e,t,o,a){return n(window.cmt3&&window.cmt3.conference?window.cmt3.conference.name:null,e,t,o,a)},getConferenceUrl:n,getGlobalUrl:function(e,t,o,a){return n(null,e,t,o,a)},buildContainsQuery:function(e,t,o){for(var a=o?"not(":"(",n=0;n<t.length;n++)a+=e+" eq "+t[n],n!=t.length-1&&(a+=" or ");return a+")"},processRedirectResponse:function(e){t.url.navigateTo(e.RedirectUrl)},getErrorMessage:function(e){if(!e||!e.response||!e.response.body)return"";e=$.parseJSON(e.response.body);return e&&e.value?e.value:""},entitySet:{myConferences:"MyConferences",conferences:"Conferences",conflictReasons:"ConflictReasons",emails:"Emails",emailTemplates:"EmailTemplates",files:"Files",forms:"Forms",optionsTypes:"OptionsTypes",questions:"Questions",questionTypes:"QuestionTypes",questionDisplayLogic:"QuestionDisplayLogic",reviewDrafts:"ReviewDrafts",reviewModels:"ReviewModels",metaReviewDrafts:"MetaReviewDrafts",authorFeedbackDrafts:"AuthorFeedbackDrafts",reviewerViews:"ReviewerViews",metaReviewerViews:"MetaReviewerViews",reviewerSubmissionViews:"ReviewerSubmissionViews",metaReviewerSubmissionViews:"MetaReviewerSubmissionViews",seniorMetaReviewerSubmissionViews:"SeniorMetaReviewerSubmissionViews",metaReviewModels:"MetaReviewModels",trackReviewerViews:"TrackReviewerViews",trackStatuses:"TrackStatuses",reviews:"Reviews",metaReviews:"MetaReviews",reviewVersionViews:"ReviewVersionViews",reviewerNotes:"ReviewerNotes",reviewerNoteViews:"ReviewerNoteViews",metaReviewerNotes:"MetaReviewerNotes",metaReviewerNoteViews:"MetaReviewerNoteViews",seniorMetaReviewerNotes:"SeniorMetaReviewerNotes",seniorMetaReviewerNoteViews:"SeniorMetaReviewerNoteViews",chairNotes:"ChairNotes",chairNoteViews:"ChairNoteViews",reviewDiscussions:"ReviewDiscussions",authorFeedbacks:"AuthorFeedbacks",authorFeedbackViews:"AuthorFeedbackViews",reviewViews:"ReviewViews",metaReviewViews:"MetaReviewViews",discussionMessages:"DiscussionMessages",reviewSnapshotAuthorViews:"ReviewSnapshotAuthorViews",roles:"Roles",subjectAreas:"SubjectAreas",submissions:"Submissions",deletedSubmissions:"DeletedSubmissions",generalSettings:"GeneralSettings",authorFeedbackSettings:"AuthorFeedbackSettings",reviewSettings:"ReviewSettings",conflictSettings:"ConflictSettings",metaReviewSettings:"MetaReviewSettings",seniorMetaReviewSettings:"SeniorMetaReviewSettings",cameraReadySubmissions:"CameraReadySubmissions",cameraReadySubmissionSettings:"CameraReadySubmissionSettings",submissionSettings:"SubmissionSettings",submissionStatuses:"SubmissionStatuses",submissionViews:"SubmissionViews",submissionAuthorViews:"SubmissionAuthorViews",cameraReadySubmissionViews:"CameraReadySubmissionViews",emailMessages:"EmailMessages",tracks:"Tracks",trackSummaries:"TrackSummaries",users:"Users",userModels:"UserModels",trackReviewers:"TrackReviewers",trackMetaReviewers:"TrackMetaReviewers",trackSeniorMetaReviewers:"TrackSeniorMetaReviewers",manageReviewerInvites:"ManageReviewerInvites",manageInviteReviewers:"ManageInviteReviewers",manageInviteMetaReviewers:"ManageInviteMetaReviewers",manageInviteSeniorMetaReviewers:"ManageInviteSeniorMetaReviewers",manageReviewerInvitesForSubmission:"ManageReviewerInvitesForSubmission",biddings:"BiddingModels",reviewers:"ReviewerModels",metaReviewers:"MetaReviewerModels",supplementary:"Supplementary",inplaceRevision:"InplaceRevision",copyrights:"Copyrights",referenceModels:"ReferenceModels",userSettingsModels:"UserSettingsModels",statuses:"PaperStatuses",biddingReviewModels:"BiddingReviewModels",metaBiddingModels:"MetaBiddingModels",metaBiddingReviewModels:"MetaBiddingReviewModels",suggestionViews:"SuggestionViews",suggestionModels:"SuggestionModels",inviteStatusModels:"InviteStatusModels",userDisputeConflicts:"UserDisputeConflicts",chairDisputeConflicts:"ChairManageDisputedConflicts",conflictDomains:"ConflictDomains",proceedingEditorModels:"ProceedingEditorModels",tpmsSettings:"TpmsSettings",tpmsSubmissions:"TpmsSubmissions",tpmsMatchingRequests:"TpmsMatchingRequests",tpmsScores:"TpmsScores",userTypeOptions:"UserTypeOptions",userTypes:"UserTypes",seniorMetaReviewerBiddingViews:"SeniorMetaReviewerBiddingViews",seniorMetaReviewerBiddingModels:"SeniorMetaReviewerBiddingModels",presentations:"Presentations",sessions:"Sessions",rooms:"Rooms",individualConflictViews:"IndividualConflictViews",conferenceSessionSettings:"ConferenceSessionSettings",submissionModels:"SubmissionModels",seniorMetaReviewerRatingOptions:"SeniorMetaReviewerRatingOptions",sharedMetaReviewerRecommendationOptions:"SharedMetaReviewerRecommendationOptions",trackMetaReviewerGroups:"TrackMetaReviewerGroups",questionInvisibleByTags:"QuestionInvisibleByTags",iThenticateSettings:"IThenticateSettings",iThenticateResults:"IThenticateResults",iThenticateRetrieveResults:"IThenticateRetrieveResults",iThenticateSubmissions:"IThenticateSubmissions",submissionFilesModel:"SubmissionFilesModel",userInformationModels:"UserInformationModels",authorFeedbackComments:"AuthorFeedbackComments",reviewerSubmissionComparisons:"ReviewerSubmissionComparisons",metaReviewerSubmissionComparisons:"MetaReviewerSubmissionComparisons",conferenceRequests:"ConferenceRequests",accountProcessingRequests:"AccountProcessingRequests",accountMergingRequests:"AccountMergingRequests"}}}(window.app,window.location),function(I,s,T){"use strict";s.ServerList=function(e){var f,h,g,v,t=this,w=I.extend(!0,{},s.ServerList.defaults,e),b=[];t.getTotalCount=function(){return g},t.clear=function(){b.length=0,h=null,g=f=0,v=!1},t.clear(),t.getItems=function(c,p,m){return I.Deferred(function(o){null==p&&(p=1/0);var a=m?I.extend(!0,{},w,m):w;if(void 0===a.showProgressIndicator&&(a.showProgressIndicator=!0),c?k.resetLength(c):c=[],0!=p){var n=p*a.pageSize;f=0;var e,t,i=S(a.filter);if(I.isFunction(a.localFilter)&&(d=i,e=n,t=a,null!=h&&(t.filterComparator.areEqual(d,h)&&M(e)||t.filterComparator.isSubFilter(d,h)&&v))){var r=[];if(a.filterComparator.isEmpty(i))n==1/0?r.push.apply(r,b):r.push.apply(r,b.slice(0,n)),f=n,g=b.length;else{for(var s=0,u=0;u<b.length;u++){var l=a.localFilter(b[u],i);if(l&&(r.push(l),++s==n))break}for(g=s,u=f=u+1;u<b.length;u++)a.localFilter(b[u],i)&&++g}a.sort&&a.sort(r),c(r),o.resolve(c)}else{b.length=0;var d=y(h=i,null,p,a);T.read({requestUri:d,showProgressIndicator:a.showProgressIndicator},function(e){for(u=0;u<e.value.length;u++){var t=a.itemConstructor(e.value[u]);b.push(t),u<n&&c.push(t)}f=k.getLength(c),g=e["@odata.count"]||b.length,v=b.length==g,o.resolve(c)})}}else o.resolve(c)}).promise()},t.addItems=function(s,u,l){return I.Deferred(function(o){null==u&&(u=1/0);var a=l?I.extend(!0,{},w,l):w;if(s=s||[],0!=u){var n=u*a.pageSize,e=S(a.filter);if(I.isFunction(a.localFilter)&&M(n)){if(a.filterComparator.isEmpty(e))n==1/0?(s.push.apply(s,b.slice(f)),f=b.length):s.push.apply(s,b.slice(f,f+=n)),g=b.length;else{for(var t=0,i=f;i<b.length;i++){var r=a.localFilter(b[i],e);if(r&&(s.push(r),++t==n))break}if(f=i+1,0==g)for(g=t,i=f;i<b.length;i++)a.localFilter(b[i],e)&&++g}o.resolve(s)}else T.read(y(e,null,u,a),function(e){for(i=0;i<e.value.length;i++){var t=a.itemConstructor(e.value[i]);b.push(t),i<n&&s.push(t)}f=k.getLength(s),g=e["@odata.count"]||b.length,v=b.length==g,o.resolve(s)})}else o.resolve(s)}).promise()};var k={getLength:function(e){return(I.isFunction(e)?e():e).length},resetLength:function(e){I.isFunction(e)?e.removeAll():e.length=0}};function M(e){return v||f+e<=b.length}function S(e,t){return I.isFunction(e)?e(t):e}function y(e,t,o,a){var n={};if(0<b.length&&(n.skip=b.length),o!=1/0&&null!=a.preLoadpageCount&&a.preLoadpageCount!=1/0&&(n.count="true",n.top=(o+a.preLoadpageCount)*a.pageSize),a.odataFilter&&(n.filter=S(a.odataFilter,e)),a.odataOrderByFields&&(n.orderby=S(a.odataOrderByFields,t)),a.odataExpandFields&&(n.expand=S(a.odataExpandFields)),a.odataCustomQuery){var i,r=S(a.odataCustomQuery);for(i in r)n[i]=r[i]}return I.isPlainObject(a.entitySet)?s.odata[a.entitySet.isGlobal?"getGlobalUrl":"getUrl"](a.entitySet.entitySet,a.entitySet.key,a.entitySet.action,n):s.odata.getUrl(a.entitySet,n)}},I.extend(s.ServerList,{defaults:{entitySet:null,filter:null,orderBy:null,pageSize:s.settings&&s.settings.pageSize?s.settings.pageSize:1/0,preLoadpageCount:0,localFilter:function(e,t){return e&&-1<e.indexOf(t)?e:null},localOrderBy:function(e,t){return e<t?-1:t<e?1:0},itemConstructor:function(e){return e},filterComparator:{isEmpty:function(e){return!e},areEqual:function(e,t){return e==t},isSubFilter:function(e,t){return 0==(e||"").indexOf(t)}},odataFilter:null,odataOrderByFields:null,odataExpandFields:null,odataCustomQuery:null}})}(window.jQuery,window.app,window.OData),function(a,n){"use strict";a.ShowMore=function(e){var o=this;o.options={elementId:"showMore",showNumbers:ko.observable(!0)},o.nextCount=ko.observable(0),o.allCount=ko.observable(0),o.showMoreVisible=ko.observable(!1),o.showAllVisible=ko.observable(!1),o.showMore=function(){e(1)},o.showAll=function(){e(1/0)},o.updateCount=function(e,t){t=e-t;o.nextCount(t>a.settings.pageSize?a.settings.pageSize:t),o.allCount(e),o.showMoreVisible(t>a.settings.pageSize),o.showAllVisible(0<t)},o.removeOne=function(){o.allCount(o.allCount()-1)};var t=n.getElementById(o.options.elementId);if(!t)throw new Error("Element with id='{0}' does not exist.".format(o.options.elementId));ko.applyBindings(o,t)}}(window.app,window.document),function(e,o){0<window.cmt3.errors.length&&e.each(window.cmt3.errors,function(e,t){o.addMessage(t,"Application error:","error")}),window.cmt3.logger||(window.cmt3.logger={error:function(e){console&&console.error(e)},info:function(e){console&&console.info(e)},warn:function(e){console&&console.warn(e)},log:function(e){console&&console.log(e)}})}(window.jQuery,window.app),function(i,r,e){"use strict";i.FormService=function(){function n(){var e=this;e.id=i.autoMap(),e.formType=i.autoMap(),e.formTypeName=i.autoMap(),e.trackId=i.autoMap(),e.name=i.autoMap(),e.description=i.autoMap(),e.isVisibleToAuthorEnabledToEdit=i.autoMap(),e.isVisibleToAuthorDuringFeedbackEnabledToEdit=i.autoMap(),e.isVisibleToAuthorAfterNotificationEnabledToEdit=i.autoMap(),e.isVisibleToReviewerEnabledToEdit=i.autoMap(),e.isVisibleToMetaReviewerEnabledToEdit=i.autoMap(),e.isVisibleToOtherReviewerEnabledToEdit=i.autoMap(),e.isVisibleToSeniorMetaReviewerEnabledToEdit=i.autoMap()}this.loadForm=function(o,a){return e.Deferred(function(t){var e=i.odata.getUrl(i.odata.entitySet.forms,{filter:"FormType eq {0} and TrackId eq {1}".format(i.odata.escapeParam(o),i.odata.escapeParam(a)),orderby:"CreateDate desc",top:"1"});r.request({requestUri:e,method:"GET",showProgressIndicator:!1},function(e){1==e.value.length?(e=i.autoMap(new n,e.value[0]),t.resolve(e)):(i.addMessage("Form of type '{0}' does not exists.".format(o),null,"error"),t.resolve(null))})}).promise()}}}(window.app,window.OData,window.jQuery),function(m,i,t,o){"use strict";m.QuestionService=function(){var n=this,d="-1";function c(e){var o=this;o.id=m.autoMap(),o.title=m.autoMap(),o.required=ko.observable().autoMap(),o.isLocked=m.autoMap(),o.questionType=m.autoMap(),o.optionsType=m.autoMap(),o.details=m.autoMap(),o.additionalInfo=m.autoMap(),o.order=m.autoMap(),o.heading=m.autoMap(),o.commentLength=m.autoMap(),o.visibleToAuthorDuringFeedback=m.autoMap(),o.visibleToAuthorAfterNotification=m.autoMap(),o.visibleToReviewer=m.autoMap(),o.visibleToMetaReviewer=m.autoMap(),o.visibleToOtherReviewer=m.autoMap(),o.visibleToSeniorMetaReviewer=m.autoMap(),o.hasAdditionalInfo=function(){return o.additionalInfo&&0!==o.additionalInfo.trim().length},o.getAdditionalInfo=function(){return o.additionalInfo||""},o.visibilityInfo=function(){var e=[];return o.visibleToAuthorDuringFeedback&&e.push("visible to authors during feedback"),o.visibleToAuthorAfterNotification&&e.push("visible to authors after notification"),o.visibleToOtherReviewer&&e.push("visible to other reviewers"),o.visibleToReviewer&&e.push("visible to reviewers"),o.visibleToMetaReviewer&&e.push("visible to meta-reviewers"),o.visibleToSeniorMetaReviewer&&e.push("visible to senior meta-reviewers"),0<e.length?"("+e.join(", ")+")":null},o.choices=[],o.conditionQuestionChoiceIds=[],o.formType=e,o.validationEnabled=!0,o.answer=ko.observable().extend({required:{onlyIf:function(){return o.validationEnabled&&o.required()}}}),o.onOtherFieldFocus=function(){o.answer(d)},o.answer.subscribe(function(){o.answer()!==d&&o.otherAnswer("")}),o.otherAnswer=ko.observable().extend({required:{onlyIf:function(){return o.validationEnabled&&o.answer()===d}}}),o.previousAnswer=ko.observable(),o.selectedChoiceIds=ko.observableArray(),o.selectedChoiceIds.subscribe(function(e){o.answer(e.join())}),o.setAgreementTypeValidator=function(){o.required()&&(o.answer=o.answer.extend({equal:{params:!0,message:"You must accept agreement to continue."}}))};var a=null,n=null;o.subscribeAnswerChanged=function(t){o.unsubscribeAnswerChanged(),n=o.answer.subscribe(function(e){o.previousAnswer(e)},this,"beforeChange"),a=o.answer.subscribe(function(e){t(o,e,o.previousAnswer())})},o.unsubscribeAnswerChanged=function(){a&&a.dispose(),n&&n.dispose()},o.subscribeChoicesChanged=function(t){o.selectedChoiceIds.subscribe(function(e){e.forEach(function(e){"added"!==e.status&&"deleted"!==e.status||t(o,e)})},null,"arrayChange")},o.setUpAnswerCharsLeft=function(){o.questionType==m.enums.questionType.comment&&(o.answer=o.answer.extend({maxlength:o.commentLength})),o.answerCharsLeft=ko.computed(function(){if(o.questionType!=m.enums.questionType.comment||null==o.commentLength)return 0;var e=0,t=o.answer();return"string"==typeof t&&(e=t.length),Math.max(o.commentLength-e,0)})}}function p(){var e=this;e.id=m.autoMap(),e.order=m.autoMap(),e.text=m.autoMap(),e.value=m.autoMap(),e.requireAnswer=ko.observable(!1),e.answer=ko.observable().autoMap().extend({required:{onlyIf:e.requireAnswer}}),e.comment=ko.observable().autoMap()}n.parseQuestionsDirect=function(e,t){for(var o,a=[],n=0;n<t.length;n++){var i=t[n],r=m.autoMap(new c(e),i);r.setUpAnswerCharsLeft(),r.questionType===m.enums.questionType.agreement&&r.setAgreementTypeValidator();for(var s=i.Choices,u=0;u<s.length;u++)(o=m.autoMap(new p,s[u])).id=o.id.toString(),r.choices.push(o);r.questionType===m.enums.questionType.optionsWithOther&&((o=new p).id=d,r.choices.push(o));var l=i.ConditionQuestionChoiceIds;for(u=0;u<l.length;u++)r.conditionQuestionChoiceIds.push(l[u]);a.push(r)}return a},n.loadQuestionsDirect=function(o,a){return t.Deferred(function(t){var e=m.odata.getUrl(m.odata.entitySet.questions,{orderby:"Order",filter:"FormId eq {0}".format(m.odata.escapeParam(a))});i.read({requestUri:e,showProgressIndicator:!1},function(e){e=n.parseQuestionsDirect(o,e.value);t.resolve(e)})}).promise()},n.loadQuestions=function(d,e){return t.Deferred(function(l){o.loadForm(d,e).done(function(e){e=m.odata.getUrl(m.odata.entitySet.questions,{orderby:"Order",filter:"FormId eq {0}".format(m.odata.escapeParam(e.id))});i.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],n=m.autoMap(new c(d),a);n.setUpAnswerCharsLeft(),n.questionType==m.enums.questionType.agreement&&n.setAgreementTypeValidator();for(var i=a.Choices,r=0;r<i.length;r++){var s=m.autoMap(new p,i[r]);s.id=s.id.toString(),n.choices.push(s)}for(var u=a.ConditionQuestionChoiceIds,r=0;r<u.length;r++)n.conditionQuestionChoiceIds.push(u[r]);t.push(n)}l.resolve(t)}).fail(l.reject)})}).promise()},n.setAnswersFromJson=function(e,t){for(var o,a,n,i={},r=0;r<e.length;r++)i[e[r].id]=e[r],e[r].selectedChoiceIds.removeAll(),e[r].answer(null),e[r].answer.isModified(!1);for(o=0;o<t.length;o++){var s=t[o],u=i[s.QuestionId];if(u)switch(u.questionType){case m.enums.questionType.agreement:u.answer(!0);break;case m.enums.questionType.comment:u.answer(s.Text);break;case m.enums.questionType.options:case m.enums.questionType.optionsWithValue:for(a=0;a<u.choices.length;a++)if(u.choices[a].id==s.QuestionChoiceId){u.selectedChoiceIds.push(u.choices[a].id.toString());break}u.answer(u.selectedChoiceIds().join());break;case m.enums.questionType.optionsWithOther:if(s.QuestionChoiceId){for(a=0;a<u.choices.length;a++)if(u.choices[a].id==s.QuestionChoiceId){u.selectedChoiceIds.push(u.choices[a].id.toString());break}}else s.Text&&(u.selectedChoiceIds.push(d.toString()),u.otherAnswer(s.Text));u.answer(u.selectedChoiceIds().join());break;case m.enums.questionType.optionsWithUserInput:for(a=0;a<u.choices.length;a++)if((n=u.choices[a]).id==s.QuestionChoiceId){n.answer(s.Answer),n.comment(s.Comment);break}}}},n.getAnswersJson=function(e){for(var t,o=[],a=0;a<e.length;a++){var n=e[a];switch(n.questionType){case m.enums.questionType.agreement:n.answer()&&o.push({QuestionId:n.id});break;case m.enums.questionType.comment:n.answer()&&o.push({QuestionId:n.id,Text:n.answer()});break;case m.enums.questionType.options:case m.enums.questionType.optionsWithValue:switch(n.optionsType){case m.enums.optionsType.radioButtonList:case m.enums.optionsType.dropDown:n.answer()&&o.push({QuestionId:n.id,QuestionChoiceId:n.answer()});break;case m.enums.optionsType.checkboxList:case m.enums.optionsType.listBox:for(t=0;t<n.selectedChoiceIds().length;t++)o.push({QuestionId:n.id,QuestionChoiceId:n.selectedChoiceIds()[t]})}break;case m.enums.questionType.optionsWithOther:n.answer()&&(n.answer()!==d?o.push({QuestionId:n.id,QuestionChoiceId:n.answer()}):o.push({QuestionId:n.id,Text:n.otherAnswer()}));break;case m.enums.questionType.optionsWithUserInput:for(t=0;t<n.choices.length;t++){var i=n.choices[t];i.answer&&o.push({QuestionId:n.id,QuestionChoiceId:i.id,Answer:i.answer(),Comment:i.comment()})}}}return o},n.subscribeAnswerChanged=function(e,t){for(var o=0;o<e.length;o++){var a=e[o];switch(a.optionsType){case m.enums.optionsType.radioButtonList:case m.enums.optionsType.dropDown:a.subscribeAnswerChanged(t)}}},n.unsubscribeAnswerChanged=function(e){for(var t=0;t<e.length;t++)e[t].unsubscribeAnswerChanged()},n.subscribeChoicesChanged=function(e,t){for(var o=0;o<e.length;o++){var a=e[o];switch(a.optionsType){case m.enums.optionsType.checkboxList:case m.enums.optionsType.listBox:a.subscribeChoicesChanged(t)}}}}}(window.app,window.OData,window.jQuery,new window.app.FormService),function(e,o){e.CaptchaService=function(){var a=this;function t(t){var o=this;t=t||"audioCaptchaChallenge",o.type=ko.observable("visual"),o.challengeId=ko.observable(),o.challenge=ko.observable(),o.response=ko.observable("").extend({required:!0}),o.azureRegion=ko.observable(),o.isLoading=ko.observable(!1),o.isResponseFieldFocused=ko.observable(!1),o.currentModeLabel=ko.pureComputed(function(){return"visual"===o.type()?"Enter the characters you see":"Press 1 to play or repeat the audio. Enter the words you hear in any order."}),o.switchModeLabel=ko.pureComputed(function(){return"visual"===o.type()?"Audio":"Picture"}),o.switchModeTitle=ko.pureComputed(function(){return"visual"===o.type()?"Switch to the audio challenge":"Switch to the visual challenge"}),o.switchMode=function(){o.type("visual"===o.type()?"audio":"visual"),o.getNew()},o.keyDown=function(e,t){return"audio"!==o.type()||"1"!==t.key||(o.playAudio(),!1)},o.playAudio=function(){var e;"audio"!==o.type()||(e=document.getElementById(t))&&(e.currentTime=0,e.play())},o.getRequestModel=function(){return{TestCaptchaRequest:{ChallengeId:o.challengeId(),InputSolution:o.response()},AzureRegion:o.azureRegion(),ChallengeType:o.type()}},o.getNew=function(e){o.response(""),!e&&void 0!==e||o.isResponseFieldFocused(!0),o.isLoading(!0),a.getCaptcha(o.type()).done(function(e){o.challengeId(e.ChallengeId),o.challenge(("visual"===o.type()?"data:image/jpeg;base64, ":"data:audio/mp3;base64, ")+e.ChallengeString),o.azureRegion(e.AzureRegion)}).always(function(){o.isLoading(!1)})}}a.createViewModel=function(e){return new t(e)},a.getCaptcha=function(e){return o.get("/api/CaptchaService/GetCaptchaChallenge?challengeType="+e)}}}(window.app,window.jQuery),function(a,n,e){"use strict";a.RoleService=function(){function o(){this.role=a.autoMap(),this.submissionListUrl=a.autoMap(),this.conferenceDefaultUrl=a.autoMap()}this.getCurrentRoleDescriptor=function(){return e.Deferred(function(t){var e={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"GetCurrentRoleDescriptor"),method:"POST",showProgressIndicator:!1};n.request(e,function(e){t.resolve(a.autoMap(new o,e))}).fail(t.reject)}).promise()}}}(window.app,window.OData,window.jQuery);var messages={assignment:{item_title_papers:"This field MUST contains\npositive number\nGREATER THAN OR EQUAL TO\nalready assigned to this paper.",item_title_reviewers:"This field MUST contains\npositive number\nGREATER THAN OR EQUAL TO\nalready assigned to this paper,\nbut must not exceed quota (if applicable).",assign_title:"This field MUST contains\npositive number ONLY.",increase_title:"This field MUST contains\npositive number ONLY."}};function ExternalReviewModel(e,t){var o=this;o.id=e.Id,o.title=e.Title,o.abstract=e.Abstract,o.track=e.Track,o.reviewId=e.ReviewId,o.filesUploaded=e.FilesUploaded,o.reviewingEnabled=e.ReviewingEnabled,o.firstName=e.FirstName,o.lastName=e.LastName,o.email=e.Email,o.userId=e.UserId,o.isAuthorFeedbackAvailable=e.IsAuthorFeedbackAvailable,o.authorFeedbackId=e.AuthorFeedbackId,o.downloadLink=function(){return t.submissionFile.format(o.id)},o.editReviewUrl=function(){return o.reviewId?t.reviewDetails.format(o.reviewId):t.reviewCreate.format(o.id,o.userId)},o.viewReviewUrl=function(){return o.reviewId?t.reviewView.format(o.reviewId):null},o.viewUrl=function(){return t.submissionSummary.format(o.id)},o.viewAuthorFeedbackUrl=function(){return o.isAuthorFeedbackAvailable?t.feedback.format(o.authorFeedbackId):null}}function ExternalReviewPage(e,t){var o=this;o.$element=$(e),o.conference=window.cmt3.conference.name,o.page=ko.observable(1),o.top=ko.observable(25),o.sort=ko.observable("Id"),o.controller="ExternalReviewModels",o.filters=[],o._total=ko.observable(0),o.selected=ko.observable(0),o.externalReviewModels=ko.observableArray(),o.listen(),o.Pager=ko.pager(o.selected,o.top),o.Pager().CurrentPage.subscribe(function(){o.page(o.Pager().CurrentPage()),o.show()}),o.pageUrls=t}!function(u,p,l){"use strict";function t(e,t){this.$element=u("<div>").addClass(e).hide(),this.$all=u("<input>").attr({name:"selected",type:"checkbox",checked:t}),this.$text=u("<span>"),this.$label=u("<label>").addClass("label").append(this.$all).append(this.$text),this.$element.append(u("<div>").addClass("all").append(this.$label)),this.$list=u("<ul>").addClass("list"),this.$element.append(this.$list),this.item='<li class="item"><label><input type="checkbox" class="flag"/><span class="title"></span></label></li>',this.listen()}p.AbstractFilter=function(e,t,o,a,n){this.$container=u(t),this.$holder=u(e),this.model=o,this.field=a,this.substitutions=n,this.$query=u("<input>").addClass("input").attr("type","text").attr("value",this.watermark()),this.$clearLink=u("<a>").text("Clear").attr("href","#"),this.$clear=u("<span>").addClass("link-remove").append(this.$clearLink),this.show(),this.listen()},p.AbstractFilter.prototype={listen:function(){this.$query.on("keyup",u.proxy(this.keyup,this)).on("focus",u.proxy(this.focus,this)).on("focusout",u.proxy(this.blur,this)),this.$clearLink.on("click",u.proxy(this.clear,this))},show:function(){var e=u("<div>").addClass("query").attr("title",this.help());e.append(this.$query).append(this.$clear),this.$container.append(e)},help:function(){return"Start typing here."},keyup:function(e){13===e.keyCode&&(e.preventDefault(),this.search())},focus:function(){var e=this.$query.val();this.$query.parent().width()<200&&(this.$query.data("original-width",this.$query.parent().width()),this.$query.parent().animate({width:"200px"}),this.$query.parent().css({zIndex:"10"})),e==this.watermark()&&this.$query.val("")},blur:function(){var e=this.$query.val(),t=this.$query.data("original-width");t&&(this.$query.removeData("original-width"),this.$query.parent().animate({width:t}),this.$query.parent().css({zIndex:"1"})),""==e&&this.$query.val(this.watermark()),this.valid()?this.$query.removeClass("error"):this.$query.addClass("error")},valid:function(){return!0},watermark:function(){return""},clear:function(){this.reset(),this.search()},reset:function(){this.$query.val(this.watermark())},search:function(){u(document).trigger("data.filter")},state:function(e){return e&&this.$query.val(e),this.$query.val()},getValue:function(){return null},ariaLabel:function(e){return this.$query.attr("aria-label",e)}},p.TextFilter=function(e,t,o,a,n){this.doNotLower=!1,p.AbstractFilter.call(this,e,t,o,a,n)},p.TextFilter.prototype=u.extend({},p.AbstractFilter.prototype,{doNotLower:!1,match:function(e){var t="contains\\({0},'(\\S+)'\\)".format(this.doNotLower?this.field:"tolower\\("+this.field+"\\)");return new RegExp(t,"g").test(e)},setValue:function(e){var t="contains\\({0},'(\\S+)'\\)".format(this.doNotLower?this.field:"tolower\\("+this.field+"\\)"),e=new RegExp(t,"g").exec(e);null!=e&&2==e.length&&this.$query.val(u.trim(p.odata.unescapeParam(e[1])))},getValue:function(){var e=this,t=e.$query.val();return null!=t&&2<=t.length&&t!=e.watermark()?(t=u.trim(t),e.doNotLower||(t=t.toLowerCase()),("(contains({0},'"+p.odata.escapeParam(t)+"'))").format(e.doNotLower?e.field:"tolower("+e.field+")")):null},watermark:function(){return""},help:function(){return"Type any text here and then press Enter."}}),p.NumericFilter=function(e,t,o,a,n){p.AbstractFilter.call(this,e,t,o,a,n)},p.NumericFilter.prototype=u.extend({},p.AbstractFilter.prototype,{match:function(e){var t=new RegExp("^"+this.field+"\\s+ge\\s+(?:[0-9]*.[0-9]+|[0-9])+\\s+and\\s+"+this.field+"\\s+le\\s+(?:[0-9]*.[0-9]+|[0-9])+$","g");return!!t.test(e)||(!!(t=new RegExp(this.field+"\\s+(ge|le|ne|eq|gt|lt)\\s+([0-9]*.[0-9]+|[0-9]+)","g")).test(e)||!!(t=new RegExp("^"+this.field+" in \\(((?:(?:(?:\\d?\\.\\d+)|\\d+)\\s*\\,?\\s*)+)\\)$","g")).test(e))},setValue:function(e){if(null==(o=(t=new RegExp("^"+this.field+"\\s+ge\\s+([0-9]*.[0-9]+|[0-9]+)\\s+and\\s+"+this.field+"\\s+le\\s+([0-9]*.[0-9]+|[0-9]+)$","g")).exec(e))||3!=o.length){var t,o=(t=new RegExp(this.field+"\\s+(ge|le|ne|eq|gt|lt)\\s+([0-9]*.[0-9]+|[0-9]+)","g")).exec(e);if(null==o||3!=o.length)t=new RegExp("^"+this.field+" in \\(((?:(?:(?:\\d?\\.\\d+)|\\d+)\\s*\\,?\\s*)+)\\)$"),void 0!==(o=e.match(t))&&2===o.length&&this.$query.val("["+o[1]+"]");else{var a="eq";switch(u.trim(o[1])){case"ge":a=">= ";break;case"le":a="<= ";break;case"ne":a="<> ";break;case"gt":a="> ";break;case"lt":a="< ";break;case"eq":a="= "}this.$query.val(a+u.trim(o[2]))}}else this.$query.val("["+u.trim(o[1])+" - "+u.trim(o[2])+"]")},getValue:function(){var e=this.$query.val();if(this.valid()?this.$query.removeClass("error"):this.$query.addClass("error"),null!=e&&2<=e.length&&e!=this.watermark()){var t=u.trim(e),e=/\s*(>=|<=|<>|=|>|<)\s*([0-9]*\.[0-9]+|[0-9]+)/g.exec(t);if(null!=e&&3==e.length){var o="eq";switch(u.trim(e[1])){case">=":o=" ge ";break;case"<=":o=" le ";break;case"<>":o=" ne ";break;case">":o=" gt ";break;case"<":o=" lt ";break;case"=":o=" eq "}return"("+this.field+o+this.getNormalizedValue(u.trim(e[2]))+")"}if(null!=(e=/([0-9]*\.[0-9]+|[0-9]+)(\s*-\s*)([0-9]*\.[0-9]+|[0-9]+)/g.exec(t))&&4==e.length)return"("+this.field+" ge "+this.getNormalizedValue(u.trim(e[1]))+" and "+this.field+" le "+this.getNormalizedValue(u.trim(e[3]))+")";if(null!=(e=t.match(/(?:[0-9]*\.[0-9]+)|[0-9]+/g))&&0<e.length)return this.field+" in ("+e.join(",")+")"}return null},valid:function(){return!!this.$query.val().match(/\s*(>=|<=|<>|=|>|<)\s*([0-9]*\.[0-9]+|[0-9]+)/g)||(!!this.$query.val().match(/([0-9]*\.[0-9]+|[0-9]+)(\s*-\s*)([0-9]*\.[0-9]+|[0-9]+)/g)||(!!/^\[?(?:([0-9]*\.[0-9]+|[0-9]+)\s*,?\s*)+\]?$/g.test(this.$query.val())||this.$query.val()==this.watermark()))},watermark:function(){return""},help:function(){return"Type any [= or < or > or <= or >=] + number or [number - number] for range or [number, ..., number] for set and then press Enter."},getNormalizedValue:function(e){var t=e;return"function"!=typeof parseFloat||"function"!=typeof(t=parseFloat(t)).toString?e:t=t.toString()}}),p.DatetimeFilter=function(e,t,o,a,n){p.AbstractFilter.call(this,e,t,o,a,n)},p.DatetimeFilter.prototype=u.extend({},p.AbstractFilter.prototype,{match:function(e){return!1},getPattern:function(){return/\s*(>=|<=|<>|=|>|<)\s*(never|[0-9]{4,}\s*-\s*[0-9]{1,2}\s*-\s*[0-9]{1,2}\s*[0-9]{1,2}\s*:\s*[0-9]{1,2}\s*:\s*[0-9]{1,2}\s*|[0-9]{4,}\s*-\s*[0-9]{1,2}\s*-\s*[0-9]{1,2}\s*)/g},getValue:function(){var e=this.$query.val();if(this.valid()?this.$query.removeClass("error"):this.$query.addClass("error"),null!=e&&2<=e.length&&e!=this.watermark()){e=this.getPattern().exec(u.trim(e));if(null!=e&&3==e.length){var t="eq";switch(u.trim(e[1])){case">=":t=" ge ";break;case"<=":t=" le ";break;case"<>":t=" ne ";break;case">":t=" gt ";break;case"<":t=" lt ";break;case"=":t=" eq "}if("never"===(e=u.trim(e[2]))){if(e="null"," gt "===t)t=" ne ";else if(" lt "===t||" le "===t)t=" eq ";else if(" ge "===t)return null}else e="cast("+new Date(e.replace(/\s+/g,"T")).format("yyyy-mm-ddThh:nn:ss.fffZ")+",Edm.DateTimeOffset)";return"("+this.field+t+e+")"}}return null},valid:function(){return!!this.$query.val().match(this.getPattern())||this.$query.val()==this.watermark()},watermark:function(){return""},help:function(){return"Type any [= or < or > or <= or >=] + datetime (e.g. >= 2014-06-25 15:02:32) and then press Enter."}}),t.prototype={listen:function(){this.$all.change(u.proxy(this.all,this))},all:function(){var e=this.$all.prop("checked");u(":checkbox",this.$list).each(function(){u(this).prop("checked",e)}),this.$text.text(e?"Deselect all":"Select all")},show:function(e,n,i,r){var s;this.$list.empty(),0<e.length&&((s=this).$all.prop("checked",i),this.$text.text(i?"Deselect all":"Select all"),u(e).each(function(e,t){var o=u(s.item),a=null!=n&&null!=n[t]?n[t]:t;u(".title",o).html(null!=r?p.highlight(a,r):a);a=u("input",o);a.prop("checked",i),a.prop("value",t),s.$list.append(o)}),this.$element.show())},hide:function(){this.$element.hide(),this.$list.empty()},selected:function(){var o=[];return u(":checked",this.$list).each(function(e,t){o.push(u(t).attr("value"))}),o}},p.MultipleSelector=function(e){this.filter=e,this.$filter=e.$element,this.$element=u("<div>").addClass("selector").hide(),this.selected=new t("selected"),this.$element.append(this.selected.$element),this.found=new t("found"),this.$element.append(this.found.$element),this.$validationMessage=u("<div>").addClass("validation").attr({display:"none","aria-live":"assertive"}),this.$ok=u("<a>").addClass("btn").attr({href:"#",role:"button"}).text("Ok"),this.$cancel=u("<a>").addClass("btn").attr({href:"#",role:"button"}).text("Cancel"),this.$actions=u("<div>").addClass("actions").append(this.$ok).append(this.$cancel),this.$element.append(this.$validationMessage).append(this.$actions),this.items=[],this.mouseover=!1,this.listen()},p.MultipleSelector.prototype={listen:function(){this.$element.on("focusin",u.proxy(this.focusin,this)).on("mouseenter",u.proxy(this.mouseenter,this)).on("mouseover",u.proxy(this.mouseoverhandler,this)).on("focusout",u.proxy(this.focusout,this)).on("mouseleave",u.proxy(this.mouseleave,this)),this.$ok.on("click",u.proxy(this.ok,this)),this.$cancel.on("click",u.proxy(this.cancel,this))},mouseoverhandler:function(){this.mouseover=!0},mouseenter:function(){this.mouseover=!0},mouseleave:function(){this.mouseover=!1},focusin:function(){this.mouseover=!0},focusout:function(){this.mouseover=!1;var e=this;window.setTimeout(function(){e.mouseover||e.hide()},500)},ok:function(){var e=u.merge(this.selected.selected(),this.found.selected()),t=this.filter&&this.filter.maxSelected()||0;if(t&&e.length>t)return this.$validationMessage.text("No more than {0} items can be selected".format(t)),void this.$validationMessage.show();this.items=e,this.$element.trigger("filter.multiple.ok")},cancel:function(){this.$element.trigger("filter.multiple.cancel")},show:function(e,t,o){this.$validationMessage.hide(),0<this.items.length&&this.selected.show(this.items,o,!0),0<e.length&&this.found.show(e,o,!1,t),(0<this.items.length||0<e.length)&&(this.$actions.show(),this.$element.show())},hide:function(){this.selected.hide(),this.found.hide(),this.$actions.hide(),this.$element.hide()},valid:function(){return!!this.$query.val().match(this.getPattern())||this.$query.val()==this.watermark()}},p.MultipleFilter=function(e,t,o,a,n,i){this.selector=new p.MultipleSelector(this),this.short=!1,this.useContains=!1,this.maxSelected=ko.observable(0),this.dataProvider=i,p.AbstractFilter.call(this,e,t,o,a,n)},p.MultipleFilter.prototype=u.extend({},p.AbstractFilter.prototype,{dataProvider:null,match:function(e){var t=this.useContains?new RegExp("contains\\(\\s+"+this.field+"\\s+,\\s+'([^']+)'\\s+\\)","g"):new RegExp(this.field+"\\s+eq\\s+'([^']+)'","g");return t.test(e)},listen:function(){this.$container.attr("short")&&(this.short=!0),this.$container.attr("useContains")&&(this.useContains=!0),this.$query.on("focus",u.proxy(this.focus,this)).on("keyup",u.proxy(this.keyup,this)).on("blur",u.proxy(this.blur,this)),this.$clearLink.on("click",u.proxy(this.clear,this)),this.selector.$element.on("filter.multiple.ok",u.proxy(this.go,this)).on("filter.multiple.cancel",u.proxy(this.cancel,this))},cancel:function(){this.hide()},go:function(){this.hide(),this.search()},blur:function(){var e=this;window.setTimeout(function(){e.selector.mouseover||e.hide()},500)},message:function(){0<this.selector.items.length?this.$query.val("Selected: "+this.selector.items.length):this.$query.val(this.watermark())},hide:function(){this.message(),this.selector.hide()},lookup:function(){function t(e){var t,o;0<e.length&&(t=u.extend({},n.position(),{height:n[0].offsetHeight}),i.$element.insertAfter(n).css({top:t.top-8,left:t.left}),o=[],u.each(e,function(e,t){""===t[r]&&(t[r]="(Blank)"),-1==u.inArray(t[r],o)&&-1==u.inArray(t[r],i.items)&&o.push(t[r])}),i.show(o,n.val(),s))}var a,e,n=this.$query,i=this.selector,r=this.field,s=this.substitutions,o=this.dataProvider;0!=n.val().length||this.short?o?(a=[],"function"==typeof o?e=o():Array.isArray(o)&&(e=o),e&&(u.each(e,function(e,t){var o={};o[r]=t,a.push(o)}),t(a))):(o="&$filter=",e="startswith(tolower("+r+"), tolower('"+p.odata.escapeParam(n.val())+"'))",e+=" or ",e+="contains(tolower("+r+"),tolower('"+p.odata.escapeParam(n.val())+"'))",o+=encodeURIComponent(e),e="/api/odata/"+cmt3.conference.name+"/"+this.model+"?$select="+r,this.short||(e+=o),l.request({requestUri:e},function(e){t(e.value)})):(0==i.items.length?i:i.found).hide()},reject:function(){this.hide(),this.message()},focus:function(){this.$query.val(""),this.selector.show([]),this.short&&this.lookup()},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:case 13:case 9:break;case 27:this.reject();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},reset:function(){this.selector.items=[],this.hide()},state:function(e){return e&&(e==this.watermark()?this.selector.items=[]:this.selector.items=e),this.selector.items},setValue:function(e){for(var t=e.split(" or "),o=[],a=0;a<t.length;a++){var n=this.useContains?new RegExp("contains\\(\\s+"+this.field+"\\s+,\\s+'([^']+)'\\s+\\)","g"):new RegExp(this.field+"\\s+eq\\s+'([^']+)'","g"),n=n.exec(t[a].trim());o.push(p.odata.unescapeParam(n[1]))}this.state(o),this.message()},getValue:function(){var o=this,a="",n=this.useContains?function(e,t){a+=(""==a?"":" or ")+"contains("+o.field+",'"+p.odata.escapeParam(t)+"')"}:function(e,t){a+=(""==a?"":" or ")+o.field+" eq '"+p.odata.escapeParam(t)+"'"};return u.each(this.selector.items,function(e,t){n(e,"(Blank)"!==t?t:"")}),""==a?null:"("+a+")"},watermark:function(){return""},help:function(){return"Focus on this text box and select options and then press Enter."}}),p.ComposedFilter=function(e,t,o,a,n){p.AbstractFilter.call(this,e,t,o,a,n)},p.ComposedFilter.prototype=u.extend({},p.AbstractFilter.prototype,{match:function(e){return!1},getValue:function(){return null}}),p.YesNoFilter=function(e,t,o,a,n){p.MultipleFilter.call(this,e,t,o,a,n,function(){return["Yes","No"]})},p.YesNoFilter.prototype=u.extend({},p.MultipleFilter.prototype),p.TrueFalseFilter=function(e,t,o,a,n){p.MultipleFilter.call(this,e,t,o,a,n||{true:"Yes",false:"No"},function(){return["true","false"]})},p.TrueFalseFilter.prototype=u.extend({},p.MultipleFilter.prototype,{getValue:function(){var o=this,a="";return u.each(this.selector.items,function(e,t){"(Blank)"!==t&&(a+=(""===a?"":" or ")+o.field+" eq "+t)}),""===a?null:"("+a+")"},setValue:function(e){for(var t=e.split(" or "),o=[],a=0;a<t.length;a++){var n=new RegExp(this.field+"\\s+eq\\s+(true|false)","g").exec(t[a].trim());o.push(n[1])}this.state(o),this.message()}}),ko.bindingHandlers.filter={update:function(e,t,o,a,n){var i=t(),r=i.bindingContext||n.$data,s=i.property,u=i.substitutions,l=i.dataProvider,d=i.maxSelected,c=i.doNotLower,t=i.ariaLabel,n=p.capitalize(i.type)+"Filter",i=r.controller,l=new window.app[n](r.$element,e,i,s,u,l);"function"==typeof l.maxSelected&&l.maxSelected(d),l.hasOwnProperty("doNotLower")&&(l.doNotLower=c),"function"==typeof l.ariaLabel&&l.ariaLabel.call(l,t),r.filters||(r.filters=[]),r.filters.push(l)}}}(window.jQuery,window.app,window.OData),function(h,g,f){"use strict";function l(){var e=this;e.id=g.autoMap(),e.name=g.autoMap(),e.submissionCount=g.autoMap(),e.statuses=[],e.selectedStatus=ko.observable()}function v(e,t,o,a,n,i){var r=this;r.id=e.Id,r.title=e.Title,r.abstract=e.Abstract.htmlMultiLineEncode(),r.authors={primary:e.Author},r.authorList=e.Authors,r.numberOfUnregisteredAuthors=e.NumberOfUnregisteredAuthors,r.track={name:e.Track,id:e.TrackId},r.isSingleTrackConference=e.IsSingleTrackConference,r.subjects={primary:e.PrimarySubject,secondary:e.SecondarySubject},r.status=e.Status,r.statusPropertyIsRevision=e.StatusPropertyIsRevision,r.statusPropertyIsShepherding=e.StatusPropertyIsShepherding,r.originalSubmissionId=e.OriginalSubmissionId,r.hasRevision=ko.observable(e.HasRevision),r.hasShepherdedSubmission=ko.observable(e.HasShepherdedSubmission),r.numberOfFiles=e.NumberOfFiles,r.numberOfSupplementaryFiles=e.NumberOfSupplementaryFiles,r.isReviewReadOnly=ko.observable(e.IsReviewReadOnly),r.isMetaReviewReadOnly=ko.observable(e.IsMetaReviewReadOnly),r.isCameraReady=ko.observable(e.IsCameraReady),r.isCameraReadyPosted=e.IsCameraReadyPosted,r.isPresentation=ko.observable(e.IsPresentation),r.inplaceRevisionSubmitted=e.InplaceRevisionSubmitted,r.isAuthorFeedback=e.IsAuthorFeedback,r.isAuthorFeedbackPosted=e.IsAuthorFeedbackPosted,r.authorFeedbackId=e.AuthorFeedbackId,r.conflicts=e.Conflicts,r.disputedConflicts=e.DisputedConflicts,r.reviewerList=e.Reviewers,r.assigned=e.Assigned,r.completed=e.Completed,r.percentage=e.Percentage,r.bids=e.Bids,r.metaReviewerList=e.MetaReviewers,r.metaReviewers=e.MetaReviewersJson?JSON.parse(e.MetaReviewersJson):[],r.metaAssigned=e.MetaAssigned,r.metaCompleted=e.MetaCompleted,r.metaPercentage=e.MetaPercentage,r.metaBids=e.MetaBids,r.seniorMetaReviewerList=e.SeniorMetaReviewers,r.seniorMetaReviewers=e.SeniorMetaReviewersJson?JSON.parse(e.SeniorMetaReviewersJson):[],r.numberOfSeniorMetaReviewers=e.NumberOfSeniorMetaReviewers,r.numberOfSeniorMetaReviewerRatings=e.NumberOfSeniorMetaReviewerRatings,r.avgSeniorMetaReviewerRating=e.AvgSeniorMetaReviewerRating,r.numberOfReviewerNotes=e.NumberOfReviewerNotes,r.numberOfMetaReviewerNotes=e.NumberOfMetaReviewerNotes,r.numberOfSeniorMetaReviewerNotes=e.NumberOfSeniorMetaReviewerNotes,r.numberOfSharedRecommendations=e.NumberOfSharedRecommendations,r.sharedRecommendations=e.SharedRecommendationsJson?JSON.parse(e.SharedRecommendationsJson):[],r.discussion={messages:e.Messages,enabled:ko.observable(e.DiscussionEnabled)},r.completedReviewRating=e.CompletedReviewRating,r.percentageReviewRating=e.PercentageReviewRating,r.lineageText=ko.pureComputed(function(){return e.IsRevision?"Revision":e.IsShepherded?"Shepherd Submission":""}),r.isReviewReadOnlyText=ko.pureComputed(function(){return r.isReviewReadOnly()?"Yes":"No"}),r.isMetaReviewReadOnlyText=ko.pureComputed(function(){return r.isMetaReviewReadOnly()?"Yes":"No"}),r.inplaceRevisionSubmittedText=ko.pureComputed(function(){return r.statusPropertyIsRevision?r.inplaceRevisionSubmitted?"Yes":"No":""}),r.hasRevisionText=ko.pureComputed(function(){return r.statusPropertyIsRevision?r.hasRevision()?"Yes":"No":""}),r.isAuthorFeedbackText=ko.pureComputed(function(){return r.isAuthorFeedback?"Yes":"No"}),r.isAuthorFeedbackPostedText=ko.pureComputed(function(){return r.isAuthorFeedbackPosted?"Yes":"No"}),r.isCameraReadyText=ko.pureComputed(function(){return r.isCameraReady()?"Yes":"No"}),r.isCameraReadyPostedText=ko.pureComputed(function(){return r.isCameraReadyPosted?"Yes":"No"}),r.isPresentationText=ko.pureComputed(function(){return r.isPresentation()?"Yes":"No"}),r.revisionTracks=n,r.shepherdingTrackId=i,r.chairNoteColumns=[],null!==e.CNQ01Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ01Id,e.CNQ01Text)):r.chairNoteColumns.push(null),null!==e.CNQ02Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ02Id,e.CNQ02Text)):r.chairNoteColumns.push(null),null!==e.CNQ03Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ03Id,e.CNQ03Text)):r.chairNoteColumns.push(null),null!==e.CNQ04Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ04Id,e.CNQ04Text)):r.chairNoteColumns.push(null),null!==e.CNQ05Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ05Id,e.CNQ05Text)):r.chairNoteColumns.push(null),null!==e.CNQ06Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ06Id,e.CNQ06Text)):r.chairNoteColumns.push(null),null!==e.CNQ07Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ07Id,e.CNQ07Text)):r.chairNoteColumns.push(null),null!==e.CNQ08Id?r.chairNoteColumns.push(new g.QuestionResponseColumn(e.CNQ08Id,e.CNQ08Text)):r.chairNoteColumns.push(null);for(var s=[],u=!1,l=0;l<o.length;l++){var d=r.chairNoteColumns[l];s.push(d),d&&(u=!0)}for(r.chairNoteColumns=s,r.noteLinkText=u?"Edit Note":"Add Note",r.aggregateColumns=[],l=0;l<t.length;l++){var c=t[l],p="Q0"+c.Order;c.IsMeta&&(p="M"+p),null!==e[p+"Id"]?r.aggregateColumns.push(new g.AggregateColumn(p,e[p+"Id"],e[p+"Avg"],e[p+"Min"],e[p+"Max"],e[p+"Spread"])):r.aggregateColumns.push(new g.AggregateColumn(p,null,null,null,null,null))}r.submissionQuestionColumns=[],null!==e.SQ01Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ01Id,e.SQ01Text)):r.submissionQuestionColumns.push(null),null!==e.SQ02Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ02Id,e.SQ02Text)):r.submissionQuestionColumns.push(null),null!==e.SQ03Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ03Id,e.SQ03Text)):r.submissionQuestionColumns.push(null),null!==e.SQ04Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ04Id,e.SQ04Text)):r.submissionQuestionColumns.push(null),null!==e.SQ05Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ05Id,e.SQ05Text)):r.submissionQuestionColumns.push(null),null!==e.SQ06Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ06Id,e.SQ06Text)):r.submissionQuestionColumns.push(null),null!==e.SQ07Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ07Id,e.SQ07Text)):r.submissionQuestionColumns.push(null),null!==e.SQ08Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ08Id,e.SQ08Text)):r.submissionQuestionColumns.push(null),null!==e.SQ09Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ09Id,e.SQ09Text)):r.submissionQuestionColumns.push(null),null!==e.SQ10Id?r.submissionQuestionColumns.push(new g.QuestionResponseColumn(e.SQ10Id,e.SQ10Text)):r.submissionQuestionColumns.push(null);for(var m=[],u=!1,l=0;l<a.length;l++){d=r.submissionQuestionColumns[l];m.push(d),d&&(u=!0)}r.submissionQuestionColumns=m,r.revisionClick=function(t,e){e={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,"Revision"),method:"POST",data:{Request:{SubmissionId:t,RevisionTrackId:e}}};f.request(e,function(e){r.hasRevision=!0,g.addMessage("Created revision id={1} for submission id={0}.".format(t,e.value))},function(e){f.defaultError(e)})},r.shepherdingSubmissionClick=function(t,e){e={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,"ShepherdingSubmission"),method:"POST",data:{Request:{SubmissionId:t,ShepherdingTrackId:e}}};f.request(e,function(e){r.hasShepherdedSubmission=!0,g.addMessage("Created shepherd submission id={1} for submission id={0}.".format(t,e.value))},function(e){f.defaultError(e)})}}function w(s,e){var n=e,u=this;u.tracks=ko.observableArray(),u.submitEnabled=ko.computed(function(){if(u.tracks().length<=0)return!1;for(var e=!0,t=0;t<u.tracks().length;t++)e=e&&void 0!==u.tracks()[t].selectedStatus()&&void 0!==u.tracks()[t].selectedStatus()[0];return e}),u.filter=null,u.changeStatus=function(){for(var e=[],t=0;t<u.tracks().length;t++){var o=u.tracks()[t];e.push({TrackId:o.id,StatusId:o.selectedStatus()[0]})}var a={TrackStatusMap:e,Filter:u.filter},a={requestUri:g.odata.getUrl(g.odata.entitySet.trackStatuses,null,"BulkChangeStatus"),method:"POST",data:{Request:a}};f.request(a,function(e){n.refresh(),setTimeout(function(){g.addMessage("The status of selected submissions have been changed.")},500),h(s).modal("hide")})},u.bind=function(){ko.applyBindings(u,s)},u.editInDialog=function(r){f.read(g.odata.getUrl(g.odata.entitySet.trackStatuses+"?filter="+encodeURIComponent(r)+"&$expand=Statuses"),function(e){u.tracks.removeAll();for(var t=0;t<e.value.length;t++){for(var o=e.value[t],a=g.autoMap(new l,o),n=0;n<o.Statuses.length;n++){var i=o.Statuses[n],i=g.autoMap(new g.SubmissionStatus,i);a.statuses.push(i)}u.tracks.push(a)}u.filter=r,h(s).modal("show")})}}function b(t,e){var o=e,a=this;a.id=ko.observable(""),a.title=ko.observable(""),a.trackName=ko.observable(""),a.isSingleTrackConference=ko.observable(!0),a.deleteSubmission=function(){var e={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,a.id()),method:"DELETE",showProgressIndicator:!1};f.request(e,function(){h(t).modal("hide"),o.refresh(),setTimeout(function(){g.addMessage("Submission {0} has been deleted.".format(a.id()))},500)})},a.bind=function(){ko.applyBindings(a,t)},a.editInDialog=function(e){a.id(e.id),a.title(e.title),a.trackName(e.track.name),a.isSingleTrackConference(e.isSingleTrackConference),h(t).modal("show")}}v.prototype={setEnable:function(e){var t=!e.discussion.enabled(),o={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,"EnableDisableDiscussion"),method:"POST",showProgressIndicator:!0,data:{Enable:t,SubmissionId:e.id}};f.request(o,function(){e.discussion.enabled(t),g.addMessage("Discussion for submission {0} has been {1}!".format(e.id,t?"enabled":"disabled"))})}},g.SubmissionPage=function(e,t,o,a,n,i,r,s,u,l,d,c){var p=this;p.toggleableColumnsContainer=new g.ToggleableColumnsContainer(p.key),p.tracks=o,p.defaultTrackId=a,p.questions=n,p.chairNoteQuestions=i,p.submissionQuestions=r,p.statusNames=s,p.hasRevisionTracks=l,p.hasShepherdingTracks=d,p.hasSeniorMetaReviewer=c,p.$element=h(e),p.conference=window.cmt3.conference.name,p.page=ko.observable(1),p.top=ko.observable(25),p.sort=ko.observable("Id"),p.controller=t,p.filters=[],p._total=ko.observable(0),p.selected=ko.observable(0),p.submissions=ko.observableArray(),p.status=ko.observable(),p.editingStatus=ko.observable(!1),p.isCameraReady=ko.observable(),p.listen(),p.Pager=ko.pager(p.selected,p.top),p.Pager().CurrentPage.subscribe(function(){p.page(p.Pager().CurrentPage()),p.show()}),p.subjectAreasProvider=ko.pureComputed(function(){return u});var m=null;p.deleteSubmission=function(e){null===m&&(m=new b(document.getElementById("deleteSubmissionDialog"),p)).bind(),m.editInDialog(e)};var f=null;p.changeStatus=function(e){null===f&&(f=new w(document.getElementById("changeStatusDialog"),p)).bind(),f.editInDialog(e)},p.allowSupplementaryMaterial=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.allowSupplementaryMaterial)return!0;return!1}),p.trackArray=ko.computed(function(){var e,t=[];for(e in p.tracks)t.push(p.tracks[e]);return t.sort(function(e,t){return e.order<t.order?-1:e.order>t.order?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})}),p.allowInplaceRevision=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.allowInplaceRevision)return!0;return!1}),p.trackNamesProvider=function(){var o=[];return h.each(p.tracks,function(e,t){o.push(t.name)}),o},p.statusNamesProvider=function(){var e=p.statusNames;return e.sort(),e},p.reviewerAllowedToCompareSubmission=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.reviewerAllowedToCompareSubmission)return!0;return!1}),p.metaReviewerAllowedToCompareSubmission=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.metaReviewerAllowedToCompareSubmission)return!0;return!1}),p.metaReviewerEnabled=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.metaReviewerEnabled)return!0;return!1}),p.cameraReadyEnabled=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.cameraReadyEnabled)return!0;return!1}),p.authorFeedbackEnabled=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.authorFeedbackEnabled)return!0;return!1}),p.subjectAreaConfigured=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.subjectAreaConfigured)return!0;return!1}),p.inplaceRevisionEnabled=ko.computed(function(){for(var e in p.tracks)if(p.tracks[e].settings.inplaceRevisionEnabled)return!0;return!1})},g.SubmissionPage.prototype={key:"submissions",listen:function(){var e=this;h(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getDefaultTrackId:function(){return this.defaultTrackId},getFilter:function(){var o="";return h.each(this.filters,function(e,t){t.getValue()&&(o+=""===o?t.getValue():" and "+t.getValue())}),o},show:function(e,l,d,c,p){function t(o){var i=l||m.sort(),r=d||m.getFilter(),s=c||m.skip(),u=null!=p?p:m.top(),e=i?"&$orderby="+i:"",t=u?"&$top="+u:"",a=s?"&$skip="+s:"",n=r?"&$filter="+encodeURIComponent(r):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+m.conference+"/$batch",showProgressIndicator:!o,method:"POST",data:{requests:[{url:"/api/odata/"+m.conference+"/"+m.controller+"?"+(o?"$count=true&$top=0"+n:e+n+a+t),method:"GET",headers:{Accept:"application/json"}}]}};return f.request(t,function(e){g.page.saveState("submissions",{sort:i,top:u,skip:s,filter:r});var a,n,t=e.responses[0].body;o?(e=t["@odata.count"],0===m._total()&&m._total(e),m.selected(e),m.toggleableColumnsContainer&&m.toggleableColumnsContainer.loadState()):(t=t.value,a=[],h.each(m.tracks,function(e,t){a[t.id]=t}),n=[],h.each(t,function(e,t){var o=[];""!==t.Revisions&&h.each(t.Revisions.split(";"),function(e,t){t=a[parseInt(t)];null!==t&&o.push(t)}),n.push(new v(t,m.questions,m.chairNoteQuestions,m.submissionQuestions,o,t.ShepherdingTrackId))}),m.submissions(n))},function(e){window.cmt3.logger.log(e.message)},f.batchHandler)}var m=this;return m.initialized||e?h.when(t(!1),t(!0)).done(function(){h("html,body").scrollTop(0)}):h.Deferred().reject().promise()},scroll:function(){h(window).scrollTop()===h(document).height()-h(window).height()&&self.show()},selectStatus:function(e,t){var o=h(t.target),t=ko.contextFor(t.target),a=h(h("#statusTemplate").text());o.hide(),o.after(a),t.$parent.getStatuses(e.id,e.track.id,o,a).done(function(e){ko.applyBindings(e,a[0])})},getStatuses:function(r,s,u,l){var d=h.Deferred();return f.read(g.odata.getUrl(g.odata.entitySet.submissionStatuses),function(e){for(var t=[],o=[],a=0;a<e.value.length;a++){var n=e.value[a],n=g.autoMap(new g.SubmissionStatus,n);n.trackId===s&&(t.push(n),o[n.id]=n)}var i={options:ko.observableArray(t),selectedStatus:ko.observable()};i.selectedStatus.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/Submissions("+r+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{StatusId:e[0]}};f.request(e,function(e){l.remove(),u.text(o[e.StatusId].name),u.show()})}),d.resolve(i)}),d.promise()},importChairNotes:function(e,t){t=t.target,t=h(t).attr("order"),t="/"+window.cmt3.conference.name+"/Submission/ImportChairNote?order="+t;g.url.navigateTo(t)},importMetaReviewerOrder:function(e,t){t=t.target,t=h(t).attr("order"),t="/"+window.cmt3.conference.name+"/Submission/ImportMetaReviewerOrder?order="+t;g.url.navigateTo(t)},changeIsReviewReadOnly:function(e,t){var o=h(t.target),a=ko.contextFor(t.target),t=h(h("#isReviewReadOnlyTemplate").text());o.hide(),o.after(t);o=a.$parent.getIsReviewReadOnly(e.id,o,t);ko.applyBindings(o,t[0])},getIsReviewReadOnly:function(t,o,a){var n=[{name:"Yes",id:!0},{name:"No",id:!1}],e={options:ko.observableArray(n),selectedOption:ko.observable()};return e.selectedOption.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/Submissions("+t+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{IsReviewReadOnly:e[0]}};f.request(e,function(e){a.remove(),o.text((e.IsReviewReadOnly?n[0]:n[1]).name),o.show()})}),e},changeIsMetaReviewReadOnly:function(e,t){var o=h(t.target),a=ko.contextFor(t.target),t=h(h("#isReviewReadOnlyTemplate").text());o.hide(),o.after(t);o=a.$parent.getIsMetaReviewReadOnly(e.id,o,t);ko.applyBindings(o,t[0])},getIsMetaReviewReadOnly:function(t,o,a){var n=[{name:"Yes",id:!0},{name:"No",id:!1}],e={options:ko.observableArray(n),selectedOption:ko.observable()};return e.selectedOption.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/Submissions("+t+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{IsMetaReviewReadOnly:e[0]}};f.request(e,function(e){a.remove(),o.text((e.IsMetaReviewReadOnly?n[0]:n[1]).name),o.show()})}),e},changeIsAuthorFeedback:function(e,t){var o=h(t.target),a=ko.contextFor(t.target),t=h(h("#isAuthorFeedbackTemplate").text());o.hide(),o.after(t);o=a.$parent.getIsAuthorFeedback(e.id,o,t);ko.applyBindings(o,t[0])},getIsAuthorFeedback:function(t,o,a){var n=[{name:"Yes",id:!0},{name:"No",id:!1}],e={options:ko.observableArray(n),selectedOption:ko.observable()};return e.selectedOption.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/Submissions("+t+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{IsAuthorFeedback:e[0]}};f.request(e,function(e){a.remove(),o.text((e.IsAuthorFeedback?n[0]:n[1]).name),o.show()})}),e},changeIsCameraReady:function(e,t){var o=h(t.target),a=ko.contextFor(t.target),t=h(h("#isCameraReadyTemplate").text());o.hide(),o.after(t);a=a.$parent.getIsCameraReady(e.id,o,t,a.$data);ko.applyBindings(a,t[0])},getIsCameraReady:function(t,o,a,n){var e={options:ko.observableArray([{name:"Yes",id:!0},{name:"No",id:!1}]),selectedOption:ko.observable()};return e.selectedOption.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/Submissions("+t+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{IsCameraReady:e[0]}};f.request(e,function(e){a.remove(),n.isCameraReady(e.IsCameraReady),o.show()})}),e},changeIsPresentation:function(e,t){var o=h(t.target),a=ko.contextFor(t.target),t=h(h("#isPresentationTemplate").text());o.hide(),o.after(t);a=a.$parent.getIsPresentation(e.id,o,t,a.$data);ko.applyBindings(a,t[0])},getIsPresentation:function(a,n,i,r){var e={options:ko.observableArray([{name:"Yes",id:!0},{name:"No",id:!1}]),selectedOption:ko.observable()};return e.selectedOption.subscribe(function(e){var t="Id eq {0}".format(a),o=e[0],t={requestUri:g.odata.getUrl(g.odata.entitySet.presentations,null,"BulkEnableDisablePresentation"),method:"POST",progressIndicatorTimeout:0,data:{Filter:t,Enable:o}};f.request(t,function(){i.remove(),r.isPresentation(o),n.show()})}),e},showAbstract:function(e,t){ko.contextFor(t.target).$parent;var o=h(t.target),t=o.next();t.is(":visible")?(t.hide(),o.text("Show abstract")):(t.show(),o.text("Hide abstract"))},email:function(e,t){var o=t.target,a=ko.contextFor(o),n=parseInt(h(o).attr("sid")),i=h(o).attr("recipientType"),r=h(o).attr("all"),t=h(o).attr("checkNote"),o=h(o).attr("checkDiscussion"),a=n?"Id eq {0}".format(n):a.$root.getFilter(),i="/"+window.cmt3.conference.name+"/Submission/SendEmail/"+i,a={filter:0<a.length?a:null};r&&(a.all=r),t&&(a.checkNote=t),o&&(a.checkDiscussion=o),g.url.navigateTo(i,a)},bulkEnableDisablePresentation:function(e,t,o){var a,n=o?"enabling":"disabling";confirm("Bulk {0} Presentation will be performed for selected items.".format(n))&&(a=t.target,t=ko.contextFor(a),t=(a=parseInt(h(a).attr("sid")))?"Id eq {0}".format(a):t.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.presentations,null,"BulkEnableDisablePresentation"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},f.request(o,function(){g.addMessage("Bulk {0} Presentation has been completed successfully.".format(n)),location.reload()}))},bulkEnableDisableCameraReady:function(e,t,o){var a,n=o?"enabling":"disabling";confirm("Bulk {0} Camera Ready will be performed for selected items.".format(n))&&(a=t.target,t=ko.contextFor(a),t=(a=parseInt(h(a).attr("sid")))?"Id eq {0}".format(a):t.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.cameraReadySubmissions,null,"BulkEnableDisableCameraReady"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},f.request(o,function(){g.addMessage("Bulk {0} Camera Ready has been completed successfully.".format(n)),location.reload()}))},bulkEnableDisableAuthorFeedback:function(e,t,o){var a,n=o?"enabling":"disabling";confirm("Bulk {0} author feedback will be performed for selected items.".format(n))&&(a=t.target,t=ko.contextFor(a),t=(a=parseInt(h(a).attr("sid")))?"Id eq {0}".format(a):t.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.authorFeedbacks,null,"BulkEnableDisableAuthorFeedback"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},f.request(o,function(){g.addMessage("Bulk {0} author feedback has been completed successfully.".format(n)),location.reload()}))},bulkDeleteAssign:function(e,t,o){var a,n=o===g.enums.assignmentType.reviewer?"reviewer":o===g.enums.assignmentType.metaReviewer?"meta-reviewer":"senior meta-reviewer";confirm("Bulk delete {0} assignment will be performed for selected items.".format(n))&&(a=t.target,t=ko.contextFor(a),t=(a=parseInt(h(a).attr("sid")))?"Id eq {0}".format(a):t.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,"BulkDeleteAssignment"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Type:o}},f.request(o,function(){g.addMessage("Bulk delete {0} assignment has been completed successfully.".format(n)),location.reload()}))},bulkDeleteSubmissions:function(e,t){var o;confirm("Bulk delete submissions will be performed for selected items.")&&(o=t.target,t=ko.contextFor(o),t=(o=parseInt(h(o).attr("sid")))?"Id eq {0}".format(o):t.$root.getFilter(),t={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,"BulkDeleteSubmissions"),method:"POST",showProgressIndicator:!0,data:{Filter:t}},f.request(t,function(){g.addMessage("Bulk delete submissions has been completed successfully."),location.reload()}))},bulkEnableDisableDiscussion:function(e,t,o){var a,n=o?"enabling":"disabling";confirm("Bulk {0} discussion will be performed for selected items.".format(n))&&(a=t.target,t=ko.contextFor(a),t=(a=parseInt(h(a).attr("sid")))?"Id eq {0}".format(a):t.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,"BulkEnableDisableDiscussion"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},f.request(o,function(){g.addMessage("Bulk {0} discussion has been completed successfully.".format(n)),location.reload()}))},bulkEnableDisableReviewReadOnly:function(e,t,o,a){var n,i=o?"enabling":"disabling";confirm("Bulk {0} {1} readOnly will be performed for selected submissions.".format(i,a?"meta-review":"review"))&&(n=t.target,t=ko.contextFor(n),t=(n=parseInt(h(n).attr("sid")))?"Id eq {0}".format(n):t.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.submissions,null,a?"BulkEnableDisableMetaReviewReadOnly":"BulkEnableDisableReviewReadOnly"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},f.request(o,function(){g.addMessage("Bulk {0} {1} readOnly has been completed successfully.".format(i,a?"meta-review":"review")),location.reload()}))},bulkEnableAuthorFeedback:function(e,t){this.bulkEnableDisableAuthorFeedback(e,t,!0)},bulkDisableAuthorFeedback:function(e,t){this.bulkEnableDisableAuthorFeedback(e,t,!1)},bulkEnableDiscussion:function(e,t){this.bulkEnableDisableDiscussion(e,t,!0)},bulkDisableDiscussion:function(e,t){this.bulkEnableDisableDiscussion(e,t,!1)},exportReproducibilityResponsesForSubmission:function(e,t){this.exportReproducibilityResponses(e,t,!1)},exportReproducibilityResponsesForCameraReady:function(e,t){this.exportReproducibilityResponses(e,t,!0)},bulkEnableCameraReady:function(e,t){this.bulkEnableDisableCameraReady(e,t,!0)},bulkDisableCameraReady:function(e,t){this.bulkEnableDisableCameraReady(e,t,!1)},bulkEnablePresentation:function(e,t){this.bulkEnableDisablePresentation(e,t,!0)},bulkDisablePresentation:function(e,t){this.bulkEnableDisablePresentation(e,t,!1)},bulkDeleteReviewerAssignment:function(e,t){this.bulkDeleteAssign(e,t,g.enums.assignmentType.reviewer)},bulkDeleteMetaReviewerAssignment:function(e,t){this.bulkDeleteAssign(e,t,g.enums.assignmentType.metaReviewer)},bulkDeleteSeniorMetaReviewerAssignment:function(e,t){this.bulkDeleteAssign(e,t,g.enums.assignmentType.seniorMetaReviewer)},bulkEnableReviewReadOnly:function(e,t){this.bulkEnableDisableReviewReadOnly(e,t,!0,!1)},bulkDisableReviewReadOnly:function(e,t){this.bulkEnableDisableReviewReadOnly(e,t,!1,!1)},bulkEnableMetaReviewReadOnly:function(e,t){this.bulkEnableDisableReviewReadOnly(e,t,!0,!0)},bulkDisableMetaReviewReadOnly:function(e,t){this.bulkEnableDisableReviewReadOnly(e,t,!1,!0)},exportMetaReviews:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportMetaReviews";g.page.post(t,{Filter:o})},exportReviews:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportReviews";g.page.post(t,{Filter:o})},exportDiscussions:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportDiscussions";g.page.post(t,{Filter:o})},exportAuthorFeedbackComments:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportAuthorFeedbackComments";g.page.post(t,{Filter:o})},exportReviewsSnapshot:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportReviewsSnapshot";g.page.post(t,{Filter:o})},exportNotes:function(e,t,o){var a=t.target,t=ko.contextFor(a),a=parseInt(h(a).attr("sid")),a=a?"Id eq {0}".format(a):t.$root.getFilter(),t=null;o===g.enums.userRole.reviewer?t="ExportReviewerNotes":o===g.enums.userRole.metaReviewer?t="ExportMetaReviewerNotes":o===g.enums.userRole.seniorMetaReviewer&&(t="ExportSeniorMetaReviewerNotes");t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/"+t;g.page.post(t,{Filter:a})},exportReviewerNotes:function(e,t){this.exportNotes(e,t,g.enums.userRole.reviewer)},exportMetaReviewerNotes:function(e,t){this.exportNotes(e,t,g.enums.userRole.metaReviewer)},exportSeniorMetaReviewerNotes:function(e,t){this.exportNotes(e,t,g.enums.userRole.seniorMetaReviewer)},exportCameraReadySubmissions:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/CameraReadySubmissionViews/Export";g.page.post(t,{Filter:o})},exportSubmissions:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/Export";g.page.post(t,{Filter:o})},exportSubmissionsAsTSV:function(e,t){var o=t.target,a=ko.contextFor(o),t=parseInt(h(o).attr("sid")),o=h(o).attr("data-tid")&&parseInt(h(o).attr("data-tid"))||a.$root.getDefaultTrackId(),t=t?"Id eq {0}".format(t):a.$root.getFilter(),a="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportAsTSV";g.page.post(a,{Filter:t,TrackId:o})},exportACMXml:function(e,t){var o=t.target,a=ko.contextFor(o),t=parseInt(h(o).attr("sid")),o=h(o).attr("data-tid")&&parseInt(h(o).attr("data-tid"))||a.$root.getDefaultTrackId(),t=t?"Id eq {0}".format(t):a.$root.getFilter(),a="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportACMXml";g.page.post(a,{Filter:t,TrackId:o})},exportAuthorFeedback:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(h(o).attr("sid")),o=o?"Id eq {0}".format(o):t.$root.getFilter(),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportAuthorFeedback";g.page.post(t,{Filter:o})},downloadFiles:function(e,t){var o=t.target,a=h(o).attr("href"),n=parseInt(h(o).attr("sid")),o=ko.contextFor(o),o=n?"Id eq {0}".format(n):o.$root.getFilter(),o={requestUri:g.odata.getUrl(g.odata.entitySet.submissionViews,null,"GetIds"),method:"POST",showProgressIndicator:!0,data:{Filter:o}};f.request(o,function(e){e=e.value.join("/");g.page.post(a,{Ids:e})}),t.preventDefault()},exportBidsToExcel:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/BiddingModels/ExportExcel";g.page.post(o,{})},exportBidsToExcelWithAssignments:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/BiddingModels/ExportExcelWithAssignments";g.page.post(o,{})},exportMetaBidsToExcel:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/MetaBiddingModels/ExportExcel";g.page.post(o,{})},exportMetaBidsToExcelWithAssignments:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/MetaBiddingModels/ExportExcelWithAssignments";g.page.post(o,{})},exportMetaBidsToXml:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/MetaBiddingModels/ExportXml";g.page.post(o,{})},exportBidsToXml:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/BiddingModels/ExportXml";g.page.post(o,{})},exportMetaAssignmentsToXml:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportMetaAssignmentsXml";g.page.post(o,{})},exportSeniorMetaAssignmentsToXml:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportSeniorMetaAssignmentsXml";g.page.post(o,{})},exportAssignmentsToXml:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportAssignmentsXml";g.page.post(o,{})},exportReviewerConflicts:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportReviewerConflicts";g.page.post(o,{})},exportMetaReviewerConflicts:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportMetaReviewerConflicts";g.page.post(o,{})},exportReviewerRelevances:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportReviewerRelevances";g.page.post(o,{})},exportMetaReviewerRelevances:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportMetaReviewerRelevances";g.page.post(o,{})},exportSeniorMetaReviewerConflicts:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportSeniorMetaReviewerConflicts";g.page.post(o,{})},exportReviewerSuggestions:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportReviewerSuggestions";g.page.post(o,{})},exportReviewRatings:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportReviewRatings";g.page.post(o,{})},exportMetaReviewerRecommendations:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportMetaReviewerRecommendations";g.page.post(o,{})},exportSeniorMetaReviewerRatings:function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportSeniorMetaReviewerRatings";g.page.post(o,{})},exportReviewerSubmissionComparisons:function(e,t){var o=g.GetEventFilter(t),t=g.odata.getUrl(g.odata.entitySet.submissionModels,null,"ExportReviewerSubmissionComparisons");g.page.post(t,{Filter:o})},exportMetaReviewerSubmissionComparisons:function(e,t){var o=g.GetEventFilter(t),t=g.odata.getUrl(g.odata.entitySet.submissionModels,null,"ExportMetaReviewerSubmissionComparisons");g.page.post(t,{Filter:o})},exportReproducibilityResponses:function(e,t,o){var a="/api/odata/"+window.cmt3.conference.name+"/Submissions/ExportReproducibilityResponses";g.page.post(a,{IsCameraReady:o})},bulkChangeStatus:function(e,t){t=g.GetEventFilter(t);this.changeStatus(t)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){h.each(this.filters,function(e,t){t.reset()}),g.announce(g.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){h("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),h(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=h(t.target).attr("size"),t=parseInt(t);this.top(t),g.announce(g.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!==this.top()&&1!==this.page()&&(this.page(this.page()-1),this.show())},next:function(){0===this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=h(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=h(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),o.attr("aria-sort","ascending"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),o.attr("aria-sort","descending"),"descending"):(h("th[data-sort]").each(function(){h(this).find("i").removeClass("icon-arrow-up"),h(this).find("i").removeClass("icon-arrow-down"),h(this).removeClass("selected"),o.removeAttr("aria-sort")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),o.attr("aria-sort","ascending"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&g.announce(g.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()}}}(window.jQuery,window.app,window.OData),function(n,i,r){"use strict";function a(o,e){var a=this;a.oldPassword=ko.observable("").extend({required:!0,minLength:6}).autoMap(),a.newPassword=ko.observable("").extend({required:!0,minLength:10}).autoMap(),a.confirmPassword=ko.observable("").extend({required:!0,minLength:10,equal:{params:a.newPassword,message:"Passwords must match."}}),a.showValidationWarning=ko.observable(!1),a.changePassword=function(){var e=!0,t=ko.validation.group(a,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e?(e={OldPassword:a.oldPassword(),NewPassword:a.newPassword()},e={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"ChangePassword"),method:"POST",data:{Request:e}},r.request(e,function(e){n(o).modal("hide"),i.addMessage("Password has been changed.",null,"success","text",!0),i.odata.processRedirectResponse(e)},function(e){403==e.response.statusCode?(e=i.getODataErrorMessage(e).message,i.addMessage(e,"Change password failed:","error")):i.addMessage("Change password failed.",null,"error")})):a.showValidationWarning(!0)},a.bind=function(){ko.applyBindings(a,o)},a.showDialog=function(){a.showValidationWarning(!1),a.oldPassword(""),a.oldPassword.isModified(!1),a.newPassword(""),a.newPassword.isModified(!1),a.confirmPassword(""),a.confirmPassword.isModified(!1),n(o).modal("show"),setTimeout(function(){n(e).focus()},600)}}i.userPassword=function(){var e=this;e.options={elementId:"userPassword"};var t=null;e.changePassword=function(){null==t&&(t=new a(document.getElementById("changePasswordDialog"),document.getElementById("changePasswordDialog-oldPasswordTextbox"))).bind(),t.showDialog()};var o=document.getElementById(e.options.elementId);o&&ko.applyBindings(e,o)}}(window.jQuery,window.app,window.OData),function(e){"use strict";function t(e,t){this.name=e,this.code=t}var o=[new t("Afghanistan","AF"),new t("land Islands","AX"),new t("Albania","AL"),new t("Algeria","DZ"),new t("American Samoa","AS"),new t("Andorra","AD"),new t("Angola","AO"),new t("Anguilla","AI"),new t("Antarctica","AQ"),new t("Antigua and Barbuda","AG"),new t("Argentina","AR"),new t("Armenia","AM"),new t("Aruba","AW"),new t("Ascension Island","AC"),new t("Australia","AU"),new t("Austria","AT"),new t("Azerbaijan","AZ"),new t("Bahamas","BS"),new t("Bahrain","BH"),new t("Bangladesh","BD"),new t("Barbados","BB"),new t("Belarus","BY"),new t("Belgium","BE"),new t("Belize","BZ"),new t("Benin","BJ"),new t("Bermuda","BM"),new t("Bhutan","BT"),new t("Bolivia","BO"),new t("Bonaire","BQ"),new t("Bosnia and Herzegovina","BA"),new t("Botswana","BW"),new t("Bouvet Island","BV"),new t("Brazil","BR"),new t("British Indian Ocean Territory","IO"),new t("British Virgin Islands","VG"),new t("Brunei","BN"),new t("Bulgaria","BG"),new t("Burkina Faso","BF"),new t("Burundi","BI"),new t("Cabo Verde","CV"),new t("Cambodia","KH"),new t("Cameroon","CM"),new t("Canada","CA"),new t("Cayman Islands","KY"),new t("Central African Republic","CF"),new t("Chad","TD"),new t("Chile","CL"),new t("China","CN"),new t("Christmas Island","CX"),new t("Cocos (Keeling) Islands","CC"),new t("Colombia","CO"),new t("Comoros","KM"),new t("Congo","CG"),new t("Congo (DRC)","CD"),new t("Cook Islands","CK"),new t("Costa Rica","CR"),new t("Cte d'Ivoire","CI"),new t("Croatia","HR"),new t("Cuba","CU"),new t("Curaao","CW"),new t("Cyprus","CY"),new t("Czechia","CZ"),new t("Denmark","DK"),new t("Djibouti","DJ"),new t("Dominica","DM"),new t("Dominican Republic","DO"),new t("Ecuador","EC"),new t("Egypt","EG"),new t("El Salvador","SV"),new t("Equatorial Guinea","GQ"),new t("Eritrea","ER"),new t("Estonia","EE"),new t("Ethiopia","ET"),new t("Falkland Islands","FK"),new t("Faroe Islands","FO"),new t("Fiji","FJ"),new t("Finland","FI"),new t("France","FR"),new t("French Guiana","GF"),new t("French Polynesia","PF"),new t("French Southern Territories","TF"),new t("Gabon","GA"),new t("Gambia, The","GM"),new t("Georgia","GE"),new t("Germany","DE"),new t("Ghana","GH"),new t("Gibraltar","GI"),new t("Greece","GR"),new t("Greenland","GL"),new t("Grenada","GD"),new t("Guadeloupe","GP"),new t("Guam","GU"),new t("Guatemala","GT"),new t("Guernsey","GG"),new t("Guinea","GN"),new t("Guinea-Bissau","GW"),new t("Guyana","GY"),new t("Haiti","HT"),new t("Heard Island and McDonald Islands","HM"),new t("Honduras","HN"),new t("Hong Kong SAR","HK"),new t("Hungary","HU"),new t("Iceland","IS"),new t("India","IN"),new t("Indonesia","ID"),new t("Iran","IR"),new t("Iraq","IQ"),new t("Ireland","IE"),new t("Isle of Man","IM"),new t("Israel","IL"),new t("Italy","IT"),new t("Jamaica","JM"),new t("Jan Mayen","SJ"),new t("Japan","JP"),new t("Jersey","JE"),new t("Jordan","JO"),new t("Kazakhstan","KZ"),new t("Kenya","KE"),new t("Kiribati","KI"),new t("Korea","KR"),new t("Kosovo","XK"),new t("Kuwait","KW"),new t("Kyrgyzstan","KG"),new t("Laos","LA"),new t("Latvia","LV"),new t("Lebanon","LB"),new t("Lesotho","LS"),new t("Liberia","LR"),new t("Libya","LY"),new t("Liechtenstein","LI"),new t("Lithuania","LT"),new t("Luxembourg","LU"),new t("Macao SAR","MO"),new t("Madagascar","MG"),new t("Malawi","MW"),new t("Malaysia","MY"),new t("Maldives","MV"),new t("Mali","ML"),new t("Malta","MT"),new t("Marshall Islands","MH"),new t("Martinique","MQ"),new t("Mauritania","MR"),new t("Mauritius","MU"),new t("Mayotte","YT"),new t("Mexico","MX"),new t("Micronesia","FM"),new t("Moldova","MD"),new t("Monaco","MC"),new t("Mongolia","MN"),new t("Montenegro","ME"),new t("Montserrat","MS"),new t("Morocco","MA"),new t("Mozambique","MZ"),new t("Myanmar","MM"),new t("Namibia","NA"),new t("Nauru","NR"),new t("Nepal","NP"),new t("Netherlands","NL"),new t("Netherlands Antilles (Former)","AN"),new t("New Caledonia","NC"),new t("New Zealand","NZ"),new t("Nicaragua","NI"),new t("Niger","NE"),new t("Nigeria","NG"),new t("Niue","NU"),new t("Norfolk Island","NF"),new t("North Macedonia","MK"),new t("North Korea","KP"),new t("Northern Mariana Islands","MP"),new t("Norway","NO"),new t("Oman","OM"),new t("Pakistan","PK"),new t("Palau","PW"),new t("Palestinian Authority","PS"),new t("Panama","PA"),new t("Papua New Guinea","PG"),new t("Paraguay","PY"),new t("Peru","PE"),new t("Philippines","PH"),new t("Pitcairn Islands","PN"),new t("Poland","PL"),new t("Portugal","PT"),new t("Puerto Rico","PR"),new t("Qatar","QA"),new t("Republic of Cte d'Ivoire","CI"),new t("Runion","RE"),new t("Romania","RO"),new t("Russia","RU"),new t("Rwanda","RW"),new t("Saba","XS"),new t("Saint Barthlemy","BL"),new t("Saint Kitts and Nevis","KN"),new t("Saint Lucia","LC"),new t("Saint Martin","MF"),new t("Saint Pierre and Miquelon","PM"),new t("Saint Vincent and the Grenadines","VC"),new t("Samoa","WS"),new t("San Marino","SM"),new t("So Tom and Prncipe","ST"),new t("Saudi Arabia","SA"),new t("Senegal","SN"),new t("Serbia","RS"),new t("Serbia, Montenegro","YU"),new t("Seychelles","SC"),new t("Sierra Leone","SL"),new t("Singapore","SG"),new t("Sint Eustatius","XE"),new t("Sint Maarten","SX"),new t("Slovakia","SK"),new t("Slovenia","SI"),new t("Solomon Islands","SB"),new t("Somalia","SO"),new t("South Africa","ZA"),new t("South Georgia and the South Sandwich Islands","GS"),new t("South Sudan","SS"),new t("Spain","ES"),new t("Sri Lanka","LK"),new t("St Helena, Ascension, and Tristan da Cunha","SH"),new t("Sudan","SD"),new t("Suriname","SR"),new t("Svalbard","SJ"),new t("Swaziland","SZ"),new t("Sweden","SE"),new t("Switzerland","CH"),new t("Syria","SY"),new t("Taiwan","TW"),new t("Tajikistan","TJ"),new t("Tanzania","TZ"),new t("Thailand","TH"),new t("Timor-Leste","TL"),new t("Togo","TG"),new t("Tokelau","TK"),new t("Tonga","TO"),new t("Trinidad and Tobago","TT"),new t("Tristan da Cunha","TA"),new t("Tunisia","TN"),new t("Turkey","TR"),new t("Turkmenistan","TM"),new t("Turks and Caicos Islands","TC"),new t("Tuvalu","TV"),new t("U.S. Outlying Islands","UM"),new t("U.S. Virgin Islands","VI"),new t("Uganda","UG"),new t("Ukraine","UA"),new t("United Arab Emirates","AE"),new t("United Kingdom","UK"),new t("United States","US"),new t("Uruguay","UY"),new t("Uzbekistan","UZ"),new t("Vanuatu","VU"),new t("Vatican City","VA"),new t("Venezuela","VE"),new t("Vietnam","VN"),new t("Wallis and Futuna","WF"),new t("Yemen","YE"),new t("Zambia","ZM"),new t("Zimbabwe","ZW")];e.countries={getCountries:function(){return o},getCountryNameByCode:function(t){var e=_.find(o,function(e){return e.code==t});return void 0===e||null==e?"":e.name}}}(window.app),function(h,g){"use strict";g.SortableColumnViewModel=function(e,t,o,a,n){var i=this;i.key=e,i.title=t,i.property=ko.observable(o),i.direction=ko.observable(a),i.isVisible=ko.observable(!0),i.hide=function(){i.isVisible(!1)},i.show=function(){i.isVisible(!0)},i.sort=function(){i.direction("asc"===i.direction()?"desc":"asc"),n&&"function"==typeof n&&n(i)}},ko.bindingHandlers.sortableColumn={init:function(e,t,o,a,n){var i,r=n.$data,s=ko.unwrap(t())||{},u=s.key,l=s.title,d=s.isToggleable,n=s.property,t=s.direction,c=s.callback,p=s.callbackContext,m=s.tableContext||r,r=h(e).text().trim(),f=new g.SortableColumnViewModel(u,l||r,n,t,function(e){if(m&&m.sortableColumns){for(var t in m.sortableColumns)t!==e.property()&&m.sortableColumns[t].direction(null);c&&"function"==typeof c&&c.call(p||m,e)}});return m.sortableColumns||(m.sortableColumns={}),m.sortableColumns[n]=f,l&&(c?h(e).append(h('<a href="#" class="sortlink" role="button"></a>').text(l)):h(e).append(h("<span></span>").text(l))),u&&d&&m.toggleableColumnsContainer&&((i=m.toggleableColumnsContainer).toggleableColumns||(i.toggleableColumns=ko.observable({})),i.toggleableColumns()[u]=f,i.toggleableColumns.valueHasMutated(),h(e).addClass("toggleable-column"),(u=h('<a href="#" class="column-visibility-button" role="button">Hide</a>')).click(function(){return f.isVisible(!1),i.toggleableColumns.valueHasMutated(),i.saveState(),!1}),h(e).append(u)),l&&c&&(l=h("<i>").addClass("icon").attr("data-bind","css: {'icon-arrow-up': direction() === 'asc', 'icon-arrow-down': direction() === 'desc'}"),h(e).addClass("sortable").append(l).click(f.sort)),ko.applyBindingsToDescendants(f,e),{controlsDescendantBindings:!0}}}}(window.jQuery,window.app),function(e,i){"use strict";i.ToggleableColumnsContainer=function(e){this.storageKey=e},i.ToggleableColumnsContainer.prototype={storageKey:null,toggleableColumns:ko.observable({}),defaultHiddenColumnKeys:null,setDefaultHiddenColumnKeys:function(e){this.defaultHiddenColumnKeys=e},isColumnVisible:function(e){if(this.defaultHiddenColumnKeys&&-1!==this.defaultHiddenColumnKeys.indexOf(e))return!1;var t=this.toggleableColumns&&this.toggleableColumns();return!t||!t[e]||!0===t[e].isVisible()},getHiddenColumnKeys:function(){var o=[];return e.each(this.toggleableColumns(),function(e,t){!t.isVisible()&&t.key&&o.push(t.key)}),o},hiddenColumns:function(){var o=[];return e.each(this.toggleableColumns(),function(e,t){t&&"function"==typeof t.isVisible&&!t.isVisible()&&o.push(t)}),o},numberOfHiddenColumns:function(){return this.hiddenColumns().length},restoreHiddenColumns:function(){e.each(this.toggleableColumns(),function(e,t){t&&"function"==typeof t.isVisible&&t.isVisible(!0)}),this.saveState()},saveState:function(){this.storageKey&&i.page.appendToState(this.storageKey,{hiddenColumnKeys:this.getHiddenColumnKeys()})},loadState:function(){if(this.storageKey){var e=i.page.loadState(this.storageKey),t=e&&e.hiddenColumnKeys;if(t&&t.length){for(var o=this.toggleableColumns(),a=0;a<t.length;a++){var n=o[e.hiddenColumnKeys[a]];n&&n.isVisible(!1)}this.toggleableColumns.valueHasMutated()}}}}}(window.jQuery,window.app),function(e,p){"use strict";e.QuestionDependency=function(u){var l=this;l.questionById={},l.dependentQuestions=[],l.dependentChoicesByQuestionId={},l.questionsByDependentChoiceId={},l.appliedDependentChoicesByQuestionId={},l.hiddenQuestionIds={};function a(e){var t=l.questionsByDependentChoiceId[e];if(t&&0!==t.length)for(var o=0;o<t.length;o++){var a,n=t[o];l.appliedDependentChoicesByQuestionId[n]||(l.appliedDependentChoicesByQuestionId[n]=[]),-1<l.appliedDependentChoicesByQuestionId[n].indexOf(e)||(0===l.appliedDependentChoicesByQuestionId[n].length&&(u.getQuestionDiv(n).fadeIn(1e3),(a=l.questionById[n]).required()&&(a.validationEnabled=!0),l.hiddenQuestionIds[n]&&delete l.hiddenQuestionIds[n]),l.appliedDependentChoicesByQuestionId[n].push(e))}}function n(e){var t=l.questionsByDependentChoiceId[e];if(t&&0!==t.length)for(var o=0;o<t.length;o++){var a,n=t[o];l.appliedDependentChoicesByQuestionId[n]&&0!==l.appliedDependentChoicesByQuestionId[n].length&&(-1<(a=l.appliedDependentChoicesByQuestionId[n].indexOf(e))&&(l.appliedDependentChoicesByQuestionId[n].splice(a,1),0===l.appliedDependentChoicesByQuestionId[n].length&&(u.getQuestionDiv(n).fadeOut(1e3),l.hiddenQuestionIds[n]=!0,(n=l.questionById[n]).selectedChoiceIds([]),-1<l.dependentQuestions.indexOf(n)&&(n.required()&&(n.validationEnabled=!1),n.answer(null)))))}}function d(e,t){"added"===t.status?a(t.value):"deleted"===t.status&&n(t.value)}function c(e,t,o){n(o),a(t)}l.hasDependency=function(){return 0<l.dependentQuestions.length},l.isHidden=function(e){return l.hiddenQuestionIds[e]},l.loadQuestions=function(e){for(var t,o,a,n=0;n<e.length;n++)if(o=e[n],0<(l.questionById[o.id]=o).conditionQuestionChoiceIds.length)for(l.dependentChoicesByQuestionId[o.id]=o.conditionQuestionChoiceIds,t=0;t<o.conditionQuestionChoiceIds.length;t++)a=o.conditionQuestionChoiceIds[t],l.questionsByDependentChoiceId[a]||(l.questionsByDependentChoiceId[a]=[]),l.questionsByDependentChoiceId[a].push(o.id);for(n=0;n<e.length;n++)for(o=e[n],t=0;t<o.choices.length;t++)if(l.questionsByDependentChoiceId[o.choices[t].id]){l.dependentQuestions.push(o);break}},l.init=function(){for(var e in p.subscribeChoicesChanged(l.dependentQuestions,d),p.subscribeAnswerChanged(l.dependentQuestions,c),l.dependentChoicesByQuestionId)u.getQuestionDiv(e).hide(),l.hiddenQuestionIds[e]=!0;for(var t=0;t<l.dependentQuestions.length;t++){var o=l.dependentQuestions[t].selectedChoiceIds.peek();if(o)for(var a=0;a<o.length;a++){var n=o[a],i=l.questionsByDependentChoiceId[n];if(i)for(var r=0;r<i.length;r++){var s=i[r];l.appliedDependentChoicesByQuestionId[s]||(l.appliedDependentChoicesByQuestionId[s]=[]),0===l.appliedDependentChoicesByQuestionId[s].length&&(u.getQuestionDiv(s).show(),delete l.hiddenQuestionIds[s]),l.appliedDependentChoicesByQuestionId[s].push(n)}}}}}}(window.app,(window.jQuery,new window.app.QuestionService)),function(i,r,s){"use strict";r.Page=function(e,t){r.Page(e,t,null)},r.Page=function(e,t,o){var a=this;a.$element=i(e),null!=window.cmt3.conference?a.conference=window.cmt3.conference.name:a.conference=null,a.page=ko.observable(1),a.top=ko.observable(25),a.sort=ko.observable("FirstName"),a.controller=t,a.params=o,a.filters=[],a._total=ko.observable(0),a.selected=ko.observable(0),a.items=ko.observableArray(),a.listen(),a.Pager=ko.pager(a.selected,a.top),a.Pager().CurrentPage.subscribe(function(){a.page(a.Pager().CurrentPage()),a.show()})},r.Page.prototype={listen:function(){var e=this;i(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return i.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},setDefaultSort:function(e){this.sort(e)},show:function(){var a=this,e="&$orderby="+this.sort(),t=0!=this.top()?"&$top="+this.top():"",o=0!=this.skip()?"&$skip="+this.skip():"",n=""!=this.getFilter()?"&$filter="+encodeURIComponent(this.getFilter()):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata"+(null!=this.conference?"/"+this.conference+"/":"/")+a.controller+"?"+(null==a.params||null==a.params||""==a.params?"":a.params+"&")+"$count=true"+e+n+o+t,method:"GET"};return s.request(t,function(e){var t=e["@odata.count"],e=e.value,o=[];i.each(e,function(e,t){o.push(a.createItem(t))}),a.items(o),0==a._total()&&a._total(t),a.selected(t)})},createItem:function(e){alert("not implemented")},scroll:function(){i(window).scrollTop()==i(document).height()-i(window).height()&&self.show()},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){i.each(this.filters,function(e,t){t.reset()}),r.announce(r.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){i("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),i(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=i(t.target).attr("size"),t=parseInt(t);this.top(t),r.announce(r.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=i(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=i(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(i("th[data-sort]").each(function(){i(this).find("i").removeClass("icon-arrow-up"),i(this).find("i").removeClass("icon-arrow-down"),i(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&r.announce(r.narratorMessages.sortedBy.format(a,n))})}}}(window.jQuery,window.app,window.OData),function(i,r,o){i.EmailProgressViewModel=function(t,a){var n=this;n.totalCount=ko.observable(0),n.successCount=ko.observable(0),n.errorCount=ko.observable(0),n.progress=ko.computed(function(){return 0==n.totalCount()?0:((n.successCount()+n.errorCount())/n.totalCount()*100).toFixed(0)+"%"}),n.done=ko.observable(!1),n.showInDialog=function(e){n.totalCount(0),n.successCount(0),n.errorCount(0),n.done(!1),o(t).modal("show"),function t(o){var e={};e[a?"SessionIds":"SessionId"]=o;e={requestUri:i.odata.getUrl(i.odata.entitySet.emails,null,a?"GetBulkProgress":"GetProgress"),method:"POST",showProgressIndicator:!1,data:e};r.request(e,function(e){n.totalCount(e.TotalCount),n.successCount(e.SuccessCount),n.errorCount(e.ErrorCount),0<n.totalCount()&&n.successCount()+n.errorCount()==n.totalCount()?setTimeout(function(){n.done(!0)},i.settings.queryProgressDelay):setTimeout(function(){t(o)},i.settings.queryProgressDelay)},function(e){setTimeout(function(){t(o)},i.settings.queryProgressDelay)})}(e)},n.bind=function(){ko.applyBindings(n,t)}}}(window.app,window.OData,window.$),function(n,o){"use strict";o.DataTable=function(){var e=this;e.savedState=e.loadState(),e.total=ko.observable(0),e.page=ko.observable(e.savedState.page),e.top=ko.observable(e.savedState.top),e.skip=ko.computed(function(){return(e.page()-1)*e.top()}),e.pager=ko.pager(e.total,e.top),e.pager().CurrentPage(e.page()),e.pager().CurrentPage.subscribe(function(){e.page(e.pager().CurrentPage()),e.loadData()}),e.filters=[],e.sortableColumns={},e.toggleableColumnsContainer=new o.ToggleableColumnsContainer(e.getStorageKey()),e.sorting=ko.observable(e.savedState.sorting),n(document).on("data.filter",function(){e.pager().CurrentPage()<2?e.loadData():e.pager().CurrentPage(1)})},o.DataTable.prototype={getStorageKey:function(){return null},getDefaultSorting:function(){return null},getDefaultState:function(){return{page:1,top:25,sorting:this.getDefaultSorting(),filters:[]}},loadState:function(){var e;return sessionStorage&&(e=this.getStorageKey())&&JSON.parse(sessionStorage.getItem(e))||this.getDefaultState()},applyState:function(){var a=this;if(n.each(a.sortableColumns,function(e,t){t.property()!==a.savedState.sorting.property?t.direction(null):t.direction(a.savedState.sorting.direction)}),a.savedState&&a.savedState.sorting&&a.savedState.sorting.property&&a.sortableColumns&&a.sortableColumns[a.savedState.sorting.property])for(var e in a.sortableColumns)a.sortableColumns[e].direction(e!==a.savedState.sorting.property?null:a.savedState.sorting.direction);n.each(a.savedState.filters,function(e,o){n.each(a.filters,function(e,t){t.field===o.property&&t.setValue(o.value)})})},saveState:function(){var e,a,t,o=this;sessionStorage&&(e=o.getStorageKey())&&(a=[],n.each(o.filters,function(e,t){var o=t.getValue();o&&a.push({property:t.field,value:o})}),t={page:o.page(),top:o.top(),sorting:o.sorting(),filters:a},o=o.loadState(e),sessionStorage.setItem(e,JSON.stringify(n.extend({},o,t))))},size:function(e){this.top(e),o.announce(o.narratorMessages.showingNumberItemsPerPage.format(e||"all")),this.loadData()},sort:function(e){this.sorting({property:e.property(),direction:e.direction()}),this.loadData();var t=e.direction();!t||"asc"!==t&&"desc"!==t||o.announce(o.narratorMessages.sortedBy.format(e.title,t+="ending"))},resetFilters:function(){n.each(this.filters,function(e,t){t.reset()}),o.announce(o.narratorMessages.allFiltersCleared),this.pager().CurrentPage()<2?this.loadData():this.pager().CurrentPage(1)},refresh:function(){this.loadData()},loadData:function(){}}}(window.jQuery,window.app),function(s,h,g){"use strict";var v,w,b;function k(e){var i=this;i.userRoles=[],i.userTags=[];function t(e){var t={};if(e){for(var o,a=0;a<e.length;a++){var n=(n=t[e[a].Role])||[];null!==e[a].ObjectId&&"Track"===e[a].ObjectType&&n.push(e[a].ObjectId),t[e[a].Role]=n}for(o in w)t[o]&&i.userRoles.push(new u(w[o],t[o]))}}function o(){i.userTags=[];var e=i.userTagJson&&JSON.parse(i.userTagJson);if(e)for(var t=0;t<e.length;t++)i.userTags.push(h.autoMap(new h.UserTag,e[t]))}e?(i.id=e.Id,i.firstName=e.FirstName,i.middleInitial=e.MiddleInitial,i.lastName=e.LastName,i.email=e.Email,i.organization=e.Organization,i.country=e.Country,i.lastLoginDate=e.LastLoginDate,i.lastVisitConference=e.LastVisitConference,i.isFederation=e.IsFederation,i.googleScholarId=e.GoogleScholarId,i.semanticScholarId=e.SemanticScholarId,i.dblpId=e.DblpId,i.openReviewId=e.OpenReviewId,i.externalProfileEntered=e.ExternalProfileEntered,i.conflictDomainsEntered=e.ConflictDomainsEntered,i.individualConflictsEntered=e.IndividualConflictsEntered,i.individualConflictsAttested=e.IndividualConflictsAttested,i.userInformationEntered=e.UserInformationEntered,i.userTagJson=e.UserTagJson,i.enabled=e.Enabled,t(e.Permissions),o()):(i.id=h.autoMap(),i.firstName=h.autoMap(),i.middleInitial=h.autoMap(),i.lastName=h.autoMap(),i.email=h.autoMap(),i.organization=h.autoMap(),i.country=h.autoMap(),i.lastLoginDate=h.autoMap(),i.lastVisitConference=h.autoMap(),i.isFederation=h.autoMap(),i.googleScholarId=h.autoMap(),i.semanticScholarId=h.autoMap(),i.dblpId=h.autoMap(),i.openReviewId=h.autoMap(),i.externalProfileEntered=h.autoMap(),i.conflictDomainsEntered=h.autoMap(),i.individualConflictsEntered=h.autoMap(),i.individualConflictsAttested=h.autoMap(),i.userInformationEntered=h.autoMap(),i.userTagJson=h.autoMap(),i.enabled=h.autoMap()),i.googleScholarUrl=function(){return h.enums.externalProfile.googleScholar.format(i.googleScholarId)},i.semanticScholarUrl=function(){return h.enums.externalProfile.semanticScholar.format(i.semanticScholarId)},i.dblpUrl=function(){return h.enums.externalProfile.dblp.format(i.dblpId)},i.openReviewUrl=function(){return h.enums.externalProfile.openReview.format(i.openReviewId)},i.individualConflictsEnteredText=ko.pureComputed(function(){return!0===i.individualConflictsEntered?"Yes":"No"}),i.individualConflictsAttestedText=ko.pureComputed(function(){return!0===i.individualConflictsAttested?"Yes":"No"}),i.userInformationEnteredText=ko.pureComputed(function(){return!0===i.userInformationEntered?"Yes":"No"}),i.readFromJson=function(e){return h.autoMap(i,e),e&&e.Permissions&&e.Permissions&&t(e.Permissions),o(),i},i.lastLoginDateFormatted=function(){return h.formatUndefinableDateTime(i.lastLoginDate)},i.lastVisitConferenceDateFormatted=function(){return i.lastVisitConference?h.formatUndefinableDateTime(i.lastVisitConference):"not available"},i.isReviewer=function(){var t=!1;return i.userRoles.forEach(function(e){t=t||e.role.name===h.enums.userRole.reviewer}),t},i.isMetaReviewer=function(){var t=!1;return i.userRoles.forEach(function(e){t=t||e.role.name===h.enums.userRole.metaReviewer}),t}}function u(e,t){var o=this;o.role=e,o.tracks=[];for(var a=0;a<t.length;a++)o.tracks.push(v[t[a]]);o.tracks.sort(r),o.showTrackCount=function(){return 0<o.tracks.length&&o.role.showTracks&&null===b}}function l(e,t){var o,a=this;for(o in a.role=e.role,a.tracks=ko.observableArray(),a.originalTrackIds=[],a.availableTracks=ko.observableArray(),v){for(var n=!0,i=0;i<e.tracks.length;i++)if(e.tracks[i]&&o===e.tracks[i].id.toString()){n=!1;break}n?a.availableTracks.push(v[o]):(a.tracks.push(v[o]),a.originalTrackIds.push(o))}a.addTrack=function(e){a.tracks.push(e),a.availableTracks.remove(e)},a.removeTrack=function(e){a.tracks.remove(e),0===a.tracks().length&&t(a),a.availableTracks.push(e),a.availableTracks.sort(r)},a.showTracks=function(){return a.role.showTracks&&(null===b||null!==b&&0<a.tracks().length)}}function M(o){var a=this;a.id=ko.observable().autoMap(),a.email=ko.observable().extend({required:!0,email:!0}).autoMap(),a.firstName=ko.observable().autoMap(),a.middleInitial=ko.observable().autoMap(),a.lastName=ko.observable().autoMap(),a.organization=ko.observable().autoMap(),a.isSearching=ko.observable(),a.searchedEmail=ko.observable();var n=null;a.userFound=ko.computed(function(){return 0<a.id()}),a.userNotFound=ko.computed(function(){return 0===a.id()}),a.search=function(){var e=ko.validation.group([a.email]);0<e().length?e.showAllMessages():(a.isSearching(!0),a.searchedEmail(a.email()),e={requestUri:h.odata.getGlobalUrl(h.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:a.searchedEmail()}},g.read(e,function(e){h.autoMap(a,e),a.isSearching(!1)},function(e){a.isSearching(!1),404===e.response.statusCode?a.id(0):g.defaultError(e)}))},a.addUser=function(){s(o).modal("hide");var e,t=new k;a.userFound()?(e={requestUri:h.odata.getUrl(h.odata.entitySet.users,null,"GetUserByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:a.searchedEmail()}},g.read(e,function(e){t.readFromJson(e),n.resolve(t)},function(e){404===e.response.statusCode?n.resolve(h.autoMap(t,a)):g.defaultError(e)})):((t=h.autoMap(t,{})).email=a.searchedEmail(),n.resolve(t))},a.bind=function(){ko.applyBindings(a,o)},a.editInDialog=function(){return a.id(null),a.email(""),a.email.isModified(!1),a.firstName(""),a.lastName(""),a.organization(""),a.searchedEmail(""),s(o).modal("show"),(n=s.Deferred()).promise()}}function S(n){var i=this;i.id=null,i.email=ko.observable().extend({required:!0,email:!0,maxLength:200}).autoMap(),i.firstName=ko.observable().extend({required:!0,maxLength:200}).autoMap(),i.middleInitial=ko.observable().extend({maxLength:10}).autoMap(),i.lastName=ko.observable().extend({required:!0,maxLength:200}).autoMap(),i.organization=ko.observable().extend({required:!0,maxLength:200}).autoMap(),i.createNew=ko.observable();var r=null;function c(e,t){return{Role:e,ObjectId:t,ObjectType:"Track"}}i.showTracks=function(){return null===b},i.userRoles=ko.observableArray(),i.originalRoleNames=[],i.availableRoles=ko.observableArray(),i.addRole=function(e){var t=new l(new u(e,[]),i.removeRole);null!==b&&e.showTracks&&t.addTrack(v[b.id]),i.userRoles.push(t),i.availableRoles.remove(e)},i.removeRole=function(e){i.userRoles.remove(e),i.availableRoles.push(e.role),i.availableRoles.sort(function(e,t){return e.name===t.name?0:e.name<t.name?-1:1})},i.editInDialog=function(e){for(var t in i.id=e.id,h.autoMap(i,e),i.createNew(!e.id),i.userRoles.removeAll(),i.availableRoles.removeAll(),i.originalRoleNames=[],w){for(var o=!0,a=0;a<e.userRoles.length;a++)if(t===e.userRoles[a].role.name){o=!1,i.userRoles.push(new l(e.userRoles[a],i.removeRole)),i.originalRoleNames.push(e.userRoles[a].role.name);break}o&&w[t].allowEdit&&i.availableRoles.push(w[t])}return s(n).modal("show"),(r=s.Deferred()).promise()},i.save=function(){var e=!0;i.createNew()&&(0<(t=ko.validation.group(i))().length&&(t.showAllMessages(),e=!1),0===i.userRoles().length&&(e=!1));for(var t,o=0;o<i.userRoles().length;o++){var a=i.userRoles()[o];if(a.showTracks()&&0===a.tracks().length){e=!1;break}}e&&(i.createNew()?(t=h.autoMap(i),t={requestUri:h.odata.getUrl(h.odata.entitySet.users),method:"POST",headers:{Prefer:"return-content"},data:t},g.request(t,function(e){i.id=e.Id})):s.Deferred().resolve().promise()).done(function(){var e=function(e,t){for(var o=[],a=0;a<e.length;a++){for(var n=!0,i=0;i<t.length;i++)if(e[a]===t[i].role.name){for(var r=function(e,t){for(var o=[],a=0;a<e.length;a++){for(var n=!0,i=0;i<t.length;i++)if(e[a]===t[i].id.toString()){n=!1;break}n&&o.push(e[a])}return o}(t[i].originalTrackIds,t[i].tracks()),s=0;s<r.length;s++)o.push(c(e[a],r[s]));n=!1;break}n&&o.push(c(e[a],null))}return o}(i.originalRoleNames,i.userRoles()),t=function(e,t){for(var o=[],a=0;a<t.length;a++){for(var n=!0,i=0;i<e.length;i++)if(e[i]===t[a].role.name){for(var r=d(t[a].originalTrackIds,t[a].tracks()),s=0;s<r.length;s++)o.push(c(e[i],r[s]));n=!1;break}if(n){var u=d([],t[a].tracks());if(0===u.length)o.push(c(t[a].role.name,null));else for(var l=0;l<u.length;l++)o.push(c(t[a].role.name,u[l]))}}return o;function d(e,t){for(var o=[],a=0;a<t.length;a++){for(var n=!0,i=0;i<e.length;i++)if(e[i]===t[a].id){n=!1;break}n&&o.push(t[a].id)}return o}}(i.originalRoleNames,i.userRoles());(0<e.length||0<t.length?(e={requestUri:h.odata.getUrl(h.odata.entitySet.users,i.id,"ModifyPermissions"),method:"POST",data:{Request:{Add:t,Remove:e}}},g.request(e,function(){})):s.Deferred().resolve().promise()).done(function(){s(n).modal("hide"),h.addMessage("User '{0} {1}' saved!".format(i.firstName(),i.lastName())),r&&r.resolve()})})},i.bind=function(){ko.applyBindings(i,n)}}function y(o,a){var n=this;n.userCount=ko.observable(0),n.filter=null,n.tag=ko.observable("").extend({required:!0}).extend({trackChanges:!0}),n.showValidationWarning=ko.observable(!1),n.submitEnabled=ko.computed(function(){return 0<n.userCount()}),n.deleteUserTag=function(){var e=!0,t=ko.validation.group(n,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e?(e={Filter:n.filter,Tag:n.tag()},e={requestUri:h.odata.getUrl(h.odata.entitySet.users,null,"BulkDeleteUserTag"),method:"POST",showProgressIndicator:!0,data:{Request:e}},g.request(e,function(e){a.show(),setTimeout(function(){h.addMessage("User tag has been removed from users.")},500),s(o).modal("hide")})):n.showValidationWarning(!0)},n.bind=function(){ko.applyBindings(n,o)},n.editInDialog=function(e,t){n.filter=e,n.userCount(t),s(o).modal("show")}}function I(t){var o=this,a=null;o.password=ko.observable("").extend({required:!0,minLength:10}).autoMap(),o.confirmPassword=ko.observable("").extend({required:!0,minLength:10,equal:{params:o.password,message:"Passwords must match."}}),o.resetPassword=function(){var e;a&&(0<(e=ko.validation.group(o))().length?e.showAllMessages():(e={requestUri:h.odata.getUrl("Users",a.id,"ResetPassword"),method:"POST",data:{Password:o.password()}},g.request(e,function(){s(t).modal("hide"),h.addMessage("Password for user {0} {1} was reset.".format(a.firstName,a.lastName))})))},o.bind=function(){ko.applyBindings(o,t)},o.editInDialog=function(e){o.password(""),o.password.isModified(!1),o.confirmPassword(""),o.confirmPassword.isModified(!1),a=e,s(t).modal("show")}}function r(e,t){return e.name===t.name?0:e.name<t.name?-1:1}h.UserPage=function(e,t,o,a,n,i,r,s){h.Page.call(this,e,t);var u=this,l=null,d=null,c=null;v=o||{},w=a||{},b=n||null,u.requireConflictDomains=i,u.requireIndividualConflict=r,u.requireUserInformation=s,u.isGlobal=ko.observable(void 0===window.cmt3.conference),u.users=ko.observableArray(),u.createItem=function(e){return new k(e)},u.edit=function(e){m(e)},u.addUser=function(){null===d&&(d=new M(document.getElementById("userSearchDialog"))).bind(),d.editInDialog().done(function(e){m(e)})},u.email=function(e,t){var o=h.GetEventFilter(t),t="/"+window.cmt3.conference.name+"/User/SendEmail";h.url.navigateTo(t,{filter:0<o.length?o:null})},u.importDomainConflicts=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportDomainConflicts";h.url.navigateTo(o)},u.importIndividualConflicts=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportIndividualConflicts";h.url.navigateTo(o)},u.importUserTags=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTags";h.url.navigateTo(o,{roleValue:1})},u.exportUserInformation=function(e,t){var o=h.GetEventFilter(t),t="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserInformation";h.page.post(t,{Filter:o})},u.exportAllRegisteredUsers=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportAllRegisteredUsers";h.page.post(o,null,"GET")},u.exportTabDelimited=function(e,t){var o=h.GetEventFilter(t),t="/api/odata/"+window.cmt3.conference.name+"/Users/ExportTabDelimited";h.page.post(t,{Filter:o})},u.impersonate=function(e){confirm("Are you sure to impersonate as {0} {1}?".format(e.firstName,e.lastName))&&(e={requestUri:h.odata.getUrl("Users",e.id,"Impersonate"),method:"POST"},g.request(e,function(e){h.odata.processRedirectResponse(e)}))},u.blockUser=function(t){var e;confirm("Are you sure to block user account {0} {1}?".format(t.firstName,t.lastName))&&(e={requestUri:h.odata.getUrl("Users",t.id,"Block"),method:"POST"},g.request(e,function(e){h.addMessage("User account {0} {1} has been successfully blocked.".format(t.firstName,t.lastName))}))},u.resetPassword=function(e){null===c&&(c=new I(document.getElementById("resetPasswordDialog"))).bind(),c.editInDialog(e)};var p=null;function m(e){null===l&&(l=new S(document.getElementById("editDialog"))).bind(),l.editInDialog(e).done(f)}function f(){u.show()}u.deleteUserTag=function(e,t){null===p&&(p=new y(document.getElementById("deleteUserTagDialog"),u)).bind(),p.editInDialog(e,t)},u.bulkDeleteIndividualConflicts=function(e,t){var o="/"+window.cmt3.conference.name+"/User/DeleteIndividualConflicts";h.url.navigateTo(o)},u.bulkDeleteUserTag=function(e,t){var o=t.target,o=ko.contextFor(o),t=h.GetEventFilter(t);u.deleteUserTag(t,o.$root.Pager().TotalItemCount())}},h.UserPage.prototype=Object.create(h.Page.prototype)}(window.jQuery,window.app,window.OData),function(a,n,t){"use strict";var i;function o(){var e=this;e.name=n.autoMap(),e.city=n.autoMap(),e.country=n.autoMap(),e.urlSegmentName=n.autoMap(),e.startDate=n.autoMap(),e.externalUrl=n.autoMap(),e.emailChairsUrl=ko.pureComputed(function(){return"/"+this.urlSegmentName+"/Email/Chairs"},e),e.startDateString=function(){return e.startDate.getMonth()+1+"/"+e.startDate.getDate()+"/"+e.startDate.getFullYear()},e.url=function(){return t.protocol+"//"+t.host+i.conferenceRoot.format(e.urlSegmentName)}}function r(e,t){return new n.ServerList({entitySet:{isGlobal:!0,entitySet:e},filter:t,localFilter:function(e,t){return t=t.toLowerCase(),-1<e.name.toLowerCase().indexOf(t)||-1<e.city.toLowerCase().indexOf(t)||-1<e.country.toLowerCase().indexOf(t)||-1<e.urlSegmentName.toLowerCase().indexOf(t)?e:null},itemConstructor:function(e){return n.autoMap(new o,e)},odataFilter:function(e){return"contains(tolower(Name),tolower('{0}')) or contains(tolower(City),tolower('{0}')) or contains(tolower(Country),tolower('{0}')) or contains(tolower(UrlSegmentName),tolower('{0}'))".format(n.odata.escapeParam(e))},odataOrderByFields:"EndDate desc"})}function s(e){var t=this;function o(e){return t.conferenceList.getItems(t.conferences,e).done(function(){t.showMore.updateCount(t.conferenceList.getTotalCount(),t.conferences().length)})}t.showAllConferences=e,t.conferences=ko.observableArray(),t.filterString=ko.observable("").extend({throttle:500}),t.filterString.subscribe(function(){o(1)}),t.showMore=new n.ShowMore(function(e){return t.conferenceList.addItems(t.conferences,e).done(function(){t.showMore.updateCount(t.conferenceList.getTotalCount(),t.conferences().length)})}),t.init=function(){var e=a.Deferred();return t.filterFunction=function(){return t.filterString()},t.initModel=function(){t.myConferencesTitle="My Conferences ({0})".format(t.myConferencesCount),t.allConferencesTitle="All Conferences",t.myConferences=ko.observable(!0),t.allConferences=ko.observable(!1),t.conferenceList=r(n.odata.entitySet.myConferences,t.filterFunction),t.myConferencesClick=function(){t.conferenceList=r(n.odata.entitySet.myConferences,t.filterFunction),t.myConferences(!0),t.allConferences(!1),o(1)},t.allConferencesClick=function(){t.conferenceList=r(n.odata.entitySet.conferences,t.filterFunction),t.myConferences(!1),t.allConferences(!0),o(1)},t.bindTo=function(e){ko.applyBindingsAndShow(t,e)},e.resolve()},t.conferenceList=r(n.odata.entitySet.myConferences,t.filterFunction),o(1).done(function(){t.myConferencesCount=t.conferenceList.getTotalCount(),t.initModel()}),e.promise()}}n.conferenceRecent=function(e,t,o){i=e;var a=new s(t);a.init().done(function(){a.bindTo(o)})}}(window.jQuery,window.app,window.location),function(p,m,f,h,g,v,a){"use strict";function t(e,t){this.value=e,this.caption=null==t?e:t}function w(e,t,o){var i=this;i.questions=ko.observableArray(),i.questionById={},i.dependentQuestions=[],i.dependentChoicesByQuestionId={},i.questionsByDependentChoiceId={},i.appliedDependentChoicesByQuestionId={},i.hiddenQuestionIds={},i.show=function(){i.questions([]),m.showProgress(),a.loadQuestionsDirect(t,o).done(function(e){var t,o,a,n;for(i.questions(e),t=0;t<e.length;t++)if(a=e[t],0<(i.questionById[a.id]=a).conditionQuestionChoiceIds.length)for(i.dependentChoicesByQuestionId[a.id]=a.conditionQuestionChoiceIds,o=0;o<a.conditionQuestionChoiceIds.length;o++)n=a.conditionQuestionChoiceIds[o],i.questionsByDependentChoiceId[n]||(i.questionsByDependentChoiceId[n]=[]),i.questionsByDependentChoiceId[n].push(a.id);for(t=0;t<e.length;t++)for(a=e[t],o=0;o<a.choices.length;o++)if(i.questionsByDependentChoiceId[a.choices[o].id]){i.dependentQuestions.push(a);break}}).done(function(){p(e).modal("show")}).always(m.hideProgress)},i.hide=function(){p(e).modal("hide"),i.questions([])}}function b(){var e=this;e.id=m.autoMap(),e.title=m.autoMap(),e.required=m.autoMap(),e.isLocked=m.autoMap(),e.visibleToAuthor=m.autoMap(),e.visibleToAuthorDuringFeedback=m.autoMap(),e.visibleToAuthorAfterNotification=m.autoMap(),e.visibleToReviewer=m.autoMap(),e.visibleToMetaReviewer=m.autoMap(),e.visibleToOtherReviewer=m.autoMap(),e.visibleToSeniorMetaReviewer=m.autoMap(),e.order=ko.observable().autoMap(),e.questionType=m.autoMap(),e.questionTypeName=m.autoMap(),e.optionsType=m.autoMap(),e.optionsTypeName=m.autoMap(),e.details=m.autoMap(),e.additionalInfo=m.autoMap(),e.choices=[],e.commentLength=m.autoMap()}function o(){this.id=m.autoMap(),this.name=m.autoMap()}function n(){this.id=m.autoMap(),this.name=m.autoMap()}function k(){this.id=m.autoMap(),this.text=m.autoMap(),this.value=m.autoMap()}function l(e,t){this.id=e.id,this.text=ko.observable(e.text).extend({required:!0}).autoMap(),this.value=ko.observable(null==e.value?"":e.value.toString()).extend({required:{onlyIf:function(){return t.questionType()==m.enums.questionType.optionsWithValue}},pattern:{params:/^-?\d{1,5}$/,message:"Value must be an interger."}}).autoMap()}function M(n,i,t){var r=this;r.tracks=ko.observableArray(),r.selectedTracks=ko.observableArray(),r.editInDialog=function(){f.read(m.odata.getUrl(m.odata.entitySet.tracks,{orderby:"Order"}),function(e){for(var t,o=[],a=0;a<e.value.length;a++)e.value[a].Id!=i&&(t=m.autoMap(new m.Track,e.value[a]),o.push(t));r.tracks(o),r.selectedTracks([]),p(n).modal("show")})},r.save=function(){var e;0!=r.selectedTracks().length&&((e=m.autoMap(r)).TrackId=i,e.ToTrackIds=r.selectedTracks(),e.FormType=t,e={requestUri:m.odata.getUrl(m.odata.entitySet.questions,null,"CopyQuestionsFromTrack"),method:"POST",data:{Request:e}},f.request(e,function(){p(n).modal("hide"),m.addMessage("Questions copied!")}))},r.bind=function(){ko.applyBindings(r,n)}}function S(i,r,e){var s=this;s.id=null,s.form=r,s.formType=e,s.title=ko.observable().extend({required:{onlyIf:function(){return s.form.formType===m.enums.formType.submission||s.form.formType===m.enums.formType.cameraready}}}).autoMap(),s.questionType=ko.observable().autoMap(),s.optionsType=ko.observable().autoMap(),s.required=ko.validatedObservable().autoMap(),s.isLocked=ko.validatedObservable().autoMap(),s.visibleToAuthor=ko.observable().autoMap(),s.visibleToAuthorDuringFeedback=ko.observable().autoMap(),s.visibleToAuthorAfterNotification=ko.observable().autoMap(),s.visibleToReviewer=ko.observable().autoMap(),s.visibleToMetaReviewer=ko.observable().autoMap(),s.visibleToOtherReviewer=ko.observable().autoMap(),s.visibleToSeniorMetaReviewer=ko.observable().autoMap(),s.order=ko.observable().autoMap(),s.details=ko.observable().extend({required:!0}).autoMap(),s.additionalInfo=ko.observable("").autoMap(),s.commentLength=ko.observable().autoMap(),s.commentLengthOptions=[new t(125),new t(500),new t(1e3),new t(2e3),new t(3e3),new t(4e3),new t(5e3),new t(6e3),new t(7e3),new t(8e3),new t(null,"Unlimited")],s.questionTypes=[],s.optionsTypes=[],s.createNew=ko.observable();var u=null;s.choices=ko.observableArray(),s.addChoice=function(){var e=new l(m.autoMap(new k,{}),s),t=new Number(0<s.choices().length?s.choices()[s.choices().length-1].value():null);e.value(isNaN(t)?null:(t+1).toString()),e.value.isModified(!1),s.choices.push(e),s.showChoicesValidationMessage(!1)},s.removeChoice=function(e){s.choices.remove(e)},s.showChoicesValidationMessage=ko.observable(!1),s.editInDialog=function(e){s.id=e.id,m.autoMap(s,e),s.showChoicesValidationMessage(!1),s.createNew(!e.id),s.createNew()&&(0<s.questionTypes.length&&s.questionType(s.questionTypes[0].id),0<s.optionsTypes.length&&s.optionsType(s.optionsTypes[0].id)),s.choices.removeAll();for(var t=0;t<e.choices.length;t++)s.choices.push(new l(e.choices[t],s));return p(i).modal("show"),(u=p.Deferred()).promise()},s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!0});if(0<t().length&&(t.showAllMessages(),e=!1),(s.questionType()===m.enums.questionType.options||s.questionType()===m.enums.questionType.optionsWithValue||s.questionType()===m.enums.questionType.optionsWithOther||s.questionType()===m.enums.questionType.optionsWithUserInput)&&s.choices().length<2&&(s.showChoicesValidationMessage(!0),e=!1),e){var o=m.autoMap(s);if(s.questionType()===m.enums.questionType.optionsWithOther&&(o.OptionsType=m.enums.optionsType.radioButtonList),s.createNew()?o.FormId=r.id:o.Id=s.id,o.Choices=[],s.questionType()===m.enums.questionType.options||s.questionType()===m.enums.questionType.optionsWithValue||s.questionType()===m.enums.questionType.optionsWithOther||s.questionType()===m.enums.questionType.optionsWithUserInput)for(var a=0;a<s.choices().length;a++){var n=m.autoMap(s.choices()[a]);s.questionType()===m.enums.questionType.options&&(n.Value=null),n.Order=a+1,n.Id=s.choices()[a].id,o.Choices.push(n)}e={requestUri:m.odata.getUrl(m.odata.entitySet.questions,s.createNew()?null:s.id),method:s.createNew()?"POST":"PUT",data:o};f.request(e,function(){p(i).modal("hide"),m.addMessage("Question '{0}' saved!".format(s.title()||s.details())),u&&u.resolve()},function(e){409===e.response.statusCode?m.addMessage("Choice(s) that you are trying to delete is being used by papers, please contact CMT.",null,"error"):f.defaultError(e)})}},s.bind=function(){return p.when(f.read(m.odata.getUrl(m.odata.entitySet.questionTypes),function(e){s.questionTypes=p.map(e.value,function(e){return m.autoMap(new o,e)})}),f.read(m.odata.getUrl(m.odata.entitySet.optionsTypes),function(e){s.optionsTypes=p.map(e.value,function(e){return m.autoMap(new n,e)})})).done(function(){s.formType===m.enums.formType.chairnote||s.formType===m.enums.formType.reviewernote||s.formType===m.enums.formType.metareviewernote||s.formType===m.enums.formType.seniormetareviewernote?s.questionTypes=s.questionTypes.filter(function(e){return e.id===m.enums.questionType.comment||e.id===m.enums.questionType.options}):s.formType===m.enums.formType.reproducibility?(s.questionTypes=s.questionTypes.filter(function(e){return e.id===m.enums.questionType.optionsWithUserInput}),s.optionsTypes=s.optionsTypes.filter(function(e){return e.id===m.enums.optionsType.checkboxList})):s.formType===m.enums.formType.userinformation?(s.questionTypes=s.questionTypes.filter(function(e){return e.id===m.enums.questionType.agreement||e.id===m.enums.questionType.comment||e.id===m.enums.questionType.options||e.id===m.enums.questionType.optionsWithOther}),s.optionsTypes=s.optionsTypes.filter(function(e){return e.id!==m.enums.optionsType.dropDown&&e.id!==m.enums.optionsType.listBox})):s.questionTypes=s.questionTypes.filter(function(e){return e.id!==m.enums.questionType.optionsWithUserInput&&e.id!==m.enums.questionType.optionsWithOther}),ko.applyBindings(s,i)})}}function i(t,e,o){var a=this,n=null,i=null,r=null,s=null;a.showMore=new m.ShowMore(function(e){return s.addItems(a.questions,e).done(function(){a.showMore.updateCount(s.getTotalCount(),a.questions().length)})}),a.questions=ko.observableArray(),a.filterString=ko.observable("").extend({throttle:500}),a.formType=t,a.preview=ko.observable(),a.showPreview=function(){var e=a.preview();e&&e.show()},a.delete=function(e){u(a,e,!1)};var u=function(o,a,e){(e||g("Are you sure you want to delete the question?"))&&(e={requestUri:m.odata.getUrl(m.odata.entitySet.questions,a.id),method:"DELETE"},f.request(e,function(){o.questions.remove(a),o.showMore.removeOne()},function(e){var t;409===e.response.statusCode?g("The question has submitted responses. Are you sure you want to delete the responses and the question?")&&(t={requestUri:m.odata.getUrl(m.odata.entitySet.questions,a.id,"DeleteQuestionResponses"),method:"POST"},OData.request(t,function(){u(o,a,!0)})):f.defaultError(e)}))};function l(e){n?n.editInDialog(e).done(c):(n=new S(h.getElementById("editDialog"),i,t)).bind().done(n.editInDialog(e).done(c))}function d(e){return s.getItems(a.questions,e).done(function(){a.showMore.updateCount(s.getTotalCount(),a.questions().length)})}function c(){s.clear(),d(a.questions().length<m.settings.pageSize?1:a.questions().length/m.settings.pageSize)}a.edit=function(e){l(e)},a.addQuestion=function(){var e=a.formType===m.enums.formType.review;l(m.autoMap(new b,{visibleToOtherReviewer:e,CommentLength:8e3,required:a.formType!==m.enums.formType.reproducibility}))},a.copyQuestions=function(){null===r&&(r=new M(document.getElementById("copyDialog"),e,t)).bind(),r.editInDialog()},a.filterString.subscribe(function(){d(1)}),a.swapQuestionsAndSave=function(t,o){var e={Id1:a.questions()[t].id,Id2:a.questions()[o].id},e={requestUri:m.odata.getUrl(m.odata.entitySet.questions,null,"SwapOrder"),method:"POST",data:{Request:e}};return f.request(e,function(){var e=a.questions()[t];a.questions()[t]=a.questions()[o],a.questions()[o]=e,e=a.questions()[t].order(),a.questions()[t].order(a.questions()[o].order()),a.questions()[o].order(e),a.questions.valueHasMutated()},function(e){f.defaultError(e)})},a.moveQuestionUp=function(e){e<=0||a.swapQuestionsAndSave(e,e-1).done(function(){m.announce(m.narratorMessages.movedUp.format("Question"))})},a.moveQuestionDown=function(e){e>=a.questions().length-1||a.swapQuestionsAndSave(e,e+1).done(function(){m.announce(m.narratorMessages.movedDown.format("Question"))})},a.bindTo=function(t){v.loadForm(a.formType,e).done(function(e){e&&(i=e,a.preview(new w(h.getElementById("previewDialog"),a.formType,i.id)),s=new m.ServerList({entitySet:m.odata.entitySet.questions,filter:function(){return a.filterString()},localFilter:function(e,t){return t=t.toLowerCase(),-1<e.title.toLowerCase().indexOf(t)||-1<e.details.toLowerCase().indexOf(t)?e:null},itemConstructor:function(e){for(var t=m.autoMap(new b,e),o=e.Choices,a=0;a<o.length;a++)t.choices.push(m.autoMap(new k,o[a]));return t},odataFilter:function(e){return"FormId eq {1} and (contains(tolower(Title),'{0}') or contains(tolower(Details),'{0}'))".format(e,i.id)},odataOrderByFields:"Order"}),d(1).done(function(){ko.applyBindingsAndShow(a,t),p(o?"#menuNotes":"#menuForms").addClass("in")}))})}}m.formQuestion=function(e,t,o){new i(e,t,o).bindTo("questionListForm")}}(window.jQuery,window.app,window.OData,window.document,window.confirm,new window.app.FormService,new window.app.QuestionService),function(h,g,v,w,b,k,M,S){"use strict";var y;function I(e,t,o,a,n){var i=this;i.id=e,i.title=t,i.trackId=o,i.trackName=a,i.isSingleTrackConference=n}function d(e,t,a,o,n,i,r,s){var u=this,l=new h.QuestionDependency(u);function d(){function e(){var e,t=w.stringify(M.getAnswersJson(u.questions));u.lastDraft!==t?((e=h.autoMap(u)).SubmissionId=u.submission.id,e.Id=u.draftId||0,e.Draft=t,e={requestUri:h.odata.getUrl(h.odata.entitySet.reviewDrafts),method:"POST",headers:{Prefer:"return-content"},showProgressIndicator:!1,data:e},g.request(e,function(e){u.draftId=e.Id,u.lastDraftErrorDate(null),u.lastDraftDate((new Date).toLocaleString()),u.lastDraft=t},function(){u.lastDraftErrorDate((new Date).toLocaleString())}).always(u.setAutoSaveTimer)):u.setAutoSaveTimer()}function o(e){if(u.files().length+e.length>u.settings.reviewMaxFileNumber)h.addMessage("You can upload up to {0} files only.".format(u.settings.reviewMaxFileNumber),null,"error");else{for(var t=[],o=0;o<u.files().length;o++)t[u.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return h.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*u.settings.reviewMaxFileSize)return h.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,u.settings.reviewMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=u.settings.reviewAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(h.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,u.settings.reviewAllowedFileTypes),null,"error"),!1)}(n,t)||(u.uploading(u.uploading()+1),(a=v.ajaxSettings.xhr()).open("POST",y.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):h.processXmlHttpRequestError(e.target),u.uploading(u.uploading()-1)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void h.processException(e)}t=h.autoMap(new h.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),u.files.push(t)}u.showFilesMinErrorMessage=ko.observable(!1),u.showFilesMaxErrorMessage=ko.observable(!1),u.questions=[],u.submittedAnswersJson=null,u.autoSaveTimerId=null,u.draftId=null,u.loadedDraftDate=ko.observable(),u.lastDraftDate=ko.observable(),u.lastDraftErrorDate=ko.observable(null),u.lastDraft=null,u.setAutoSaveTimer=function(){return u.autoSaveTimerId&&k(u.autoSaveTimerId),u.autoSaveTimerId=b(e,h.settings.autoSaveDelay),!0},u.revertDraft=function(){!function(){if(!u.draftId)return v.Deferred().resolve().promise();var e={requestUri:h.odata.getUrl(h.odata.entitySet.reviewDrafts,u.draftId),method:"DELETE",showProgressIndicator:!1};g.request(e,function(){u.draftId=null,u.lastDraftDate(null),u.lastDraftErrorDate(null),u.lastDraft=w.stringify(M.getAnswersJson(u.questions))})}(),null!=u.submittedAnswersJson&&(M.unsubscribeAnswerChanged(u.questions),M.setAnswersFromJson(u.questions,u.submittedAnswersJson),u.setAutoSaveTimer()),u.loadedDraftDate(null)},u.files=ko.observableArray(),u.removeFile=function(e){u.files.remove(e)},u.uploading=ko.observable(0),u.uploadFile=function(){var e=v('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},u.canUploadMoreFiles=ko.computed({read:function(){return 0==u.uploading()&&u.files().length<u.settings.reviewMaxFileNumber},deferEvaluation:!0}),u.xhrUploadSupported=function(){return S},u.fileUploadDragOver=function(e,t){u.canUploadMoreFiles()&&v(t.target).addClass("dragOver")},u.fileUploadDragLeave=function(e,t){u.canUploadMoreFiles()&&v(t.target).removeClass("dragOver")},u.fileUploadDrop=function(e,t){u.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),u.fileUploadDragLeave(e,t))},u.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},u.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},u.forceSave=function(){e()},u.save=function(){for(var e=!0,t=[],o=0;o<u.questions.length;o++){var a=u.questions[o];l.isHidden(a.id)||t.push(a)}var n=ko.validation.group(t,{deep:!0});if(0<n().length&&(n.showAllMessages(),e=!1),n=!0,u.files().length>u.settings.reviewMaxFileNumber&&(u.showFilesMaxErrorMessage(!0),n=!1),u.files().length<u.settings.reviewMinFileNumber&&(u.showFilesMinErrorMessage(!0),n=!1),e=!n?!1:e){var i=h.autoMap(u);i.SubmissionId=u.submission.id,u.createNew||(i.Id=u.id),i.Files=[];for(var r=0;r<u.files().length;r++)i.Files.push(u.files()[r].id);i.Answers=M.getAnswersJson(u.questions.filter(e=>!l.isHidden(e.id)));e={requestUri:h.odata.getUrl(h.odata.entitySet.reviews,u.createNew?null:u.id),method:u.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:i};g.request(e,function(){h.url.navigateTo(y.returnConsole)})}}}function c(){return v.Deferred(function(t){var e=h.odata.getUrl(h.odata.entitySet.reviewSettings,u.submission.trackId);g.read({requestUri:e,showProgressIndicator:!1},function(e){h.autoMap(u.settings,e),t.resolve()})}).promise()}function p(){return v.Deferred(function(t){M.loadQuestionsDirect(h.enums.formType.review,u.formId).done(function(e){u.questions=e,l.loadQuestions(e),t.resolve()})}).promise()}function m(o){return v.Deferred(function(t){var e=h.odata.getUrl(h.odata.entitySet.reviewDrafts,null,"GetBySubmissionIdAndReviewerId");g.read({requestUri:e,showProgressIndicator:!1,data:{SubmissionId:u.submission.id,ReviewerId:u.reviewerId},method:"POST"},function(e){if(!e)return o&&M.setAnswersFromJson(u.questions,o.Answers),void t.resolve(!1);u.loadedDraftDate(e.UpdateDate.toLocaleString()),u.draftId=e.Id;e=w.parse(e.Draft);M.setAnswersFromJson(u.questions,e),o&&(u.submittedAnswersJson=o.Answers),t.resolve(!0)},function(e){404===e.response.statusCode?(o&&M.setAnswersFromJson(u.questions,o.Answers),t.resolve(!1)):g.defaultError(e)})}).promise()}function f(){return v.Deferred(function(o){d(),v.when(v.Deferred(function(t){var e=h.odata.getUrl(h.odata.entitySet.reviews,u.id);g.read({requestUri:e,showProgressIndicator:!1},function(e){h.autoMap(u,e),t.resolve(e)})}).promise(),c(),p()).done(function(e){var t;v.when((t=e,v.Deferred(function(a){var e;0!=t.Files.length?(e=h.odata.getUrl(h.odata.entitySet.files,{filter:h.odata.buildContainsQuery("Id",t.Files)}),g.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(h.autoMap(new h.File,e.value[o]));u.files(t),a.resolve()})):a.resolve()}).promise()),m(e)).done(function(){o.resolve()})})}).promise()}u.id=e,u.formId=r,u.reviewerId=h.autoMap(),u.updateDate=h.autoMap(),u.settings={welcomeMessage:h.autoMap(),reviewMinFileNumber:h.autoMap(),reviewMaxFileNumber:h.autoMap(),reviewAllowedFileTypes:h.autoMap(),reviewMaxFileSize:h.autoMap()},u.submission=new I(t,o,n,i,s),u.createNew=!u.id,u.hasBranchingQuestions=function(){return l.hasDependency()},u.getQuestionDiv=function(e){return v("#rq_"+e)},u.bindTo=function(e){h.showProgress();var t,o=v.Deferred();u.createNew?(h.autoMap(u,{reviewerId:a}),t=v.Deferred(),d(),v.when(c(),p()).done(function(){m(null).done(function(){t.resolve()})})):t=f(),t.promise().done(function(){ko.applyBindingsAndShow(u,e),l.init(),u.lastDraft=w.stringify(M.getAnswersJson(u.questions)),u.setAutoSaveTimer(),o.resolve()}),o.always(h.hideProgress)}}h.reviewDetails=function(e,t,o,a,n,i,r,s,u,l){y=u,new d(e,t,o,a,n,i,r,s).bindTo(l)}}(window.app,window.OData,window.jQuery,window.JSON,window.setTimeout,window.clearTimeout,new window.app.QuestionService,null!=window.FileReader),function(s,t,o){"use strict";function a(e){var r=this;r.id=e,r.trackName=s.autoMap(),r.submissionTitle=s.autoMap(),r.submissionId=s.autoMap(),r.isSingleTrackConference=s.autoMap(),r.questions=[],r.files=[],r.print=function(){o()},r.bindTo=function(e){t.read(s.odata.getUrl(s.odata.entitySet.reviewViews,r.id),function(e){s.autoMap(r,e);for(var t=0;t<e.Questions.length;t++){for(var o=e.Questions[t],a=s.autoMap(new s.Question,o),n=0;n<o.Answers.length;n++)a.answers.push(s.autoMap(new s.QuestionAnswer,o.Answers[n]));r.questions.push(a)}for(t=0;t<e.Files.length;t++){var i=e.Files[t],i=s.autoMap(new s.File,i);r.files.push(i)}}).done(function(){ko.applyBindingsAndShow(r,e)})}}s.reviewView=function(e){new a(e).bindTo("reviewForm")}}(window.app,window.OData,window.print),function(r,a,t){"use strict";function s(){this.order=r.autoMap(),this.details=r.autoMap(),this.answers=[]}function u(){this.text=r.autoMap(),this.value=r.autoMap()}function n(o,e){var i=this;i.id=e,i.trackName=r.autoMap(),i.submissionTitle=r.autoMap(),i.submissionId=r.autoMap(),i.isSingleTrackConference=r.autoMap(),i.questions=[],i.print=function(){t()},i.bindTo=function(e){var t;o===r.enums.noteType.reviewer?t=r.odata.entitySet.reviewerNoteViews:o===r.enums.noteType.metaReviewer?t=r.odata.entitySet.metaReviewerNoteViews:o===r.enums.noteType.seniorMetaReviewer&&(t=r.odata.entitySet.seniorMetaReviewerNoteViews),a.read(r.odata.getUrl(t,i.id),function(e){r.autoMap(i,e);for(var t=0;t<e.Questions.length;t++){for(var o=e.Questions[t],a=r.autoMap(new s,o),n=0;n<o.Answers.length;n++)a.answers.push(r.autoMap(new u,o.Answers[n]));i.questions.push(a)}}).done(function(){ko.applyBindingsAndShow(i,e)})}}r.noteView=function(e,t,o){new n(e,t).bindTo(o)}}(window.app,window.OData,window.print),function(s,t,o){"use strict";function a(e){var r=this;r.tracks=ko.observableArray(),r.selectedTrackId=ko.observable(e),r.isTrackChair=ko.observable(!1),r.trackChanged=function(e,t){t=t.target.parentNode.parentNode,t=$(t).find("li[class|='active']");0===t.length?s.url.navigateTo("/"+window.cmt3.conference.name+"/Settings/Index"):"conference"!==((t=t[0].childNodes[0])&&t.attributes["data-section-scope"]&&t.attributes["data-section-scope"].value)&&t.click()},r.bindTo=function(e){$.when(t.read(s.odata.getUrl(s.odata.entitySet.tracks,{orderby:"Order"}),function(e){for(var t=[],o=r.selectedTrackId()||s.cookies.getValue("trackId"),a=!1,n=0;n<e.value.length;n++){var i=s.autoMap(new s.Track,e.value[n]);t.push(i),i.id===o&&(a=!0)}r.tracks(t),r.selectedTrackId(a?o:1===r.tracks().length?r.tracks()[0].id:null),r.selectedTrackId.subscribe(function(e){s.cookies.setValue("trackId",e,0,"/")})}),o.getCurrentRoleDescriptor().done(function(e){r.isTrackChair("TrackChair"===e.role)})).done(function(){ko.applyBindingsAndShow(r,e)})}}s.settingsMenu=function(e){new a(e).bindTo("leftMenu")}}(window.app,window.OData,new window.app.RoleService),function(d,c,p,m,f){"use strict";function h(){var e=this;e.id=c.autoMap(),e.name=c.autoMap(),e.parentSubjectAreaId=c.autoMap(),e.isChild=function(){return null!=e.parentSubjectAreaId},e.isVirtualRoot=function(){return null==e.id}}function g(n,i){var r=this;r.tracks=ko.observableArray(),r.selectedTracks=ko.observableArray(),r.editInDialog=function(){p.read(c.odata.getUrl(c.odata.entitySet.tracks,{orderby:"Order"}),function(e){for(var t,o=[],a=0;a<e.value.length;a++)e.value[a].Id!=i&&(t=c.autoMap(new c.Track,e.value[a]),o.push(t));r.tracks(o),r.selectedTracks([]),d(n).modal("show")})},r.save=function(){var e;0!=r.selectedTracks().length&&((e=c.autoMap(r)).TrackId=i,e.ToTrackIds=r.selectedTracks(),e={requestUri:c.odata.getUrl(c.odata.entitySet.subjectAreas,null,"CopySubjectAreasFromTrack"),method:"POST",data:{Request:e}},p.request(e,function(){d(n).modal("hide"),c.addMessage("Subject areas copied!")}))},r.bind=function(){ko.applyBindings(r,n)}}function v(t,o){var a=this;a.id=null,a.name=ko.observable().extend({required:!0}).autoMap(),a.parentSubjectAreaId=ko.observable(),a.createNew=ko.observable();var n=null;a.editInDialog=function(e){return a.id=e.id,c.autoMap(a,e),a.parentSubjectAreaId(e.parentSubjectAreaId),a.createNew(null==e.id),d(t).modal("show"),(n=d.Deferred()).promise()},a.save=function(){var e=ko.validation.group(a);0<e().length?e.showAllMessages():((e=c.autoMap(a)).TrackId=o,a.createNew()?e.ParentSubjectAreaId=a.parentSubjectAreaId():e.Id=a.id,e={requestUri:c.odata.getUrl(c.odata.entitySet.subjectAreas,a.createNew()?null:a.id),method:a.createNew()?"POST":"PUT",data:e},p.request(e,function(){d(t).modal("hide"),c.addMessage("Subject area '{0}' saved!".format(a.name())),n&&n.resolve()}))},a.bind=function(){ko.applyBindings(a,t)}}function t(t){var n=this,o=null,e=null,a=new c.ServerList({entitySet:c.odata.entitySet.subjectAreas,filter:function(){return n.filterString().toLowerCase()},localFilter:function(e,t){return t=t.toLowerCase(),-1<e.name.toLowerCase().indexOf(t)?e:null},itemConstructor:function(e){return c.autoMap(new h,e)},odataFilter:function(e){return"TrackId eq "+t+" and contains(tolower(Name),'{0}')".format(c.odata.escapeParam(e))},odataOrderByFields:"FlatIndex"});n.showMore=new c.ShowMore(function(e){u(e,!0)}),n.subjectAreas=ko.observableArray(),n.filterString=ko.observable("").extend({throttle:500}),n.delete=function(e){i(n,e,!1)};var i=function(o,a,e){(e||f("Are you sure you want to delete the subject area?"))&&(e={requestUri:c.odata.getUrl(c.odata.entitySet.subjectAreas,a.id),method:"DELETE"},p.request(e,function(){n.subjectAreas.remove(a),n.showMore.removeOne()},function(e){var t;409===e.response.statusCode?f("The subject area has submitted responses. Are you sure you want to delete the responses and the subject area?")&&(t={requestUri:c.odata.getUrl(c.odata.entitySet.subjectAreas,a.id,"DeleteSubjectAreaResponses"),method:"POST"},OData.request(t,function(){i(o,a,!0)})):p.defaultError(e)}))};function r(e){null==o&&(o=new v(m.getElementById("editDialog"),t)).bind(),o.editInDialog(e).done(l)}n.edit=function(e){r(e)},n.addChild=function(e){r(c.autoMap(new h,{parentSubjectAreaId:e.id}))},n.addRoot=function(){r(c.autoMap(new h,{}))},n.copySubjectAreas=function(){null===e&&(e=new g(document.getElementById("copyDialog"),t)).bind(),e.editInDialog()},n.filterString.subscribe(function(){u(1)});var s=[];function u(e,t){return a[t?"addItems":"getItems"](s,e).done(function(){for(var e=!(0<s.length)||s[0].isChild()?null:s[0].id,t=0;t<s.length;t++){var o=s[t];!o.isChild()||null!=e&&e==o.parentSubjectAreaId||(s.splice(t,0,c.autoMap(new h,{name:""})),t++,e=o.parentSubjectAreaId),o.isChild()||(e=o.id)}n.subjectAreas(s),n.showMore.updateCount(a.getTotalCount(),n.subjectAreas().length)})}function l(){a.clear(),u(n.subjectAreas().length<c.settings.pageSize?1:n.subjectAreas().length/c.settings.pageSize)}n.bindTo=function(e){u(1).done(function(){ko.applyBindingsAndShow(n,e),d("#menuSiteFeatures").addClass("in")})}}c.settingsSubjectArea=function(e){new t(e).bindTo("subjectAreaListForm")}}(window.jQuery,window.app,window.OData,window.document,window.confirm),function(u,l,d){"use strict";function n(o,e,t){var a=this;a.allowAuthorToDeleteSubmisionAfterSubmissionDeadline=ko.observable(!1).autoMap(),a.allowOnlyPrimaryContactAuthorToDeleteSubmision=ko.observable(!1).autoMap(),a.showWelcomeInstructionOnAuthorConsole=ko.observable(!1).autoMap(),a.allowAuthorToSeeDeskRejectStatus=ko.observable(!1).autoMap(),a.allowAuthorToSeeReviewingDataForWithdrawn=ko.observable(!1).autoMap(),a.abstractAllowed=ko.observable(!1).autoMap(),a.abstractAllowed.subscribe(function(e){e||a.abstractRequired(!1)}),a.abstractMaxLength=ko.observable(0).autoMap(),a.abstractRequired=ko.observable(!1).autoMap(),a.disableCoAuthors=ko.observable(!1).autoMap(),a.editAuthorsNotAllowed=ko.observable(!1).autoMap(),a.editSubmissionFilesNotAllowed=ko.observable(!1).autoMap(),a.showSubmissionQuestionInConsole=ko.observable(!1).autoMap(),a.disableTitleInstruction=ko.observable(!1).autoMap(),a.titleMapping=ko.observable(null).autoMap(),a.fileUploadTitleMapping=ko.observable(null).autoMap(),a.showTipUnderFiles=ko.observable(!1).autoMap(),a.specialLayout=ko.observable(!1).autoMap(),a.submissionMinFileNumber=ko.observable(0).autoMap(),a.submissionMaxFileNumber=ko.observable(0).autoMap(),a.submissionAllowedFileTypes=ko.observable("").extend({required:!0,pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma seprated list."}}).autoMap(),a.submissionMaxFileSize=ko.observable(0).autoMap(),a.supplementaryAllowed=ko.observable(!1).autoMap(),a.supplementaryAllowedFileTypes=ko.observable("").extend({required:{onlyIf:function(){return a.supplementaryAllowed()}},pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma seprated list."}}).autoMap(),a.supplementaryMinFileNumber=ko.observable(0).autoMap(),a.supplementaryMaxFileNumber=ko.observable(0).autoMap(),a.supplementaryMaxFileSize=ko.observable(0).autoMap(),a.inplaceRevisionAllowed=ko.observable(!1).autoMap(),a.inplaceRevisionAllowedFileTypes=ko.observable("").extend({required:{onlyIf:function(){return a.inplaceRevisionAllowed()}},pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma seprated list."}}).autoMap(),a.inplaceRevisionMinFileNumber=ko.observable(0).autoMap(),a.inplaceRevisionMaxFileNumber=ko.observable(0).autoMap(),a.inplaceRevisionMaxFileSize=ko.observable(0).autoMap(),a.secondarySubjectAreaAllowed=ko.observable(!1).autoMap(),a.secondarySubjectAreaLimited=ko.observable(!1).autoMap(),a.secondarySubjectAreaMaxNumber=ko.observable(0).autoMap(),a.immediateParentSelectionAllowed=ko.observable(!1).autoMap(),a.showNoneOfTheAboveSubjectArea=ko.observable(!1).autoMap(),a.showNoneOfTheAboveSubjectArea.subscribe(function(e){e&&(a.customPrimarySubjectAreaAllowed(!1),a.customSecondarySubjectAreaAllowed(!1))}),a.customPrimarySubjectAreaAllowed=ko.observable(!1).autoMap(),a.customSecondarySubjectAreaAllowed=ko.observable(!1).autoMap(),a.externalReviewerMatchingRequirementRequired=ko.observable(!1).autoMap(),a.welcomeMessage=ko.observable("").extend({maxLength:l.settings.submissionWelcomeInstructionChars}).autoMap(),a.welcomeMessageCharsLeft=ko.computed(function(){return Math.max(l.settings.submissionWelcomeInstructionChars-a.welcomeMessage().length,0)}),a.instructionAfterSubmission=ko.observable(null).autoMap(),a.referenceAllowed=ko.observable(!1).autoMap(),a.referenceInstruction=ko.observable(null).autoMap(),a.referenceMinNumber=ko.observable(0).autoMap(),a.referenceMaxNumber=ko.observable(0).autoMap(),a.referenceAllowedFileTypes=ko.observable(null).autoMap(),a.referenceMinFileNumber=ko.observable(0).autoMap(),a.referenceMaxFileNumber=ko.observable(0).autoMap(),a.referenceMaxFileSize=ko.observable(0).autoMap(),a.numbers=ko.utils.range(0,10),a.possibleLengthes=[];for(var n=1;n<=10;n++)a.possibleLengthes.push(1e3*n);var i,r={};for(i in e)r[i.toLowerCase()]=e[i].map(function(e){return{value:e.Value,text:e.Text}});a.fileSizes=r;var s=null;a.copySettings=function(){null===s&&(s=new l.copyFeatureModel(document.getElementById(t),o,l.odata.entitySet.tracks,l.odata.entitySet.submissionSettings)).bind(),s.editInDialog()},a.save=function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;e=l.autoMap(a),e={requestUri:l.odata.getUrl(l.odata.entitySet.submissionSettings,o),method:"PUT",data:e};return d.request(e,function(){l.addMessage("Submission settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),u("#menuSiteFeatures").addClass("in")},d.read(l.odata.getUrl(l.odata.entitySet.submissionSettings,o),function(e){l.autoMap(a,e),t()})}}l.settingsSubmission=function(e,t,o,a){new n(e,t,a).bindTo(o)}}(window.jQuery,window.app,window.OData),function(s,u,l){"use strict";function n(o,e,t){var a=this;a.cameraReadySubmissionMinFileNumber=ko.observable(0).autoMap(),a.cameraReadySubmissionMaxFileNumber=ko.observable(0).autoMap(),a.cameraReadySubmissionAllowedFileTypes=ko.observable("").extend({required:!0,pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma seprated list."}}).autoMap(),a.cameraReadySubmissionMaxFileSize=ko.observable(0).autoMap(),a.registrationRequired=ko.observable(!1).autoMap(),a.publicationTitle=ko.observable("").autoMap(),a.publicationSourceCode=ko.observable("").extend({pattern:{params:/^[0-9]{5}$/,message:"Value must be 5 digits."}}).autoMap(),a.editCameraReadyAuthorsNotAllowed=ko.observable(!1).autoMap(),a.changeCameraReadyAuthorOrderAllowed=ko.observable(!1).autoMap(),a.allowMetaReviewerToViewCameraReady=ko.observable(!1).autoMap(),a.allowSeniorMetaReviewerToViewCameraReady=ko.observable(!1).autoMap(),a.requireReproducibilityCheckListForCameraReady=ko.observable(!1).autoMap(),a.welcomeMessage=ko.observable("").extend({maxLength:u.settings.submissionWelcomeInstructionChars}).autoMap(),a.welcomeMessageCharsLeft=ko.computed(function(){return Math.max(u.settings.submissionWelcomeInstructionChars-a.welcomeMessage().length,0)}),a.numbers=ko.utils.range(1,10);var n,i={};for(n in e)i[n.toLowerCase()]=e[n].map(function(e){return{value:e.Value,text:e.Text}});a.fileSizes=i;var r=null;a.copySettings=function(){null===r&&(r=new u.copyFeatureModel(document.getElementById(t),o,u.odata.entitySet.tracks,u.odata.entitySet.cameraReadySubmissionSettings)).bind(),r.editInDialog()},a.save=function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;e=u.autoMap(a),e={requestUri:u.odata.getUrl(u.odata.entitySet.cameraReadySubmissionSettings,o),method:"PATCH",data:e};return l.request(e,function(){u.addMessage("Camera Ready Submission settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),s("#menuSiteFeatures").addClass("in")},l.read(u.odata.getUrl(u.odata.entitySet.cameraReadySubmissionSettings,o),function(e){u.autoMap(a,e),t()})}}u.settingsCameraReadySubmission=function(e,t,o,a){new n(e,t,a).bindTo(o)}}(window.jQuery,window.app,window.OData),function(n,i,r){"use strict";function a(o,e){var a=this;a.disableReviewSnapshotDuringFeedback=ko.observable(0).autoMap(),a.requestAllPapersForFeedback=ko.observable(0).autoMap(),a.authorFeedbackMinFileNumber=ko.observable(0).autoMap(),a.authorFeedbackMaxFileNumber=ko.observable(0).autoMap(),a.authorFeedbackAllowedFileTypes=ko.observable("").extend({required:!0,pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma seprated list."}}).autoMap(),a.authorFeedbackMaxFileSize=ko.observable(0).autoMap(),a.visibleToReviewer=ko.observable(0).autoMap(),a.visibleToMetaReviewer=ko.observable(0).autoMap(),a.isAuthorFeedbackCommentingEnabled=ko.observable(0).autoMap(),a.authorFeedbackCommentMaxThreads=ko.observable(0).autoMap(),a.numbers=ko.utils.range(0,10),a.numberOfCommentThreads=ko.utils.range(1,5),a.fileSizes=[{value:1,text:"1 MB"},{value:3,text:"3 MB"},{value:5,text:"5 MB"},{value:10,text:"10 MB"},{value:20,text:"20 MB"},{value:50,text:"50 MB"},{value:100,text:"100 MB"}];var t=null;a.copySettings=function(){null===t&&(t=new i.copyFeatureModel(document.getElementById(e),o,i.odata.entitySet.tracks,i.odata.entitySet.authorFeedbackSettings)).bind(),t.editInDialog()},a.save=function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;e=i.autoMap(a),e={requestUri:i.odata.getUrl(i.odata.entitySet.authorFeedbackSettings,o),method:"PUT",data:e};return r.request(e,function(){i.addMessage("AuthorFeedback settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),n("#menuSiteFeatures").addClass("in")},r.read(i.odata.getUrl(i.odata.entitySet.authorFeedbackSettings,o),function(e){i.autoMap(a,e),t()})}}i.settingsAuthorFeedback=function(e,t,o){new a(e,o).bindTo(t)}}(window.jQuery,window.app,window.OData),function(n,i,r){"use strict";function a(o,e){var a=this;a.requireAuthorToMarkIndividualConflictWithPC=ko.observable().autoMap(),a.requirePCToMarkIndividualConflictWithAuthor=ko.observable().autoMap(),a.requirePCToMarkIndividualConflictWithPC=ko.observable().autoMap(),a.editIndividualConflictsNotAllowed=ko.observable().autoMap(),a.editConflictAllowed=ko.observable().autoMap(),a.disputeConflictAllowed=ko.observable().autoMap(),a.requireConflictDomains=ko.observable().autoMap(),a.editPersonalConflictDomainsNotAllowed=ko.observable().autoMap(),a.newPersonalConflictDomainsAllowed=ko.observable().autoMap(),a.newIndividualConflictsAllowed=ko.observable().autoMap(),a.requireSubmissionConflictDomains=ko.observable().autoMap(),a.enableDblpConflict=ko.observable().autoMap(),a.doNotComputeNewDblpConflicts=ko.observable().autoMap(),a.disableMetaReviewerGroupConflict=ko.observable().autoMap();var t=null;a.copySettings=function(){null===t&&(t=new i.copyFeatureModel(document.getElementById(e),o,i.odata.entitySet.tracks,i.odata.entitySet.conflictSettings)).bind(),t.editInDialog()},a.save=function(){var e=i.autoMap(a),e={requestUri:i.odata.getUrl(i.odata.entitySet.conflictSettings,o),method:"PATCH",data:e};return r.request(e,function(){i.addMessage("Conflict settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),n("#menuSiteFeatures").addClass("in")},r.read(i.odata.getUrl(i.odata.entitySet.conflictSettings,o),function(e){i.autoMap(a,e),t()})}}i.settingsConflict=function(e,t,o){new a(e,o).bindTo(t)}}(window.jQuery,window.app,window.OData),function(n,i,r){"use strict";function a(o,e){var a=this;a.reviewMinFileNumber=ko.observable(0).autoMap(),a.reviewMaxFileNumber=ko.observable(0).autoMap(),a.reviewAllowedFileTypes=ko.observable("").extend({required:!0,pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma seprated list."}}).autoMap(),a.reviewMaxFileSize=ko.observable(0).autoMap(),a.reviewFileVisibleToAuthor=ko.observable(!1).autoMap(),a.showReviewerIdentityToOtherReviewer=ko.observable(!1).autoMap(),a.allowReviewersToDiscussAllPapers=ko.observable(!1).autoMap(),a.allowReviewerToSeeReviewingDataOnlyAfterSubmitting=ko.observable(!1).autoMap(),a.allowReviewerToSeeReviewingDataAfterReviewing=ko.observable(!1).autoMap(),a.allowBiddingOnlyForSuggestedSubmissions=ko.observable(!1).autoMap(),a.notifyOtherReviewersForReviewUpdateDuringDiscussion=ko.observable(!1).autoMap(),a.notifyMetaReviewersForReviewUpdateDuringDiscussion=ko.observable(!1).autoMap(),a.allowReviewUpdateDuringDiscussion=ko.observable(!1).autoMap(),a.isBlind=ko.observable().autoMap(),a.enableAllPapersForDiscussion=ko.observable(!1).autoMap(),a.welcomeMessage=ko.observable("").extend({maxLength:i.settings.reviewWelcomeInstructionChars}).autoMap(),a.welcomeMessageCharsLeft=ko.pureComputed(function(){return Math.max(i.settings.reviewWelcomeInstructionChars-(null==this.welcomeMessage()?0:this.welcomeMessage().length),0)},a),a.enabledReviewAggregateColumn=ko.observable().autoMap(),a.allowInvitedReviewerToSetQuota=ko.observable().autoMap(),a.autopromoteToReviewer=ko.observable().autoMap(),a.reviewerInviteExpirationDays=ko.observable().extend({digit:!0,min:1}).autoMap(),a.maximumNumberOfEagerBidsForReviewer=ko.observable(null).extend({required:!1,digit:!0,min:0}).autoMap(),a.maximumNumberOfEagerBidsForReviewer.subscribe(function(e){""===e&&a.maximumNumberOfEagerBidsForReviewer(null)}),a.enableExternalReviewer=ko.observable().autoMap(),a.showExternalReviewerIdentityToOtherReviewer=ko.observable().autoMap(),a.allowReviewerToSeeStatusBeforeNotification=ko.observable().autoMap(),a.allowOnlyRevisionForReviewing=ko.observable().autoMap(),a.hideNonRevisionPapersDuringReviewing=ko.observable().autoMap(),a.showInlineReviewForMetaReviewer=ko.observable().autoMap(),a.showInlineReviewForSeniorMetaReviewer=ko.observable().autoMap(),a.requireReviewerSubjectArea=ko.observable().autoMap(),a.showOutOfQuotaReviewerDuringAssignment=ko.observable().autoMap(),a.doNotAllowReviewerToPostDiscussion=ko.observable().autoMap(),a.doNotAllowReviewerToEditNote=ko.observable().autoMap(),a.doNotEnableReviewerNote=ko.observable().autoMap(),a.hideDeskRejectPapersFromReviewer=ko.observable().autoMap(),a.hideWithdrawnPapersFromReviewer=ko.observable().autoMap(),a.allowReviewerToCompareSubmission=ko.observable().autoMap(),a.allowExternalReviewerToViewFeedback=ko.observable().autoMap(),a.allowChairToNotifyManualReviewAssignment=ko.observable().autoMap(),a.numbers=ko.utils.range(0,10),a.fileSizes=[{value:1,text:"1 MB"},{value:3,text:"3 MB"},{value:5,text:"5 MB"},{value:10,text:"10 MB"},{value:20,text:"20 MB"},{value:50,text:"50 MB"},{value:100,text:"100 MB"}];var t=null;a.copySettings=function(){null===t&&(t=new i.copyFeatureModel(document.getElementById(e),o,i.odata.entitySet.tracks,i.odata.entitySet.reviewSettings)).bind(),t.editInDialog()},a.save=function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;e=i.autoMap(a),e={requestUri:i.odata.getUrl(i.odata.entitySet.reviewSettings,o),method:"PATCH",data:e};return r.request(e,function(){i.addMessage("Review settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),n("#menuSiteFeatures").addClass("in")},r.read(i.odata.getUrl(i.odata.entitySet.reviewSettings,o),function(e){i.autoMap(a,e),t()})}}i.settingsReview=function(e,t,o){new a(e,o).bindTo(t)}}(window.jQuery,window.app,window.OData),function(l,d,c){"use strict";function p(e){this.Id=e.Id,this.Text=e.Text}function n(o,e,t){var a=this;a.metaReviewMinFileNumber=ko.observable(0).autoMap(),a.metaReviewMaxFileNumber=ko.observable(0).autoMap(),a.metaReviewAllowedFileTypes=ko.observable("").extend({required:!0,pattern:{params:/^ *(?:\w+(?: *, *[^$])?)+ *$/,message:"Value must be comma separated list."}}).autoMap(),a.metaReviewMaxFileSize=ko.observable(0).autoMap(),a.metaReviewFileVisibleToAuthor=ko.observable(!1).autoMap(),a.showMetaReviewerIdentityToReviewer=ko.observable(!1).autoMap(),a.showReviewerIdentityToMetaReviewer=ko.observable(!1).autoMap(),a.showMetaReviewerIdentityToOtherMetaReviewer=ko.observable(!1).autoMap(),a.showAuthorIdentityToMetaReviewerDuringBidding=ko.observable(!1).autoMap(),a.allowMetaReviewerToAssignSubmissionToReviewer=ko.observable(!0).autoMap(),a.allowMetaReviewerToAssignOnlyEmergencyReviewers=ko.observable(!0).autoMap(),a.allowMetaReviewerToNotifyReviewAssignment=ko.observable(!0).autoMap(),a.allowMetaReviewerToViewPaperStatus=ko.observable(!0).autoMap(),a.suggestionsEnabled=ko.observable(!0).autoMap(),a.editSuggestionNotAllowed=ko.observable(!0).autoMap(),a.isBlindToMetaReviewer=ko.observable().autoMap(),a.allowMetaReviewerToEnableDiscussion=ko.observable().autoMap(),a.allowMetaReviewerToEnableAuthorFeedback=ko.observable().autoMap(),a.allowMetaReviewerToInviteReviewers=ko.observable().autoMap(),a.allowMetaReviewerToAddReviewers=ko.observable().autoMap(),a.allowMetaReviewerToShareReviewer=ko.observable().autoMap(),a.allowMetaReviewerToSeeOtherMetaReview=ko.observable().autoMap(),a.allowMetaReviewerToEmailAuthor=ko.observable().autoMap(),a.allowMetaReviewerToRateReview=ko.observable().autoMap(),a.requireMetaReviewerSubjectArea=ko.observable().autoMap(),a.allowMetaBiddingOnlyForSuggestedSubmissions=ko.observable().autoMap(),a.includeConflictingReviewersInCandidateList=ko.observable().autoMap(),a.showInlineMetaReviewForMetaReviewer=ko.observable().autoMap(),a.showInlineMetaReviewForSeniorMetaReviewer=ko.observable().autoMap(),a.bccSeniorMetaReviewerWhenMetaReviewerEmailReviewer=ko.observable().autoMap(),a.showInlineMetaReviewerNoteForSeniorMetaReviewer=ko.observable().autoMap(),a.allowMetaReviewerToSeeReviewingDataAfterReviewing=ko.observable().autoMap(),a.hideDeskRejectPapersFromMetaReviewer=ko.observable().autoMap(),a.hideWithdrawnPapersFromMetaReviewer=ko.observable().autoMap(),a.doNotAllowMetaReviewerToEmailReviewer=ko.observable().autoMap(),a.doNotAllowMetaReviewerToEmailReviewerForDeskReject=ko.observable().autoMap(),a.doNotAllowMetaReviewerToEmailReviewerForWithdrawn=ko.observable().autoMap(),a.metaWelcomeMessage=ko.observable("").extend({maxLength:d.settings.metaReviewWelcomeInstructionChars}).autoMap(),a.metaWelcomeMessageCharsLeft=ko.pureComputed(function(){return Math.max(d.settings.metaReviewWelcomeInstructionChars-(null===this.metaWelcomeMessage()?0:this.metaWelcomeMessage().length),0)},a),a.enabledMetaReviewAggregateColumn=ko.observable().autoMap(),a.autopromoteToMetaReviewer=ko.observable().autoMap(),a.metaReviewerInviteExpirationDays=ko.observable().extend({digit:!0,min:1}).autoMap(),a.doNotAllowMetaReviewerToEditNote=ko.observable().autoMap(),a.doNotEnableMetaReviewerNote=ko.observable().autoMap(),a.doNotAllowSharedMetaReviewerToEditRecommendation=ko.observable().autoMap(),a.allowMetaReviewerToCompareSubmission=ko.observable().autoMap(),a.numbers=ko.utils.range(0,10),a.fileSizes=[{value:1,text:"1 MB"},{value:3,text:"3 MB"},{value:5,text:"5 MB"},{value:10,text:"10 MB"},{value:20,text:"20 MB"},{value:50,text:"50 MB"},{value:100,text:"100 MB"}],a.Attributes=ko.observableArray([]);var n=[{Id:"track-column",Text:"Track"},{Id:"subject-areas-column",Text:"Subject Area"},{Id:"suggestions-column",Text:"Suggestion"},{Id:"review-column",Text:"Review"},{Id:"reviewer-note-column",Text:"Reviewer Note"},{Id:"meta-reviewer-note-column",Text:"Meta-Reviewer Note"},{Id:"meta-review-column",Text:"Meta-Review"},{Id:"discussion-feedback-column",Text:"Discussion & Feedback"}];if(e)for(var i=0;i<e.length;i++){var r=e[i],s="question-"+(r.IsMeta?"MQ":"Q")+(r.Order<10?"0":"")+r.Order+"-column",r=(r.IsMeta?"[M] ":"[R] ")+(38<r.Title.length?r.Title.substring(0,35)+"...":r.Title);n.push({Id:s,Text:r})}a.availableAttributes=ko.observableArray([]),a.availableAttributes(ko.utils.arrayMap(n,function(e){return new p(e)}));var u=null;a.copySettings=function(){null===u&&(u=new d.copyFeatureModel(document.getElementById(t),o,d.odata.entitySet.tracks,d.odata.entitySet.metaReviewSettings)).bind(),u.editInDialog()},a.save=function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;e=d.autoMap(a);e.MetaReviewerConsoleDefaultHiddenColumns=a.Attributes().join(";");e={requestUri:d.odata.getUrl(d.odata.entitySet.metaReviewSettings,o),method:"PUT",data:e};return c.request(e,function(){d.addMessage("Meta-Review settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),l("#menuSiteFeatures").addClass("in")},c.read(d.odata.getUrl(d.odata.entitySet.metaReviewSettings,o),function(e){d.autoMap(a,e),a.Attributes((e.MetaReviewerConsoleDefaultHiddenColumns||"").split(";")),t()})}}d.settingsMetaReview=function(e,t,o,a){new n(e,t,a).bindTo(o)}}(window.jQuery,window.app,window.OData),function(l,d,c){"use strict";function p(e){this.Id=e.Id,this.Text=e.Text}function n(o,e,t){var a=this;a.requireSeniorMetaReviewerSubjectArea=ko.observable().autoMap(),a.isBlindToSeniorMetaReviewer=ko.observable().autoMap(),a.allowSeniorMetaReviewerToViewPaperStatus=ko.observable().autoMap(),a.allowSeniorMetaReviewerToChangePaperStatus=ko.observable().autoMap(),a.allowSeniorMetaReviewerToRateSubmission=ko.observable().autoMap(),a.allowSeniorMetaReviewerToEnterRatingComment=ko.observable().autoMap(),a.allowSeniorMetaReviewerToEmailAuthor=ko.observable().autoMap(),a.doNotAllowReviewerToEmailSeniorMetaReviewer=ko.observable().autoMap(),a.doNotAllowMetaReviewerToEmailSeniorMetaReviewer=ko.observable().autoMap(),a.assignSubmissionToSMRThroughMR=ko.observable().autoMap(),a.doNotUseSMRConflict=ko.observable().autoMap(),a.isInheritSMRConflictEnabled=ko.observable().autoMap(),a.doNotAllowSeniorMetaReviewerToEditNote=ko.observable().autoMap(),a.doNotEnableSeniorMetaReviewerNote=ko.observable().autoMap(),a.doNotAllowSeniorMetaReviewerToEditReviewAssignment=ko.observable().autoMap(),a.doNotAllowSeniorMetaReviewerToEditMetaReviewAssignment=ko.observable().autoMap(),a.doNotAllowSeniorMetaReviewerToEnableDiscussion=ko.observable().autoMap(),a.hideDeskRejectPapersFromSeniorMetaReviewer=ko.observable().autoMap(),a.hideWithdrawnPapersFromSeniorMetaReviewer=ko.observable().autoMap(),a.allowSeniorMetaReviewerToInviteReviewers=ko.observable().autoMap(),a.allowSeniorMetaReviewerToAddReviewers=ko.observable().autoMap(),a.allowSeniorMetaReviewerToReceiveDiscussionNotification=ko.observable().autoMap(),a.doNotAllowSeniorMetaReviewerToEditReview=ko.observable().autoMap(),a.doNotAllowSeniorMetaReviewerToEditMetaReview=ko.observable().autoMap(),a.showSeniorMetaReviewerIdentityToMetaReviewer=ko.observable().autoMap(),a.Attributes=ko.observableArray([]);var n=[{Id:"authors-column",Text:"Authors"},{Id:"track-column",Text:"Track"},{Id:"subject-areas-column",Text:"Subject Area"},{Id:"review-column",Text:"Review"},{Id:"reviewer-note-column",Text:"Reviewer Note"},{Id:"meta-review-column",Text:"Meta-Review"},{Id:"meta-reviewer-note-column",Text:"Meta-Reviewer Note"},{Id:"senior-meta-reviewer-note-column",Text:"Senior Meta-Reviewer Note"},{Id:"discussion-column",Text:"Discussion"},{Id:"author-feedback-requested-column",Text:"Author Feedback Requested"},{Id:"author-feedback-submitted-column",Text:"Author Feedback Submitted"},{Id:"status-column",Text:"Status"},{Id:"senior-reviewer-rating-column",Text:"Senior Meta-Reviewer Rating"},{Id:"review-rating-column",Text:"Review Rating"}];if(e)for(var i=0;i<e.length;i++){var r=e[i],s="question-"+(r.IsMeta?"MQ":"Q")+(r.Order<10?"0":"")+r.Order+"-column",r=(r.IsMeta?"[M] ":"[R] ")+(38<r.Title.length?r.Title.substring(0,35)+"...":r.Title);n.push({Id:s,Text:r})}a.availableAttributes=ko.observableArray([]),a.availableAttributes(ko.utils.arrayMap(n,function(e){return new p(e)}));var u=null;a.copySettings=function(){null===u&&(u=new d.copyFeatureModel(document.getElementById(t),o,d.odata.entitySet.tracks,d.odata.entitySet.seniorMetaReviewSettings)).bind(),u.editInDialog()},a.save=function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;e=d.autoMap(a);e.SeniorMetaReviewerConsoleDefaultHiddenColumns=a.Attributes().join(";");e={requestUri:d.odata.getUrl(d.odata.entitySet.seniorMetaReviewSettings,o),method:"PUT",data:e};return c.request(e,function(){d.addMessage("Senior Meta-Review settings have been saved!")}),!1},a.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(a,e),l("#menuSiteFeatures").addClass("in")},c.read(d.odata.getUrl(d.odata.entitySet.seniorMetaReviewSettings,o),function(e){d.autoMap(a,e),a.Attributes((e.SeniorMetaReviewerConsoleDefaultHiddenColumns||"").split(";")),t()})}}d.settingsSeniorMetaReview=function(e,t,o,a){new n(e,t,a).bindTo(o)}}(window.jQuery,window.app,window.OData),function(o,a,n){function i(t){var o=this;o.isEnabled=ko.observable().autoMap(),o.fileDepositOption=ko.observable().autoMap(),o.showAdditionalFields=ko.pureComputed(function(){return o.isEnabled()}),o.save=function(){var e={requestUri:a.odata.getUrl(a.odata.entitySet.iThenticateSettings,t),method:"PATCH",data:{IsEnabled:o.isEnabled(),FileDepositOption:o.fileDepositOption()}};return n.request(e,function(){a.addMessage("iThenticate settings have been saved!")}),!1},o.bindTo=function(e){n.read(a.odata.getUrl(a.odata.entitySet.iThenticateSettings,t),function(e){a.autoMap(o,e)}).done(function(){ko.applyBindingsAndShow(o,e)})}}a.settingsIThenticatePage=function(e,t){o("#menuSiteFeatures").addClass("in"),new i(e).bindTo(t)}}(window.jQuery,window.app,window.OData),function(d,r,l){"use strict";function s(e,o,t,a){var n,i=this,r=e;function s(){u(),n=i.isAssigned.subscribe(l)}function u(){n&&"function"==typeof n.dispose&&n.dispose()}function l(){void 0===i.initialState?i.initialState=i.isAssigned():function(){var t=this;t.isToggleInProgress(!0);var e={UserId:t.id};e.Type=t.isAssigned()?"Assign":"Remove",OData.request({requestUri:d.odata.getUrl(d.odata.entitySet.submissions,o,(t.isSenior?"Senior":"")+(t.isMeta?"MetaAssign":"Assign")),method:"POST",showProgressIndicator:!1,data:{Request:e}},function(){t.isAssigned()===t.initialState?i.css(""):(i.css(t.isAssigned()?"success":"error"),t.isAssigned()&&setTimeout(function(){r.notifyAssignment(t)},100))},function(e){u(),i.isAssigned(!i.isAssigned()),s(),d.addErrorMessage("Unable to edit assignment for '"+t.firstName+" "+t.lastName+"'. "+d.odata.getErrorMessage(e))}).always(function(){t.isToggleInProgress(!1)})}.call(i)}i.id=d.autoMap(),i.name=d.autoMap(),i.firstName=d.autoMap(),i.lastName=d.autoMap(),i.email=d.autoMap(),i.organization=d.autoMap(),i.primarySubjectArea=d.autoMap(),i.secondarySubjectAreas=d.autoMap(),i.hiddenNumber=d.autoMap(),i.bid=d.autoMap(),i.relevance=d.autoMap(),i.minSuggestionRank=d.autoMap(),i.suggestionsJson=d.autoMap(),i.tpmsRank=d.autoMap(),i.customAffinityRank=d.autoMap(),i.trackSubmissionCount=0,i.trackSubmissionQuota=null,i.conferenceSubmissionCount=0,i.isMeta=t,i.isSenior=a,i.userType=d.autoMap(),i.isAssigned=ko.observable().autoMap(),i.googleScholarId=d.autoMap(),i.semanticScholarId=d.autoMap(),i.dblpId=d.autoMap(),i.externalProfileEntered=d.autoMap(),i.isEmergency=d.autoMap(),i.isEmergencyText=ko.pureComputed(function(){return!0===i.isEmergency?"Yes":"No"}),i.googleScholarUrl=function(){return d.enums.externalProfile.googleScholar.format(i.googleScholarId)},i.semanticScholarUrl=function(){return d.enums.externalProfile.semanticScholar.format(i.semanticScholarId)},i.dblpUrl=function(){return d.enums.externalProfile.dblp.format(i.dblpId)},i.suggestions=function(){var e=[],t=i.suggestionsJson?JSON.parse(i.suggestionsJson):[];if(t&&0<t.length)for(var o=0;o<t.length;o++){var a=t[o];a&&e.push(new d.Suggestion(a))}return e},i.initialState=void 0,i.css=ko.observable(""),i.isToggleInProgress=ko.observable(!1),s()}function c(t,o){var a=this;a.userId=ko.observable(""),a.firstName=ko.observable(""),a.lastName=ko.observable(""),a.email=ko.observable(""),a.notifyAssignment=function(){var e={requestUri:d.odata.getUrl(d.odata.entitySet.submissions,o,"AssignNotify"),method:"POST",showProgressIndicator:!1,data:{UserId:a.userId()}};r.request(e,function(){$(t).modal("hide"),setTimeout(function(){d.addMessage("Notification has been sent to {0} {1}.".format(a.firstName(),a.lastName()))},300)})},a.bind=function(){ko.applyBindings(a,t)},a.editInDialog=function(e){a.userId(e.id),a.firstName(e.firstName),a.lastName(e.lastName),a.email(e.email),$(t).modal("show")}}function p(t,e,o,a,n,i,r){var s=this;s.submissionId=t,s.showAssignedOnly=ko.observable("false"),s.showAssignedOnly.subscribe(s.loadData,s),s.reviewers=ko.observableArray([]),s.isMeta=e,s.isSenior=o,s.isEmergencyOnly=a,s.userTypes=i,s.userTypesProvider=function(){return s.userTypes},s.customAffinityRankString=r&&r["Custom Affinity Rank"],s.customAffinityRankString||(s.customAffinityRankString="Custom Affinity Rank");var u=null;s.notifyAssignment=function(e){n&&(null===u&&(u=new c(l.getElementById("notifyNewAssignmentDialog"),t)).bind(),u.editInDialog(e))},d.DataTable.call(s)}function m(t){var o=this;o.id=t,o.trackId=ko.observable().autoMap(),o.trackName=ko.observable().autoMap(),o.title=ko.observable().autoMap(),o.isSingleTrackConference=ko.observable().autoMap(),o.primarySubjectAreas=ko.observableArray([]),o.secondarySubjectAreas=ko.observableArray([]),o.loadData=function(){var e=d.odata.getUrl(d.odata.entitySet.submissionViews,t,"GetSimpleView");return r.request({requestUri:e,showProgressIndicator:!1,method:"POST",headers:{"Content-Type":"application/json"}},function(e){d.autoMap(o,e),o.primarySubjectAreas(JSON.parse(e.PrimarySubjectAreas)),o.secondarySubjectAreas(JSON.parse(e.SecondarySubjectAreas))})}}function u(e,t,o,a,n,i,r,s){var u=this;d.showProgress(),u.submission=new m(e),u.table=new p(e,o,a,n,i,r,s),ko.applyBindings(u,l.getElementById(t)),$.when(u.table.loadData(!0),u.submission.loadData()).then(function(){$("#"+t).show()}).always(d.hideProgress)}p.prototype=$.extend({},d.DataTable.prototype,{getDefaultSorting:function(){return{property:"IsAssigned",direction:"desc"}},loadData:function(e){var i=this;(e=!0===e)&&i.applyState();var t=i.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=i.skip()?"&$skip="+i.skip():"",t=i.top()?"&$top="+i.top():"",n="";$.each(i.filters,function(e,t){t.getValue()&&(n+=n?" and "+t.getValue():t.getValue())}),"true"===i.showAssignedOnly()?n+=(n?" and":"")+" IsAssigned eq true":i.isEmergencyOnly&&(n+=(n?" and":"")+" (IsAssigned eq true or IsEmergency eq true)");n=n&&"&$filter="+encodeURIComponent(n),e={method:"GET",headers:{Accept:"application/json"},requestUri:d.odata.getUrl(d.odata.entitySet.submissions,i.submissionId,(i.isSenior?"Senior":"")+(i.isMeta?"MetaReviewers":"Reviewers"))+"?$count=true"+n+o+a+t,showProgressIndicator:!e};return r.request(e,function(e){i.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],n=d.autoMap(new s(i,i.submissionId,i.isMeta,i.isSenior),a);n.trackSubmissionCount=a.TrackCount,n.trackSubmissionQuota=a.Quota,n.conferenceSubmissionCount=a.AllTracksCount,t.push(n)}i.reviewers(t),i.saveState()},function(e){d.addErrorMessage(d.odata.getErrorMessage(e))})}}),d.submissionAssignReviewers=function(e,t,o,a,n,i,r,s){new u(e,t,o,a,n,i,r,s)}}(window.app,window.OData,window.document),function(u,l,d,s){"use strict";function c(){this.id=u.autoMap(),this.name=u.autoMap(),this.description=u.autoMap()}function p(){this.id=u.autoMap(),this.markedBySystem=u.autoMap()}function m(e,a){var t,n=this;function i(){r(),t=n.isChecked.subscribe(o)}function r(){t&&"function"==typeof t.dispose&&t.dispose()}function o(){void 0===n.initialState?n.initialState=n.isChecked():function(){var e=this;e.isToggleInProgress(!0);var t={UserId:n.reviewer.id,ReasonId:n.id()};t.Type=e.isChecked()?"Add":"Remove";var o=d.Deferred(function(e){s.setTimeout(e.resolve,500)}),t=OData.request({requestUri:u.odata.getUrl(u.odata.entitySet.submissions,a,"ModifyConflict"),method:"POST",showProgressIndicator:!1,data:{Request:t}},function(){},function(e){r(),n.isChecked(!n.isChecked()),i(),u.addErrorMessage("Unable to edit conflict."+u.odata.getErrorMessage(e))});d.when(t,o).always(function(){e.isToggleInProgress(!1)})}.call(n)}n.reviewer=e,n.id=ko.observable().autoMap(),n.name=u.autoMap(),n.isChecked=ko.observable(),n.isMarkedBySystem=ko.observable(!1),n.enabled=ko.observable(!0),n.isAutoConflict=ko.computed(function(){return 100<=n.id()||n.isMarkedBySystem()}),n.isEnabled=ko.computed(function(){return n.enabled()&&!n.isAutoConflict()}),n.initialState=void 0,n.isToggleInProgress=ko.observable(!1),i()}function f(n,i){var r=this;r.id=u.autoMap(),r.firstName=u.autoMap(),r.lastName=u.autoMap(),r.email=u.autoMap(),r.organization=u.autoMap(),r.isEditingConflictsAllowed=u.autoMap(),r.hasConflicts=ko.pureComputed(function(){return 0<r.reviewerCheckedConflictReasons().length}),r.hasConflictsText=ko.pureComputed(function(){return r.hasConflicts().toYesNo()}),r.selectedConflictReasons={},r.reviewerConflictReasons=ko.pureComputed(function(){for(var e=[],t=0;t<i.length;t++){var o=u.autoMap(new m(r,n),i[t]),a=r.selectedConflictReasons[o.id()];a?(o.isChecked(!0),o.isMarkedBySystem(a.markedBySystem)):o.isChecked(!1),e.push(o)}return e}),r.reviewerCheckedConflictReasons=ko.pureComputed(function(){for(var e=[],t=r.reviewerConflictReasons(),o=0;o<t.length;o++)t[o].isChecked()&&e.push(t[o]);return e})}function h(e,o,t){var a=this;a.submissionId=e,a.showEmail=t,a.reviewers=ko.observableArray([]),a.conflictReasons=o,a.conflictReasonProvider=function(){var e=[""];if(o){for(var t=0;t<o.length;t++)e.push(o[t].name);return e}},u.DataTable.call(a)}function g(e,t,o,a,n,i,r){var s=this;s.id=e,s.trackId=o,s.trackName=a,s.title=t,s.isSingleTrackConference=n,s.instructionForSubmissionConflict=i,s.conflictReasons=[],s.conflictReasonsHash={},s.submissionConflictDataTable=new h(e,s.conflictReasons,r),s.returnTrue=function(){return!0},s.bindTo=function(e){var t;u.showProgress(),d.when(s.submissionConflictDataTable.loadData(!0),(t={requestUri:u.odata.getUrl(u.odata.entitySet.conflictReasons),method:"GET",headers:{"Content-Type":"application/json"},showProgressIndicator:!1},l.request(t,function(e){for(var t=0;t<e.value.length;t++){var o=u.autoMap(new c,e.value[t]);s.conflictReasons.push(o),s.conflictReasonsHash[o.id]=o}}))).done(function(){ko.applyBindingsAndShow(s,e)}).always(u.hideProgress)}}h.prototype=d.extend({},u.DataTable.prototype,{getDefaultSorting:function(){return{property:"HasConflicts",direction:"desc"}},loadData:function(e){var s=this;(e=!0===e)&&s.applyState();var t=s.sorting(),o="FirstName"!==t.property?",FirstName asc":"",a=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction+o):"",t=s.skip()?"&$skip="+s.skip():"",o=s.top()?"&$top="+s.top():"",n="";d.each(s.filters,function(e,t){t.getValue()&&(n+=n?" and "+t.getValue():t.getValue())});n=n&&"&$filter="+encodeURIComponent(n),e={method:"GET",headers:{Accept:"application/json"},requestUri:u.odata.getUrl(u.odata.entitySet.submissions,s.submissionId,"ConflictSelections")+"?$count=true"+n+a+t+o,showProgressIndicator:!e};return l.request(e,function(e){s.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],n=u.autoMap(new f(s.submissionId,s.conflictReasons),a);if(a.ConflictReasons)for(var i=0;i<a.ConflictReasons.length;i++){var r=a.ConflictReasons[i];n.selectedConflictReasons[r.Id]=u.autoMap(new p,r)}t.push(n)}s.reviewers(t),s.saveState()},function(e){u.addErrorMessage(u.odata.getErrorMessage(e))})}}),u.submissionConflict=function(e,t,o,a,n,i,r,s){0;r=u.cookies.getValue(".ROLE");new g(e,t,o,a,n,i,"Chair"===r||"TrackChair"===r||"SeniorMetaReviewer"===r).bindTo(s)}}(window.app,window.OData,window.jQuery,window),function(S,w,b,k,y,I,T){"use strict";var R;function C(){var e=this;e.userId=S.autoMap(),e.authorId=S.autoMap(),e.email=S.autoMap(),e.firstName=S.autoMap(),e.lastName=S.autoMap(),e.organization=S.autoMap(),e.countryCode=S.autoMap(),e.countryName=S.autoMap(),e.isPrimary=S.autoMap(),e.fullName=ko.pureComputed(function(){return e.firstName+" "+e.lastName})}function A(e){var t=this;t.email=ko.observable().extend({email:!0,required:!0,validation:{validator:function(e,t){for(var o=0;o<t.length;o++)if(t[o].email===e)return!1;return!0},message:"Author with the same email already exists.",params:e}}),t.isEmailInvalid=ko.observable(!1),t.firstName=ko.observable().extend({required:{message:"First Name is required."},maxLength:200}),t.lastName=ko.observable().extend({required:{message:"Last Name is required."},maxLength:200}),t.organization=ko.observable().extend({required:{message:"Organization is required."},maxLength:200}),t.availableCountries=ko.observable(S.countries.getCountries()),t.countryCode=ko.observable().extend({required:{message:"Country is required."}}),t.isSearching=ko.observable(!1),t.notFound=ko.observable(!1),t.cancelAdd=function(){t.email(""),t.email.isModified(!1),t.firstName(""),t.firstName.isModified(!1),t.lastName(""),t.lastName.isModified(!1),t.organization(""),t.organization.isModified(!1),t.countryCode(void 0),t.countryCode.isModified(!1),t.notFound(!1),t.isEmailInvalid(!1)}}function N(){var e=this;e.id=S.autoMap(),e.name=S.autoMap(),e.parentSubjectAreaId=S.autoMap(),e.isChild=function(){return null!==e.parentSubjectAreaId},e.isPrimary=ko.observable(),e.isSecondary=ko.observable(),e.checkBoxId=function(){return"primary"+e.id},e.allowParentSelection=!0,e.specialType=null,e.customValue=ko.observable(null).extend({required:{onlyIf:function(){return e.isPrimary()||e.isSecondary()}}})}function E(){}function g(e,t,o,a,n,i,r,s,u,l,d,c,p,g,m){var M=this,v=new S.QuestionDependency(M);function f(){function o(e){if(M.files().length+e.length>M.settings.submissionMaxFileNumber)S.addMessage("You can upload up to {0} files only.".format(M.settings.submissionMaxFileNumber),null,"error");else{for(var t=[],o=0;o<M.files().length;o++)t[M.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return S.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*M.settings.submissionMaxFileSize)return S.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,M.settings.submissionMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=M.settings.submissionAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()===a){i=!0;break}return!!i||(S.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,M.settings.submissionAllowedFileTypes),null,"error"),!1)}(n,t)||(M.uploading(M.uploading()+1),(a=b.ajaxSettings.xhr()).open("POST",R.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200===e.target.status?i(e.target.responseText):S.processXmlHttpRequestError(e.target),M.uploading(M.uploading()-1)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void S.processException(e)}t=S.autoMap(new S.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),M.files.push(t)}M.title=ko.observable().extend({required:!0,maxLength:1e3}).autoMap(),M.abstract=ko.observable("").extend({required:{onlyIf:function(){return M.settings.abstractAllowed&&M.settings.abstractRequired}},maxLength:M.settings.abstractMaxLength}).autoMap(),M.abstractCharsLeft=ko.computed(function(){return Math.max(M.settings.abstractMaxLength-M.abstract().length,0)}),M.statusId=S.autoMap(),M.submissionListUrl=null,M.authorizeSendingSubmissionToTpms=ko.observable().extend({requiredCheckbox:{message:"Your agreement is required.",onlyIf:function(){return M.trackSettings.isTpmsEnabled}}}).autoMap(),M.authorizeSendingSubmissionToIThenticate=ko.observable().extend({requiredCheckbox:{message:"Your agreement is required.",onlyIf:function(){return M.trackSettings.isIThenticateEnabled}}}).autoMap(),M.submissionConflictDomainsRaw=ko.observable().extend({required:{message:"Domain conflicts are required.",onlyIf:function(){return M.trackSettings.isSubmissionConflictDomainsRequired}}}).autoMap(),M.showPrimaryAuthorErrorMessage=ko.observable(!1),M.showFilesMaxErrorMessage=ko.observable(!1),M.showReferencesMinErrorMessage=ko.observable(!1),M.showReferencesMaxErrorMessage=ko.observable(!1),M.removeAuthor=function(e){M.authors.remove(e)},M.moveAuthorUp=function(e){var t=M.authors.indexOf(e);M.authors.remove(e),M.authors.splice(t-1,0,e)},M.moveAuthorDown=function(e){var t=M.authors.indexOf(e);M.authors.remove(e),M.authors.splice(t+1,0,e)},M.addAuthor=function(e){var t=ko.validation.group([e.email,e.firstName,e.lastName,e.organization,e.countryCode]);if(0<t().length)return t.showAllMessages(),void e.isEmailInvalid(!e.email.isValid());t=S.autoMap(new C,{isPrimary:!1,email:e.email(),firstName:e.firstName(),lastName:e.lastName(),organization:e.organization(),countryCode:e.countryCode(),countryName:S.countries.getCountryNameByCode(e.countryCode())});M.authors.push(t),1===M.authors().length&&(M.primaryEmail(t.email),M.showPrimaryAuthorErrorMessage(!1)),e.cancelAdd()},M.newAuthor=new A(M.authors),M.searchAuthorByEmail=function(o){var e=ko.validation.group([o.email]);if(0<e().length)return o.isEmailInvalid(!0),void e.showAllMessages();o.isEmailInvalid(!1),o.isSearching(!0),e=M.trackSettings.userInformationEntryRequiredForCoAuthor?{requestUri:S.odata.getUrl(S.odata.entitySet.users,null,"GetUserWithUserInformationEntered"),method:"POST",showProgressIndicator:!1,data:{Email:o.email(),TrackId:M.trackId}}:{requestUri:S.odata.getGlobalUrl(S.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.email()}},w.read(e,function(e){var t=S.autoMap(new C,e);t.userId=e.Id,M.authors.push(t),1===M.authors().length&&(M.primaryEmail(t.email),M.showPrimaryAuthorErrorMessage(!1)),o.cancelAdd(),o.isSearching(!1)},function(e){o.isSearching(!1),e.response.statusCode===S.enums.httpStatusCodes.failure.notFound?M.newAuthor.notFound(!0):w.defaultError(e)})},M.showConferenceRequestChairsErrorMessage=ko.observable(!1),M.removeChair=function(e){M.conferenceRequestChairs.remove(e),0===M.conferenceRequestChairs().length&&M.showConferenceRequestChairsErrorMessage(!0)},M.newConferenceRequestChair=new A(M.conferenceRequestChairs),M.searchConferenceRequestChairByEmail=function(o){var e=ko.validation.group([o.email]);if(0<e().length)return o.isEmailInvalid(!0),void e.showAllMessages();o.isEmailInvalid(!1),o.isSearching(!0);e={requestUri:S.odata.getGlobalUrl(S.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.email()}};w.read(e,function(e){var t=S.autoMap(new C,e);t.userId=e.Id,M.conferenceRequestChairs.push(t),0<M.conferenceRequestChairs().length&&M.showConferenceRequestChairsErrorMessage(!1),o.cancelAdd(),o.isSearching(!1)},function(e){o.isSearching(!1),e.response.statusCode===S.enums.httpStatusCodes.failure.notFound?M.newConferenceRequestChair.notFound(!0):w.defaultError(e)})},M.subjectAreas=[],M.subjectAreaPairs=function(){return S.computeSubjectAreaColumnPairs(M.subjectAreas)},M.showSubjectAreasErrorMessage=ko.observable(!1),M.subjectAreaSectionClassName=function(){return M.subjectAreas.length<40?"small-subjectarea-section":"large-subjectarea-section"},M.showValidationWarning=ko.observable(!1),M.references=ko.observableArray(),M.removeReference=function(e){M.references.remove(e)},M.addReference=function(e){var t=ko.validation.group([e.email,e.firstName,e.lastName,e.organization,e.countryCode]);if(0<t().length)return t.showAllMessages(),void e.isEmailInvalid(!e.email.isValid());t=S.autoMap(new C,{email:e.email(),firstName:e.firstName(),lastName:e.lastName(),organization:e.organization(),countryCode:e.countryCode(),countryName:S.countries.getCountryNameByCode(e.countryCode())});M.references.push(t),e.cancelAdd()},M.newReference=new A(M.references),M.searchReferenceByEmail=function(o){var e=ko.validation.group([o.email]);if(0<e().length)return o.isEmailInvalid(!0),void e.showAllMessages();o.isEmailInvalid(!1),o.isSearching(!0);e={requestUri:S.odata.getGlobalUrl(S.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.email()}};w.read(e,function(e){var t=S.autoMap(new C,e);t.userId=e.Id,M.references.push(t),o.cancelAdd(),o.isSearching(!1)},function(e){o.isSearching(!1),e.response.statusCode===S.enums.httpStatusCodes.failure.notFound?M.newReference.notFound(!0):w.defaultError(e)})},M.files=ko.observableArray(),M.removeFile=function(e){M.files.remove(e)},M.uploading=ko.observable(0),M.uploadFile=function(){var e=b('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},M.canUploadMoreFiles=ko.computed(function(){return 0===M.uploading()&&M.files().length<M.settings.submissionMaxFileNumber}),M.xhrUploadSupported=function(){return y},M.fileUploadDragOver=function(e,t){M.canUploadMoreFiles()&&b(t.target).addClass("dragOver")},M.fileUploadDragLeave=function(e,t){M.canUploadMoreFiles()&&b(t.target).removeClass("dragOver")},M.fileUploadDrop=function(e,t){M.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),M.fileUploadDragLeave(e,t))},M.uploadSingleFile=function(e,t){""!==t.target.value&&t.target.form.submit()},M.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},M.submissionQuestions=[],M.reproQuestions=[],M.save=function(){var e,t=!0,o=ko.validation.group(M,{deep:!1});0<o().length&&(o.showAllMessages(),t=!1),function(){var e=M.authors();if(M.isAuthorRole()&&!M.createNew&&M.settings.editAuthorsNotAllowed&&0===e.length)return 1;for(var t=!1,o=0;o<e.length;o++)if(e[o].email===M.primaryEmail()){t=!0;break}var a=!0;return t||(M.showPrimaryAuthorErrorMessage(!0),a=!1),a}()||(t=!1),function(){if(!g)return M.showConferenceRequestChairsErrorMessage(!1),1;var e=!1,t=["163.com","aol.com","arnet.com.ar","att.net","bellsouth.net","blueyonder.co.uk","bt.com","btinternet.com","charter.net","comcast.net","cox.net","daum.net","earthlink.net","email.com","fastmail.fm","fibertel.com.ar","free.fr","freeserve.co.uk","games.com","gmail.com","gmx.com","gmx.de","gmx.fr","gmx.net","googlemail.com","hanmail.net","hotmail.be","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.mx","hotmail.de","hotmail.es","hotmail.fr","hush.com","hushmail.com","icloud.com","inbox.com","juno.com","laposte.net","lavabit.com","list.ru","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.fr","love.com","mac.com","mail.com","mail.ru","me.com","msn.com","nate.com","naver.com","neuf.fr","ntlworld.com","o2.co.uk","online.de","orange.fr","orange.net","outlook.com","pobox.com","prodigy.net.mx","qq.com","rambler.ru","rocketmail.com","safe-mail.net","sbcglobal.net","sfr.fr","sina.com","sky.com","skynet.be","speedy.com.ar","talktalk.co.uk","telenet.be","tiscali.co.uk","t-online.de","tvcablenet.be","verizon.net","virgin.net","virginmedia.com","voo.be","wanadoo.co.uk","wanadoo.fr","web.de","wow.com","ya.ru","yahoo.co.id","yahoo.co.in","yahoo.co.jp","yahoo.co.kr","yahoo.co.uk","yahoo.com","yahoo.com.ar","yahoo.com.mx","yahoo.com.ph","yahoo.com.sg","yahoo.de","yahoo.fr","yandex.com","yandex.ru","ygm.com","ymail.com","zoho.com"];if(0<M.conferenceRequestChairs().length){for(var o=0,a=0;a<t.length;a++)for(var n=new RegExp("@"+t[a].replace(".",".")+"$","i"),i=0;i<M.conferenceRequestChairs().length;i++)n.test(M.conferenceRequestChairs()[i].email)&&o++;e=M.conferenceRequestChairs().length>o}return e||M.showConferenceRequestChairsErrorMessage(!0),e}()||(t=!1),function(){if(0===M.subjectAreas.length)return 1;for(var e=[],t=!1,o=0;o<M.subjectAreas.length;o++)"customPrimary"!==M.subjectAreas[o].specialType&&"customSecondary"!==M.subjectAreas[o].specialType||e.push(M.subjectAreas[o].customValue),M.subjectAreas[o].isPrimary()&&(t=!0);var a=!0,n=ko.validation.group(e);return 0<n().length&&(n.showAllMessages(),a=!1),t||(M.showSubjectAreasErrorMessage(!0),a=!1),a}()||(t=!1),M.settings.referenceAllowed&&(e=!0,M.references().length>M.settings.referenceMaxNumber&&(M.showReferencesMaxErrorMessage(!0),e=!1),M.references().length<M.settings.referenceMinNumber&&(M.showReferencesMinErrorMessage(!0),e=!1),!e)&&(t=!1),function(){if(M.isAuthorRole()&&!M.createNew&&M.settings.editSubmissionFilesNotAllowed&&0===M.files().length)return 1;var e=!0;return M.files().length>M.settings.submissionMaxFileNumber&&(M.showFilesMaxErrorMessage(!0),e=!1),e}()||(t=!1);for(var a=[],n=0;n<M.submissionQuestions.length;n++){var i=M.submissionQuestions[n];v.isHidden(i.id)||a.push(i)}0<(o=ko.validation.group(a,{deep:!0}))().length&&(o.showAllMessages(),t=!1);var r=[];for(n=0;n<M.reproQuestions.length;n++)for(var s=M.reproQuestions[n],u=0;u<s.choices.length;u++)r.push(s.choices[u]);o=ko.validation.group(r,{deep:!0});if(0<o().length&&(o.showAllMessages(),t=!1),t){var l=S.autoMap(M);M.createNew?(l.TrackId=M.trackId,l.StatusId=0):l.Id=M.id,l.SubjectAreas=[],l.NoneOfAboveSubjectArea=!1,l.CustomPrimarySubjectArea=null,l.CustomSecondarySubjectArea=null;for(u=0;u<M.subjectAreas.length;u++){var d,c=M.subjectAreas[u];(c.isPrimary()||c.isSecondary())&&(null===c.specialType?(d={SubjectAreaId:c.id,IsPrimary:c.isPrimary()},l.SubjectAreas.push(d)):"noneOfAbove"===c.specialType?l.NoneOfAboveSubjectArea=!0:"customPrimary"===c.specialType?l.CustomPrimarySubjectArea=c.customValue():"customSecondary"===c.specialType&&(l.CustomSecondarySubjectArea=c.customValue()))}if(l.Files=[],!M.isAuthorRole()||M.createNew||!M.settings.editSubmissionFilesNotAllowed)for(var p=0;p<M.files().length;p++)l.Files.push(M.files()[p].id);l.Answers=I.getAnswersJson(M.submissionQuestions.filter(e=>!v.isHidden(e.id))),l.ReproducibilityAnswers=I.getAnswersJson(M.reproQuestions);var m,f={},h=[];if(!M.isAuthorRole()||M.createNew||!M.settings.editAuthorsNotAllowed)for(n=0;n<M.authors().length;n++)(m=M.authors()[n]).userId||m.authorId||h.push(function(t){var e=S.autoMap(t);delete e.UserId,delete e.AuthorId,delete e.IsPrimary;e={requestUri:S.odata.getUrl(S.odata.entitySet.users,null,"AddCoAuthor"),method:"POST",data:{Request:e}};return w.request(e,function(e){f[t.email]=e.value},function(e){var t;e.response.statusCode==S.enums.httpStatusCodes.failure.conflict?S.addMessage(t,"Please click Cancel and use the email box to select author.","error"):e.response.statusCode==S.enums.httpStatusCodes.failure.badRequest?(t=S.getODataErrorMessage(e).message,S.addMessage(t,"Author information invalid:","error")):w.defaultError(e)})}(m));b.when.apply(b,h).done(function(){var e;if(l.Authors=[],l.ConferenceRequestChairs=[],l.References=[],!M.isAuthorRole()||M.createNew||!M.settings.editAuthorsNotAllowed)for(e=0;e<M.authors().length;e++){var t=M.authors()[e];t.userId||t.authorId||(t.authorId=f[t.email]);t={Order:e+1,IsPrimary:t.email===M.primaryEmail(),UserId:t.userId,AuthorId:t.authorId,Email:t.email};l.Authors.push(t)}for(e=0;e<M.conferenceRequestChairs().length;e++){var o=M.conferenceRequestChairs()[e],o={UserId:o.userId,Email:o.email};l.ConferenceRequestChairs.push(o)}for(e=0;e<M.references().length;e++){var a=M.references()[e],a={UserId:a.userId,Email:a.email};l.References.push(a)}var n={requestUri:S.odata.getUrl(S.odata.entitySet.submissions,M.createNew?null:M.id),method:M.createNew?"POST":"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:l};w.request(n,function(e){M.editConflictAllowed?S.url.navigateTo(R.submissionConflict.format(e.Id)):S.url.navigateTo(R.submissionSummary.format(e.Id))})})}else M.showValidationWarning(!0)}}function h(e){if(e){for(var t,o=null,a=0;a<e.length;a++)t=S.autoMap(new N,e[a]),null!==o&&o.id===t.parentSubjectAreaId&&!M.settings.immediateParentSelectionAllowed&&o.allowParentSelection&&(o.allowParentSelection=!1),null===t.parentSubjectAreaId&&(o=t),i(t);M.settings.showNoneOfTheAboveSubjectArea&&((t=new N).specialType="noneOfAbove",i(t)),M.settings.customPrimarySubjectAreaAllowed&&((t=new N).specialType="customPrimary",t.isPrimary.subscribe(n,t),i(t)),M.settings.customSecondarySubjectAreaAllowed&&M.settings.secondarySubjectAreaAllowed&&((t=new N).specialType="customSecondary",t.isSecondary.subscribe(n,t),i(t))}function n(e){e||(this.customValue(null),this.customValue.isModified(!1))}function i(e){e.isPrimary.subscribe(function(e){e&&(M.showSubjectAreasErrorMessage(!1),function(e){for(var t=0;t<M.subjectAreas.length;t++)M.subjectAreas[t].isPrimary()&&M.subjectAreas[t]!==e&&M.subjectAreas[t].isPrimary(!1)}(this),this.isSecondary(!1))},e),e.isSecondary.subscribe(function(e){if(e){if(M.settings.secondarySubjectAreaLimited)if(function(){for(var e=0,t=0;t<M.subjectAreas.length;t++)M.subjectAreas[t].isSecondary()&&++e;return e}()>M.settings.secondarySubjectAreaMaxNumber){var t=this;return void k(function(){t.isSecondary(!1)},0)}this.isPrimary(!1)}},e),M.subjectAreas.push(e)}}M.id=e,M.createNew=!e,M.trackId=t,M.trackName=o,M.submissionFormId=a,M.reproFormId=n,M.editConflictAllowed=i,M.isSingleTrackConference=r,M.role=s,M.fileIds=l,M.titleTitle="Title",M.fileUploadTitle="Files",M.isAuthor=ko.observable(!1),M.isAuthorRole=ko.observable(!1),M.authors=ko.observableArray(),M.primaryEmail=ko.observable(),M.createNewSubmissionText=m&&m.CreateNewSubmissionText?m.CreateNewSubmissionText:"Create new submission",M.editSubmissionText=m&&m.EditSubmissionText?m.EditSubmissionText:"Edit Submission",M.conferenceRequestChairs=ko.observableArray(),M.settings={welcomeMessage:S.autoMap(),abstractAllowed:S.autoMap(),abstractMaxLength:S.autoMap(),abstractRequired:S.autoMap(),showNoneOfTheAboveSubjectArea:S.autoMap(),secondarySubjectAreaAllowed:S.autoMap(),secondarySubjectAreaLimited:S.autoMap(),secondarySubjectAreaMaxNumber:S.autoMap(),immediateParentSelectionAllowed:S.autoMap(),customPrimarySubjectAreaAllowed:S.autoMap(),customSecondarySubjectAreaAllowed:S.autoMap(),submissionMinFileNumber:S.autoMap(),submissionMaxFileNumber:S.autoMap(),submissionAllowedFileTypes:S.autoMap(),submissionMaxFileSize:S.autoMap(),referenceMinNumber:S.autoMap(),referenceMaxNumber:S.autoMap(),referenceAllowed:S.autoMap(),referenceAdditionalRequirement:S.autoMap(),disableCoAuthors:S.autoMap(),disableTitleInstruction:S.autoMap(),titleMapping:S.autoMap(),fileUploadTitleMapping:S.autoMap(),showTipUnderFiles:S.autoMap(),editAuthorsNotAllowed:S.autoMap(),editSubmissionFilesNotAllowed:S.autoMap()},S.autoMap(M.settings,d),null!==M.settings.titleMapping&&(M.titleTitle=M.settings.titleMapping),null!==M.settings.fileUploadTitleMapping&&(M.fileUploadTitle=M.settings.fileUploadTitleMapping),M.trackSettings=u,M.currentProfile=S.autoMap(new C,p),M.currentProfile.userId=p.Id,M.createNew&&M.role===S.enums.userRole.author?(M.authors([M.currentProfile]),g&&M.conferenceRequestChairs([M.currentProfile]),M.primaryEmail(M.currentProfile.email),M.isAuthor(!0)):M.isAuthor(!1),M.hasBranchingQuestions=function(){return v.hasDependency()},M.doNotAllowEditAuthorList=function(){return(M.settings.editAuthorsNotAllowed||M.settings.disableCoAuthors)&&M.isAuthorRole()},M.doNotAllowEditSubmissionFiles=function(){return!M.createNew&&M.settings.editSubmissionFilesNotAllowed&&M.isAuthorRole()},M.getQuestionDiv=function(e){return b("#sq_"+e)},M.bindTo=function(t){S.showProgress();var e,o=b.Deferred();f(),h(c),b.when((M.createNew?b.Deferred().resolve(null):b.Deferred(function(t){var e={requestUri:S.odata.getUrl(S.odata.entitySet.submissionViews,M.id,"GetSummaryView"),headers:{"Content-Type":"application/json"},showProgressIndicator:!1,method:"POST"};w.read(e,function(e){t.resolve(e)})})).promise(),I.loadQuestionsDirect(S.enums.formType.submission,M.submissionFormId).done(function(e){M.submissionQuestions=e,v.loadQuestions(e)}),I.loadQuestionsDirect(S.enums.formType.reproducibility,M.reproFormId).done(function(e){var t;for(M.reproQuestions=e,t=0;t<e.length;t++)for(var o=e[t],a=0;a<o.choices.length;a++)o.choices[a].requireAnswer(!0)}),void T.getCurrentRoleDescriptor().done(function(e){M.submissionListUrl=e.submissionListUrl,M.isAuthorRole(M.role===S.enums.userRole.author)}),0===(e=M.fileIds).length||(e=S.odata.getUrl(S.odata.entitySet.files,{filter:S.odata.buildContainsQuery("Id",e)}),w.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(S.autoMap(new S.File,e.value[o]));M.files(t)}))).done(function(e){var k;M.createNew||(k=e,b.Deferred(function(e){var t,o,a;S.autoMap(M,k);var n={},i=[],r=[];if(k.AuthorsJson)for(var s=JSON.parse(k.AuthorsJson),u=0;u<s.length;u++){var l=S.autoMap(new C,s[u]);M.authors.push(l),l.isPrimary&&M.primaryEmail(l.email)}if(k.ConferenceRequestChairsJson){var d=JSON.parse(k.ConferenceRequestChairsJson);for(u=0;u<d.length;u++){var c=S.autoMap(new C,d[u]);M.conferenceRequestChairs.push(c)}}if(k.ReferencesJson){var p=JSON.parse(k.ReferencesJson);for(u=0;u<p.length;u++){var m=S.autoMap(new C,p[u]);M.references.push(m)}}if(k.PrimarySubjectAreaId&&(n[k.PrimarySubjectAreaId]=!0),k.SecondarySubjectAreasJson){var f=JSON.parse(k.SecondarySubjectAreasJson);for(u=0;u<f.length;u++)n[f[u].SubjectAreaId]=!1}for(u=0;u<M.subjectAreas.length;u++){var h=M.subjectAreas[u],g=n[h.id];g?h.isPrimary(!0):!1===g&&h.isSecondary(!0),"noneOfAbove"===h.specialType&&k.NoneOfAboveSubjectArea&&h.isPrimary(!0),"customPrimary"===h.specialType&&null!==k.CustomPrimarySubjectArea&&(h.isPrimary(!0),h.customValue(k.CustomPrimarySubjectArea)),"customSecondary"===h.specialType&&null!==k.CustomSecondarySubjectArea&&(h.isSecondary(!0),h.customValue(k.CustomSecondarySubjectArea))}if(k.QuestionAnswersJson){var v=JSON.parse(k.QuestionAnswersJson);for(u=0;u<v.length;u++)if(a=v[u].Answers)for(t=0;t<a.length;t++)(o=new E).QuestionId=v[u].Id,o.Text=a[t].Text,o.QuestionChoiceId=a[t].QuestionChoiceId,i.push(o)}if(I.setAnswersFromJson(M.submissionQuestions,i),k.ReproducibilityQuestionAnswersJson){var w=JSON.parse(k.ReproducibilityQuestionAnswersJson);for(u=0;u<w.length;u++)if(a=w[u].Answers)for(t=0;t<a.length;t++){(o=new E).QuestionId=w[u].Id,o.QuestionChoiceId=a[t].QuestionChoiceId;var b=JSON.parse(a[t].Text);o.Answer=b.Answer,o.Comment=b.Comment,r.push(o)}}I.setAnswersFromJson(M.reproQuestions,r),"saved"===S.url.hash.getValue()&&(S.url.hash.remove(),S.addMessage("Submission '{0}' saved!".format(M.title())))}).promise()),ko.applyBindingsAndShow(M,t),v.init(),o.resolve()}),o.always(S.hideProgress)}}S.submissionDetails=function(e,t,o,a,n,i,r,s,u,l,d,c,p,m,f,h){R=u,new g(e,t,o,a,n,i,r,s,l,d,c,p,m,f,h).bindTo("submissionForm")}}(window.app,window.OData,window.jQuery,window.setTimeout,void 0!==window.FileReader,new window.app.QuestionService,new window.app.RoleService),function(M,S,y,I,T){"use strict";var R;function C(){var e=this;e.userId=M.autoMap(),e.authorId=M.autoMap(),e.email=M.autoMap(),e.firstName=M.autoMap(),e.lastName=M.autoMap(),e.organization=M.autoMap(),e.orcidId=M.autoMap(),e.city=M.autoMap(),e.countryCode=M.autoMap(),e.countryName=M.autoMap(),e.isPrimary=M.autoMap()}function A(e){var t=this;t.email=ko.observable().extend({required:!0,email:!0,validation:{validator:function(e,t){for(var o=0;o<t.length;o++)if(t[o].email===e)return!1;return!0},message:"Author with the same email already exists.",params:e}}),t.isEmailInvalid=ko.observable(!1),t.firstName=ko.observable().extend({required:{message:"First Name is required."},maxLength:200}),t.lastName=ko.observable().extend({required:{message:"Last Name is required."},maxLength:200}),t.organization=ko.observable().extend({required:{message:"Organization is required."},maxLength:200}),t.orcidId=ko.observable("").extend({required:{message:"ORCID Id is required."},pattern:/^\d{4}-\d{4}-\d{4}-(\d{4}|\d{3}X)$/,maxLength:19}),t.city=ko.observable().extend({required:{message:"City is required."},maxLength:200}),t.availableCountries=ko.observable(M.countries.getCountries()),t.countryCode=ko.observable().extend({required:{message:"Country is required."}}),t.isSearching=ko.observable(!1),t.notFound=ko.observable(!1),t.cancelAdd=function(){t.email(""),t.email.isModified(!1),t.firstName(""),t.firstName.isModified(!1),t.lastName(""),t.lastName.isModified(!1),t.organization(""),t.organization.isModified(!1),t.orcidId(""),t.orcidId.isModified(!1),t.city(""),t.city.isModified(!1),t.countryCode(void 0),t.countryCode.isModified(!1),t.notFound(!1),t.isEmailInvalid(!1)}}function N(){}function g(e,t,o,a,n,i,r,s,u,l,d,c,p,m){var g=this,v=new M.QuestionDependency(g);g.id=e,g.isPosted=M.autoMap(),g.trackName=o,g.submissionFormId=a,g.reproFormId=n,g.isSingleTrackConference=i,g.role=r,g.fileIds=u,g.trackId=t,g.titleTitle="Title",g.labels=ko.observableArray(),g.isAuthor=ko.observable(!1),g.isAuthorRole=ko.observable(!1),g.authors=ko.observableArray(),g.primaryEmail=ko.observable(),g.files=ko.pureComputed(function(){return g.labels().reduce(function(e,t){return e.concat(t.files())},[])});for(var f={},h=0;h<d.length;h++){var w=new M.FileLabel(g,d[h].Settings,R.fileUpload);g.labels.push(M.autoMap(w,d[h])),w.initModel(),f[d[h].Id]=w}function b(){g.title=ko.observable().extend({required:!0,maxLength:1e3}).autoMap(),g.abstract=ko.observable("").extend({required:{onlyIf:function(){return g.settings.abstractAllowed&&g.settings.abstractRequired}},maxLength:g.settings.abstractMaxLength}).autoMap(),g.abstractCharsLeft=ko.computed(function(){return Math.max(g.settings.abstractMaxLength-g.abstract().length,0)}),g.submissionListUrl=null,g.showPrimaryAuthorErrorMessage=ko.observable(!1),g.showFilesMinErrorMessage=ko.observable(!1),g.showFilesMaxErrorMessage=ko.observable(!1),g.removeAuthor=function(e){g.authors.remove(e)},g.moveAuthorUp=function(e){var t=g.authors.indexOf(e);g.authors.remove(e),g.authors.splice(t-1,0,e)},g.moveAuthorDown=function(e){var t=g.authors.indexOf(e);g.authors.remove(e),g.authors.splice(t+1,0,e)},g.addAuthor=function(e){var t=[e.email,e.firstName,e.lastName,e.organization,e.countryCode];p&&t.push(e.city),m&&t.push(e.orcidId);t=ko.validation.group(t);if(0<t().length)return t.showAllMessages(),void e.isEmailInvalid(!e.email.isValid());t=M.autoMap(new C,{isPrimary:!1,email:e.email(),firstName:e.firstName(),lastName:e.lastName(),organization:e.organization(),orcidId:e.orcidId(),city:e.city(),countryCode:e.countryCode(),countryName:M.countries.getCountryNameByCode(e.countryCode())});g.authors.push(t),1===g.authors().length&&(g.primaryEmail(t.email),g.showPrimaryAuthorErrorMessage(!1)),e.cancelAdd()},g.newAuthor=new A(g.authors),g.searchAuthorByEmail=function(o){var e=ko.validation.group([o.email]);if(0<e().length)return o.isEmailInvalid(!0),void e.showAllMessages();o.isEmailInvalid(!1),o.isSearching(!0);e={requestUri:M.odata.getGlobalUrl(M.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.email()}};S.read(e,function(e){var t=M.autoMap(new C,e);t.userId=e.Id,g.authors.push(t),1===g.authors().length&&(g.primaryEmail(t.email),g.showPrimaryAuthorErrorMessage(!1)),o.cancelAdd(),o.isSearching(!1)},function(e){o.isSearching(!1),e.response.statusCode===M.enums.httpStatusCodes.failure.notFound?g.newAuthor.notFound(!0):S.defaultError(e)})},g.showValidationWarning=ko.observable(!1),g.submissionQuestions=[],g.reproQuestions=[],g.save=function(){var e=!0,t=ko.validation.group(g,{deep:!1});0<t().length&&(t.showAllMessages(),e=!1),function(){var e=g.authors();if(g.isAuthorRole()&&g.settings.editCameraReadyAuthorsNotAllowed&&!g.settings.changeCameraReadyAuthorOrderAllowed)return 1;for(var t=!1,o=0;o<e.length;o++)if(e[o].email===g.primaryEmail()){t=!0;break}var a=!0;return t||(g.showPrimaryAuthorErrorMessage(!0),a=!1),a}()||(e=!1);for(var o=g.labels(),a=0;a<o.length;a++)o[a].validateFiles()||(e=!1);for(var n=[],i=0;i<g.submissionQuestions.length;i++){var r=g.submissionQuestions[i];v.isHidden(r.id)||n.push(r)}0<(t=ko.validation.group(n,{deep:!0}))().length&&(t.showAllMessages(),e=!1);var s=[];for(i=0;i<g.reproQuestions.length;i++)for(var u=g.reproQuestions[i],l=0;l<u.choices.length;l++)s.push(u.choices[l]);t=ko.validation.group(s,{deep:!0});if(0<t().length&&(t.showAllMessages(),e=!1),e){var d=M.autoMap(g);d.Id=g.id,d.Files=[];for(a=0;a<o.length;a++)for(var c=o[a].files(),p=0;p<c.length;p++)d.Files.push({FileId:c[p].id,FileLabelId:o[a].id});d.Answers=I.getAnswersJson(g.submissionQuestions.filter(e=>!v.isHidden(e.id))),d.ReproducibilityAnswers=I.getAnswersJson(g.reproQuestions);var m={},f=[];if(!g.isAuthorRole()||!g.settings.editCameraReadyAuthorsNotAllowed||g.settings.changeCameraReadyAuthorOrderAllowed)for(i=0;i<g.authors().length;i++){var h=g.authors()[i];h.userId||h.authorId||f.push(function(t){var e=M.autoMap(t);delete e.UserId,delete e.AuthorId,delete e.IsPrimary,delete e.OrcidId,delete e.City;e={requestUri:M.odata.getUrl(M.odata.entitySet.users,null,"AddCoAuthor"),method:"POST",data:{Request:e}};return S.request(e,function(e){m[t.email]=e.value},function(e){var t;e.response.statusCode==M.enums.httpStatusCodes.failure.conflict?M.addMessage(t,"Please click Cancel and use the email box to select author.","error"):e.response.statusCode==M.enums.httpStatusCodes.failure.badRequest?(t=M.getODataErrorMessage(e).message,M.addMessage(t,"Author information invalid:","error")):S.defaultError(e)})}(h))}y.when.apply(y,f).done(function(){if(d.Authors=[],!g.isAuthorRole()||!g.settings.editCameraReadyAuthorsNotAllowed||g.settings.changeCameraReadyAuthorOrderAllowed)for(var e=0;e<g.authors().length;e++){var t=g.authors()[e];t.userId||t.authorId||(t.authorId=m[t.email]);t={Order:e+1,IsPrimary:t.email===g.primaryEmail(),UserId:t.userId,AuthorId:t.authorId,Email:t.email,OrcidId:t.orcidId,City:t.city};d.Authors.push(t)}var o={requestUri:M.odata.getUrl(M.odata.entitySet.cameraReadySubmissions,g.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:d};S.request(o,function(e){M.url.navigateTo(R.cameraReadySubmissionSummary.format(e.Id))})})}else g.showValidationWarning(!0)}}function k(i){return y.Deferred(function(e){M.autoMap(g,i),function(e){for(var t=[],o=0;o<e.length;o++){var a=e[o],n=M.autoMap(new C,a);t.push(n),a.IsPrimary&&g.primaryEmail(n.email)}g.authors(t)}(i.Authors),I.setAnswersFromJson(g.submissionQuestions,i.Answers);var t=[];if(i.ReproducibilityAnswers)for(var o=0;o<i.ReproducibilityAnswers.length;o++){var a=i.ReproducibilityAnswers[o],n=new N;n.QuestionId=a.QuestionId,n.QuestionChoiceId=a.QuestionChoiceId;a=JSON.parse(a.Text);n.Answer=a.Answer,n.Comment=a.Comment,t.push(n)}I.setAnswersFromJson(g.reproQuestions,t),"saved"===M.url.hash.getValue()&&(M.url.hash.remove(),M.addMessage("CameraReadySubmission '{0}' saved!".format(g.title)))}).promise()}g.settings={welcomeMessage:M.autoMap(),cameraReadySubmissionMinFileNumber:M.autoMap(),cameraReadySubmissionMaxFileNumber:M.autoMap(),cameraReadySubmissionAllowedFileTypes:M.autoMap(),cameraReadySubmissionMaxFileSize:M.autoMap(),abstractAllowed:M.autoMap(),abstractMaxLength:M.autoMap(),abstractRequired:M.autoMap(),disableCoAuthors:M.autoMap(),disableTitleInstruction:M.autoMap(),titleMapping:M.autoMap(),showTipUnderFiles:M.autoMap(),editCameraReadyAuthorsNotAllowed:M.autoMap(),changeCameraReadyAuthorOrderAllowed:M.autoMap()},M.autoMap(g.settings,l),null!==g.settings.titleMapping&&(g.titleTitle=g.settings.titleMapping),g.trackSettings=s,g.currentProfile=M.autoMap(new C,c),g.currentProfile.userId=c.Id,g.isAuthor(!0),g.hasBranchingQuestions=function(){return v.hasDependency()},g.getQuestionDiv=function(e){return y("#sq_"+e)},g.bindTo=function(t){M.showProgress();var o=y.Deferred();b(),y.when(y.Deferred(function(t){S.read(M.odata.getUrl(M.odata.entitySet.cameraReadySubmissions,g.id),function(e){t.resolve(e)})}).promise(),I.loadQuestionsDirect(M.enums.formType.cameraready,g.submissionFormId).done(function(e){g.submissionQuestions=e,v.loadQuestions(e)}),!g.trackSettings.requireRepro||I.loadQuestionsDirect(M.enums.formType.reproducibility,g.reproFormId).done(function(e){var t;for(g.reproQuestions=e,t=0;t<e.length;t++)for(var o=e[t],a=0;a<o.choices.length;a++)o.choices[a].requireAnswer(!0)}),void T.getCurrentRoleDescriptor().done(function(e){g.submissionListUrl=e.submissionListUrl,g.isAuthorRole(g.role===M.enums.userRole.author)}),function(e){if(0==e.length)return!0;var t=e.map(function(e){return e.FileId}),n=e.reduce(function(e,t){return e[t.FileId]=t.FileLabelId,e},{}),t=M.odata.getUrl(M.odata.entitySet.files,{filter:M.odata.buildContainsQuery("Id",t)});return S.read({requestUri:t,showProgressIndicator:!1},function(e){for(var t,o={},a=0;a<e.value.length;a++)o[n[e.value[a].Id]]||(o[n[e.value[a].Id]]=[]),o[n[e.value[a].Id]].push(M.autoMap(new M.File,e.value[a]));for(t in o)f[t].files(o[t])})}(g.fileIds)).done(function(e){k(e),ko.applyBindingsAndShow(g,t),v.init(),o.resolve()}),o.always(M.hideProgress)}}M.cameraReadySubmissionDetails=function(e,t,o,a,n,i,r,s,u,l,d,c,p,m,f,h){R=s,new g(e,t,o,a,n,i,r,u,l,d,c,p,m,f).bindTo(h)}}(window.app,window.OData,window.jQuery,(window.setTimeout,window.FileReader,new window.app.QuestionService),new window.app.RoleService),function(c,i,t){function p(){var e=this;e.id=c.autoMap(),e.originalName=c.autoMap(),e.downloadLink=ko.pureComputed(function(){return"/api/{0}/Files/{1}".format(t.conference.name,e.id)})}function m(t,e){var o=this;o.id=c.autoMap(),o.title=c.autoMap(),o.abstract=c.autoMap(),o.isPrimary=c.autoMap(),o.isAbstractVisible=ko.observable(!1),o.toggleAbstract=function(){return o.isAbstractVisible(!o.isAbstractVisible()),!1},o.trackId=c.autoMap(),o.trackName=c.autoMap(),o.reviewCount=0,o.metaReviewCount=0,o.statusId=c.autoMap(),o.statusName=c.autoMap(),o.isCameraReady=c.autoMap(),o.isCameraReadyPosted=c.autoMap(),o.isAuthorFeedback=c.autoMap(),o.isAuthorFeedbackPosted=c.autoMap(),o.authorFeedbackId=c.autoMap(),o.chairNoteId=c.autoMap(),o.hasRevision=c.autoMap(),o.originalSubmissionId=c.autoMap(),o.isRevision=c.autoMap(),o.isShepherded=c.autoMap(),o.lineageText=ko.pureComputed(function(){return o.isRevision?"Revision":o.isShepherded?"Shepherd Submission":""}),o.cameraReadyLinkTitle=function(){return o.isCameraReadyPosted?"Edit Camera Ready Submission":"Create Camera Ready Submission"},o.viewUrl=function(){return t.submissionSummary.format(o.id)},o.viewRevisionUrl=function(){return o.originalSubmissionId&&t.submissionSummary.format(o.originalSubmissionId)},o.editUrl=function(){return t.submissionDetails.format(o.id)},o.editRevisionUrl=function(e){return t.submissionDetails.format(e)},o.editAuthorFeedbackLinkTitle=function(){return null!==o.authorFeedbackId?"Edit Author Feedback":"Post Author Feedback"},o.viewReviewsSnapshotTitle=function(){return"View Reviews"},o.viewMetaReviewsTitle=function(){return"View Meta-Reviews"},o.editAuthorFeedbackUrl=function(){return null===o.authorFeedbackId?t.authorFeedbackCreate.format(o.id):t.authorFeedbackDetails.format(o.authorFeedbackId)},o.viewAuthorFeedbackUrl=function(){return t.authorFeedbackSummary.format(o.authorFeedbackId)},o.editCameraReadyUrl=function(){return t.cameraReadySubmissionDetails.format(o.id)},o.viewCameraReadyUrl=function(){return t.cameraReadySubmissionSummary.format(o.id)},o.conflictUrl=function(){return t.submissionConflict.format(o.id)},o.viewReviewsUrl=function(){return t.submissionReviews.format(o.id)},o.viewMetaReviewsUrl=function(){return t.submissionMetaReviews.format(o.id)},o.viewChairNoteUrl=function(){return t.submissionChairNote.format(o.chairNoteId)},o.viewSeniorMetaReviewerNoteUrl=function(){return t.seniorMetaReviewerNote.format(o.id)},o.viewReviewsSnapshotUrl=function(){return e.disableReviewSnapshotDuringFeedback?o.viewReviewsUrl():t.submissionReviewsSnapshot.format(o.id)},o.crossTrackRevisionLinkVisible=function(){return 0!==o.statusId&&e.allowAuthorNotification&&e.hasRevisionTracks&&!o.hasRevision&&e.statuses[o.statusId].isMajorRevision},o.reviewLinkVisible=function(){return 0<e.reviewQuestionVisibleToAuthorCount&&0!==o.statusId&&(e.allowAuthorNotification&&e.statuses[o.statusId].reviewVisibleToAuthor||e.statuses[o.statusId].isDeskReject&&e.allowAuthorToSeeDeskRejectStatus||e.statuses[o.statusId].isWithdrawn&&e.allowAuthorToSeeReviewingDataForWithdrawn)},o.metaReviewLinkVisible=function(){return 0<e.metaReviewQuestionVisibleToAuthorCount&&0!==o.statusId&&(e.allowAuthorNotification&&e.statuses[o.statusId].metaReviewVisibleToAuthor||e.statuses[o.statusId].isDeskReject&&e.allowAuthorToSeeDeskRejectStatus||e.statuses[o.statusId].isWithdrawn&&e.allowAuthorToSeeReviewingDataForWithdrawn)},o.chairNoteLinkVisible=function(){return o.chairNoteId&&0<e.chairNoteQuestionVisibleToAuthorCount&&0!==o.statusId&&(e.allowAuthorNotification||e.statuses[o.statusId].isDeskReject&&e.allowAuthorToSeeDeskRejectStatus||e.statuses[o.statusId].isWithdrawn&&e.allowAuthorToSeeReviewingDataForWithdrawn)},o.seniorMetaReviewerNoteLinkVisible=function(){return 0<e.seniorMetaReviewerNoteQuestionVisibleToAuthorCount&&0!==o.statusId&&(e.allowAuthorNotification||e.statuses[o.statusId].isDeskReject&&e.allowAuthorToSeeDeskRejectStatus||e.statuses[o.statusId].isWithdrawn&&e.allowAuthorToSeeReviewingDataForWithdrawn)},o.editLinkVisible=function(){return e.allowEditSubmission},o.deleteLinkVisible=function(){return(0===o.statusId||!e.statuses[o.statusId].isWithdrawn)&&(e.allowEditSubmission||e.allowAuthorToDeleteSubmisionAfterSubmissionDeadline)&&(!e.allowOnlyPrimaryContactAuthorToDeleteSubmision||o.isPrimary)},o.deleteLinkText=function(){return e.allowEditSubmission?"Delete Submission":e.allowAuthorToDeleteSubmisionAfterSubmissionDeadline?"Withdraw Submission":""},o.submitCopyrightFormUrlIsVisible=function(){return e.ecfRegistrationEnabled&&o.editCameraReadyLinkVisible()},o.editCameraReadyLinkVisible=function(){return e.allowCameraReadySubmission&&o.isCameraReady},o.editAuthorFeedbackLinkVisible=function(){return e.allowAuthorFeedback&&o.isAuthorFeedback},o.viewAuthorFeedbackLinkVisible=function(){return null!==o.authorFeedbackId},o.submitCopyrightFormUrl=function(){return t.copyrightForm.format(o.id)},o.uploadSupplementaryLinkVisible=function(){return e.allowSupplementaryMaterial},o.uploadSupplementaryUrl=function(){return t.supplementaryDetails.format(o.id)},o.uploadInplaceRevisionLinkVisible=function(){return 0!==o.statusId&&e.allowAuthorNotification&&e.allowInplaceRevision&&e.statuses[o.statusId].isRevision},o.uploadInplaceRevisionUrl=function(){return t.inplaceRevisionDetails.format(o.id)},o.supplementaryLinkTitle=function(){return 0<o.supplementaryFiles.length?"Edit Supplementary Material":"Upload Supplementary Material"},o.inplaceRevisionLinkTitle=function(){return 0<o.revisionFiles.length?"Edit Revision":"Upload Revision"},o.crossTrackRevisionClick=function(){var e;confirm('Have you completed revising paper {0}? Click "OK" only when you are ready to submit revision.'.format(o.id))&&(e={requestUri:c.odata.getUrl(c.odata.entitySet.submissions,null,"RevisionAuthor"),method:"POST",data:{Request:o.id}},OData.request(e,function(e){c.addMessage("Created revision id={1} for submission id={0}.".format(o.id,e.value)),window.location=o.editRevisionUrl(e.value)},function(e){OData.defaultError(e)}))},o.emailMetaReviewerLinkVisible=function(){return e.allowMetaReviewerToEmailAuthor},o.hasTrackChair=function(){return e.hasTrackChair},o.emailTrackChairUrl=function(){return t.emailTrackChair.format(o.id)},o.emailMetaReviewerUrl=function(){return t.emailMetaReviewer.format(o.id)},o.emailSeniorMetaReviewerLinkVisible=function(){return e.allowSeniorMetaReviewerToEmailAuthor},o.emailSeniorMetaReviewerUrl=function(){return t.emailSeniorMetaReviewer.format(o.id)},o.files=[],o.cameraReadyFiles=[],o.supplementaryFiles=[],o.revisionFiles=[],o.missingSubmissionFile=ko.pureComputed(function(){return o.files.length<e.submissionMinFileNumber}),o.missingSupplementaryFile=ko.pureComputed(function(){return e.requireSupplementaryMaterial&&o.supplementaryFiles.length<e.supplementaryMinFileNumber})}function s(){var e=this;e.reviewVisibleToAuthor=c.autoMap(),e.metaReviewVisibleToAuthor=c.autoMap(),e.isRevision=c.autoMap(),e.isMajorRevision=c.autoMap(),e.isDeskReject=c.autoMap(),e.isWithdrawn=c.autoMap()}function u(e){var t=this;t.id=c.autoMap(),t.name=c.autoMap(),t.createUrl=function(){return e.submissionCreate.format(t.id)},t.allowNewSubmission=c.autoMap(),t.allowEditSubmission=c.autoMap(),t.allowAuthorNotification=c.autoMap(),t.allowMetaReviewerToEmailAuthor=c.autoMap(),t.allowSeniorMetaReviewerToEmailAuthor=c.autoMap(),t.allowAuthorToSeeDeskRejectStatus=c.autoMap(),t.allowAuthorToSeeReviewingDataForWithdrawn=c.autoMap(),t.editConflictAllowed=c.autoMap(),t.allowCameraReadySubmission=c.autoMap(),t.allowAuthorFeedback=c.autoMap(),t.reviewQuestionVisibleToAuthorCount=c.autoMap(),t.metaReviewQuestionVisibleToAuthorCount=c.autoMap(),t.chairNoteQuestionVisibleToAuthorCount=c.autoMap(),t.allowSupplementaryMaterial=c.autoMap(),t.allowInplaceRevision=c.autoMap(),t.hasRevisionTracks=c.autoMap(),t.disableReviewSnapshotDuringFeedback=c.autoMap(),t.allowAuthorToDeleteSubmisionAfterSubmissionDeadline=c.autoMap(),t.allowOnlyPrimaryContactAuthorToDeleteSubmision=c.autoMap(),t.ecfRegistrationEnabled=c.autoMap(),t.submissionMinFileNumber=c.autoMap(),t.supplementaryMinFileNumber=c.autoMap(),t.requireSupplementaryMaterial=c.autoMap(),t.seniorMetaReviewerNoteQuestionVisibleToAuthorCount=c.autoMap(),t.hasTrackChair=c.autoMap(),t.statuses=[]}function r(e,t,o){var r=this;r.tracksHash={},r.tracks=[],r.pageUrls=e,r.authorConsoleCustomNotice=o&&o.AuthorConsoleCustomNotice,r.createNewSubmissionText=o&&o.CreateNewSubmissionText?o.CreateNewSubmissionText:"Create new submission",r.paperIDText=o&&o.PaperIDText?o.PaperIDText:"Paper ID",r.submissions=ko.observableArray([]),r.trackNamesProvider=ko.pureComputed(function(){var e,t=[];for(e in r.tracks)r.tracks.hasOwnProperty(e)&&t.push(r.tracks[e].name);return t}),r.showCreateNewSubmission=ko.observable(!1),r.editColumnVisible=ko.observable(!1),r.editSubmissionVisible=ko.observable(!1),r.editCameraReadySubmissionVisible=ko.observable(!1),r.reviewColumnVisible=ko.observable(!1),r.editAuthorFeedbackVisible=ko.observable(!1),r.authorFeedbackEntered=ko.observable(!1),r.editConflictAllowed=function(e){return r.tracksHash[e.trackId].editConflictAllowed};var a=null;r.delete=function(e){null===a&&(a=new n(r,document.getElementById("deleteDialog"))).bind();var t=r.tracksHash[e.trackId];a.editInDialog(e,t)},r.showWelcomeMessage=function(){$(document.getElementById("welcomeMessageDialog")).modal("show")},function(e,t){for(var o=0;o<t.length;o++){var a=t[o],n=c.autoMap(new u(e),a);n.allowNewSubmission&&r.showCreateNewSubmission(!0),n.allowAuthorNotification&&r.reviewColumnVisible(!0),n.allowEditSubmission&&r.editSubmissionVisible(!0),n.allowCameraReadySubmission&&r.editCameraReadySubmissionVisible(!0),n.allowAuthorFeedback&&r.editAuthorFeedbackVisible(!0),(r.editSubmissionVisible()||n.editConflictAllowed||n.allowAuthorToDeleteSubmisionAfterSubmissionDeadline||n.allowSupplementaryMaterial||r.editCameraReadySubmissionVisible()||r.editAuthorFeedbackVisible()||r.reviewColumnVisible())&&r.editColumnVisible(!0);for(var i=0;i<a.StatusReviewVisibility.length;i++)n.statuses[a.StatusReviewVisibility[i].SubmissionStatusId]=c.autoMap(new s,a.StatusReviewVisibility[i]);r.tracks.push(n),r.tracksHash[n.id]=n}}(e,t),c.DataTable.call(r)}function n(t,o){var a=this;a.submission=ko.observable(null),a.track=ko.observable(null),a.actionText=ko.observable(""),a.deleteSubmission=function(){var e;a.track().allowEditSubmission?(e={requestUri:c.odata.getUrl(c.odata.entitySet.submissions,a.submission().id),method:"DELETE"},i.request(e,function(){t.submissions.remove(a.submission()),$(o).modal("hide")})):a.track().allowAuthorToDeleteSubmisionAfterSubmissionDeadline&&(e={requestUri:c.odata.getUrl(c.odata.entitySet.submissions,null,"Withdraw"),method:"POST",data:{Request:a.submission().id}},i.request(e,function(e){e.value&&window.location.reload()},function(e){OData.defaultError(e)}))},a.bind=function(){ko.applyBindings(a,o)},a.editInDialog=function(e,t){a.submission(e),a.track(t),t.allowEditSubmission?a.actionText("delete"):t.allowAuthorToDeleteSubmisionAfterSubmissionDeadline&&a.actionText("withdraw"),$(o).modal("show")}}r.prototype=$.extend({},c.DataTable.prototype,{getDefaultSorting:function(){return{property:"Id",direction:"asc"}},getFilterString:function(){var o="";return $.each(this.filters,function(e,t){t.getValue()&&(o+=o?" and "+t.getValue():t.getValue())}),o},loadData:function(e){var d=this;(e=!0===e)&&d.applyState();var t=d.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=d.skip()?"&$skip="+d.skip():"",n=d.top()?"&$top="+d.top():"",t=(t=d.getFilterString())&&"&$filter="+encodeURIComponent(t),e={method:"GET",headers:{Accept:"application/json"},requestUri:c.odata.getUrl(c.odata.entitySet.submissionAuthorViews)+"?$count=true"+o+t+a+n,showProgressIndicator:!e};return i.request(e,function(e){var t=e.value;d.total(e["@odata.count"]||0);for(var o=[],a=0;a<t.length;a++){for(var n=t[a],i=n.TrackId,i=d.tracks&&d.tracksHash[i],r=c.autoMap(new m(d.pageUrls,i),n),s=n.SubmissionFilesJson&&JSON.parse(n.SubmissionFilesJson)||[],u=0;u<s.length;u++){var l=c.autoMap(new p,s[u]);s[u].IsSubmissionFile?r.files.push(l):s[u].IsSupplementaryFile?r.supplementaryFiles.push(l):s[u].IsCameraReadyFile?r.cameraReadyFiles.push(l):s[u].IsRevisionFile&&r.revisionFiles.push(l)}i&&0!==r.statusId&&i.statuses[r.statusId]&&(i.statuses[r.statusId].isDeskReject&&i.allowAuthorToSeeDeskRejectStatus||i.statuses[r.statusId].isWithdrawn)&&d.reviewColumnVisible(!0),r.authorFeedbackId&&d.authorFeedbackEntered(!0),r.reviewCount=n.NumberOfReviews,r.metaReviewCount=n.NumberOfMetaReviews,o.push(r)}d.submissions(o),d.saveState()},function(e){c.addErrorMessage(c.odata.getErrorMessage(e))}).done(function(){$("html,body").scrollTop(0)})}}),c.authorSubmissionsPage=function(e,t,o,a){var n=new r(t,o,a);n.loadData().done(function(){ko.applyBindingsAndShow(n,e)})}}(window.app,window.OData,window.cmt3),function(f,a,o){"use strict";function h(){var e=this;e.firstName=f.autoMap(),e.lastName=f.autoMap(),e.nickname=f.autoMap(),e.name=f.autoMap(),e.email=f.autoMap(),e.organization=f.autoMap()}function g(){this.ratingOptionName=f.autoMap(),this.ratingOptionValue=f.autoMap()}function v(e,t){var o=this;o.id=f.autoMap(),o.reviewerNumber=f.autoMap(),o.reviewerName=f.autoMap(),o.reviewerId=f.autoMap(),o.externalReviewerName=f.autoMap(),o.userType=f.autoMap(),o.isSubmitted=f.autoMap(),o.previousVersion=f.autoMap(),o.updateDate=f.autoMap(),o.ratingOptions=e,o.reviewRatingId=ko.observable(t),o.questions=[],o.files=[],o.ratings=[],o.isSelf=!1,o.deleteReview=function(){var e;o.id&&o.reviewerName&&confirm("You will not be able to revert this action. Are you sure you want to delete review submitted by {0}?".format(o.reviewerName))&&(e={requestUri:f.odata.getUrl(f.odata.entitySet.reviews,o.id),method:"DELETE"},a.request(e,function(){window.location.reload()},function(e){OData.defaultError(e)}))},o.reviewRatingId.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/ReviewRatings",method:"POST",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{ReviewId:o.id,ReviewRatingOptionId:e||null}};OData.request(e,function(e){f.addMessage("Review rating saved")},function(){f.addMessage("Unable to save review rating",null,"error")})})}function n(r){var s=this;s.id=ko.observable(),s.title=ko.observable(),s.questions=ko.observableArray(),s.reviewerNumber=ko.observable(),s.reviewerName=ko.observable(),s.previousVersion=ko.observable(),s.newerVersion=ko.observable(),s.updateDate=ko.observable(),s.bind=function(){ko.applyBindings(s,r)},s.showPrevious=function(){s.previousVersion()&&s.loadQuestions(s.previousVersion())},s.showNewer=function(){s.newerVersion()&&s.loadQuestions(s.newerVersion())},s.loadQuestions=function(e){OData.read(f.odata.getUrl(f.odata.entitySet.reviewVersionViews,e),function(e){if(s.questions([]),s.id(e.SubmissionId),s.title(e.SubmissionTitle),s.reviewerNumber(e.ReviewerNumber),s.reviewerName(e.ReviewerName),s.previousVersion(e.PreviousVersion),s.newerVersion(e.NewerVersion),s.updateDate(e.UpdateDate),e.Questions)for(var t,o,a,n=0;n<e.Questions.length;n++){if(t=f.autoMap(new f.Question,e.Questions[n]),o=e.Questions[n].Answers)for(var i=0;i<o.length;i++)a=f.autoMap(new f.QuestionAnswer,o[i]),t.answers.push(a);s.questions.push(t)}$(r).modal("show")})},s.editInDialog=function(e){s.loadQuestions(e.previousVersion)}}function i(e,c,p){var m=this;m.id=e,m.trackName=null,m.title=null,m.isSingleTrackConference=null,m.reviews=[],m.print=function(){o()};var t=null;m.reviewVersion=function(e){null===t&&(t=new n(document.getElementById("reviewVersionDialog"))).bind(),t.editInDialog(e)},m.bindTo=function(e){a.read(f.odata.getUrl(f.odata.entitySet.submissions,m.id,"Reviews"),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t];0===t&&(m.trackName=o.TrackName,m.title=o.SubmissionTitle,m.isSingleTrackConference=o.IsSingleTrackConference);for(var a=f.autoMap(new v(c,o.ReviewRatingId||void 0),o),n=0;n<o.Questions.length;n++){var i=o.Questions[n],r=f.autoMap(new f.Question,i);r.visibleToOtherReviewer=i.VisibleToOtherReviewer;for(var s=0;s<i.Answers.length;s++)r.answers.push(f.autoMap(new f.QuestionAnswer,i.Answers[s]));a.questions.push(r)}for(n=0;n<o.Files.length;n++){var u=o.Files[n],u=f.autoMap(new f.File,u);a.files.push(u)}for(n=0;n<o.ReviewRatings.length;n++){var l=o.ReviewRatings[n],d=f.autoMap(new g,l);d.user=f.autoMap(new h,l.User),a.ratings.push(d)}m.reviews.push(a),a.reviewerNumber===p&&(a.isSelf=!0)}}).done(function(){ko.applyBindingsAndShow(m,e)})}}f.submissionReviews=function(e,t,o,a){new i(e,t,o).bindTo(a)}}(window.app,window.OData,window.print),function(p,a,n){"use strict";function m(){this.order=p.autoMap(),this.details=p.autoMap(),this.answers=[]}function f(){this.text=p.autoMap(),this.value=p.autoMap()}function h(){var e=this;e.userNumber=p.autoMap(),e.userName=p.autoMap(),e.isSubmitted=p.autoMap(),e.questions=[],e.files=[]}function i(e,t,o){var c=this;c.isMetaReviewer=e,c.isSenior=t,c.id=o,c.trackName=null,c.title=null,c.isSingleTrackConference=null,c.userNotes=[],c.print=function(){n()},c.bindTo=function(e){a.read(p.odata.getUrl(p.odata.entitySet.submissions,c.id,c.isMetaReviewer?c.isSenior?"SeniorMetaReviewerNotes":"MetaReviewerNotes":"ReviewerNotes"),function(e){for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o];0===o&&(c.trackName=a.TrackName,c.title=a.SubmissionTitle,c.isSingleTrackConference=a.IsSingleTrackConference);var n,i=p.autoMap(new h,a);for(c.isSenior?(i.userName=a.SeniorMetaReviewerName,i.userNumber=a.SeniorMetaReviewerNumber):c.isMetaReviewer?(i.userName=a.MetaReviewerName,i.userNumber=a.MetaReviewerNumber):(i.userName=a.ReviewerName,i.userNumber=a.ReviewerNumber),n=0;n<a.Questions.length;n++){for(var r=a.Questions[n],s=p.autoMap(new m,r),u=0;u<r.Answers.length;u++)s.answers.push(p.autoMap(new f,r.Answers[u]));i.questions.push(s)}(0<i.userNumber?c.userNotes:t).push(i)}for(var l=0===c.userNotes.length?1:c.userNotes[c.userNotes.length-1].userNumber+1,d=0;d<t.length;d++)t[d].userNumber=l++,c.userNotes.push(t[d])}).done(function(){ko.applyBindingsAndShow(c,e)})}}p.submissionUserNotes=function(e,t,o){new i(e,t,o).bindTo("submissionForm")}}(window.app,window.OData,window.print),function(c,t,o){"use strict";function a(e,l){var d=this;d.id=e,d.feedbackId=0,d.trackName=null,d.title=null,d.isSingleTrackConference=null,d.reviews=[],d.metaReviews=[],d.messages=[],d.feedbackQuestions=[],d.feedbackFiles=[],d.print=function(){o()},d.bindTo=function(e){$.when(t.read(c.odata.getUrl(c.odata.entitySet.submissions,d.id,"Reviews"),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t];0===t&&(d.trackName=o.TrackName,d.title=o.SubmissionTitle,d.isSingleTrackConference=o.IsSingleTrackConference);for(var a=c.autoMap(new c.Review,o),n=0;n<o.Questions.length;n++){for(var i=o.Questions[n],r=c.autoMap(new c.Question,i),s=0;s<i.Answers.length;s++)r.answers.push(c.autoMap(new c.QuestionAnswer,i.Answers[s]));a.questions.push(r)}for(n=0;n<o.Files.length;n++){var u=o.Files[n],u=c.autoMap(new c.File,u);a.files.push(u)}a.reviewerNumber===l&&(a.isSelf=!0),d.reviews.push(a)}}),t.read(c.odata.getUrl(c.odata.entitySet.submissions,d.id,"MetaReviews"),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t];0===t&&(d.trackName=o.TrackName,d.title=o.SubmissionTitle,d.isSingleTrackConference=o.IsSingleTrackConference);for(var a=c.autoMap(new c.MetaReview,o),n=0;n<o.Questions.length;n++){for(var i=o.Questions[n],r=c.autoMap(new c.Question,i),s=0;s<i.Answers.length;s++)r.answers.push(c.autoMap(new c.QuestionAnswer,i.Answers[s]));a.questions.push(r)}for(n=0;n<o.Files.length;n++){var u=o.Files[n],u=c.autoMap(new c.File,u);a.files.push(u)}d.metaReviews.push(a)}}),t.read(c.odata.getUrl(c.odata.entitySet.discussionMessages,{id:"{0}".format(c.odata.escapeParam(d.id)),orderby:"Date desc"}),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t];d.messages.push(new c.MessageList(o))}}),$.Deferred(function(r){var e=c.odata.getUrl(c.odata.entitySet.authorFeedbackViews,null,"GetBySubmissionId");t.read({requestUri:e,showProgressIndicator:!1,data:{Id:d.id},method:"POST"},function(e){var t;for(d.feedbackId=e.Id,t=0;t<e.Questions.length;t++){for(var o=e.Questions[t],a=c.autoMap(new c.Question,o),n=0;n<o.Answers.length;n++)a.answers.push(c.autoMap(new c.QuestionAnswer,o.Answers[n]));d.feedbackQuestions.push(a)}for(t=0;t<e.Files.length;t++){var i=e.Files[t],i=c.autoMap(new c.File,i);d.feedbackFiles.push(i)}r.resolve(!0)},function(e){404===e.response.statusCode?d.feedbackId=0:t.defaultError(e),r.resolve(!1)})}).promise()).done(function(){ko.applyBindingsAndShow(d,e)})}}c.submissionReviewingDetails=function(e,t,o){new a(e,t).bindTo(o)}}(window.app,window.OData,window.print),function(m,t,o){"use strict";function f(){var e=this;e.reviewerNumber=m.autoMap(),e.reviewerName=m.autoMap(),e.userType=m.autoMap(),e.questions=[],e.files=[]}function a(e){var p=this;p.id=e,p.trackName=null,p.title=null,p.isSingleTrackConference=null,p.reviews=[],p.print=function(){o()},p.bindTo=function(e){t.read(m.odata.getUrl(m.odata.entitySet.reviewSnapshotAuthorViews,{filter:"SubmissionId eq {0}".format(m.odata.escapeParam(p.id)),orderby:"ReviewerNumber"}),function(e){for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o];0==o&&(p.trackName=a.TrackName,p.title=a.SubmissionTitle,p.isSingleTrackConference=a.IsSingleTrackConference);for(var n=m.autoMap(new f,a),i=0;i<a.Questions.length;i++){for(var r=a.Questions[i],s=m.autoMap(new m.Question,r),u=0;u<r.Answers.length;u++)s.answers.push(m.autoMap(new m.QuestionAnswer,r.Answers[u]));n.questions.push(s)}for(i=0;i<a.Files.length;i++){var l=a.Files[i],l=m.autoMap(new m.File,l);n.files.push(l)}(0<n.reviewerNumber?p.reviews:t).push(n)}for(var d=0==p.reviews.length?1:p.reviews[p.reviews.length-1].reviewerNumber+1,c=0;c<t.length;c++)t[c].reviewerNumber=d++,p.reviews.push(t[c])}).done(function(){ko.applyBindingsAndShow(p,e)})}}m.submissionReviewsSnapshot=function(e){new a(e).bindTo("submissionForm")}}(window.app,window.OData,window.print),function(r,s,u,l,d){"use strict";var c=void 0===r.url?null:r.url.queryString.getValue("filter"),p=void 0===r.url?-1:parseInt(r.url.getUrlParts()[r.url.getUrlParts().length-1]),m=void 0===r.url||"true"===r.url.queryString.getValue("all"),f=void 0!==r.url&&"true"===r.url.queryString.getValue("checkNote"),h=void 0!==r.url&&"true"===r.url.queryString.getValue("checkDiscussion");function i(){var e=this;e.email=r.autoMap(),e.name=r.autoMap(),e.id=r.autoMap(),e.removeRecipientDescription=ko.pureComputed(function(){return"Removes "+e.name+" "+e.email+" from recipient list"})}function g(){var t=this;t.id=r.autoMap(),t.name=r.autoMap(),t.subject=r.autoMap(),t.body=r.autoMap(),t.createStub=function(e){return t.id=0,t.name=e,t.subject="",t.body="",t}}function v(e,t,o){var a=this;function n(e,t){t={SubmissionFilter:c,All:m,CheckNote:f,CheckDiscussion:h,RecipientType:p,Skip:e,Top:t},t={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"SubmissionGetRecipients"),method:"POST",data:{Request:t}};return s.request(t,function(e){for(var t=e.value,o=0;o<t.length;o++)a.recipients.push(r.autoMap(new i,t[o]));a.showAllVisible(a.recipientCount>a.recipients().length)})}a.recipients=ko.observableArray(),a.recipientCount=t,a.showAllVisible=ko.observable(!1),a.showInDialog=function(){u(e).modal("show")},a.showAll=function(){n(10,null)},a.removeRecipient=function(e){a.recipients.remove(e),a.recipientCount--,o.removeRecipient(e)},a.bind=function(){return n(0,10).done(function(){ko.applyBindings(a,e)})}}function w(t){var o=this,a=null;o.name=ko.observable().extend({required:!0}),o.editInDialog=function(){return a=u.Deferred(),o.name(""),o.name.isModified(!1),t.modal("show"),a.promise()},o.bind=function(){ko.applyBindings(o,t[0])},o.saveTemplate=function(){var e=ko.validation.group(o);0<e().length?e.showAllMessages():(a&&a.resolve(o.name()),t.modal("hide"))}}function b(o){var a=this,t=null;a.fromEmail=ko.observable().autoMap(),a.fromName=ko.observable().autoMap(),a.toEmail=ko.observable().autoMap(),a.toName=ko.observable().autoMap(),a.ccEmail=ko.observable().autoMap(),a.recipientCount=ko.observable().autoMap(),a.subject=ko.observable().autoMap(),a.body=ko.observable("").autoMap();var n=null;a.showInDialog=function(e,t){r.autoMap(a,e),n=t,u(o).modal("show")},a.sendEmails=function(){var e={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"SubmissionSend"),method:"POST",data:{Request:n}};s.request(e,function(e){e=e.value;u(o).modal("hide"),t||(t=new r.EmailProgressViewModel(l.getElementById("showProgressDialog"))).bind(),t.showInDialog(e)})},a.bind=function(){ko.applyBindings(a,o)}}function t(e){var o=this,a=null,n=null,t=null;function i(){var e=ko.validation.group(o);if(!(0<e().length))return 1;e.showAllMessages()}o.from=e,o.ccEmail=ko.observable("").extend({email:!0,maxLength:200}).autoMap(),o.ccSMR=ko.observable(!1).autoMap(),o.recipientCount=ko.observable(0),o.templates=ko.observableArray(),o.selectedTemplate=ko.observable(),o.selectedTemplate.subscribe(function(e){o.subject(e.subject),o.subject.isModified(!1),o.body(e.body),o.body.isModified(!1)}),o.subject=ko.observable("").extend({required:!0}).autoMap(),o.body=ko.observable("").extend({required:!0}).autoMap(),o.showPlaceholders=ko.observable(!1),o.showRecipients=function(){alert(o.recipients)},o.deleteRecipientIds=[],o.removeRecipient=function(e){o.deleteRecipientIds.push(e.id),o.recipientCount(o.recipientCount()-1)},o.previewEmail=function(){var t,e;i()&&((t=r.autoMap(o)).SubmissionFilter=c,t.RecipientType=p,t.All=m,t.CheckNote=f,t.CheckDiscussion=h,t.DeleteRecipientIds=o.deleteRecipientIds.join("/"),e={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"SubmissionPreview"),method:"POST",data:{Request:t}},s.request(e,function(e){e.recipientCount=o.recipientCount(),function(e,t){a||(a=new b(l.getElementById("previewEmailDialog"))).bind();a.showInDialog(e,t)}(e,t)}))},o.saveTemplate=function(){var e;i()&&(delete(e=r.autoMap(o)).CcEmail,delete e.CcSMR,e.Name=o.selectedTemplate().name,e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates,o.selectedTemplate().id),method:"PUT",headers:{Prefer:"return-content"},data:e},s.request(e,function(e){o.selectedTemplate().subject=e.Subject,o.selectedTemplate().body=e.Body,r.addMessage("Template '{0}' saved.".format(o.selectedTemplate().name))}))},o.saveTemplateAs=function(o,e){var t,a;i()&&(t=u(e.target),e=u("#newTemplateNameDialog").on("hidden",function(){t.focus()}),delete(a=r.autoMap(o)).CcEmail,delete a.CcSMR,n||(n=new w(e)).bind(),n.editInDialog().then(function(t){a.Name=t;var e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates),method:"POST",headers:{Prefer:"return-content"},data:a};return s.request(e,function(e){e=r.autoMap(new g,e);o.templates.push(e),o.selectedTemplate(e),r.addMessage("Template '{0}' created.".format(t))})}).then(function(){t.focus()}))},o.removeTemplate=function(){var e;o.selectedTemplate().id&&d("Are you sure you want to delete the template?")&&(e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates,o.selectedTemplate().id),method:"DELETE"},s.request(e,function(){r.addMessage("Temmplate '{0}' removed.".format(o.selectedTemplate().name)),o.templates.remove(o.selectedTemplate())}))},o.showRecipients=function(){t?t.showInDialog():(t=new v(l.getElementById("showRecipientsDialog"),o.recipientCount(),o)).bind().done(function(){t.showInDialog()})},o.bindTo=function(e){var t;u.when(((t=r.autoMap(o)).SubmissionFilter=c,t.RecipientType=p,t.All=m,t.CheckNote=f,t.CheckDiscussion=h,t={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"SubmissionCountRecipients"),method:"POST",data:{Request:t}},s.request(t,function(e){o.recipientCount(e.value)})),s.read(r.odata.getUrl(r.odata.entitySet.emailTemplates,{orderby:"Name"}),function(e){o.templates.push((new g).createStub("Select predefined template")),o.templates.push((new g).createStub("Create new"));for(var t=0;t<e.value.length;t++)o.templates.push(r.autoMap(new g,e.value[t]))})).done(function(){ko.applyBindingsAndShow(o,e)})}}r.submissionSendEmail=function(e){new t(e).bindTo("sendEmailForm")}}(window.app,window.OData,window.jQuery,window.document,window.confirm,window.setTimeout),function(v,a,o){"use strict";function w(){var e=this;e.firstName=ko.observable().autoMap(),e.lastName=ko.observable().autoMap(),e.organization=ko.observable().autoMap(),e.email=v.autoMap(),e.isPrimary=v.autoMap(),e.authorId=v.autoMap(),e.fullName=ko.pureComputed(function(){return e.firstName()+" "+e.lastName()})}function b(){var e=this;e.email=v.autoMap(),e.firstName=v.autoMap(),e.lastName=v.autoMap(),e.organization=v.autoMap(),e.fullName=ko.pureComputed(function(){return e.firstName+" "+e.lastName})}function k(e){var t=this;t.userId=v.autoMap(),t.email=v.autoMap(),t.firstName=v.autoMap(),t.lastName=v.autoMap(),t.isReferenceUploaded=v.autoMap(),t.fullName=ko.pureComputed(function(){return t.firstName+" "+t.lastName}),t.downloadLink=ko.pureComputed(function(){return"/api/{0}/ReferenceFile/{1}/{2}".format(window.cmt3.conference.name,e,t.userId)})}function M(){var e=this;e.id=v.autoMap(),e.title=v.autoMap(),e.heading=v.autoMap(),e.answers=[],e.details=null}function S(){var e=this;e.answer=v.autoMap(),e.customData=null,e.yesNo=ko.pureComputed(function(){return"yes"===e.customData.Answer?"Yes":"no"===e.customData.Answer?"No":"Not Applicable"}),e.comment=ko.pureComputed(function(){return e.customData.Comment&&e.customData.Comment.htmlMultiLineEncode()})}function y(){this.reason=v.autoMap()}function I(){this.email=v.autoMap(),this.firstName=v.autoMap(),this.lastName=v.autoMap(),this.reasons=[]}function n(e,t){var g=this;g.id=e,g.submissionQuestionMap=t,g.conferenceName=v.autoMap(),g.trackName=v.autoMap(),g.title=v.autoMap(),g.abstract=v.autoMap(),g.primarySubjectArea=v.autoMap(),g.created=v.autoMap(),g.updated=v.autoMap(),g.isSingleTrackConference=v.autoMap(),g.submissionConflictDomainsRaw=v.autoMap(),g.instructionAfterSubmission=v.autoMap(),g.titleMapping=ko.observable(null).autoMap(),g.idTitle=ko.computed(function(){return g.titleMapping()?"ID":"Paper ID"}),g.titleTitle=ko.computed(function(){var e=g.titleMapping();return e||"Paper Title"}),g.authors=[],g.conferenceRequestChairs=[],g.references=[],g.secondarySubjectAreas=[],g.files=[],g.supplementaryFiles=[],g.revisionFiles=[],g.submissionQuestions=[],g.reproQuestions=[],g.conflicts=[],g.print=function(){o()},g.emailTo=ko.observable("currentUser"),g.returnTrue=function(){return!0},g.sendEmail=function(){var e={EmailToCurrentUser:"currentUser"===g.emailTo()},e={requestUri:v.odata.getUrl(v.odata.entitySet.submissions,g.id,"SendEmail"),method:"POST",headers:{Prefer:"return-content"},data:e};a.request(e,function(e){if(e)for(var t=0;t<e.value.length;t++)v.addMessage("Error sending email to {0}.".format(e.value[t]),null,"error");else v.addMessage("Emails sent.")})},g.updateAuthor=function(e,t,o){e={AuthorId:e.authorId,FirstName:e.firstName(),LastName:e.lastName(),Organization:e.organization()},e={requestUri:v.odata.getUrl(v.odata.entitySet.submissions,g.id,"ModifyAuthor"),method:"POST",headers:{Prefer:"return-content"},data:{Request:e}};a.request(e,function(){v.addMessage("Update successful.")},function(e){v.addErrorMessage("Unable to edit author."+v.odata.getErrorMessage(e))})},g.bindTo=function(e){var t;t={requestUri:v.odata.getUrl(v.odata.entitySet.submissionViews,g.id,"GetSummaryView"),headers:{"Content-Type":"application/json"},method:"POST"},a.read(t,function(e){var t,o,a;if(e){if(v.autoMap(g,e),e.SubmissionFilesJson)for(var n=JSON.parse(e.SubmissionFilesJson),i=0;i<n.length;i++){var r=v.autoMap(new v.FileWithFormat,n[i]);n[i].IsSubmissionFile?g.files.push(r):n[i].IsRevisionFile?g.revisionFiles.push(r):n[i].IsSupplementaryFile&&g.supplementaryFiles.push(r)}if(e.SecondarySubjectAreasJson){var s=JSON.parse(e.SecondarySubjectAreasJson);for(i=0;i<s.length;i++)g.secondarySubjectAreas.push(s[i].FullName)}if(e.AuthorsJson){var u=JSON.parse(e.AuthorsJson);for(i=0;i<u.length;i++)g.authors.push(v.autoMap(new w,u[i]))}if(e.ConferenceRequestChairsJson){var l=JSON.parse(e.ConferenceRequestChairsJson);for(i=0;i<l.length;i++)g.conferenceRequestChairs.push(v.autoMap(new b,l[i]))}if(e.ReferencesJson){var d=JSON.parse(e.ReferencesJson);for(i=0;i<d.length;i++)g.references.push(v.autoMap(new k(g.id),d[i]))}if(e.QuestionAnswersJson)for(t=JSON.parse(e.QuestionAnswersJson),i=0;i<t.length;i++){if(o=v.autoMap(new M,t[i]),a=t[i].Answers)for(h=0;h<a.length;h++)o.answers.push(v.autoMap(new S,a[h]));o.details=g.submissionQuestionMap[o.id],g.submissionQuestions.push(o)}if(e.ReproducibilityQuestionAnswersJson)for(t=JSON.parse(e.ReproducibilityQuestionAnswersJson),i=0;i<t.length;i++){if(o=v.autoMap(new M,t[i]),a=t[i].Answers)for(h=0;h<a.length;h++){var c=v.autoMap(new S,a[h]);c.customData=JSON.parse(a[h].Text),o.answers.push(c)}g.reproQuestions.push(o)}if(e.ConflictsJson){var p=JSON.parse(e.ConflictsJson);for(i=0;i<p.length;i++){for(var m=v.autoMap(new I,p[i]),f=p[i].ConflictWithReason,h=0;h<f.length;h++)m.reasons.push(v.autoMap(new y,f[h]));g.conflicts.push(m)}}}}).done(function(){ko.applyBindingsAndShow(g,e)})}}v.submissionSummary=function(e,t){new n(e,t).bindTo("submissionForm")}}(window.app,window.OData,window.print,(window.jQuery,new window.app.RoleService)),function(u,t,o){"use strict";function l(){var e=this;e.email=u.autoMap(),e.name=u.autoMap(),e.orcidId=u.autoMap(),e.city=u.autoMap(),e.isPrimary=u.autoMap()}function d(){this.title=u.autoMap(),this.heading=u.autoMap(),this.answers=[]}function c(){var e=this;e.text=u.autoMap(),e.value=u.autoMap(),e.customData=null,e.yesNo=ko.pureComputed(function(){return"yes"===e.customData.Answer?"Yes":"no"===e.customData.Answer?"No":"Not Applicable"}),e.comment=ko.pureComputed(function(){return e.customData.Comment&&e.customData.Comment.htmlMultiLineEncode()})}function a(e){var s=this;s.id=e,s.conferenceName=u.autoMap(),s.trackName=u.autoMap(),s.title=u.autoMap(),s.abstract=u.autoMap(),s.isSingleTrackConference=u.autoMap(),s.isEditAllowed=u.autoMap(),s.authors=[],s.files=[],s.questions=[],s.reproQuestions=[],s.print=function(){o()},s.returnTrue=function(){return!0},s.bindTo=function(e){t.read(u.odata.getUrl(u.odata.entitySet.cameraReadySubmissionViews,s.id),function(e){var t,o,a,n,i;for(u.autoMap(s,e),t=0;t<e.Files.length;t++)(i=u.autoMap(new u.FileWithFormat,e.Files[t])).updated=e.Files[t].UploadDate,i.fileId=e.Files[t].Id,s.files.push(i);for(t=0;t<e.Authors.length;t++)s.authors.push(u.autoMap(new l,e.Authors[t]));for(t=0;t<e.Questions.length;t++){for(a=e.Questions[t],n=u.autoMap(new d,a),o=0;o<a.Answers.length;o++)n.answers.push(u.autoMap(new c,a.Answers[o]));s.questions.push(n)}for(t=0;t<e.ReproducibilityQuestions.length;t++){for(a=e.ReproducibilityQuestions[t],n=u.autoMap(new d,a),o=0;o<a.Answers.length;o++){var r=u.autoMap(new c,a.Answers[o]);r.customData=JSON.parse(a.Answers[o].CustomData),n.answers.push(r)}s.reproQuestions.push(n)}}).done(function(){ko.applyBindingsAndShow(s,e)})}}u.cameraReadySubmissionSummary=function(e,t){new a(e).bindTo(t)}}(window.app,window.OData,window.print,(window.jQuery,new window.app.RoleService)),function(r,s,u,l,d){"use strict";var c=null==r.url?null:r.url.queryString.getValue("filter"),p=null==r.url?null:r.url.queryString.getValue("inviteType");function i(e){this.email=e.Email,null==e.MiddleInitial||""==e.MiddleInitial?this.name=e.FirstName+" "+e.LastName:this.name=e.FirstName+" "+e.MiddleInitial+" "+e.LastName}function m(){var t=this;t.id=r.autoMap(),t.name=r.autoMap(),t.subject=r.autoMap(),t.body=r.autoMap(),t.createStub=function(e){return t.id=0,t.name=e,t.subject="",t.body="",t}}function f(e,t){var n=this;function o(e,t){var o=r.odata.entitySet.userModels;p==r.enums.inviteType.reviewer?o=r.odata.entitySet.manageInviteReviewers:p==r.enums.inviteType.metaReviewer?o=r.odata.entitySet.manageInviteMetaReviewers:p==r.enums.inviteType.seniorMetaReviewer&&(o=r.odata.entitySet.manageInviteSeniorMetaReviewers);t=r.odata.getUrl(o,{filter:c,skip:e,top:t});return s.read(t,function(e){for(var t={},o=0;o<e.value.length;o++){var a=e.value[o];t[a.Email]||(t[a.Email]=!0,n.recipients.push(new i(a)))}n.showAllVisible(n.recipientCount>n.recipients().length)})}n.recipients=ko.observableArray(),n.recipientCount=t,n.showAllVisible=ko.observable(!1),n.showInDialog=function(){u(e).modal("show")},n.showAll=function(){o(10,null)},n.bind=function(){return o(0,10).done(function(){ko.applyBindings(n,e)})}}function h(t){var o=this,a=null;o.name=ko.observable().extend({required:!0}),o.editInDialog=function(){return a=u.Deferred(),o.name(""),o.name.isModified(!1),u(t).modal("show"),a.promise()},o.bind=function(){ko.applyBindings(o,t)},o.saveTemplate=function(){var e=ko.validation.group(o);0<e().length?e.showAllMessages():(a&&a.resolve(o.name()),u(t).modal("hide"))}}function g(o){var a=this,t=null;a.fromEmail=ko.observable().autoMap(),a.fromName=ko.observable().autoMap(),a.toEmail=ko.observable().autoMap(),a.toName=ko.observable().autoMap(),a.recipientCount=ko.observable().autoMap(),a.subject=ko.observable().autoMap(),a.body=ko.observable("").autoMap();var n=null;a.showInDialog=function(e,t){r.autoMap(a,e),n=t,u(o).modal("show")},a.sendEmails=function(){var e={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"UserSend"),method:"POST",data:{Request:n}};s.request(e,function(e){e=e.value;u(o).modal("hide"),t||(t=new r.EmailProgressViewModel(l.getElementById("showProgressDialog"))).bind(),t.showInDialog(e)})},a.bind=function(){ko.applyBindings(a,o)}}function o(e){var a=this,o=null,t=null,n=null;function i(){var e=ko.validation.group(a);if(!(0<e().length))return 1;e.showAllMessages()}a.from=e,a.recipientCount=0,a.templates=ko.observableArray(),a.selectedTemplate=ko.observable(),a.selectedTemplate.subscribe(function(e){a.subject(e.subject),a.subject.isModified(!1),a.body(e.body),a.body.isModified(!1)}),a.subject=ko.observable("").extend({required:!0}).autoMap(),a.body=ko.observable("").extend({required:!0}).autoMap(),a.showPlaceholders=ko.observable(!1),a.showRecipients=function(){alert(a.recipients)},a.previewEmail=function(){var t,e;i()&&((t=r.autoMap(a)).UserFilter=c,t.InviteType=p,e={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"UserPreview"),method:"POST",data:{Request:t}},s.request(e,function(e){e.recipientCount=a.recipientCount,function(e,t){o||(o=new g(l.getElementById("previewEmailDialog"))).bind();o.showInDialog(e,t)}(e,t)}))},a.saveTemplate=function(){var e;i()&&((e=r.autoMap(a)).Name=a.selectedTemplate().name,e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates,a.selectedTemplate().id),method:"PUT",headers:{Prefer:"return-content"},data:e},s.request(e,function(e){a.selectedTemplate().subject=e.Subject,a.selectedTemplate().body=e.Body,r.addMessage("Template '{0}' saved.".format(a.selectedTemplate().name))}))},a.saveTemplateAs=function(){var o;i()&&(o=r.autoMap(a),t||(t=new h(l.getElementById("newTemplateNameDialog"))).bind(),t.editInDialog().done(function(t){o.Name=t;var e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates),method:"POST",headers:{Prefer:"return-content"},data:o};s.request(e,function(e){e=r.autoMap(new m,e);a.templates.push(e),a.selectedTemplate(e),r.addMessage("Template '{0}' created.".format(t))})}))},a.removeTemplate=function(){var e;a.selectedTemplate().id&&d("Are you sure you want to delete the template?")&&(e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates,a.selectedTemplate().id),method:"DELETE"},s.request(e,function(){r.addMessage("Temmplate '{0}' removed.".format(a.selectedTemplate().name)),a.templates.remove(a.selectedTemplate())}))},a.showRecipients=function(){n?n.showInDialog():(n=new f(l.getElementById("showRecipientsDialog"),a.recipientCount)).bind().done(function(){n.showInDialog()})},a.bindTo=function(e){var t;u.when(((t=r.autoMap(a)).UserFilter=c,t.InviteType=p,t={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,"UserCountRecipients"),method:"POST",data:{Request:t}},s.request(t,function(e){a.recipientCount=e.value})),s.read(r.odata.getUrl(r.odata.entitySet.emailTemplates,{orderby:"Name"}),function(e){a.templates.push((new m).createStub("Select predefined template")),a.templates.push((new m).createStub("Create new"));for(var t=0;t<e.value.length;t++)a.templates.push(r.autoMap(new m,e.value[t]))})).done(function(){ko.applyBindingsAndShow(a,e)})}}r.userSendEmail=function(e,t){new o(e).bindTo(t)}}(window.app,window.OData,window.jQuery,window.document,window.confirm,window.setTimeout),function(o){"use strict";o.switchToLinkedUser=function(e){e={requestUri:o.odata.getGlobalUrl(o.odata.entitySet.users,e,"SwitchToLinkedUser"),method:"POST"};OData.request(e,function(e){o.odata.processRedirectResponse(e)})},o.removeLinkedUser=function(e,t){confirm("Are you sure to remove linked account {0}?".format(t))&&(e={requestUri:o.odata.getGlobalUrl(o.odata.entitySet.users,e,"RemoveLinkedUser"),method:"POST"},OData.request(e,function(){o.addMessage("Linked account removed.",null,"success","text",!0),window.location.reload()}))}}(window.app,window.document),function(a,n){"use strict";function e(t){var o=this;o.email=ko.observable("").extend({required:!0,email:!0}).autoMap(),o.password=ko.observable("").extend({required:!0,minLength:6}).autoMap(),o.loginInvalid=ko.observable(!1),o.showVerifyEmail=ko.observable(!1),o.error=ko.observable(""),o.login=function(){o.loginInvalid(!1),o.showVerifyEmail(!1);var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;var t=a.autoMap(o),e=a.url.queryString.getValue("ReturnUrl"),t={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"Login")+(e?"?ReturnUrl="+encodeURIComponent(e):""),method:"POST",data:{Request:t}};return n.request(t,function(e){a.odata.processRedirectResponse(e)},function(e){var t;401==e.response.statusCode||403==e.response.statusCode?(o.loginInvalid(!0),t=a.getODataErrorMessage(e),o.error(t.message),"EmailNotVerified"==t.errorCode&&o.showVerifyEmail(!0)):n.defaultError(e)}),!1},o.bindTo=function(e){ko.applyBindingsAndShow(o,e),$(t).focus()}}a.userLogin=function(){new e(document.getElementById("emailTextbox")).bindTo("loginForm")}}(window.app,window.OData),function(i,r,e){"use strict";var o;function a(){var n=this;n.email=ko.observable("").extend({required:!0,email:!0,validation:{async:!0,message:"Email is already being used.",validator:function(t,e,o){var a={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"IsFederationEmail"),method:"POST",showProgressIndicator:!1,data:{Email:t}};r.request(a,function(e){e.value?(n.emailIsValidating(!1),o(!1)):(e={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"CheckIfAccountExists"),method:"POST",showProgressIndicator:!1,data:{Email:t}},r.request(e,function(e){o(!e.value)},function(e){n.emailIsValidating(!1),r.defaultError(e)}))},function(e){n.emailIsValidating(!1),r.defaultError(e)})}}}).autoMap(),n.email.isValidating.subscribe(function(e){n.emailIsValidating(e)}),n.emailIsValidating=ko.observable(!1),n.password=ko.observable("").extend({required:!0,minLength:10}).autoMap(),n.passwordHadFocus=ko.observable(!1),n.passwordHasFocus=ko.computed({read:function(){return n.passwordHadFocus()},write:function(e){e&&n.passwordHadFocus(!0)},owner:this}),n.confirmPassword=ko.observable("").extend({required:!0,minLength:6,equal:{params:n.password,message:"Confirm password doesn't match password."}}),n.firstName=ko.observable("").extend({required:!0,maxLength:200}).autoMap(),n.middleInitial=ko.observable("").extend({pattern:/^.*$/,maxLength:10}).autoMap(),n.lastName=ko.observable("").extend({required:!0,maxLength:200}).autoMap(),n.nickname=ko.observable("").extend({pattern:/^.*$/,maxLength:100}).autoMap(),n.organization=ko.observable("").extend({required:!0,maxLength:200}).autoMap(),n.phoneNumber=ko.observable("").extend({pattern:/^\+?(?:[0-9 \-]+|\([0-9]+\))+$/,maxLength:100}).autoMap(),n.alternateEmail=ko.observable("").extend({email:!0,maxLength:200}).autoMap(),n.agreementAccepted=ko.observable(!1).extend({equal:{params:!0,message:"You must accept agreement to continue."}}).autoMap(),n.availableCountries=ko.observable(i.countries.getCountries()),n.countryCode=ko.observable().extend({required:!0}).autoMap(),n.googleScholarId=ko.observable("").extend({pattern:/^[-_0-9A-Za-z]{12}$/,maxLength:12}).autoMap(),n.semanticScholarId=ko.observable("").extend({pattern:/^[1-9]\d*$/,maxLength:12}).autoMap(),n.dblpId=ko.observable("").extend({pattern:/^\d{2,3}\/\d+(-\d+)?|[a-z]\/[a-zA-Z][0-9A-Za-z]*(-\d+)?$/,maxLength:50}).autoMap(),n.orcidId=ko.observable("").extend({pattern:/^\d{4}-\d{4}-\d{4}-(\d{4}|\d{3}X)$/,maxLength:19}).autoMap(),n.openReviewId=ko.observable("").extend({pattern:/^\~(.+)\d{1}$/,maxLength:200}).autoMap(),n.captcha=new e.createViewModel,n.register=function(){var e=ko.validation.group(n);0<e().length?e.showAllMessages():((e=i.autoMap(n)).ValidateCaptchaRequest=n.captcha.getRequestModel(),e={requestUri:i.odata.getUrl(i.odata.entitySet.users,{ReturnUrl:document.getElementById("returnUrl").value},"Register"),method:"POST",data:{Request:e}},r.request(e,function(e){window.location=o},function(e){var t;403==e.response.statusCode?(t=i.getODataErrorMessage(e).message,i.addMessage(t,"Registration failed:","error")):r.defaultError(e),n.captcha.getNew(!1)}))},n.bindTo=function(e){ko.applyBindingsAndShow(n,e),n.captcha.getNew(!1)}}i.userRegister=function(e,t){o=e,(new a).bindTo(t)}}(window.app,window.OData,new window.app.CaptchaService),function(i,r,e){"use strict";var o;function a(){var n=this;n.email=ko.observable("").extend({required:!0,email:!0,validation:{async:!0,message:"Invalid user account or you are trying to verify email for external user.",validator:function(t,e,o){var a={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"IsFederationEmail"),method:"POST",showProgressIndicator:!1,data:{Email:t}};r.request(a,function(e){e.value?(n.emailIsValidating(!1),o(!1)):(e={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"CheckIfAccountExists"),method:"POST",showProgressIndicator:!1,data:{Email:t}},r.request(e,function(e){e.value||n.emailIsValidating(!1),o(e.value)},function(){o(!1)}))},function(e){o(!1)})}}}).autoMap(),n.email.isValidating.subscribe(function(e){n.emailIsValidating(e)}),n.emailIsValidating=ko.observable(!1),n.captcha=new e.createViewModel,n.verify=function(){var e=ko.validation.group(n);0<e().length?e.showAllMessages():((e=i.autoMap(n)).ValidateCaptchaRequest=n.captcha.getRequestModel(),e={requestUri:i.odata.getUrl(i.odata.entitySet.users,{ReturnUrl:document.getElementById("returnUrl").value},"VerifyEmail"),method:"POST",data:{Request:e}},r.request(e,function(e){window.location=o},function(e){var t;404==e.response.statusCode?(t=i.getODataErrorMessage(e).message,i.addMessage(t,"Verify Email failed:","error")):r.defaultError(e)}).always(function(){n.captcha.getNew(!1)}))},n.bindTo=function(e){ko.applyBindingsAndShow(n,e),n.captcha.getNew(!1)}}i.userVerify=function(e,t){o=e,(new a).bindTo(t)}}(window.app,window.OData,new window.app.CaptchaService),function(n,i,e){"use strict";var o;function a(){var a=this;a.email=ko.observable("").extend({required:!0,email:!0,validation:{async:!0,message:"Invalid user account.",validator:function(e,t,o){e={requestUri:n.odata.getGlobalUrl(n.odata.entitySet.users,null,"CheckIfAccountExists"),method:"POST",showProgressIndicator:!1,data:{Email:e}};i.request(e,function(e){e.value||a.emailIsValidating(!1),o(e.value)},function(){o(!1)})}}}).autoMap(),a.email.isValidating.subscribe(function(e){a.emailIsValidating(e)}),a.emailIsValidating=ko.observable(!1),a.captcha=new e.createViewModel,a.linkToAccount=function(){var e=ko.validation.group(a);0<e().length?e.showAllMessages():((e=n.autoMap(a)).ValidateCaptchaRequest=a.captcha.getRequestModel(),e={requestUri:n.odata.getUrl(n.odata.entitySet.users,null,"RequestLinkToAccount"),method:"POST",data:{Request:e}},i.request(e,function(e){window.location=o+"?linkto="+encodeURIComponent(a.email())},function(e){var t;404==e.response.statusCode?(t=n.getODataErrorMessage(e).message,n.addMessage(t,"Link to Account failed:","error")):i.defaultError(e)}).always(function(){a.captcha.getNew(!1)}))},a.bindTo=function(e){ko.applyBindingsAndShow(a,e),a.captcha.getNew(!1)}}n.linkToAccount=function(e,t){o=e,(new a).bindTo(t)}}(window.app,window.OData,new window.app.CaptchaService),function(i,r,e){"use strict";function a(t,o){var n=this;(n.useCaptcha=t)&&(n.captcha=new e.createViewModel),n.email=ko.observable("").extend({required:{params:!0,message:"Email is required."},email:!0,validation:{async:!0,message:"Invalid user account.",validator:function(t,e,o){var a={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"IsFederationEmail"),method:"POST",showProgressIndicator:!1,data:{Email:t}};r.request(a,function(e){e.value?(n.emailIsValidating(!1),o(!1)):(e={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"CheckIfAccountExists"),method:"POST",showProgressIndicator:!1,data:{Email:t}},r.request(e,function(e){e.value||n.emailIsValidating(!1),o(e.value)},function(){o(!1)}))},function(e){o(!1)})}}}).autoMap(),n.email.isValidating.subscribe(function(e){n.emailIsValidating(e)}),n.emailIsValidating=ko.observable(!1),n.reset=function(){var e=ko.validation.group(n);0<e().length?e.showAllMessages():(e=i.autoMap(n),n.useCaptcha&&(e.ValidateCaptchaRequest=n.captcha.getRequestModel()),e={requestUri:i.odata.getUrl(i.odata.entitySet.users,null,"ResetPassword"),method:"POST",data:{Request:e}},r.request(e,function(e){o?i.addMessage("Password reset link has been sent to you. Please check your email.",null,null,null,null,5e3):i.addMessage("Password has been reset and sent to you. Please check your email.")},function(e){var t;404===e.response.statusCode?(t=i.getODataErrorMessage(e).message,i.addMessage(t,"Reset password failed:","error")):r.defaultError(e),n.useCaptcha&&n.captcha.getNew(!1)}))},n.bindTo=function(e){ko.applyBindingsAndShow(n,e),t&&n.captcha.getNew(!1)}}i.resetPassword=function(e,t,o){new a(e,t).bindTo(o)}}(window.app,window.OData,new window.app.CaptchaService),function(i,r,e){"use strict";function n(t,o,a){var n=this;(n.useCaptcha=t)&&(n.captcha=new e.createViewModel),n.password=ko.observable("").extend({required:!0,minLength:10}).autoMap(),n.passwordHadFocus=ko.observable(!1),n.passwordHasFocus=ko.computed({read:function(){return n.passwordHadFocus()},write:function(e){e&&n.passwordHadFocus(!0)},owner:this}),n.confirmPassword=ko.observable("").extend({required:!0,minLength:6,equal:{params:n.password,message:"Confirm password doesn't match New password."}}),n.setNewPassword=function(){var e=ko.validation.group(n);0<e().length?e.showAllMessages():(e={Id:o,Hash:a,Password:n.password()},n.useCaptcha&&(e.ValidateCaptchaRequest=n.captcha.getRequestModel()),e={requestUri:i.odata.getUrl(i.odata.entitySet.users,null,"SetNewPassword"),method:"POST",data:{Request:e}},r.request(e,function(e){i.addMessage("Password has been updated.")},function(e){var t;400===e.response.statusCode||403===e.response.statusCode?(t=i.getODataErrorMessage(e).message,i.addMessage(t,"Reset password failed:","error")):r.defaultError(e),n.useCaptcha&&n.captcha.getNew(!1)}))},n.bindTo=function(e){ko.applyBindingsAndShow(n,e),t&&n.captcha.getNew(!1)}}i.setNewPassword=function(e,t,o,a){new n(e,t,o).bindTo(a)}}(window.app,window.OData,new window.app.CaptchaService),function(a,i,r){"use strict";function n(o){var n=this;n.firstName=ko.observable("").extend({required:!0,minLength:1,maxLength:200}).autoMap(),n.middleInitial=ko.observable("").extend({maxLength:10}).autoMap(),n.lastName=ko.observable("").extend({required:!0,minLength:1,maxLength:200}).autoMap(),n.nickname=ko.observable("").extend({maxLength:200}).autoMap(),n.organization=ko.observable("").extend({required:!0,minLength:1,maxLength:200}).autoMap(),n.availableCountries=ko.observable(i.countries.getCountries()),n.countryCode=ko.observable().extend({required:!0}).autoMap(),n.googleScholarId=ko.observable("").extend({pattern:/^[-_0-9A-Za-z]{12}$/,maxLength:12}).autoMap(),n.semanticScholarId=ko.observable("").extend({pattern:/^[1-9]\d*$/,maxLength:12}).autoMap(),n.dblpId=ko.observable("").extend({pattern:/^\d{2,3}\/\d+(-\d+)?|[a-z]\/[a-zA-Z][0-9A-Za-z]*(-\d+)?$/,maxLength:50}).autoMap(),n.orcidId=ko.observable("").extend({pattern:/^\d{4}-\d{4}-\d{4}-(\d{4}|\d{3}X)$/,maxLength:19}).autoMap(),n.openReviewId=ko.observable("").extend({pattern:/^\~(.+)\d{1}$/,maxLength:200}).autoMap(),n.publicationEmails=ko.observable("").extend({maxLength:1e3}).autoMap(),n.publicationUrlsMultiLine=ko.observable("").extend({maxLength:4e3}).autoMap(),n.doNotEmail=ko.observable(!1).autoMap(),n.showPublicationUrlsErrorMessage=ko.observable(!1),n.showValidationWarning=ko.observable(!1),n.changeProfile=function(){var e=!0,t=ko.validation.group(n,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),(e=!!function(){if(n.publicationUrlsMultiLine())for(var e=i.getPublicationUrlPattern(),t=n.publicationUrlsMultiLine().split(/[\r\n]+/),o=0;o<t.length;o++){var a=t[o].trim();if(a&&!e.test(a))return void n.showPublicationUrlsErrorMessage(!0)}return 1}()&&e)?(e={FirstName:n.firstName(),MiddleInitial:n.middleInitial(),LastName:n.lastName(),Nickname:n.nickname(),Organization:n.organization(),CountryCode:n.countryCode(),CountryName:i.countries.getCountryNameByCode(n.countryCode()),GoogleScholarId:n.googleScholarId(),SemanticScholarId:n.semanticScholarId(),DblpId:n.dblpId(),OrcidId:n.orcidId(),OpenReviewId:n.openReviewId(),PublicationEmails:n.publicationEmails(),PublicationUrls:function(){var e=[];if(n.publicationUrlsMultiLine())for(var t=n.publicationUrlsMultiLine().split(/[\r\n]+/),o=0;o<t.length;o++){var a=t[o].trim();a&&e.push(a)}return 0<e.length?JSON.stringify(e):null}(),DoNotEmail:n.doNotEmail()},e={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"ChangeProfile"),method:"POST",data:{Request:e}},r.request(e,function(e){a(o).modal("hide"),i.addMessage("Profile has been updated.")},function(e){403==e.response.statusCode||400==e.response.statusCode?(e=i.getODataErrorMessage(e).message,i.addMessage(e,"Update profile failed:","error")):i.addMessage("Update profile failed.",null,"error")})):n.showValidationWarning(!0)},n.bind=function(){ko.applyBindings(n,o)},n.showDialog=function(e){n.showValidationWarning(!1),n.firstName(e.firstName),n.firstName.isModified(!1),n.middleInitial(e.middleInitial),n.lastName(e.lastName),n.lastName.isModified(!1),n.nickname(e.nickname),n.organization(e.organization),n.organization.isModified(!1),n.countryCode(e.countryCode),n.countryCode.isModified(!1),n.googleScholarId(e.googleScholarId),n.semanticScholarId(e.semanticScholarId),n.dblpId(e.dblpId),n.orcidId(e.orcidId),n.openReviewId(e.openReviewId),n.publicationEmails(e.publicationEmails),n.doNotEmail(e.doNotEmail),e.PublicationUrls&&(e=JSON.parse(e.PublicationUrls),n.publicationUrlsMultiLine(e.join("\r\n"))),a(o).modal("show")}}function s(e){var t=this;t.email=e.Email,t.firstName=e.FirstName,t.lastName=e.LastName,t.organization=e.Organization,t.middleInitial=e.MiddleInitial,t.nickname=e.Nickname,t.countryCode=e.CountryCode,t.googleScholarId=e.GoogleScholarId,t.semanticScholarId=e.SemanticScholarId,t.dblpId=e.DblpId,t.orcidId=e.OrcidId,t.openReviewId=e.OpenReviewId,t.publicationEmails=e.PublicationEmails,t.PublicationUrls=e.PublicationUrls,t.doNotEmail=e.DoNotEmail}i.userProfile=function(){var t=this;t.options={elementId:"userProfile"};var e=null;t.userProfile=null,t.changeProfile=function(){null==e&&(e=new n(document.getElementById("userProfileDialog"))).bind(),r.request({requestUri:i.odata.getUrl(i.odata.entitySet.users,null,"GetCurrentProfile"),method:"GET"},function(e){t.userProfile=new s(e)}).done(function(){e.showDialog(t.userProfile)})};var o=document.getElementById(t.options.elementId);o&&ko.applyBindings(t,o)}}(window.jQuery,window.app,window.OData),function(n,i,r){"use strict";function a(o,e){var a=this;a.currentEmail=ko.observable("").extend({required:!0}).autoMap(),a.newEmail=ko.observable("").extend({required:!0,email:!0,maxLength:200}).autoMap(),a.confirmEmail=ko.observable("").extend({required:!0,equal:{params:a.newEmail,message:"Emails must match."}}),a.showValidationWarning=ko.observable(!1),a.changeEmail=function(){var e=!0,t=ko.validation.group(a,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e?(e={CurrentEmail:a.currentEmail(),NewEmail:a.newEmail()},e={requestUri:i.odata.getGlobalUrl(i.odata.entitySet.users,null,"ChangeEmail"),method:"POST",data:{Request:e}},r.request(e,function(e){n(o).modal("hide"),i.addMessage("Account email change request has been sent to your inbox for the new account email. Please check your email to complete the request.")},function(e){403==e.response.statusCode?(e=i.getODataErrorMessage(e).message,i.addMessage(e,"Change Email failed:","error")):i.addMessage("Change Email failed.",null,"error")})):a.showValidationWarning(!0)},a.bind=function(){ko.applyBindings(a,o)},a.showDialog=function(){a.showValidationWarning(!1),a.currentEmail(""),a.currentEmail.isModified(!1),a.newEmail(""),a.newEmail.isModified(!1),a.confirmEmail(""),a.confirmEmail.isModified(!1),n(o).modal("show"),setTimeout(function(){n(e).focus()},600)}}i.userEmail=function(){var e=this;e.options={elementId:"userEmail"};var t=null;e.changeEmail=function(){null==t&&(t=new a(document.getElementById("changeEmailDialog"),document.getElementById("changeEmailDialog-currentEmailTextbox"))).bind(),t.showDialog()};var o=document.getElementById(e.options.elementId);o&&ko.applyBindings(e,o)}}(window.jQuery,window.app,window.OData),function(a){function o(e){var o=a.observable(e);return a.dependentObservable({read:function(){return o()},write:function(e){var t=parseFloat(e);o(isNaN(t)?e:t)}})}function n(e,t){var i=this;i.CurrentPage=o(1),i.TotalItemCount=e,i.PageSize=t,i.PageSlide=o(2),i.LastPage=a.computed(function(){if(0<i.PageSize()&&0<i.TotalItemCount()){var e=i.TotalItemCount()%i.PageSize(),t=(i.TotalItemCount()-e)/i.PageSize();return 0<e&&t++,t}return 1}),i.HasNextPage=a.computed(function(){return i.CurrentPage()<i.LastPage()}),i.HasPrevPage=a.computed(function(){return 1<i.CurrentPage()}),i.FirstItemIndex=a.computed(function(){return 0==i.TotalItemCount()?0:i.PageSize()*(i.CurrentPage()-1)+1}),i.LastItemIndex=a.computed(function(){return 0==i.TotalItemCount()?0:0<i.PageSize()?Math.min(i.FirstItemIndex()+i.PageSize()-1,i.TotalItemCount()):i.TotalItemCount()}),i.ThisPageCount=a.computed(function(){var e=i.LastItemIndex()%i.PageSize();return 0<e?e:i.PageSize()}),i.Pages=a.computed(function(){for(var e=i.LastPage(),t=Math.max(1,i.CurrentPage()-i.PageSlide()),o=Math.min(e,i.CurrentPage()+i.PageSlide()),t=Math.max(1,Math.min(o-2*i.PageSlide(),t)),o=Math.min(e,Math.max(t+2*i.PageSlide(),o)),a=[],n=t;n<=o;n++)a.push(n);return a})}a.pager=function(e,t){t=new n(e,t);return a.observable(t)}}(ko),function(u,s,r){"use strict";function l(e,o){var t,a=this,n=e;function i(){r(),t=a.isAssigned.subscribe(s)}function r(){t&&"function"==typeof t.dispose&&t.dispose()}function s(){void 0===a.initialState?a.initialState=a.isAssigned():function(){var t=this;t.isToggleInProgress(!0);var e={UserId:o.userId};e.Type=t.isAssigned()?"Assign":"Remove",OData.request({requestUri:u.odata.getUrl(u.odata.entitySet.submissions,t.id,o.isMeta?o.isSenior?"SeniorMetaAssign":"MetaAssign":"Assign"),method:"POST",showProgressIndicator:!1,data:{Request:e}},function(){t.isAssigned()===t.initialState?a.css(""):(a.css(t.isAssigned()?"success":"error"),t.isAssigned()&&setTimeout(function(){n.notifyAssignment(t)},100))},function(e){r(),a.isAssigned(!a.isAssigned()),i(),u.addErrorMessage("Unable to edit assignment for '"+t.title+"'. "+u.odata.getErrorMessage(e))}).always(function(){t.isToggleInProgress(!1)})}.call(a)}a.id=u.autoMap(),a.title=u.autoMap(),a.trackName=u.autoMap(),a.authors=u.autoMap(),a.primarySubjectArea=u.autoMap(),a.secondarySubjectAreas=u.autoMap(),a.bid=u.autoMap(),a.relevance=u.autoMap(),a.tpmsRank=u.autoMap(),a.assignmentsNumber=u.autoMap(),a.isAssigned=ko.observable().autoMap(),a.isSubmitted=ko.observable().autoMap(),a.isSubmittedText=ko.pureComputed(function(){return a.isSubmitted()?"Yes":"No"}),a.initialState=void 0,a.css=ko.observable(""),a.isToggleInProgress=ko.observable(!1),i()}function i(t,o){var a=this;a.id=ko.observable(""),a.title=ko.observable(""),a.notifyAssignment=function(){var e={requestUri:u.odata.getUrl(u.odata.entitySet.submissions,a.id(),"AssignNotify"),method:"POST",showProgressIndicator:!1,data:{UserId:o.userId}};s.request(e,function(){$(t).modal("hide"),setTimeout(function(){u.addMessage("Notification has been sent to {0}.".format(o.fullName()))},300)})},a.bind=function(){ko.applyBindings(a,t)},a.editInDialog=function(e){a.id(e.id),a.title(e.title),$(t).modal("show")}}function d(t,o){var a=this;a.user=t,a.showAssignedOnly=ko.observable("false"),a.track=ko.observable(),a.trackChangeSubscription=null,a.submissions=ko.observableArray([]),a.showAssignedOnly.subscribe(a.loadData,a);var n=null;a.notifyAssignment=function(e){o&&-1!==o.indexOf(a.track().trackId)&&(null===n&&(n=new i(r.getElementById("notifyNewAssignmentDialog"),t)).bind(),n.editInDialog(e))},u.DataTable.call(a)}function n(e,t){var o=this;o.trackId=u.autoMap(),o.trackName=u.autoMap(),o.isTpmsEnabled=u.autoMap(),o.quota=u.autoMap(),o.primarySubjectAreas=u.autoMap(),o.secondarySubjectAreas=u.autoMap(),o.isSelected=ko.observable(t),o.selectTrack=function(){e.selectTrack(o)}}function c(t,o,a){var i=this;i.userId=t,i.isMeta=o,i.isSenior=a,i.firstName=ko.observable().autoMap(),i.lastName=ko.observable().autoMap(),i.email=ko.observable().autoMap(),i.organization=ko.observable().autoMap(),i.tracks=ko.observableArray(),i.selectedTrack=ko.observable(null),i.fullName=ko.pureComputed(function(){return i.firstName()+" "+i.lastName()}),i.selectTrack=function(e){for(var t=e.trackId,o=i.tracks(),a=0;a<o.length;a++){var n=o[a];n.trackId===t?(n.isSelected(!0),i.selectedTrack(e)):n.isSelected(!1)}},i.loadData=function(){var e=u.odata.getUrl(o?a?u.odata.entitySet.seniorMetaReviewerBiddingViews:u.odata.entitySet.metaReviewerViews:u.odata.entitySet.reviewerViews,t,o?a?"GetSeniorMetaReviewerSimpleView":"GetMetaReviewerSimpleView":"GetReviewerSimpleView");return s.request({requestUri:e,showProgressIndicator:!1,method:"POST",headers:{"Content-Type":"application/json"}},function(e){u.autoMap(i,e);var t=[];if(e.TrackData){for(var o=JSON.parse(e.TrackData),a=0;a<o.length;a++)t.push(u.autoMap(new n(i,0==a),o[a]));i.tracks(t),i.selectTrack(t[0])}})}}function p(e,t,o,a,n){var i=this;u.showProgress(),i.user=new c(e,t,o),i.table=new d(i.user,a),ko.applyBindings(i,r.getElementById(n)),$.when(i.user.loadData()).then(function(){return i.table.track(i.user.selectedTrack()),i.table.loadData(!0)}).then(function(){i.table.subscribeToTrackChange(),i.user.selectedTrack.subscribe(function(e){i.table.track(e)}),$("#"+n).show()}).always(u.hideProgress)}d.prototype=$.extend({},u.DataTable.prototype,{getDefaultSorting:function(){return{property:"IsAssigned",direction:"desc"}},subscribeToTrackChange:function(){this.trackChangeSubscription||(this.trackChangeSubscription=this.track.subscribe(this.loadData,this))},loadData:function(e){var n=this;(e=!0===e)&&n.applyState();var t=n.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=n.skip()?"&$skip="+n.skip():"",i=n.top()?"&$top="+n.top():"",r="";$.each(n.filters,function(e,t){t.getValue()&&(r+=r?" and "+t.getValue():t.getValue())}),"true"===n.showAssignedOnly()&&(r+=(r?" and":"")+" IsAssigned eq true");t=n.track()&&n.track().trackId;"number"==typeof t&&0<t&&(r+=(r?" and":"")+" TrackId eq "+t);r=r&&"&$filter="+encodeURIComponent(r),e={method:"GET",headers:{Accept:"application/json"},requestUri:u.odata.getUrl(n.user.isMeta?n.user.isSenior?u.odata.entitySet.seniorMetaReviewerSubmissionViews:u.odata.entitySet.metaReviewerSubmissionViews:u.odata.entitySet.reviewerSubmissionViews,n.user.userId)+"?$count=true"+r+o+a+i,showProgressIndicator:!e};return s.request(e,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=u.autoMap(new l(n,n.user),a);t.push(a)}n.submissions(t),n.saveState()},function(e){u.addErrorMessage(u.odata.getErrorMessage(e))})}}),u.reviewerAssignSubmissions=function(e,t,o,a,n){new p(e,t,o,a,n)}}(window.app,window.OData,window.document),function(u,o){"use strict";function i(e){this.trackId=u.autoMap(),this.trackName=u.autoMap(),this.quota=ko.observable(e).extend({digit:!0,min:0,max:65536}).extend({trackChanges:!0})}function n(e,t,r){var s=this;s.singleTrackMode=t,s.id=e,s.email=u.autoMap(),s.firstName=u.autoMap(),s.lastName=u.autoMap(),s.name=ko.pureComputed(function(){return s.firstName+" "+s.lastName}),s.showValidationWarning=ko.observable(!1),s.tracks=ko.observableArray([]),s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!0});if(0<t().length&&(t.showAllMessages(),e=!1),e){for(var o=[],a=s.tracks(),n=0;n<a.length;n++){var i=a[n];i.quota.isChanged()&&o.push({TrackId:i.trackId,Quota:parseInt(i.quota()),ForReviewer:r})}e={requestUri:u.odata.getUrl(u.odata.entitySet.users,s.id,"QuotaSettings"),method:"POST",headers:{Accept:"application/json"},data:{Request:{Quotas:o}}};OData.request(e,function(){u.addMessage("Quota successfully saved.")})}else s.showValidationWarning(!0)},s.bindTo=function(e){var t;t={requestUri:r?u.odata.getUrl(u.odata.entitySet.reviewerViews,s.id,"GetReviewerSimpleView"):u.odata.getUrl(u.odata.entitySet.metaReviewerViews,s.id,"GetMetaReviewerSimpleView"),method:"POST"},o.request(t,function(e){var t=JSON.parse(e.TrackData);u.autoMap(s,e);for(var o=[],a=0;a<t.length;a++){var n=t[a];o.push(u.autoMap(new i(n.Quota),n))}s.tracks(o)}).done(function(){ko.applyBindingsAndShow(s,e)})}}u.reviewerTrackSettings=function(e,t,o,a){new n(e,t,o).bindTo(a)}}(window.app,window.OData),function(l,d,c){"use strict";function p(e){this.id=e.Id,this.sentOn=e.SentOn,this.emailStatus=e.EmailStatus,this.fromEmail=e.FromEmail,this.fromName=e.FromName,this.fromRole=e.FromRole,this.toEmail=e.ToEmail,this.toName=e.ToName,this.subject=e.Subject,this.body=e.Body,this.sentOnDateFormatted=function(){return d.formatUndefinableDateTime(this.sentOn)}}d.EmailMessagesPage=function(e,t){var o=this;o.$element=l(e),o.conference=window.cmt3.conference.name,o.page=ko.observable(1),o.top=ko.observable(25),o.sort=ko.observable("Id"),o.controller=t,o.filters=[],o._total=ko.observable(0),o.selected=ko.observable(0),o.emailMessages=ko.observableArray(),o.listen(),o.Pager=ko.pager(o.selected,o.top),o.Pager().CurrentPage.subscribe(function(){o.page(o.Pager().CurrentPage()),o.show()}),o.roleNamesProvider=function(){var e,t=[],o=d.enums.userRole;for(e in o)o.hasOwnProperty(e)&&t.push(o[e]);return t}},d.EmailMessagesPage.prototype={listen:function(){var e=this;l(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return l.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},show:function(){var a=this;if(!a.initialized)return l.Deferred().reject().promise();var n=a.sort(),i=a.top(),r=a.skip(),s=a.getFilter(),e=n?"&$orderby="+n:"",t=i?"&$top="+i:"",o=r?"&$skip="+r:"",u=s?"&$filter="+encodeURIComponent(s):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+this.conference+"/"+a.controller+"?$count=true"+e+u+o+t,method:"GET",headers:{Accept:"application/json"}}]}};return c.request(t,function(e){d.page.saveState("emailmessages",{sort:n,top:i,skip:r,filter:s});var t=e.responses[0].body,e=t["@odata.count"],t=t.value,o=[];l.each(t,function(e,t){o.push(new p(t))}),a.emailMessages(o),0==a._total()&&a._total(e),a.selected(e),l("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},c.batchHandler)},scroll:function(){l(window).scrollTop()==l(document).height()-l(window).height()&&self.show()},reset:function(){l.each(this.filters,function(e,t){t.reset()}),d.announce(d.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){l("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),l(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=l(t.target).attr("size"),t=parseInt(t);this.top(t),d.announce(d.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=l(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=l(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(l("th[data-sort]").each(function(){l(this).find("i").removeClass("icon-arrow-up"),l(this).find("i").removeClass("icon-arrow-down"),l(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&d.announce(d.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()}}}(window.jQuery,window.app,window.OData),function(a,n){"use strict";function i(e,t){var o=this;o.id=e,o.sentOn=a.autoMap(),o.emailStatus=a.autoMap(),o.fromEmail=a.autoMap(),o.fromName=a.autoMap(),o.toEmail=a.autoMap(),o.toName=a.autoMap(),o.subject=a.autoMap(),o.body=a.autoMap(),o.emailHistoryUrl=t,o.sentOnDateFormatted=function(){return a.formatUndefinableDateTime(o.sentOn)},o.bindTo=function(e){n.read(a.odata.getUrl(a.odata.entitySet.emailMessages,o.id),function(e){a.autoMap(o,e)}).done(function(){ko.applyBindingsAndShow(o,e)})}}a.emailMessageSummary=function(e,t,o){new i(e,t).bindTo(o)}}(window.app,window.OData,window.print),function(s,a,i,n){"use strict";function u(e,t,o,a){return"{0} {1} {2} <{3}>".format(e,null==t?"":t,o,a)}function l(e){this.name=u(e.firstName,e.middleInitial,e.lastName,e.email)}function d(o){var r=this;function a(e,t){for(var o=0,a=0,n=0;n<r.users().length;n++){var i=r.users()[n];o<e?o++:(null==t||a<t)&&(r.recipients.push(new l(i)),a++)}r.showAllVisible(r.users().length>r.recipients().length)}r.recipients=ko.observableArray(),r.showAllVisible=ko.observable(!1),r.users=ko.observableArray(),r.showInDialog=function(e){r.recipients.removeAll(),r.users.removeAll();for(var t=0;t<e().length;t++)r.users.push(e()[t]);a(0,10),i(o).modal("show")},r.showAll=function(){a(10,null)},r.bind=function(){ko.applyBindings(r,o)}}function r(e,t){var r=this;function o(e){r.previewFromEmail(e.FromEmail),r.previewFromName(e.FromName),r.previewToEmail(e.ToEmail),r.previewToName(e.ToName),r.previewSubject(e.Subject),r.previewBody(e.Body)}r.bulkInvite=e,r.inviteType=t,r.isFileUploaded=ko.observable(!1),r.users=ko.observableArray(),r.normalUsers=ko.observableArray(),r.hasError=ko.observable(!1),r.errorText=ko.observable(),r.uploading=ko.observable(!1),r.previewFromEmail=ko.observable(),r.previewFromName=ko.observable(),r.previewToEmail=ko.observable(),r.previewToName=ko.observable(),r.previewSubject=ko.observable(),r.previewBody=ko.observable(""),r.selectedIndex=ko.observable(0),r.currentStepIndexDeferred=ko.pureComputed(function(){return r.currentStep()}).extend({deferred:!0}),r.isPreviousEnabled=ko.pureComputed(function(){return this.bulkInvite&&0<this.selectedIndex()},r),r.isNextEnabled=ko.pureComputed(function(){return this.bulkInvite&&this.selectedIndex()+1<this.normalUsers().length},r),r.previousClick=function(){var e;0<r.selectedIndex()&&(r.selectedIndex(r.selectedIndex()-1),e=r.getPreviewRequest(),a.request(e,function(e){o(e)}))},r.nextClick=function(){var e;r.selectedIndex()+1<r.normalUsers().length&&(r.selectedIndex(r.selectedIndex()+1),e=r.getPreviewRequest(),a.request(e,function(e){o(e)}))},r.from=ko.observable(null),r.fromFirstName=ko.observable(null),r.fromMiddleInitial=ko.observable(null),r.fromLastName=ko.observable(null),r.fromFull=ko.pureComputed(function(){return u(this.fromFirstName(),this.fromMiddleInitial(),this.fromLastName(),this.from())},r),r.showRecipientsVm=null,r.to=ko.observable(null).extend({required:!0,email:!0,maxLength:200}),r.toFirstName=ko.observable(null).extend({required:!0,maxLength:200}),r.toMiddleInitial=ko.observable(null).extend({maxLength:10}),r.toLastName=ko.observable(null).extend({required:!0,maxLength:200}),r.toOrganization=ko.observable(null).extend({maxLength:200}),r.userId=ko.observable(null),r.inviteeId=ko.observable(null),r.uploadFile=function(e,t){""!=t.target.value&&(r.uploading(!0),t.target.form.submit())},r.parseUploadResult=function(e,t){var o=i.parseJSON(i("#singleFileUploadFrame").contents().text());if(r.users.removeAll(),r.normalUsers.removeAll(),r.hasError(o.HasError),r.errorText(o.ErrorText),!r.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,firstName:n.FirstName,lastName:n.LastName,middleInitial:n.MiddleInitial,organization:n.Organization,notice:n.Note,hasError:n.HasError,rawData:n.RawData};r.users.push(n),n.hasError||r.normalUsers.push(n)}r.isFileUploaded(!0),r.uploading(!1)},r.toFull=ko.computed(function(){return null==r.userId()&&null==r.inviteeId()?null:u(r.toFirstName(),r.toMiddleInitial(),r.toLastName(),r.to())}),r.isSearching=ko.observable(),r.searched=ko.observable(!1),r.userFound=ko.computed(function(){return(null!=r.userId()||null!=r.inviteeId())&&r.searched()&&!r.to.isModified()}),r.userNotFound=ko.computed(function(){return null==r.userId()&&null==r.inviteeId()&&r.searched()&&!r.to.isModified()}),r.addUser=function(){var e=ko.validation.group([r.to,r.toFirstName,r.toLastName,r.toOrganization,r.toMiddleInitial]);if(0<e().length)return e.showAllMessages(),void r.to.isModified(!1);e={FirstName:r.toFirstName(),LastName:r.toLastName(),MiddleInitial:r.toMiddleInitial(),Organization:r.toOrganization(),Email:r.to()};delete e.MiddleInitial;e={requestUri:s.odata.getUrl(s.odata.entitySet.users,null,"AddInvitee"),method:"POST",data:{Request:e}};return a.request(e,function(e){r.inviteeId(e.value)},function(e){var t;e.response.statusCode==s.enums.httpStatusCodes.failure.conflict?s.addMessage(t,"Please enter user email in the email box to search again.","error"):e.response.statusCode==s.enums.httpStatusCodes.failure.badRequest?(t=s.getODataErrorMessage(e).message,s.addMessage(t,"User information invalid:","error")):a.defaultError(e)})},r.search=function(){var e=ko.validation.group([r.to]);0<e().length?e.showAllMessages():(r.isSearching(!0),e={requestUri:s.odata.getUrl(s.odata.entitySet.users,null,"SearchInviteeByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:r.to()}},OData.read(e,function(e){r.userId(e.UserId),r.inviteeId(e.InviteeId),r.to(e.Email),r.toFirstName(e.FirstName),r.toMiddleInitial(e.MiddleInitial),r.toLastName(e.LastName),r.toOrganization(e.Organization),r.isSearching(!1),r.searched(!0),r.to.isModified(!1)},function(e){r.isSearching(!1),404==e.response.statusCode?(r.userId(null),r.inviteeId(null),r.toFirstName(null),r.toFirstName.isModified(!1),r.toMiddleInitial(null),r.toLastName(null),r.toLastName.isModified(!1),r.toOrganization(null),r.toOrganization.isModified(!1),r.searched(!0),r.to.isModified(!1)):OData.defaultError(e)}))},r.tracks=ko.observableArray(),r.selectedTrackId=ko.observable(),r.subject=ko.observable("").extend({required:!0}).autoMap(),r.body=ko.observable("").extend({required:!0}).autoMap(),r.engineType=null,r.showPlaceholders=ko.observable(!1),r.getModel=function(){return{TrackId:r.selectedTrackId(),UserId:r.userId(),InviteeId:r.inviteeId(),SubjectTemplate:r.subject(),BodyTemplate:r.body(),EngineType:r.engineType,InviteType:r.inviteType}},r.getBulkPreviewModel=function(){var e=r.normalUsers()[r.selectedIndex()];return{UserFirstName:e.firstName,UserMiddleInitial:e.middleInitial,UserLastName:e.lastName,UserOrganization:e.firstName,UserEmail:e.email,TrackId:r.selectedTrackId(),SubjectTemplate:r.subject(),BodyTemplate:r.body(),EngineType:r.engineType,InviteType:r.inviteType}},r.getBulkModel=function(){for(var e=[],t=0;t<r.normalUsers().length;t++){var o=r.normalUsers()[t],o={FirstName:o.firstName,MiddleInitial:o.middleInitial,LastName:o.lastName,Organization:o.organization,Email:o.email};e.push(o)}return{Users:e,TrackId:r.selectedTrackId(),SubjectTemplate:r.subject(),BodyTemplate:r.body(),EngineType:r.engineType,InviteType:r.inviteType}},r.getPreviewRequest=function(){var e=r.bulkInvite?r.getBulkPreviewModel():r.getModel();return{requestUri:s.odata.getUrl(s.odata.entitySet.users,null,r.bulkInvite?"InviteReviewersPreview":"InviteReviewerPreview"),method:"POST",data:{Request:e}}},r.previewInvite=function(t){r.selectedIndex(0);var e=r.getPreviewRequest();a.request(e,function(e){o(e),t()})},r.sendInvite=function(e){var t=r.bulkInvite?r.getBulkModel():r.getModel(),t={requestUri:s.odata.getUrl(s.odata.entitySet.users,null,r.bulkInvite?"InviteReviewers":"InviteReviewer"),method:"POST",data:{Request:t}};a.request(t,function(){e()})},r.showRecipients=function(){null==r.showRecipientsVm&&(r.showRecipientsVm=new d(n.getElementById("showRecipientsDialog")),r.showRecipientsVm.bind()),r.showRecipientsVm.showInDialog(r.normalUsers)},r.bindTo=function(e){var t;i.when(a.request({requestUri:s.odata.getUrl(s.odata.entitySet.users,null,"GetCurrentProfile"),method:"GET"},function(e){r.from(e.Email),r.fromFirstName(e.FirstName),r.fromLastName(e.LastName)}),a.read(s.odata.getUrl(s.odata.entitySet.tracks,{orderby:"Name"}),function(e){for(var t=[],o=s.cookies.getValue("trackId"),a=!1,n=0;n<e.value.length;n++){var i=s.autoMap(new s.Track,e.value[n]);t.push(i),i.id==o&&(a=!0)}r.tracks(t),r.selectedTrackId(a?o:r.tracks()[0].id),r.selectedTrackId.subscribe(function(e){s.cookies.setValue("trackId",e,0,"/")})}),(t="Invite "+(r.inviteType===s.enums.inviteType.seniorMetaReviewer?"senior meta-reviewer":r.inviteType===s.enums.inviteType.metaReviewer?"meta-reviewer":"reviewer"),a.request({requestUri:s.odata.getUrl(s.odata.entitySet.emailTemplates,null,"GetByName"),data:{Name:t},method:"POST"},function(e){r.subject(e.Subject),r.body(e.Body),r.engineType=e.EngineType}))).done(function(){ko.setupWizardSteps(r,5),r.fwdButtonTitles[2]="Preview",r.fwdButtonTitles[3]="Send",r.tracks().length<2&&r.steps[0].skip(!0),r.mayGoFwd=function(){return 1!=r.currentStep()||(r.bulkInvite?r.isFileUploaded()&&0<r.normalUsers().length:(null!=r.userId()||null!=r.inviteeId())&&!r.to.isModified())},r.mayGoBack=function(){return 4!=r.currentStep()},r.beforeNextStepInvoked=function(e){return 2==r.currentStep()?(r.previewInvite(e),!1):3!=r.currentStep()||(r.sendInvite(e),!1)},r.startOver(),ko.applyBindingsAndShow(r,e)})}}s.inviteReviewer=function(e,t,o){new r(e,t).bindTo(o)}}(window.app,window.OData,window.jQuery,window.document),function(a,n,t){"use strict";function i(e,t,o,a){return"{0} {1} {2} <{3}>".format(e,null===t?"":t,o,a)}function o(e){var o=this;o.submissionId=e,o.users=ko.observableArray(),o.hasError=ko.observable(!1),o.errorText=ko.observable(),o.previewFromEmail=ko.observable(),o.previewFromName=ko.observable(),o.previewToEmail=ko.observable(),o.previewToName=ko.observable(),o.previewSubject=ko.observable(),o.previewBody=ko.observable(""),o.selectedIndex=ko.observable(0),o.from=ko.observable(null),o.fromFirstName=ko.observable(null),o.fromMiddleInitial=ko.observable(null),o.fromLastName=ko.observable(null),o.fromFull=ko.pureComputed(function(){return i(this.fromFirstName(),this.fromMiddleInitial(),this.fromLastName(),this.from())},o),o.showRecipientsVm=null,o.to=ko.observable(null).extend({required:!0,email:!0,maxLength:200}),o.toFirstName=ko.observable(null).extend({required:!0,maxLength:200}),o.toMiddleInitial=ko.observable(null).extend({maxLength:10}),o.toLastName=ko.observable(null).extend({required:!0,maxLength:200}),o.toOrganization=ko.observable(null).extend({maxLength:200}),o.userId=ko.observable(null),o.inviteeId=ko.observable(null),o.toFull=ko.computed(function(){return null==o.userId()&&null==o.inviteeId()?null:i(o.toFirstName(),o.toMiddleInitial(),o.toLastName(),o.to())}),o.isSearching=ko.observable(),o.searched=ko.observable(!1),o.userFound=ko.computed(function(){return(null!=o.userId()||null!=o.inviteeId())&&o.searched()&&!o.to.isModified()}),o.userNotFound=ko.computed(function(){return null==o.userId()&&null==o.inviteeId()&&o.searched()&&!o.to.isModified()}),o.addUser=function(){var e=ko.validation.group([o.to,o.toFirstName,o.toLastName,o.toOrganization,o.toMiddleInitial]);if(0<e().length)return e.showAllMessages(),void o.to.isModified(!1);e={FirstName:o.toFirstName(),LastName:o.toLastName(),MiddleInitial:o.toMiddleInitial(),Organization:o.toOrganization(),Email:o.to()};delete e.MiddleInitial;e={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"AddInvitee"),method:"POST",data:{Request:e}};return n.request(e,function(e){o.inviteeId(e.value)},function(e){var t;e.response.statusCode==a.enums.httpStatusCodes.failure.conflict?a.addMessage(t,"Please enter user email in the email box to search again.","error"):e.response.statusCode==a.enums.httpStatusCodes.failure.badRequest?(t=a.getODataErrorMessage(e).message,a.addMessage(t,"User information invalid:","error")):n.defaultError(e)})},o.search=function(){var e=ko.validation.group([o.to]);0<e().length?e.showAllMessages():(o.isSearching(!0),e={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"SearchInviteeByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.to()}},OData.read(e,function(e){o.userId(e.UserId),o.inviteeId(e.InviteeId),o.to(e.Email),o.toFirstName(e.FirstName),o.toMiddleInitial(e.MiddleInitial),o.toLastName(e.LastName),o.toOrganization(e.Organization),o.isSearching(!1),o.searched(!0),o.to.isModified(!1)},function(e){o.isSearching(!1),404===e.response.statusCode?(o.userId(null),o.inviteeId(null),o.toFirstName(null),o.toFirstName.isModified(!1),o.toMiddleInitial(null),o.toLastName(null),o.toLastName.isModified(!1),o.toOrganization(null),o.toOrganization.isModified(!1),o.searched(!0),o.to.isModified(!1)):OData.defaultError(e)}))},o.subject=ko.observable("").extend({required:!0}).autoMap(),o.body=ko.observable("").extend({required:!0}).autoMap(),o.engineType=null,o.showPlaceholders=ko.observable(!1),o.getModel=function(){return{SubmissionId:o.submissionId,UserId:o.userId(),InviteeId:o.inviteeId(),SubjectTemplate:o.subject(),BodyTemplate:o.body(),EngineType:o.engineType}},o.getPreviewRequest=function(){var e=o.getModel();return{requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"InviteReviewerForSubmissionPreview"),method:"POST",data:{Request:e}}},o.previewInvite=function(t){o.selectedIndex(0);var e=o.getPreviewRequest();n.request(e,function(e){e=e,o.previewFromEmail(e.FromEmail),o.previewFromName(e.FromName),o.previewToEmail(e.ToEmail),o.previewToName(e.ToName),o.previewSubject(e.Subject),o.previewBody(e.Body),t()})},o.sendInvite=function(e){var t=o.getModel(),t={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"InviteReviewerForSubmission"),method:"POST",data:{Request:t}};n.request(t,function(){e()})},o.bindTo=function(e){t.when(n.request({requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"GetCurrentProfile"),method:"GET"},function(e){o.from(e.Email),o.fromFirstName(e.FirstName),o.fromLastName(e.LastName)}),n.request({requestUri:a.odata.getUrl(a.odata.entitySet.emailTemplates,null,"GetByName"),data:{Name:"Invite reviewer for submission"},method:"POST"},function(e){o.subject(e.Subject),o.body(e.Body),o.engineType=e.EngineType})).done(function(){ko.setupWizardSteps(o,4),o.fwdButtonTitles[1]="Preview",o.fwdButtonTitles[2]="Send",o.mayGoFwd=function(){return(null!=o.userId()||null!=o.inviteeId())&&!o.to.isModified()},o.mayGoBack=function(){return 3!==o.currentStep()},o.beforeNextStepInvoked=function(e){return 1===o.currentStep()?(o.previewInvite(e),!1):2!==o.currentStep()||(o.sendInvite(e),!1)},o.startOver(),ko.applyBindingsAndShow(o,e)})}}a.inviteReviewerForSubmission=function(e,t){new o(e).bindTo(t)}}(window.app,window.OData,window.jQuery),function(r,s,u){"use strict";function a(n,t){var i=this;function e(e){switch(e){case 1:return"Accept";case 2:return"Decline";default:return"Not responded"}}i.isExpired=ko.observable(!1),i.userNotRegistered=ko.observable(!1),i.currentStatus=ko.observable(0),i.newStatus=ko.observable(0),i.comment=ko.observable(""),i.quota=ko.observable(null).extend({required:!1,digit:!0,min:1}).autoMap(),i.quota.subscribe(function(e){""===e&&i.quota(null)}),i.isSingleTrackConference=ko.observable(!1),i.conferenceName="",i.trackName="",i.commentMaxLength=256,i.commentCharsLeft=ko.computed(function(){return Math.max(i.commentMaxLength-i.comment().length,0)}),i.inviteType=r.enums.inviteType.reviewer,i.isResponded=ko.computed(function(){return 0!==i.currentStatus()}),i.isAccepted=ko.computed(function(){return 1===i.currentStatus()}),i.isDeclined=ko.computed(function(){return 2===i.currentStatus()}),i.furtherStatus=ko.computed(function(){return 1!==i.currentStatus()?1:2}),i.currentStatusName=ko.computed(function(){return e(i.currentStatus())}),i.newStatusName=ko.computed(function(){return e(i.newStatus())}),i.furtherStatusName=ko.computed(function(){return e(i.furtherStatus())}),i.changeStatusTo=function(t){var e,o,a=u.Deferred();return i.newStatus(t),e=u("#reviewerInvitationResponseConfirmationDialog"),o=u.Deferred(),e.find(".btn-primary").off("click").click(function(){o.resolve(!0),o=null,e.modal("hide")}),e.on("hidden",function(){o&&o.resolve(!1)}),e.modal("show"),o.promise().done(function(e){e?s.request({requestUri:r.odata.getUrl(r.odata.entitySet.manageReviewerInvites,null,"Respond"),data:{Request:{UniqueId:n,Accepted:1===t}},method:"POST"},function(){i.currentStatus(t),a.resolve()}).fail(function(){a.reject()}):r.addMessage("NOTE: Response has not been changed.",null,"info")}),a.promise()},i.changeStatus=function(){var e=i.furtherStatus();i.changeStatusTo(e)},i.changeToDecline=function(){i.changeStatusTo(2)},i.submitOptional=function(){return s.request({requestUri:r.odata.getUrl(r.odata.entitySet.manageReviewerInvites,null,"UpdateFeedback"),data:{Request:{UniqueId:n,Quota:i.quota(),Comment:i.comment()}},method:"POST"},function(){r.addMessage("Feedback has been saved successfully.")})},i.bindTo=function(e){s.request({requestUri:r.odata.getUrl(r.odata.entitySet.manageReviewerInvites,null,"GetByUniqueId"),data:{UniqueId:n},method:"POST"},function(e){switch(i.inviteType=e.InviteType,i.conferenceName=e.ConferenceName,i.trackName=e.TrackName,i.isSingleTrackConference(e.IsSingleTrackConference),i.isExpired(e.IsExpired),i.userNotRegistered(e.UserNotRegistered),i.comment(e.Comment),i.quota(e.Quota),e.Status){case"Accepted":i.currentStatus(1);break;case"Declined":i.currentStatus(2);break;default:i.currentStatus(0)}}).done(function(){ko.applyBindingsAndShow(i,e),i.isExpired()||i.userNotRegistered()||!t||i.currentStatus()===t||i.changeStatusTo(t)}).fail(function(){})}}r.invitation=function(e,t,o){new a(e,t).bindTo(o)}}(window.app,window.OData,window.jQuery),function(i,d,c){"use strict";function p(){this.id=d.autoMap(),this.name=d.autoMap()}function r(e,t){var o=this;o.convertStatus=function(e){switch(e){case"Accepted":return 1;case"Declined":return 2;default:return 0}},o.id=e.ReviewerInvitationId,o.userId=e.UserId,o.trackId=e.TrackId,o.created=e.Created,o.expiration=e.Expiration,o.firstName=e.FirstName,o.lastName=e.LastName,o.email=e.Email,o.organization=e.Organization,o.comment=e.Comment,o.track=e.TrackName,o.status=ko.observable(o.convertStatus(e.Status)),o.statusName=e.Status,o.isReviewerLogical=ko.observable("Yes"==e.IsInRole),o.isReviewer=ko.computed(function(){return o.isReviewerLogical()?"Yes":"No"}),o.showAddAsReviewer=1==o.status()&&!o.isReviewerLogical(),o.expirationDateFormatted=function(){return d.formatUndefinableDateTime(o.expiration)},o.createdDateFormatted=function(){return d.formatUndefinableDateTime(o.created)},o.addAsReviewer=function(){return c.request({requestUri:d.odata.getUrl(d.odata.entitySet.manageInviteReviewers,null,t.inviteType===d.enums.inviteType.seniorMetaReviewer?"AddAsSeniorMetaReviewer":t.inviteType===d.enums.inviteType.metaReviewer?"AddAsMetaReviewer":"AddAsReviewer"),data:{Request:{TrackId:o.trackId,UserId:o.userId}},method:"POST"},function(){t.refresh()})},o.deleteInvite=function(){return c.request({requestUri:d.odata.getUrl(d.odata.entitySet.manageInviteReviewers,o.id),method:"DELETE"},function(){t.refresh()})}}d.ManageReviewerInvitationsPage=function(e,t,o,a){var n=this;n.inviteType=o,n.$element=i(e),n.conference=window.cmt3.conference.name,n.page=ko.observable(1),n.top=ko.observable(25),n.sort=ko.observable("Created desc"),n.controller=t,n.filters=[],n._total=ko.observable(0),n.selected=ko.observable(0),n.inviteReviewers=ko.observableArray(),n.listen(),n.Pager=ko.pager(n.selected,n.top),n.Pager().CurrentPage.subscribe(function(){n.page(n.Pager().CurrentPage()),n.show()}),n.trackNamesProvider=function(){return a},n.statusNamesProvider=function(){return["Accepted","Declined","Not responded"]}},d.ManageReviewerInvitationsPage.prototype={listen:function(){var e=this;i(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return i.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},show:function(){var a=this;if(!a.initialized)return i.Deferred().reject().promise();var e="&$orderby="+this.sort(),t=0!=this.top()?"&$top="+this.top():"",o=0!=this.skip()?"&$skip="+this.skip():"",n=""!=this.getFilter()?"&$filter="+encodeURIComponent(this.getFilter()):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+this.conference+"/"+a.controller+"?$count=true"+e+n+o+t+"&caller=manageinvitereviewer",method:"GET",headers:{Accept:"application/json"}}]}};return c.request(t,function(e){var t=e.responses[0].body,e=t["@odata.count"],t=t.value,o=[];i.each(t,function(e,t){o.push(new r(t,a))}),a.inviteReviewers(o),0==a._total()&&a._total(e),a.selected(e),i("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},c.batchHandler)},scroll:function(){i(window).scrollTop()==i(document).height()-i(window).height()&&self.show()},reset:function(){i.each(this.filters,function(e,t){t.reset()}),d.announce(d.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){i("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),i(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=i(t.target).attr("size"),t=parseInt(t);this.top(t),d.announce(d.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=i(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=i(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(i("th[data-sort]").each(function(){i(this).find("i").removeClass("icon-arrow-up"),i(this).find("i").removeClass("icon-arrow-down"),i(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&d.announce(d.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()},selectStatus:function(e,t){var o=i(t.target),t=ko.contextFor(t.target),a=i(i("#statusTemplate").text());o.hide(),o.after(a),t.$parent.getStatuses(e,o,a).done(function(e){ko.applyBindings(e,a[0])})},getEventFilter:function(e,t){t=t.target,t=ko.contextFor(t),e=e.id,t=e?"ReviewerInvitationId eq {0}".format(e):t.$root.getFilter();return t},email:function(e,t){var o=t.target,o=ko.contextFor(o),e=this.getEventFilter(e,t),t="/"+window.cmt3.conference.name+"/User/SendEmail";d.url.navigateTo(t,{filter:0<e.length?e:null,inviteType:o.$root.inviteType})},exportInvites:function(e,t){var o=t.target,o=ko.contextFor(o),e=this.getEventFilter(e,t),t=d.odata.getUrl("Users",null,"ExportUserInvites"),e={InviteType:o.$root.inviteType,Filter:e};d.page.post(t,e)},resendInvites:function(e,t){t=t.target,t=ko.contextFor(t),e=e.id,e=e?"ReviewerInvitationId eq {0}".format(e):t.$root.getFilter(),t=t.$root.inviteType===d.enums.inviteType.seniorMetaReviewer?"SeniorMetaResend":t.$root.inviteType===d.enums.inviteType.metaReviewer?"MetaResend":"Resend",t="/"+window.cmt3.conference.name+"/ReviewerInvite/"+t;d.url.navigateTo(t,{filter:0<e.length?e:null})},deleteInvites:function(e,t){if(confirm("Bulk deletion will be performed for selected items.")){t=t.target,t=ko.contextFor(t),e=e.id,e=e?"ReviewerInvitationId eq {0}".format(e):t.$root.getFilter(),t={InvitesFilter:e,InviteType:t.$root.inviteType},t={requestUri:d.odata.getUrl(d.odata.entitySet.emails,null,"DeleteInvites"),method:"POST",data:{Request:t}};return c.request(t,function(){d.addMessage("Bulk deletion has been completed successfully."),location.reload()})}},getStatuses:function(r,s,u){var l=i.Deferred();return c.read(d.odata.getUrl(d.odata.entitySet.inviteStatusModels),function(e){for(var t=[],a=[],o=0;o<e.value.length;o++){var n=e.value[o],n=d.autoMap(new p,n);t.push(n),a[n.id]=n}var i={options:ko.observableArray(t),selectedStatus:ko.observable()};i.selectedStatus.subscribe(function(e){var o=e[0],e={requestUri:d.odata.getUrl(d.odata.entitySet.manageReviewerInvites,null,"SetStatus"),method:"POST",showProgressIndicator:!0,data:{Request:{StatusId:o,ReviewerInvitationId:r.id}}};c.request(e,function(e){var t=e.value,e=a[o].name;u.remove(),s.text(e),r.statusName=e,r.status(o),r.isReviewerLogical(t),s.show()})}),l.resolve(i)}),l.promise()}}}(window.jQuery,window.app,window.OData),function(a,n){"use strict";function o(t){var o=this;o.isExpired=ko.observable(!1),o.userNotRegistered=ko.observable(!1),o.currentStatus=ko.observable(0),o.conflictDomains=ko.observable(""),o.comment=ko.observable(""),o.conferenceName="",o.title="",o.commentMaxLength=512,o.commentCharsLeft=ko.computed(function(){return Math.max(o.commentMaxLength-o.comment().length,0)}),o.isResponded=ko.computed(function(){return 0!==o.currentStatus()}),o.isDeclined=ko.computed(function(){return 2===o.currentStatus()}),o.getStatusName=function(e){switch(e){case 1:return"Accept";case 2:return"Decline";default:return"Not responded"}},o.currentStatusName=ko.computed(function(){return o.getStatusName(o.currentStatus())}),o.decline=function(){return n.request({requestUri:a.odata.getUrl(a.odata.entitySet.manageReviewerInvitesForSubmission,null,"Decline"),data:{Request:{UniqueId:t}},method:"POST"},function(){o.currentStatus(2),o.conflictDomains("")})},o.accept=function(){return n.request({requestUri:a.odata.getUrl(a.odata.entitySet.manageReviewerInvitesForSubmission,null,"AcceptWithConflictsAndComment"),data:{Request:{UniqueId:t,DomainNames:o.conflictDomains(),Comment:o.comment()}},method:"POST"},function(){o.currentStatus(1),a.addMessage("Invite has been accepted.")},n.defaultError)},o.update=function(){return n.request({requestUri:a.odata.getUrl(a.odata.entitySet.manageReviewerInvitesForSubmission,null,"UpdateComment"),data:{Request:{UniqueId:t,Comment:o.comment()}},method:"POST"},function(){a.addMessage("Comment has been updated.")},n.defaultError)},o.bindTo=function(e){n.request({requestUri:a.odata.getUrl(a.odata.entitySet.manageReviewerInvitesForSubmission,null,"GetByUniqueId"),data:{UniqueId:t},method:"POST"},function(e){switch(o.conferenceName=e.ConferenceName,o.submissionId=e.SubmissionId,o.submissionTitle=e.SubmissionTitle,o.isExpired(e.IsExpired),o.userNotRegistered(e.UserNotRegistered),o.comment(e.Comment),e.Status){case"Accepted":o.currentStatus(1);break;case"Declined":o.currentStatus(2);break;default:o.currentStatus(0)}}).done(function(){ko.applyBindingsAndShow(o,e)}).fail(function(){})}}a.invitationForSubmission=function(e,t){new o(e).bindTo(t)}}(window.app,window.OData),function(i,r,s){"use strict";function u(e,t){var o=this;o.id=e.Id,o.submissionId=e.SubmissionId,o.title=e.Title,o.userId=e.UserId,o.trackId=e.TrackId,o.created=e.Created,o.expiration=e.Expiration,o.firstName=e.FirstName,o.lastName=e.LastName,o.email=e.Email,o.organization=e.Organization,o.comment=e.Comment,o.track=e.TrackName,o.status=e.Status,o.statusName=function(){return r.enums.inviteStatusOptionsSubstitutions[o.status]},o.expirationDateFormatted=function(){return r.formatUndefinableDateTime(o.expiration)},o.createdDateFormatted=function(){return r.formatUndefinableDateTime(o.created)}}r.ManageReviewerInvitationForSubmissionPage=function(e,t,o){var a=this;a.inviteType=o,a.$element=i(e),a.conference=window.cmt3.conference.name,a.page=ko.observable(1),a.top=ko.observable(25),a.sort=ko.observable("Created desc"),a.controller=t,a.filters=[],a._total=ko.observable(0),a.selected=ko.observable(0),a.inviteReviewers=ko.observableArray(),a.listen(),a.Pager=ko.pager(a.selected,a.top),a.Pager().CurrentPage.subscribe(function(){a.page(a.Pager().CurrentPage()),a.show()})},r.ManageReviewerInvitationForSubmissionPage.prototype={listen:function(){var e=this;i(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return i.each(this.filters,function(e,t){t.getValue()&&(o+=""===o?t.getValue():" and "+t.getValue())}),o},show:function(){var a=this;if(!a.initialized)return i.Deferred().reject().promise();var e="&$orderby="+this.sort(),t=0!==this.top()?"&$top="+this.top():"",o=0!==this.skip()?"&$skip="+this.skip():"",n=""!==this.getFilter()?"&$filter="+encodeURIComponent(this.getFilter()):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+this.conference+"/"+a.controller+"?$count=true"+e+n+o+t+"&caller=manageinvitereviewerforsubmission",method:"GET",headers:{Accept:"application/json"}}]}};return s.request(t,function(e){var t=e.responses[0].body,e=t["@odata.count"],t=t.value,o=[];i.each(t,function(e,t){o.push(new u(t))}),a.inviteReviewers(o),0===a._total()&&a._total(e),a.selected(e),i("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},s.batchHandler)},scroll:function(){i(window).scrollTop()===i(document).height()-i(window).height()&&self.show()},reset:function(){i.each(this.filters,function(e,t){t.reset()}),r.announce(r.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){i("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),i(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=i(t.target).attr("size"),t=parseInt(t);this.top(t),r.announce(r.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!==this.top()&&1!==this.page()&&(this.page(this.page()-1),this.show())},next:function(){0===this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=i(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=i(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(i("th[data-sort]").each(function(){i(this).find("i").removeClass("icon-arrow-up"),i(this).find("i").removeClass("icon-arrow-down"),i(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&r.announce(r.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()}}}(window.jQuery,window.app,window.OData),function(r,n,a,t,i){"use strict";function s(){var o=this;o.id=r.autoMap(),o.name=r.autoMap(),o.subject=r.autoMap(),o.body=r.autoMap(),o.createStub=function(e,t){return o.id=t,o.name=e,o.subject="",o.body="",o}}function e(e){var o=this,t=null;o.templates=ko.observableArray(),o.templates.push((new s).createStub("Select predefined template",-1)),o.templates.push((new s).createStub("Create new",0)),o.selectedTemplate=ko.observable(o.templates()[0]),o.selectedTemplate.subscribe(function(e){0==e.id?o.name(""):(o.name(e.name),o.subject(e.subject),o.subject.isModified(!1),o.body(e.body),o.body.isModified(!1)),o.name.isModified(!1)}),o.subject=ko.observable("").extend({required:!0}).autoMap(),o.body=ko.observable("").extend({required:!0}).autoMap(),o.showPlaceholders=ko.observable(!1),o.name=ko.observable().extend({required:!0}),o.close=function(){t&&t.resolve()},o.editInDialog=function(){return t=a.Deferred(),n.read(r.odata.getUrl(r.odata.entitySet.emailTemplates,{orderby:"Name"}),function(e){o.selectedTemplate(o.templates()[0]),o.templates.splice(2,o.templates().length-2);for(var t=0;t<e.value.length;t++)o.templates.push(r.autoMap(new s,e.value[t]))}).done(function(){a(e).modal("show"),a(e).on("hidden",o.close)}),t.promise()},o.saveTemplate=function(){var e,t;!function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=r.autoMap(o)).Name=o.name(),0==o.selectedTemplate().id?(t={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates),method:"POST",headers:{Prefer:"return-content"},data:e},n.request(t,function(e){e=r.autoMap(new s,e);o.templates.push(e),o.selectedTemplate(e),r.addMessage("Template '{0}' created.".format(o.name()))})):(t={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates,o.selectedTemplate().id),method:"PUT",headers:{Prefer:"return-content"},data:e},n.request(t,function(e){o.selectedTemplate().subject=e.Subject,o.selectedTemplate().body=e.Body,r.addMessage("Template '{0}' saved.".format(o.name()))})))},o.removeTemplate=function(){var e;o.selectedTemplate().id&&i("Are you sure you want to delete the template?")&&(e={requestUri:r.odata.getUrl(r.odata.entitySet.emailTemplates,o.selectedTemplate().id),method:"DELETE"},n.request(e,function(){r.addMessage("Temmplate '{0}' removed.".format(o.selectedTemplate().name)),o.templates.remove(o.selectedTemplate())}))},o.bind=function(){ko.applyBindings(o,e)}}function u(){this.previewFromName=ko.observable(""),this.previewToName=ko.observable(""),this.previewFromEmail=ko.observable(""),this.previewToEmail=ko.observable(""),this.previewSubject=ko.observable(""),this.previewBody=ko.observable(""),this.selectedEmailIndex=ko.observable(0),this.selectedSubmissionIndex=ko.observable(0),this.selectedIndex=ko.observable(0)}function l(e,t){var o=this;o.status=t,o.emailAllAuthors=[];for(var a=0;a<e.EmailAllAuthors.length;a++)o.emailAllAuthors.push(e.EmailAllAuthors[a]);o.emailPrimaryContactOnly=[];for(a=0;a<e.EmailPrimaryContactOnly.length;a++)o.emailPrimaryContactOnly.push(e.EmailPrimaryContactOnly[a]);o.id=e.Id,o.email=ko.computed(function(){return"allAuthors"==o.status.track.root.emailingType()?o.emailAllAuthors:o.emailPrimaryContactOnly}),o.emailCount=ko.computed(function(){return o.email().length})}function d(e,t){var o=this;o.track=t,o.submissions=ko.observableArray();for(var a=0;a<e.SubmissionSummaries.length;a++)o.submissions.push(new l(e.SubmissionSummaries[a],o));o.submissionCount=ko.computed(function(){return o.submissions().length}),o.emailCount=ko.computed(function(){var t=0;return o.submissions().forEach(function(e){t+=e.emailCount()}),t}),o.id=e.Id,o.name=e.Name,o.selectedTemplate=ko.observable(),o.sessionId=ko.observable(),o.isSelected=ko.observable(!0),o.preview=new u,o.loadPreview=function(){return n.request({requestUri:r.odata.getUrl(r.odata.entitySet.trackSummaries,null,"Preview"),data:{Request:{SubmissionId:o.submissions()[o.preview.selectedSubmissionIndex()].id,TemplateId:o.selectedTemplate().id,UserId:o.submissions()[o.preview.selectedSubmissionIndex()].email()[o.preview.selectedEmailIndex()]}},method:"POST"},function(e){o.preview.previewBody(e.Body),o.preview.previewSubject(e.Subject),o.preview.previewFromEmail(e.FromEmail),o.preview.previewFromName(e.FromName),o.preview.previewToEmail(e.ToEmail),o.preview.previewToName(e.ToName)})},o.previousClick=function(){o.preview.selectedEmailIndex()<=0&&(o.preview.selectedSubmissionIndex(o.preview.selectedSubmissionIndex()-1),o.preview.selectedEmailIndex(o.submissions()[o.preview.selectedSubmissionIndex()].emailCount())),o.preview.selectedEmailIndex(o.preview.selectedEmailIndex()-1),o.preview.selectedIndex(o.preview.selectedIndex()-1),o.loadPreview()},o.nextClick=function(){o.preview.selectedIndex(o.preview.selectedIndex()+1),o.preview.selectedEmailIndex(o.preview.selectedEmailIndex()+1),o.preview.selectedEmailIndex()>=o.submissions()[o.preview.selectedSubmissionIndex()].emailCount()&&(o.preview.selectedSubmissionIndex(o.preview.selectedSubmissionIndex()+1),o.preview.selectedEmailIndex(0)),o.loadPreview()},o.isPreviousEnabled=function(){return 0<o.preview.selectedIndex()},o.isNextEnabled=function(){return o.preview.selectedIndex()<o.emailCount()-1}}function o(e,t){var o=this;o.root=t,o.id=e.Id,o.name=e.Name,o.visibleToAuthorQuestionCount=e.VisibleToAuthorQuestionCount,o.isAuthorNotificationAlreadySent=e.IsAuthorNotificationAlreadySent,o.hasAwaitingDecision=e.HasAwaitingDecision,o.awaitingDecisionStatusName=e.AwaitingDecisionStatusName,o.isChecked=ko.observable(!1),o.statuses=ko.observableArray();for(var a=0;a<e.StatusSummaries.length;a++)o.statuses.push(new d(e.StatusSummaries[a],o));o.submissionCount=ko.computed(function(){var t=0;return o.statuses().forEach(function(e){t+=e.submissionCount()}),t}),o.emailCount=ko.computed(function(){var t=0;return o.statuses().forEach(function(e){t+=e.emailCount()}),t}),o.selectedSubmissionCount=ko.computed(function(){var t=0;return o.statuses().forEach(function(e){e.isSelected()&&(t+=e.submissionCount())}),t}),o.selectedEmailCount=ko.computed(function(){var t=0;return o.statuses().forEach(function(e){e.isSelected()&&(t+=e.emailCount())}),t})}function c(){var i=this;i.emailProgressVm=null,i.editTemplatesVm=null,i.templates=ko.observableArray(),i.tracks=ko.observableArray(),i.allTracksShown=ko.observable(!1),i.showAllTracks=function(){i.allTracksShown(!0)},i.editTemplatesInDialog=function(){i.editTemplatesVm||(i.editTemplatesVm=new e(t.getElementById("editTemplatesDialog")),i.editTemplatesVm.bind()),i.editTemplatesVm.editInDialog().done(function(){i.loadTemplates()})},i.getEmailingTypeTitle=function(e){switch(e){case"primaryOnly":return"Primary Contact Authors Only";case"allAuthors":return"All Authors With Registered Account";default:return"Unknown"}},i.getEmailingTypeTitleForNotice=function(e){return i.getEmailingTypeTitle(e).toLowerCase()},i.emailingType=ko.observable("primaryOnly"),i.emailingTypeTitleForNotice=ko.computed(function(){return i.getEmailingTypeTitleForNotice(i.emailingType())}),i.emailingTypeTitle=ko.computed(function(){return i.getEmailingTypeTitle(i.emailingType())}),i.totalEmailCount=ko.computed(function(){var t=0;return i.tracks().forEach(function(e){e.isChecked()&&(t+=e.selectedEmailCount())}),t}),i.totalSubmissionCount=ko.computed(function(){var t=0;return i.tracks().forEach(function(e){e.isChecked()&&(t+=e.selectedSubmissionCount())}),t}),i.notificationHasSentAtLeastForOneTrack=ko.computed(function(){var t=!1;return i.tracks().forEach(function(e){t=t||e.isAuthorNotificationAlreadySent}),t}),i.showAllTracksVisible=ko.computed(function(){return i.notificationHasSentAtLeastForOneTrack()&&!i.allTracksShown()}),i.loadTrackSummaries=function(){return n.read(r.odata.getUrl(r.odata.entitySet.trackSummaries+"?$expand=StatusSummaries($expand=SubmissionSummaries)"),function(e){for(var t=0;t<e.value.length;t++)i.tracks.push(new o(e.value[t],i))})},i.loadTemplates=function(){return n.read(r.odata.getUrl(r.odata.entitySet.emailTemplates,{orderby:"Name"}),function(e){i.templates().length<=0&&i.templates.push((new s).createStub("Select predefined template",0));for(var t=0;t<i.tracks().length;t++)for(var o=0;o<i.tracks()[t].statuses().length;o++)i.tracks()[t].statuses()[o].selectedTemplate(i.templates()[0]);1<i.templates().length&&i.templates.splice(1,i.templates().length-1);for(t=0;t<e.value.length;t++)i.templates.push(r.autoMap(new s,e.value[t]))})},i.send=function(){var o=[];return i.tracks().forEach(function(e){e.isChecked()&&e.statuses().forEach(function(t){t.isSelected()&&t.submissions().forEach(function(e){0<e.emailCount()&&o.push({TemplateId:t.selectedTemplate().id,SubmissionId:e.id,Users:e.email()})})})}),n.request({requestUri:r.odata.getUrl(r.odata.entitySet.trackSummaries,null,"Send"),data:{Request:{Submissions:o}},method:"POST"},function(e){var n=[];e.TrackStatusSessions.forEach(function(t){var o=null;i.tracks().forEach(function(e){e.isChecked()&&e.id==t.TrackId&&(o=e)});var a=null;o.statuses().forEach(function(e){e.isSelected()&&0<e.emailCount()&&e.id==t.StatusId&&(a=e)}),a.sessionId(t.SessionId),n.push(t.SessionId)}),i.emailProgressVm||(i.emailProgressVm=new r.EmailProgressViewModel(t.getElementById("showProgressDialog"),!0),i.emailProgressVm.bind()),i.emailProgressVm.showInDialog(n)},function(e){r.addErrorMessage(r.odata.getErrorMessage(e))})},i.bindTo=function(e){a.when(i.loadTemplates(),i.loadTrackSummaries()).done(function(){ko.setupWizardSteps(i,5),i.fwdButtonTitles[2]="Preview",i.fwdButtonTitles[3]="Send",i.mayGoFwd=function(){if(0==i.currentStep()){var t=!1;return i.tracks().forEach(function(e){t=t||e.isChecked()}),t}if(1!=i.currentStep())return!0;var t=!0,o=!1;return i.tracks().forEach(function(e){e.isChecked()&&e.statuses().forEach(function(e){e.isSelected()&&(t=t&&0!=e.selectedTemplate().id,o=!0)})}),t&&o},i.mayGoBack=function(){return!0},i.beforeNextStepInvoked=function(e){if(2!=i.currentStep())return 3!=i.currentStep()||(i.send().done(e),!1);var t=[];return i.tracks().forEach(function(e){e.isChecked()&&e.statuses().forEach(function(e){e.isSelected()&&(e.preview.selectedEmailIndex(0),e.preview.selectedSubmissionIndex(0),e.preview.selectedIndex(0),0<e.emailCount()&&t.push(e.loadPreview()))})}),a.when.apply(null,t).done(e),!1},i.startOver(),ko.applyBindingsAndShow(i,e)})}}r.authorNotification=function(e){(new c).bindTo(e)}}(window.app,window.OData,window.jQuery,window.document,window.confirm),function(l,d,c){"use strict";function p(e){this.id=e.Id,this.title=e.Title,this.trackName=e.TrackName,this.firstName=e.FirstName,this.lastName=e.LastName,this.organization=e.Organization,this.role=e.Role,this.dateTime=e.DateTime,this.activity=e.Activity,this.status=e.Status,this.comment=e.Comment,this.dateTimeFormatted=function(){return d.formatUndefinableDateTime(this.dateTime)}}d.AuditActivitiesPage=function(e,t,o){var a=this;a.$element=l(e),a.conference=window.cmt3.conference.name,a.page=ko.observable(1),a.top=ko.observable(25),a.sort=ko.observable("Id"),a.controller=t,a.filters=[],a._total=ko.observable(0),a.selected=ko.observable(0),a.auditActivities=ko.observableArray(),a.listen(),a.Pager=ko.pager(a.selected,a.top),a.Pager().CurrentPage.subscribe(function(){a.page(a.Pager().CurrentPage()),a.show()}),a.trackNamesProvider=ko.pureComputed(function(){var e,t=[];for(e in o)o.hasOwnProperty(e)&&t.push(o[e].name);return t})},d.AuditActivitiesPage.prototype={listen:function(){var e=this;l(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return l.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},show:function(){var a=this;if(!a.initialized)return l.Deferred().reject().promise();var n=a.sort(),i=a.top(),r=a.skip(),s=a.getFilter(),e=n?"&$orderby="+n:"",t=i?"&$top="+i:"",o=r?"&$skip="+r:"",u=s?"&$filter="+encodeURIComponent(s):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+this.conference+"/"+a.controller+"?$count=true"+e+u+o+t,method:"GET",headers:{Accept:"application/json"}}]}};return c.request(t,function(e){d.page.saveState("audit",{sort:n,top:i,skip:r,filter:s});var t=e.responses[0].body,e=t["@odata.count"],t=t.value,o=[];l.each(t,function(e,t){o.push(new p(t))}),a.auditActivities(o),0==a._total()&&a._total(e),a.selected(e),l("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},c.batchHandler)},scroll:function(){l(window).scrollTop()==l(document).height()-l(window).height()&&self.show()},reset:function(){l.each(this.filters,function(e,t){t.reset()}),d.announce(d.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){l("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),l(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=l(t.target).attr("size"),t=parseInt(t);this.top(t),d.announce(d.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=l(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=l(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(l("th[data-sort]").each(function(){l(this).find("i").removeClass("icon-arrow-up"),l(this).find("i").removeClass("icon-arrow-down"),l(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&d.announce(d.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()},exportActivitiesAsTSV:function(e,t){var o=d.GetEventFilter(t),t="/api/odata/"+this.conference+"/"+this.controller+"/ExportActivitiesAsTSV";d.page.post(t,{Filter:o})}}}(window.jQuery,window.app,window.OData),function(g,h,v){"use strict";function l(a){var e,n=this;function i(){r(),e=n.isChecked.subscribe(t)}function r(){e&&"function"==typeof e.dispose&&e.dispose()}function t(){void 0===n.initialState?n.initialState=n.isChecked():function(){var e=this;e.isToggleInProgress(!0);var t={ReasonId:n.id()};t.Type=e.isChecked()?"Add":"Remove";var o=g.Deferred(function(e){window.setTimeout(e.resolve,500)}),t=v.request({requestUri:h.odata.getUrl(h.odata.entitySet.submissions,a,"ModifyConflict"),method:"POST",showProgressIndicator:!1,data:{Request:t}},function(){},function(e){r(),n.isChecked(!n.isChecked()),i(),h.addErrorMessage("Unable to edit conflict."+h.odata.getErrorMessage(e))});g.when(t,o).always(function(){e.isToggleInProgress(!1)})}.call(n)}n.id=ko.observable().autoMap(),n.name=h.autoMap(),n.isChecked=ko.observable(),n.initialState=void 0,n.isToggleInProgress=ko.observable(!1),i()}function d(){this.title=h.autoMap(),this.answers=[]}function c(){var e=this;e.answer=h.autoMap(),e.customData=null,e.yesNo=ko.pureComputed(function(){return"yes"===e.customData.Answer?"Yes":"no"===e.customData.Answer?"No":"Not Applicable"}),e.comment=ko.pureComputed(function(){return e.customData.Comment&&e.customData.Comment.htmlMultiLineEncode()})}function p(e){var t=this;e?(t.id=e.Id,t.firstName=e.FirstName,t.lastName=e.LastName,t.name=e.Name,t.email=e.Email,t.organization=e.Organization):(t.id=h.autoMap(),t.firstName=h.autoMap(),t.lastName=h.autoMap(),t.name=h.autoMap(),t.email=h.autoMap(),t.organization=h.autoMap()),t.readFromJson=function(e){h.autoMap(t,e)}}function w(o,e){var a=this;a.parentVm=e,a.biddingModel=null,a.to=ko.observable(null).extend({required:!0,email:!0,maxLength:200}),a.toFirstName=ko.observable(null).extend({required:!0,maxLength:200}),a.toMiddleInitial=ko.observable(null).extend({maxLength:10}),a.toLastName=ko.observable(null).extend({required:!0,maxLength:200}),a.toOrganization=ko.observable(null).extend({required:!0,maxLength:200}),a.userId=ko.observable(null),a.isSearching=ko.observable(),a.searched=ko.observable(!1),a.userFound=ko.computed(function(){return null!==a.userId()&&a.searched()&&!a.to.isModified()}),a.userNotFound=ko.computed(function(){return null===a.userId()&&a.searched()&&!a.to.isModified()}),a.search=function(){var e=ko.validation.group([a.to]);0<e().length?e.showAllMessages():(a.isSearching(!0),e={requestUri:h.odata.getGlobalUrl(h.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:a.to()}},v.read(e,function(e){a.userId(e.Id),a.to(e.Email),a.toFirstName(e.FirstName),a.toMiddleInitial(e.MiddleInitial),a.toLastName(e.LastName),a.toOrganization(e.Organization),a.isSearching(!1),a.searched(!0),a.to.isModified(!1)},function(e){a.isSearching(!1),404===e.response.statusCode?(a.userId(null),a.toFirstName(null),a.toFirstName.isModified(!1),a.toMiddleInitial(null),a.toLastName(null),a.toLastName.isModified(!1),a.toOrganization(null),a.toOrganization.isModified(!1),a.searched(!0),a.to.isModified(!1)):v.defaultError(e)}))},a.assignOrRemove=function(e){e={requestUri:h.odata.getUrl(h.odata.entitySet.reviews,null,"AssignExternalReviewer"),method:"POST",showProgressIndicator:!1,data:{Request:{SubmissionId:a.biddingModel.id,ExternalReviewerId:e}}};v.read(e,function(e){var t=new p;t.readFromJson(e),a.biddingModel.externalReviewer(t),g(o).modal("hide")},function(e){a.biddingModel.externalReviewer(null),v.defaultError(e)})},a.assign=function(){var e=a.userId();a.userId(null),a.isSearching(!1),a.searched(!1),a.to(""),a.to.isModified(!1),a.assignOrRemove(e)},a.bind=function(){ko.applyBindings(a,o)},a.showDialog=function(){a.userId(null),a.isSearching(!1),a.searched(!1),g(o).modal("show")}}function b(e,t,o,a){var n=this;n.id=e.Id,n.title=e.Title,n.abstract=e.Abstract,n.originalSubmissionId=e.OriginalSubmissionId,n.track=e.Track,n.trackId=e.TrackId,n.primarySubject=e.PrimarySubject,n.secondarySubject=e.SecondarySubject,n.relevance=e.Relevance,n.tpmsRank=e.TpmsRank,n.customAffinityRank=e.CustomAffinityRank,n.numberField1=e.NumberField1,n.numberField2=e.NumberField2,n.numberField3=e.NumberField3,n.stringField1=e.StringField1,n.bid=e.Bid,n.assigned=e.Assigned,n.reviewId=e.ReviewId,n.authorFeedbackId=e.AuthorFeedbackId,n.biddingEnabled=e.BiddingEnabled,n.reviewingEnabled=e.ReviewingEnabled,n.reviewingDisabled=e.ReviewingDisabled,n.isReviewReadOnly=e.IsReviewReadOnly,n.reviewingCompleted=e.ReviewingCompleted,n.discussionEnabled=e.DiscussionEnabled,n.doNotAllowReviewerToPostDiscussion=e.DoNotAllowReviewerToPostDiscussion,n.doNotAllowReviewerToEditNote=e.DoNotAllowReviewerToEditNote,n.doNotEnableReviewerNote=e.DoNotEnableReviewerNote,n.reproducibilityInfoRequired=e.ReproducibilityInfoRequired,n.feedbackComplete=e.FeedbackComplete,n.metaReviewingDisabled=e.MetaReviewingDisabled,n.submissionEnabledForDiscussion=e.SubmissionEnabledForDiscussion,n.allowReviewersToDiscussAllPapers=e.AllowReviewersToDiscussAllPapers,n.allowReviewerToSeeReviewingDataOnlyAfterSubmitting=e.AllowReviewerToSeeReviewingDataOnlyAfterSubmitting,n.allowReviewerToSeeReviewingDataAfterReviewing=e.AllowReviewerToSeeReviewingDataAfterReviewing,n.metaReviewAssigned=e.MetaReviewAssigned,n.metaReviewSubmitted=e.MetaReviewSubmitted,n.assignedSeniorMetaReviewer=e.AssignedSeniorMetaReviewer,n.filesUploaded=e.FilesUploaded,n.messages=e.Messages,n.enableExternalReviewer=e.EnableExternalReviewer,n.reviewerLabel=function(){return e.HiddenNumber?"Reviewer #"+e.HiddenNumber:""},n.externalReviewer=ko.observable(null===e.ExternalReviewer?null:new p(e.ExternalReviewer)),n.status=e.Status,n.statusPropertyIsRevision=e.StatusPropertyIsRevision,n.allowReviewUpdateDuringDiscussion=e.AllowReviewUpdateDuringDiscussion,n.allowOnlyRevisionForReviewing=e.AllowOnlyRevisionForReviewing,n.downloadLink=function(){return o.submissionFileWithSupplemental.format(n.id)},n.reviewerNoteId=e.ReviewerNoteId,n.reviewerNoteSubmitted=e.ReviewerNoteSubmitted,n.isViewOthersReviewsAvailable=e.IsViewOthersReviewsAvailable,n.isAuthorFeedbackAvailable=e.IsAuthorFeedbackAvailable,n.editReviewerNoteUrl=function(){return n.reviewerNoteId?o.reviewerNoteDetails.format(n.reviewerNoteId):o.reviewerNoteCreate.format(n.id)},n.editReviewerNoteText=function(){return n.reviewerNoteSubmitted?"Edit":"Add"},n.editReviewerNoteTooltip=function(){return n.reviewerNoteSubmitted?"Edit note":"Add note"},n.viewReviewerNoteUrl=function(){return n.reviewerNoteId?o.reviewerNoteView.format(n.reviewerNoteId):""},n.isConflictSelectedText=ko.pureComputed(function(){for(var e=0;e<n.reviewerConflictReasons.length;e++)if(n.reviewerConflictReasons[e].isChecked())return"Yes";return"No"}),n.chairNoteColumns=[],null!==e.CNQ01Id?n.chairNoteColumns.push(new h.QuestionResponseColumn(e.CNQ01Id,e.CNQ01Text)):n.chairNoteColumns.push(null),null!==e.CNQ02Id?n.chairNoteColumns.push(new h.QuestionResponseColumn(e.CNQ02Id,e.CNQ02Text)):n.chairNoteColumns.push(null),null!==e.CNQ03Id?n.chairNoteColumns.push(new h.QuestionResponseColumn(e.CNQ03Id,e.CNQ03Text)):n.chairNoteColumns.push(null),null!==e.CNQ04Id?n.chairNoteColumns.push(new h.QuestionResponseColumn(e.CNQ04Id,e.CNQ04Text)):n.chairNoteColumns.push(null);var i=0,r=[];for(i=0;i<t.length;i++)r.push(n.chairNoteColumns[i]);if(n.chairNoteColumns=r,n.reviewerConflictReasons=[],a&&a.conflictDeclarationAllowedTracks&&!0===a.conflictDeclarationAllowedTracks[n.trackId]&&a.conflictReasons)for(i=0;i<a.conflictReasons.length;i++){var s=a.conflictReasons[i],u=h.autoMap(new l(n.id),s);u.isChecked(e&&e.ConflictReasonIds&&-1<e.ConflictReasonIds.indexOf(s.Id)),n.reviewerConflictReasons.push(u)}n.editReviewUrl=function(){return n.reviewId?o.reviewDetails.format(n.reviewId):o.reviewCreate.format(n.id)},n.viewReviewUrl=function(){return n.reviewId?o.reviewView.format(n.reviewId):null},n.viewMetaReviewsUrl=function(){return n.allowDiscussion()?o.metaReviews.format(n.id):null},n.allowDiscussion=function(){return n.isViewOthersReviewsAvailable},n.isActionApplicable=function(){return n.assigned&&n.reviewingEnabled||n.allowDiscussion()},n.viewAllReviewsUrl=function(){return n.allowDiscussion()?o.reviewViewAll.format(n.id):null},n.viewUrl=function(){return o.submissionSummary.format(n.id)},n.reviewingDetailsUrl=function(){return n.allowDiscussion()?o.reviewingDetailsUrl.format(n.id):null},n.viewOriginalUrl=function(){return n.originalSubmissionId?o.submissionSummary.format(n.originalSubmissionId):null},n.showFeed=function(){return o.feed.format(n.id)},n.viewAuthorFeedbackUrl=function(){return n.isAuthorFeedbackAvailable?o.feedback.format(n.authorFeedbackId):null},n.externalReviewerEmailUrl=function(){return o.externalReviewerEmail.format(n.id,n.externalReviewer().id)},n.metaReviewerEmailUrl=function(){return o.metaReviewerEmail.format(n.id)},n.seniorMetaReviewerEmailUrl=function(){return o.seniorMetaReviewerEmail.format(n.id)},n.emailTrackChairUrl=function(){return o.emailTrackChair.format(n.id)},n.removeExternalReviewer=function(){var e;confirm("Remove external reviewer?".format(n.id))&&(e={requestUri:h.odata.getUrl(h.odata.entitySet.reviews,null,"AssignExternalReviewer"),method:"POST",showProgressIndicator:!1,data:{Request:{SubmissionId:n.id,ExternalReviewerId:null}}},v.read(e,function(){h.addMessage("External reviewer has been removed succesfully."),n.externalReviewer(null)}))}}function k(t,e){var o=e,a=this;a.submissionCount=ko.observable(0),a.selectedBid=ko.observable(1),a.bidOptions=[{name:"Not Entered",id:1},{name:"Not Willing",id:2},{name:"In A Pinch",id:3},{name:"Willing",id:4},{name:"Eager",id:5}],a.submitEnabled=ko.computed(function(){return!(a.submissionCount()<=0)&&(null!==a.selectedBid()&&void 0!==a.selectedBid())});function n(){return"BiddingModels"===e.controller||"BiddingReviewModels"===e.controller}function i(){return"ReviewModels"===e.controller||"BiddingReviewModels"===e.controller}a.changeBid=function(){var e={Filter:a.filter,Bid:a.selectedBid(),ShowBidding:n(),ShowReviewing:i()},e={requestUri:h.odata.getUrl(h.odata.entitySet.biddingReviewModels,null,"BulkChangeBid"),method:"POST",showProgressIndicator:!0,data:{Request:e}};v.request(e,function(e){o.refresh(),setTimeout(function(){h.addMessage("The bid of selected submissions have been changed.")},500),g(t).modal("hide")})},a.bind=function(){ko.applyBindings(a,t)},a.filter=null,a.editInDialog=function(e){e={Filter:a.filter=e,ShowBidding:n(),ShowReviewing:i()},e={requestUri:h.odata.getUrl(h.odata.entitySet.biddingReviewModels,null,"SubmissionCountFilteredBidding"),method:"POST",data:{Request:e}};v.request(e,function(e){a.submissionCount(e.value),a.selectedBid(null),g(t).modal("show")})}}function M(o,a){var e=this;e.bind=function(){ko.applyBindings(e,o)},e.editInDialog=function(e){e={Filter:e,ShowBidding:"BiddingModels"===a.controller||"BiddingReviewModels"===a.controller,ShowReviewing:"ReviewModels"===a.controller||"BiddingReviewModels"===a.controller},e={requestUri:h.odata.getUrl(h.odata.entitySet.biddingReviewModels,null,"BidSummaryFilteredBidding"),method:"POST",data:{Request:e}};v.request(e,function(e){null!=a.bidChart&&a.bidChart.destroy();var t=g("#bidChart").get(0).getContext("2d");a.bidChart=new Chart(t,{type:"bar",data:{labels:e.XLabels,datasets:[{data:e.YValues,backgroundColor:["blue","blue","blue","blue","blue"]}]},options:{plugins:{legend:{display:!1}},scales:{y:{display:!0,type:"logarithmic"}}}}),g(o).modal("show")})}}function S(s,e){var u=this;u.id=ko.observable(),u.title=ko.observable(),u.reproQuestions=ko.observableArray(),u.bind=function(){ko.applyBindings(u,s)},u.editInDialog=function(e){u.reproQuestions([]);e={requestUri:h.odata.getUrl(h.odata.entitySet.submissionViews,e,"GetSummaryView"),headers:{"Content-Type":"application/json"},method:"POST"};v.request(e,function(e){if(u.id(e.Id),u.title(e.Title),e.ReproducibilityQuestionAnswersJson)for(var t,o,a,n=JSON.parse(e.ReproducibilityQuestionAnswersJson),i=0;i<n.length;i++){if(t=h.autoMap(new d,n[i]),o=n[i].Answers)for(var r=0;r<o.length;r++)(a=h.autoMap(new c,o[r])).customData=JSON.parse(o[r].Text),t.answers.push(a);u.reproQuestions.push(t)}g(s).modal("show")})}}function y(t,e){var o=this;o.id=ko.observable(),o.title=ko.observable(),o.body=ko.observable(),o.bind=function(){ko.applyBindings(o,t)},o.save=function(){var e={requestUri:h.odata.getUrl(h.odata.entitySet.authorFeedbackComments),headers:{"Content-Type":"application/json"},method:"POST",data:{SubmissionId:o.id(),Title:o.title(),Body:o.body()}};v.request(e,function(){h.addMessage("Author feedback comment saved."),g(t).modal("hide")})},o.editInDialog=function(e){o.id(e),g(t).modal("show")}}h.BiddingPage=function(e,t,o,a,n,i,r,s,u,l,d){var c=this;c.bidChart=null,c.chairNoteQuestions=o,c.$element=g(e),c.conference=window.cmt3.conference.name,c.page=ko.observable(1),c.top=ko.observable(25),c.sort=ko.observable("Id"),c.controller=t,c.filters=[],c._total=ko.observable(0),c.selected=ko.observable(0),c.biddingModels=ko.observableArray(),c.reviewerConflictReasons=n.conflictReasons,c.bid=ko.observable(),c.editingBid=ko.observable(!1),c.listen(),c.Pager=ko.pager(c.selected,c.top),c.Pager().CurrentPage.subscribe(function(){c.page(c.Pager().CurrentPage()),c.show()}),c.pageUrls=a,c.params=n,c.bidNames=u,c.numberField1Text=d&&d.BiddingNumberField1?d.BiddingNumberField1:"Number Field1",c.numberField2Text=d&&d.BiddingNumberField2?d.BiddingNumberField2:"Number Field2",c.numberField3Text=d&&d.BiddingNumberField3?d.BiddingNumberField3:"Number Field3",c.stringField1Text=d&&d.BiddingStringField1?d.BiddingStringField1:"String Field1",c.hasReviewerNoteQuestion=function(e){return i&&-1!==i.indexOf(e)},c.doNotAllowEmailSeniorMetaReviewer=function(e){return r&&-1!==r.indexOf(e)},c.hasTrackChair=function(e){return s&&-1!==s.indexOf(e)},c.downloadSubmissionFileLink=function(){return c.pageUrls.submissionFile.format("")},c.submissionComparisonLink=function(){return c.pageUrls.submissionComparison.format("")},c.downloadAllLink=function(){return c.pageUrls.submissionFileWithSupplemental.format("")},c.importReviewsLink=function(){return c.pageUrls.importReviews},c.showWelcomeMessage=function(){g(document.getElementById("welcomeMessageDialog")).modal("show")},c.bidNamesProvider=function(){var e=c.bidNames;return e.sort(),e},c.subjectAreasProvider=ko.pureComputed(function(){return l}),c.assignExternalReviewerVm=null,c.showAssignExternalReviewerDialog=function(e){null===c.assignExternalReviewerVm&&(c.assignExternalReviewerVm=new w(document.getElementById("selectUserDialog"),c),c.assignExternalReviewerVm.bind()),c.assignExternalReviewerVm.biddingModel=e,c.assignExternalReviewerVm.showDialog()};var p=null;c.changeBid=function(e){null===p&&(p=new k(document.getElementById("changeBidDialog"),c)).bind(),p.editInDialog(e)};var m=null;c.bidSummary=function(e){null===m&&(m=new M(document.getElementById("bidSummaryDialog"),c)).bind(),m.editInDialog(e)};var f=null;c.reproducibilitySummary=function(e){null===f&&(f=new S(document.getElementById("reproducibilityDialog"))).bind(),f.editInDialog(e)};var h=null;c.commentAuthorFeedback=function(e){null===h&&(h=new y(document.getElementById("authorFeedbackCommentDialog"))).bind(),h.editInDialog(e)}},h.BiddingPage.prototype={listen:function(){var e=this;g(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o,a="";return g.each(this.filters,function(e,t){t.getValue()&&(o=t.getValue(),"Title"===t.field&&(o="({0} or {1})".format(o,o.replace("Title","Abstract"))),a+=""===a?o:" and "+o)}),a},show:function(e,d,c,p,m){var f=this;function t(a){var n=d||f.sort(),i=c||f.getFilter(),r=p||f.skip(),s=null!=m?m:f.top(),e=n?"&$orderby="+n:"",t=s?"&$top="+s:"",o=r?"&$skip="+r:"",u=i?"&$filter="+encodeURIComponent(i):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+f.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+f.conference+"/"+f.controller+"?"+(a?"$count=true&$top=0"+u:e+u+o+t),method:"GET",headers:{Accept:"application/json"}}]}},l=g.Deferred();return v.request(t,function(e){h.page.saveState("biddings",{sort:n,top:s,skip:r,filter:i});var o,t=e.responses[0].body;a?(e=t["@odata.count"],l.resolve(e)):(t=t.value,o=[],g.each(t,function(e,t){o.push(new b(t,f.chairNoteQuestions,f.pageUrls,f.params))}),l.resolve(o))},function(e){window.cmt3.logger.log(e.message),l.reject()},v.batchHandler),l.promise()}return f.initialized||e?(h.showProgress(),g.when(t(!1),t(!0)).done(function(e,t){0===f._total()&&f._total(t),f.selected(t),f.biddingModels(e)}).always(h.hideProgress())):g.Deferred().reject().promise()},scroll:function(){g(window).scrollTop()===g(document).height()-g(window).height()&&self.show()},selectBid:function(e,t){var o=g(t.target),a=ko.contextFor(t.target),t=g(g("#bidTemplate").text());o.hide(),o.after(t);o=a.$parent.getBids(e.id,o,t);ko.applyBindings(o,t[0]),t.find("select").focus()},getBids:function(t,o,a){var n=[{name:"Not Entered",id:1},{name:"Not Willing",id:2},{name:"In A Pinch",id:3},{name:"Willing",id:4},{name:"Eager",id:5}],e={options:ko.observableArray(n),selectedBid:ko.observable()};return e.selectedBid.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/BiddingModels("+t+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{BidId:e[0]}};v.request(e,function(e){a.remove(),o.text(n[e.BidId-1].name),o.show()})}),e},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){g.each(this.filters,function(e,t){t.reset()}),h.announce(h.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){g("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),g(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=g(t.target).attr("size"),t=parseInt(t);this.top(t),h.announce(h.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!==this.top()&&1!==this.page()&&(this.page(this.page()-1),this.show())},next:function(){0===this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=g(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=g(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(g("th[data-sort]").each(function(){g(this).find("i").removeClass("icon-arrow-up"),g(this).find("i").removeClass("icon-arrow-down"),g(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&h.announce(h.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()},showAbstract:function(e,t){ko.contextFor(t.target).$parent;var o=g(t.target),t=o.next();t.is(":visible")?(t.hide(),o.text("Show abstract")):(t.show(),o.text("Hide abstract"))},bulkChangeBid:function(e,t){t=h.GetEventFilter(t);this.changeBid(t)},showBidSummary:function(e,t){t=h.GetEventFilter(t);this.bidSummary(t)},showReproducibility:function(e,t){var o=t.target,t=ko.contextFor(o),o=parseInt(g(o).attr("sid"));t.$root.reproducibilitySummary(o)},showAuthorFeedbackComment:function(e,t){t=t.target,t=ko.contextFor(t);t.$root.commentAuthorFeedback(t.$data.id)}}}(window.jQuery,window.app,window.OData),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.bids=ko.observableArray(),i.normalBids=ko.observableArray(),i.uploading=ko.observable(!1),i.fileName=ko.observable(""),i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},i.getModel=function(){for(var e=[],t=0;t<i.normalBids().length;t++){var o=i.normalBids()[t],o={Email:o.email,SubmissionId:o.id,BidValue:o.bidValue};e.push(o)}return{Bids:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.biddings,null,"Import"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/BiddingModels/GetImportTemplate";a.page.post(o,{})},i.uploadFile=function(e,t){""!=t.target.value&&(t.target.form.submit(),i.uploading(!0))},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.bids.removeAll(),i.normalBids.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,id:n.Id,bid:n.Bid,bidValue:n.BidValue,status:n.Status,hasError:n.HasError,lineNumber:n.LineNumber};i.bids.push(n),n.hasError||i.normalBids.push(n)}i.isFileUploaded(!0),i.uploading(!1),i.fileName("")},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importBids=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(a,n,s){"use strict";function o(e){this.parent=e,this.assignments=ko.observableArray([]),a.DataTable.call(this)}function i(e,t){var r=this;r.isMetaReview=e,r.isSenior=t,r.table=new o(r),r.isFileUploaded=ko.observable(!1),r.hasError=ko.observable(!1),r.errorText=ko.observable(),r.assignments=ko.observableArray(),r.removeAssignments=ko.observableArray(),r.normalAssignments=ko.observableArray(),r.normalRemoveAssignments=ko.observableArray(),r.uploading=ko.observable(!1),r.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},r.getModel=function(){for(var e=[],t=[],o=0;o<r.normalAssignments().length;o++){var a=r.normalAssignments()[o],a={Email:a.email,SubmissionId:a.id};e.push(a)}for(o=0;o<r.normalRemoveAssignments().length;o++){var n=r.normalRemoveAssignments()[o].id;t.push(n)}return{Assignments:e,RemoveAssignments:t}},r.send=function(e,t){var o=r.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.submissions,null,r.isMetaReview?r.isSenior?"ImportSeniorMetaAssignmentsXml":"ImportMetaAssignmentsXml":"ImportAssignmentsXml"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},r.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/"+(r.isMetaReview?r.isSenior?"GetSeniorMetaAssignmentImportTemplate":"GetMetaAssignmentImportTemplate":"GetAssignmentImportTemplate");a.page.post(o,{})},r.uploadFile=function(e,t){""!=t.target.value&&(r.uploading(!0),t.target.form.submit())},r.parseUploadResult=function(e,t){var o=s.parseJSON(s("#singleFileUploadFrame").contents().text());if(r.assignments.removeAll(),r.normalAssignments.removeAll(),r.normalRemoveAssignments.removeAll(),r.hasError(o.HasError),r.errorText(o.ErrorText),!r.hasError()){for(var a=0;a<o.Models.length;a++){var n,i=o.Models[a];null==i.Email?(n={id:i.Id,title:i.Title,status:i.Status,hasError:i.HasError,lineNumber:i.LineNumber},r.removeAssignments.push(n),n.hasError||r.normalRemoveAssignments.push(n)):(i={email:i.Email,id:i.Id,title:i.Title,status:i.Status,hasError:i.HasError,lineNumber:i.LineNumber},r.assignments.push(i),i.hasError||r.normalAssignments.push(i))}r.table.loadData(!0)}r.isFileUploaded(!0),r.uploading(!1)},r.bindTo=function(e){ko.applyBindingsAndShow(r,e)}}o.prototype=s.extend({},a.DataTable.prototype,{getStorageKey:function(){return"ImportAssignmentTable"},loadData:function(e){var t=this;(e=!0===e)&&t.applyState();e=0<t.top()?t.parent.assignments().slice(t.skip(),t.skip()+t.top()):t.parent.assignments();t.total(t.parent.assignments().length),t.assignments(e)}}),a.importAssignments=function(e,t,o){new i(e,t).bindTo(o)}}(window.app,window.OData,window.jQuery,window.document),function(a,n,r){"use strict";var s=void 0===a.url?null:a.url.queryString.getValue("trackId");function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.assignments=ko.observableArray(),i.normalAssignments=ko.observableArray(),i.uploading=ko.observable(!1),i.getModel=function(){for(var e=[],t=0;t<i.normalAssignments().length;t++){var o=i.normalAssignments()[t],o={SeniorMetaReviewerEmail:o.seniorMetaReviewerEmail,MetaReviewerEmail:o.metaReviewerEmail};e.push(o)}return{Assignments:e,TrackId:s}},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"ImportSeniorMetaAssignments"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/User/SeniorMetaReviewers?trackId="+s})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/GetImportSeniorMetaAssignmentTemplate";a.page.post(o,{})},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.assignments.removeAll(),i.normalAssignments.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={seniorMetaReviewerEmail:n.SeniorMetaReviewerEmail,metaReviewerEmail:n.MetaReviewerEmail,status:n.Status,notice:n.ErrorText,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.assignments.push(n),n.hasError||i.normalAssignments.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importSeniorMetaAssignments=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(r,s,u){"use strict";function a(a,n){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.quotas=ko.observableArray(),i.normalQuotas=ko.observableArray(),i.uploading=ko.observable(!1),i.getModel=function(){for(var e=[],t=0;t<i.normalQuotas().length;t++){var o=i.normalQuotas()[t],o={Email:o.email,Quota:o.quota};e.push(o)}return{Quotas:e,TrackId:a,ForReviewer:n}},i.send=function(e,t){var o=i.getModel(),o={requestUri:r.odata.getUrl(r.odata.entitySet.users,null,"ImportUserQuotas"),method:"POST",data:{Request:o}};s.request(o,function(){window.location=n?"/"+window.cmt3.conference.name+"/User/Reviewers?trackId="+a:"/"+window.cmt3.conference.name+"/User/MetaReviewers?trackId="+a})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/GetImportUserQuotasTemplate";r.page.post(o,{})},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=u.parseJSON(u("#singleFileUploadFrame").contents().text());if(i.quotas.removeAll(),i.normalQuotas.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,quota:n.Quota,status:n.Status,notice:n.ErrorText,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.quotas.push(n),n.hasError||i.normalQuotas.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}r.importUserQuotas=function(e,t,o){new a(t,o).bindTo(e)}}(window.app,window.OData,window.jQuery),function(n,r,s){"use strict";function o(a){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.tags=ko.observableArray(),i.normalTags=ko.observableArray(),i.uploading=ko.observable(!1),i.getModel=function(){for(var e=[],t=0;t<i.normalTags().length;t++){var o=i.normalTags()[t],o={Email:o.email,Tag:o.tag};e.push(o)}return{Tags:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:n.odata.getUrl(n.odata.entitySet.users,null,"ImportUserTags"),method:"POST",data:{Request:o}};r.request(o,function(){window.location=a})},i.cancel=function(e,t){window.location=a},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/GetImportUserTagsTemplate";n.page.post(o,null,"GET")},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=s.parseJSON(s("#singleFileUploadFrame").contents().text());if(i.tags.removeAll(),i.normalTags.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,tag:n.Tag,status:n.Status,notice:n.ErrorText,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.tags.push(n),n.hasError||i.normalTags.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}n.importUserTags=function(e,t){new o(t).bindTo(e)}}(window.app,window.OData,window.jQuery),function(n,r,s){"use strict";function o(a){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.userTypes=ko.observableArray(),i.normalUserTypes=ko.observableArray(),i.uploading=ko.observable(!1),i.getModel=function(){for(var e=[],t=0;t<i.normalUserTypes().length;t++){var o=i.normalUserTypes()[t],o={Email:o.email,UserType:o.userType};e.push(o)}return{UserTypes:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:n.odata.getUrl(n.odata.entitySet.users,null,"ImportUserTypes"),method:"POST",data:{Request:o}};r.request(o,function(){window.location=a})},i.cancel=function(e,t){window.location=a},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/GetImportUserTypesTemplate";n.page.post(o,null,"GET")},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=s.parseJSON(s("#singleFileUploadFrame").contents().text());if(i.userTypes.removeAll(),i.normalUserTypes.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,userType:n.UserType,status:n.Status,notice:n.ErrorText,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.userTypes.push(n),n.hasError||i.normalUserTypes.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}n.importUserTypes=function(e,t){new o(t).bindTo(e)}}(window.app,window.OData,window.jQuery),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.userDomainConflicts=ko.observableArray(),i.normalUserDomainConflicts=ko.observableArray(),i.uploading=ko.observable(!1),i.getModel=function(){for(var e=[],t=0;t<i.normalUserDomainConflicts().length;t++){var o=i.normalUserDomainConflicts()[t],o={Email:o.email,DomainConflicts:o.domainConflicts};e.push(o)}return{UserDomainConflicts:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"ImportDomainConflicts"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/User/Index"})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/GetImportDomainConflictsTemplate";a.page.post(o,{})},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.userDomainConflicts.removeAll(),i.normalUserDomainConflicts.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,domainConflicts:n.DomainConflicts,status:n.Status,notice:n.ErrorText,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.userDomainConflicts.push(n),n.hasError||i.normalUserDomainConflicts.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importDomainConflicts=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.bids=ko.observableArray(),i.normalBids=ko.observableArray(),i.uploading=ko.observable(!1),i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},i.getModel=function(){for(var e=[],t=0;t<i.normalBids().length;t++){var o=i.normalBids()[t],o={Email:o.email,SubmissionId:o.id,BidValue:o.bidValue};e.push(o)}return{Bids:e}},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/BiddingModels/GetImportTabDelimitedTemplate";a.page.post(o,{})},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.biddings,null,"Import"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.bids.removeAll(),i.normalBids.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,id:n.Id,bid:n.Bid,bidValue:n.BidValue,status:n.Status,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.bids.push(n),n.hasError||i.normalBids.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importBidsFromTabDelimitedFile=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(n,r,s){"use strict";function o(a){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.notes=ko.observableArray(),i.normalNotes=ko.observableArray(),i.uploading=ko.observable(!1),i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},i.getModel=function(){for(var e=[],t=0;t<i.normalNotes().length;t++){var o=i.normalNotes()[t],o={SubmissionId:o.submissionId,Note:o.note};e.push(o)}return{Notes:e}},i.downloadTemplate=function(e,t){var o=n.odata.getUrl(n.odata.entitySet.chairNotes,null,"GetImportTabDelimitedTemplate")+"(order="+a+")";n.page.post(o,null,"GET")},i.send=function(e,t){var o=i.getModel(),o={requestUri:n.odata.getUrl(n.odata.entitySet.chairNotes,null,"Import"),method:"POST",data:{Order:a,Request:o}};r.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=s.parseJSON(s("#singleFileUploadFrame").contents().text());if(i.notes.removeAll(),i.normalNotes.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={submissionId:n.SubmissionId,note:n.Note,noteHtml:n.Note.htmlMultiLine(),status:n.Status,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.notes.push(n),n.hasError||i.normalNotes.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}n.importChairNotesFromTabDelimited=function(e,t){new o(e).bindTo(t)}}(window.app,window.OData,window.jQuery),function(r,s,i){"use strict";function u(){var e=this;e.id=r.autoMap(),e.name=r.autoMap(),e.firstName=r.autoMap(),e.lastName=r.autoMap(),e.email=r.autoMap(),e.organization=r.autoMap(),e.primarySubjectArea=r.autoMap(),e.secondarySubjectAreas=r.autoMap(),e.bid=r.autoMap(),e.userType=r.autoMap(),e.isAssigned=r.autoMap(),e.changeBidVm=null,e.isAssignedText=ko.pureComputed(function(){return e.isAssigned?"Yes":"No"})}function l(e,t){var o=this;o.seniorMetaReviewerId=e,o.metaReviewers=ko.observableArray([]),o.track=ko.observable(),o.trackChangeSubscription=null,o.userTypes=t,o.userTypesProvider=function(){return o.userTypes},r.DataTable.call(o)}function n(e,t){var o=this;o.trackId=r.autoMap(),o.trackName=r.autoMap(),o.biddingEnabled=r.autoMap(),o.isSelected=ko.observable(t),o.selectTrack=function(){e.selectTrack(o)}}function d(t){var i=this;i.tracks=ko.observableArray(),i.selectedTrack=ko.observable(null),i.selectTrack=function(e){for(var t=e.trackId,o=i.tracks(),a=0;a<o.length;a++){var n=o[a];n.trackId===t?(n.isSelected(!0),i.selectedTrack(e)):n.isSelected(!1)}},i.loadData=function(){var e=r.odata.getUrl(r.odata.entitySet.seniorMetaReviewerBiddingViews,t,"GetSeniorMetaReviewerSimpleView");return s.request({requestUri:e,showProgressIndicator:!1,method:"POST",headers:{"Content-Type":"application/json"}},function(e){r.autoMap(i,e);var t=[];if(e.TrackData){for(var o=JSON.parse(e.TrackData),a=0;a<o.length;a++)t.push(r.autoMap(new n(i,0==a),o[a]));i.tracks(t),i.selectTrack(t[0])}})}}function t(t,e){var o=e,a=this;a.userCount=ko.observable(0),a.selectedBid=ko.observable(1),a.bidOptions=[{name:"Not Entered",id:1},{name:"Not Willing",id:2},{name:"In A Pinch",id:3},{name:"Willing",id:4},{name:"Eager",id:5}],a.submitEnabled=ko.computed(function(){return!(a.userCount()<=0)&&(null!=a.selectedBid()&&void 0!==a.selectedBid())}),a.changeBid=function(){var e={Filter:a.filter,Bid:a.selectedBid(),UserId:o.seniorMetaReviewerId,TrackId:o.track()&&o.track().trackId},e={requestUri:r.odata.getUrl(r.odata.entitySet.seniorMetaReviewerBiddingModels,null,"BulkChangeBid"),method:"POST",showProgressIndicator:!0,data:{Request:e}};OData.request(e,function(e){o.refresh(),setTimeout(function(){r.addMessage("The bid for selected users have been changed.")},500),$(t).modal("hide")})},a.bind=function(){ko.applyBindings(a,t)},a.filter=null,a.editInDialog=function(e){e={Filter:a.filter=e,UserId:o.seniorMetaReviewerId},e={requestUri:r.odata.getUrl(r.odata.entitySet.seniorMetaReviewerBiddingModels,null,"UserCountFilteredBidding"),method:"POST",data:{Request:e}};OData.request(e,function(e){a.userCount(e.value),a.selectedBid(null),$(t).modal("show")})}}function c(e,t,o,a){var n=this;r.showProgress(),n.user=new d(e),n.table=new l(e,o),n.url=ko.pureComputed(function(){var e=n.user.selectedTrack();return e?a+"?trackId="+e.trackId:null}),n.biddingEnabled=ko.pureComputed(function(){var e=n.user.selectedTrack();return!!e&&e.biddingEnabled}),ko.applyBindings(n,i.getElementById(t)),$.when(n.user.loadData()).then(function(){return n.table.track(n.user.selectedTrack()),n.table.loadData(!0)}).then(function(){n.table.subscribeToTrackChange(),n.user.selectedTrack.subscribe(function(e){n.table.track(e)}),$("#"+t).show()}).always(r.hideProgress)}l.prototype=$.extend({},r.DataTable.prototype,{getStorageKey:function(){return"SeniorMetaReviewerBidding"},getDefaultSorting:function(){return{property:"FirstName",direction:"asc"}},subscribeToTrackChange:function(){this.trackChangeSubscription||(this.trackChangeSubscription=this.track.subscribe(this.loadData,this))},selectBid:function(e,t){var o=$(t.target),a=ko.contextFor(t.target),t=$($("#bidTemplate").text());o.hide(),o.after(t);o=a.$parent.getBids(e.id,o,t);ko.applyBindings(o,t[0]),t.find("select").focus()},getBids:function(t,o,a){var n=this,i=[{name:"Not Entered",id:1},{name:"Not Willing",id:2},{name:"In A Pinch",id:3},{name:"Willing",id:4},{name:"Eager",id:5}],e={options:ko.observableArray(i),selectedBid:ko.observable()};return e.selectedBid.subscribe(function(e){e={requestUri:r.odata.getUrl(r.odata.entitySet.seniorMetaReviewerBiddingModels,t),method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{UserId:n.seniorMetaReviewerId,BidId:e[0],TrackId:n.track().trackId}};OData.request(e,function(e){a.remove(),o.text(i[e.BidId-1].name),o.show()})}),e},getFilter:function(){var o="";$.each(this.filters,function(e,t){t.getValue()&&(o+=o?" and "+t.getValue():t.getValue())});var e=this.track()&&this.track().trackId;return"number"==typeof e&&0<e&&(o+=(o?" and":"")+" TrackId eq "+e),o},loadData:function(e){var n=this;(e=!0===e)&&n.applyState();var t=n.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=n.skip()?"&$skip="+n.skip():"",i=n.top()?"&$top="+n.top():"",t=(t=n.getFilter())&&"&$filter="+encodeURIComponent(t),e={method:"GET",headers:{Accept:"application/json"},requestUri:r.odata.getUrl(r.odata.entitySet.seniorMetaReviewerBiddingViews,n.seniorMetaReviewerId)+"?$count=true"+t+o+a+i,showProgressIndicator:!e};return s.request(e,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=r.autoMap(new u,e.value[o]);t.push(a)}n.metaReviewers(t),n.saveState()},function(e){r.addErrorMessage(r.odata.getErrorMessage(e))})},bulkChangeBid:function(){var e=this.getFilter();null==this.changeBidVm&&(this.changeBidVm=new t(i.getElementById("changeBidDialog"),this),this.changeBidVm.bind()),this.changeBidVm.editInDialog(e)},email:function(){var e=this.getFilter(),t="/"+window.cmt3.conference.name+"/SeniorMetaReviewer/SendEmailToMetaReviewers";r.url.navigateTo(t,{filter:0<e.length?e:null,userId:this.seniorMetaReviewerId})}}),r.seniorMetaReviewerBidding=function(e,t,o,a){new c(e,t,o,a)}}(window.app,window.OData,window.document),function(s,u,a){"use strict";function l(o){var e,a=this;function n(){i(),e=a.isAssigned.subscribe(t)}function i(){e&&"function"==typeof e.dispose&&e.dispose()}function t(){void 0===a.initialState?a.initialState=a.isAssigned():function(){var t=this;t.isToggleInProgress(!0);var e={UserId:t.id,TrackId:t.trackId};e.Type=t.isAssigned()?"Assign":"Remove",OData.request({requestUri:s.odata.getUrl(s.odata.entitySet.seniorMetaReviewerBiddingModels,o,"Assign"),method:"POST",showProgressIndicator:!1,data:{Request:e}},function(){t.isAssigned()===t.initialState?a.css(""):a.css(t.isAssigned()?"success":"error")},function(e){i(),a.isAssigned(!a.isAssigned()),n(),s.addErrorMessage("Unable to edit assignment for '"+t.firstName+" "+t.lastName+"'. "+s.odata.getErrorMessage(e))}).always(function(){t.isToggleInProgress(!1)})}.call(a)}a.trackId=s.autoMap(),a.id=s.autoMap(),a.name=s.autoMap(),a.firstName=s.autoMap(),a.lastName=s.autoMap(),a.email=s.autoMap(),a.organization=s.autoMap(),a.primarySubjectArea=s.autoMap(),a.secondarySubjectAreas=s.autoMap(),a.bid=s.autoMap(),a.assignmentsNumberWithinTrack=s.autoMap(),a.isAssigned=ko.observable().autoMap(),a.initialState=void 0,a.css=ko.observable(""),a.isToggleInProgress=ko.observable(!1),n()}function n(e){this.userId=e,this.showAssignedOnly=ko.observable("false"),this.showAssignedOnly.subscribe(this.loadData,this),this.metaReviewers=ko.observableArray([]),this.track=ko.observable(),this.trackChangeSubscription=null,s.DataTable.call(this)}function r(e,t){var o=this;o.trackId=s.autoMap(),o.trackName=s.autoMap(),o.primarySubjectAreas=s.autoMap(),o.secondarySubjectAreas=s.autoMap(),o.isSelected=ko.observable(t),o.selectTrack=function(){e.selectTrack(o)}}function i(t){var i=this;i.firstName=ko.observable().autoMap(),i.lastName=ko.observable().autoMap(),i.email=ko.observable().autoMap(),i.organization=ko.observable().autoMap(),i.tracks=ko.observableArray(),i.selectedTrack=ko.observable(null),i.fullName=ko.pureComputed(function(){return i.firstName()+" "+i.lastName()}),i.selectTrack=function(e){for(var t=e.trackId,o=i.tracks(),a=0;a<o.length;a++){var n=o[a];n.trackId===t?(n.isSelected(!0),i.selectedTrack(e)):n.isSelected(!1)}},i.loadData=function(){var e=s.odata.getUrl(s.odata.entitySet.seniorMetaReviewerBiddingViews,t,"GetSeniorMetaReviewerSimpleView");return u.request({requestUri:e,showProgressIndicator:!1,method:"POST",headers:{"Content-Type":"application/json"}},function(e){s.autoMap(i,e);var t=[];if(e.TrackData){for(var o=JSON.parse(e.TrackData),a=0;a<o.length;a++)t.push(s.autoMap(new r(i,0==a),o[a]));i.tracks(t),i.selectTrack(t[0])}})}}function o(e,t){var o=this;s.showProgress(),o.user=new i(e),o.table=new n(e),ko.applyBindings(o,a.getElementById(t)),$.when(o.user.loadData()).then(function(){return o.table.track(o.user.selectedTrack()),o.table.loadData(!0)}).then(function(){o.table.subscribeToTrackChange(),o.user.selectedTrack.subscribe(function(e){o.table.track(e)}),$("#"+t).show()}).always(s.hideProgress)}n.prototype=$.extend({},s.DataTable.prototype,{getDefaultSorting:function(){return{property:"IsAssigned",direction:"desc"}},subscribeToTrackChange:function(){this.trackChangeSubscription||(this.trackChangeSubscription=this.track.subscribe(this.loadData,this))},loadData:function(e){var n=this;(e=!0===e)&&n.applyState();var t=n.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=n.skip()?"&$skip="+n.skip():"",i=n.top()?"&$top="+n.top():"",r="";$.each(n.filters,function(e,t){t.getValue()&&(r+=r?" and "+t.getValue():t.getValue())}),"true"===n.showAssignedOnly()&&(r+=(r?" and":"")+" IsAssigned eq true");t=n.track()&&n.track().trackId;"number"==typeof t&&0<t&&(r+=(r?" and":"")+" TrackId eq "+t);r=r&&"&$filter="+encodeURIComponent(r),e={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.seniorMetaReviewerBiddingViews,n.userId)+"?$count=true"+r+o+a+i,showProgressIndicator:!e};return u.request(e,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=s.autoMap(new l(n.userId),a);t.push(a)}n.metaReviewers(t),n.saveState()},function(e){s.addErrorMessage(s.odata.getErrorMessage(e))})}}),s.seniorMetaReviewerAssignMetaReviewers=function(e,t){new o(e,t)}}(window.app,window.OData,window.document),function(l,d,c,p,a){function m(e,t,o){var a=this;a.group=ko.observable(),a.tracks=o,a.addEditText=ko.pureComputed(function(){var e=a.group();return e&&e.groupId()?"Edit":"Add"});var n=l(c.getElementById(e));a.addEditGroup=function(e){e=e&&e.constructor===f?p.autoMap(new f(t.trackId,o),e):new f(t.trackId,o),a.group(e),n.modal("show")},a.save=function(){var e;!function(){var e=ko.validation.group(a.group());if(!(0<e().length))return 1;e.showAllMessages()}()||(e=a.group())&&"function"==typeof e.save&&(p.showProgress(),l.when(e.save()).then(function(){return n.modal("hide"),t.show()}).always(p.hideProgress))}}function f(t,e){var o=this;o.groupId=ko.observable(0).autoMap(),o.groupName=ko.observable("").extend({required:!0}).autoMap(),o.trackId=ko.observable(0<t?t:void 0).extend({required:!0,onlyIf:function(){return o.isTrackSelectionVisible()}}).autoMap(),o.isImplicit=ko.observable(!1).autoMap(),o.isEnabled=ko.observable(!1).autoMap(),o.track=p.autoMap(),o.tracks=ko.observable(e),o.numberOfMetaReviewers=p.autoMap(),o.metaReviewersJson=p.autoMap(),o.isTrackSelectionVisible=ko.pureComputed(function(){var e=o.groupId();return(!t||t<=0)&&(!e||e<1)}),o.isImplicitText=ko.pureComputed(function(){return!0===o.isImplicit()?"Yes":"No"}),o.isEnabledText=ko.pureComputed(function(){return!0===o.isEnabled()?"Yes":"No"}),o.metaReviewers=ko.pureComputed(function(){return o.metaReviewersJson?JSON.parse(o.metaReviewersJson):[]}),o.save=function(){var e=o.groupId(),e={method:e?"PATCH":"POST",requestUri:p.odata.getUrl(p.odata.entitySet.trackMetaReviewerGroups,e||null),showProgressIndicator:!1,data:{GroupName:o.groupName(),TrackId:o.trackId(),IsImplicit:o.isImplicit(),IsEnabled:o.isEnabled()}};return a.request(e)},o.remove=function(){var e={method:"DELETE",requestUri:p.odata.getUrl(p.odata.entitySet.trackMetaReviewerGroups,o.groupId()),showProgressIndicator:!1};return a.request(e)}}function h(n,t){var i=this;i.userCount=ko.observable(0),i.arrGroupId=ko.observableArray(),i.editInDialog=function(e){e=e?"&$filter="+encodeURIComponent(e):"";a.read({requestUri:p.odata.getUrl(p.odata.entitySet.trackMetaReviewerGroups,null)+"?trackId="+t.selectedTrackId()+"&$count=true"+e,dataType:"json"},function(e){i.userCount(e["@odata.count"]);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o];t.push(a.GroupId)}i.arrGroupId(t),l(n).modal("show")})},i.bind=function(){ko.applyBindings(i,n)},i.buddyAssign=function(){var e={requestUri:p.odata.getUrl(p.odata.entitySet.submissions,null,"BulkBuddyMetaAssign"),method:"POST",showProgressIndicator:!0,data:{Request:{TrackId:t.selectedTrackId(),GroupIds:i.arrGroupId()}}};OData.request(e,function(e){e.IncorrectTagOptions?p.addMessage("Submission Tag Options for Meta-Reviewer not correctly set up.",null,"error"):e.UserInMultipleGroups?p.addMessage("Meta-reviewer can only appear in one group.",null,"error"):e.SubmissionInMultipleGroups?p.addMessage("Submission can only appear in one group.",null,"error"):e.IncorrectTagOptions?p.addMessage("Submission can be assigned to only one meta-reviewer.",null,"error"):0<e.BulkAssigned?(d.location.reload(),setTimeout(function(){p.addMessage("{0} assignments created.".format(e.BulkAssigned))},500)):p.addMessage("No assignments created.",null,"error")})}}function r(e,t,o,a,n){p.Page.call(this,e,p.odata.entitySet.trackMetaReviewerGroups,"trackId="+(a||-1));var i=this;i.trackId=a,i.createItem=function(e){return p.autoMap(new f,e)},i.addEditDialog=new m(t,i,n),i.changeTrack=function(e){var t="/"+d.cmt3.conference.name+"/User/MetaReviewerGroups";0<=e.id&&(t=t+"?trackId="+e.id),d.location=t},i.removeGroup=function(e){return!(!e||e.constructor!==f)&&(!!d.confirm("Are you sure you want to remove this group?")&&(p.showProgress(),void l.when(e.remove()).then(function(){return i.show()}).always(p.hideProgress)))},i.tracks=ko.observableArray(),i.selectedTrack=ko.observable(),i.selectedTrackId=ko.pureComputed(function(){var e=i.selectedTrack();if(e&&0<e.id)return e.id;e=i.tracks();return(e=e&&e.filter(function(e){return 0<e.id}))&&1===e.length?e[0].id:-1});t=null;if(1<n.length?((t=new p.Track).id=-1,t.name="<All Tracks>"):0<n.length&&(t=p.autoMap(new p.Track,n[0]),i.trackId=t.id),i.tracks.push(t),i.selectedTrack(t),1<n.length){for(var r=0;r<n.length;r++){var s=p.autoMap(new p.Track,n[r]);i.tracks.push(s)}for(r=0;r<i.tracks().length;r++)if(i.trackId===i.tracks()[r].id){i.selectedTrack(i.tracks()[r]);break}i.selectedTrackSubscription=i.selectedTrack.subscribe(i.changeTrack)}i.trackNamesProvider=ko.pureComputed(function(){var e,t=[];for(e in n)n.hasOwnProperty(e)&&t.push(n[e].name);return t});var u=null;i.buddyAssign=function(e,t){null===u&&(u=new h(c.getElementById(o),i)).bind();t=p.GetEventFilter(t);u.editInDialog(t)}}r.prototype=Object.create(p.Page.prototype),p.metaReviewerGroupsPage=function(e,t,o,a,n,i){i=new r(t,o,a,n,i);ko.applyBindingsAndShow(i,e),i.setDefaultSort("GroupName"),i.show()}}($,window,document,window.app,window.OData),function(T,R,C){"use strict";function r(){var e=this;e.id=R.autoMap(),e.firstName=R.autoMap(),e.lastName=R.autoMap(),e.name=ko.pureComputed(function(){return e.firstName+" "+e.lastName})}function A(e){var t=this;e?(t.id=e.Id,t.firstName=e.FirstName,t.middleInitial=e.MiddleInitial,t.lastName=e.LastName,t.email=e.Email,t.organization=e.Organization):(t.id=R.autoMap(),t.firstName=R.autoMap(),t.middleInitial=R.autoMap(),t.lastName=R.autoMap(),t.email=R.autoMap(),t.organization=R.autoMap()),t.readFromJson=function(e){return R.autoMap(t,e),t}}function N(e,n){var i=this;e?(i.id=e.Id,i.metaReviewerId=e.MetaReviewerId,i.firstName=e.FirstName,i.middleInitial=e.MiddleInitial,i.lastName=e.LastName,i.email=e.Email,i.organization=e.Organization,i.numberOfBids=e.NumberOfBids,i.numberOfAssignment=e.NumberOfAssignment,i.numberOfCompleted=e.NumberOfCompleted,i.percentageOfCompleted=e.PercentageOfCompleted,i.numberOfNotes=e.NumberOfNotes,i.percentageOfCompletedNote=e.PercentageOfCompletedNote,i.numberOfComparisons=e.NumberOfComparisons,i.conflictDomainsEntered=e.ConflictDomainsEntered,i.individualConflictsEntered=e.IndividualConflictsEntered,i.quota=e.Quota,i.userType=e.UserType,i.subjectAreaSelected=e.SubjectAreaSelected,i.primarySubject=e.PrimarySubject,i.secondarySubject=e.SecondarySubject,i.numberOfReviewRatings=e.NumberOfReviewRatings,i.avgReviewRating=e.AvgReviewRating,i.googleScholarId=e.GoogleScholarId,i.semanticScholarId=e.SemanticScholarId,i.dblpId=e.DblpId,i.externalProfileEntered=e.ExternalProfileEntered,i.userTagJson=e.UserTagJson,i.isEmergency=ko.observable(e.IsEmergency)):(i.id=R.autoMap(),i.firstName=R.autoMap(),i.middleInitial=R.autoMap(),i.lastName=R.autoMap(),i.email=R.autoMap(),i.organization=R.autoMap(),i.quota=e.Quota,i.numberOfBids=R.autoMap(),i.numberOfAssignment=R.autoMap(),i.numberOfCompleted=R.autoMap(),i.percentageOfCompleted=R.autoMap(),i.numberOfNotes=R.autoMap(),i.percentageOfCompletedNote=R.autoMap(),i.numberOfComparisons=R.autoMap(),i.conflictDomainsEntered=e.autoMap(),i.individualConflictsEntered=e.autoMap(),i.userType=R.autoMap(),i.subjectAreaSelected=R.autoMap(),i.primarySubject=R.autoMap(),i.secondarySubject=R.autoMap(),i.numberOfReviewRatings=R.autoMap(),i.avgReviewRating=R.autoMap(),i.googleScholarId=R.autoMap(),i.semanticScholarId=R.autoMap(),i.dblpId=R.autoMap(),i.externalProfileEntered=R.autoMap(),i.userTagJson=R.autoMap(),i.isEmergency=R.autoMap()),i.userTags=[];var t=i.userTagJson&&JSON.parse(i.userTagJson);if(t)for(var o=0;o<t.length;o++)i.userTags.push(R.autoMap(new R.UserTag,t[o]));i.googleScholarUrl=function(){return R.enums.externalProfile.googleScholar.format(i.googleScholarId)},i.semanticScholarUrl=function(){return R.enums.externalProfile.semanticScholar.format(i.semanticScholarId)},i.dblpUrl=function(){return R.enums.externalProfile.dblp.format(i.dblpId)},i.individualConflictsEnteredText=ko.pureComputed(function(){return!0===i.individualConflictsEntered?"Yes":"No"}),i.readFromJson=function(e){R.autoMap(i,e)},i.exportBids=function(e,t){var o=R.odata.getUrl("BiddingModels",null,"ExportToTabDelimitedFile"),a={UserId:i.id,TrackId:n.selectedTrackId()};R.page.post(o,a)},i.importBids=function(e,t){window.location=n.importUrl+"?userId="+i.id},i.impersonate=function(e){confirm("Are you sure to impersonate as {0} {1}?".format(e.firstName,e.lastName))&&(e={requestUri:R.odata.getUrl("Users",e.id,"Impersonate"),method:"POST"},C.request(e,function(e){R.odata.processRedirectResponse(e)}))},i.removeReviewer=function(e){n.removeReviewer(e)},i.isEmergencyText=ko.pureComputed(function(){return i.isEmergency()?"Yes":"No"})}function E(t,e){var o=e,a=this;a.filter=null,a.userCount=ko.observable(0),a.selectedUserType=ko.observable(""),a.userTypes=o.userTypes,a.submitEnabled=ko.computed(function(){return!(a.userCount()<=0)&&(null!==a.selectedUserType()&&void 0!==a.selectedUserType())}),a.changeUserType=function(){var e={Filter:a.filter,UserTypeOptionId:a.selectedUserType(),TrackId:o.selectedTrackId()},e={requestUri:R.odata.getUrl(o.controller,null,"BulkChangeUserType"),method:"POST",showProgressIndicator:!0,data:{Request:e}};C.request(e,function(e){o.refresh(),setTimeout(function(){R.addMessage("The user types of selected reviewers have been changed.")},500),T(t).modal("hide")})},a.bind=function(){ko.applyBindings(a,t)},a.editInDialog=function(e){e=(a.filter=e)?"&$filter="+encodeURIComponent(e):"";C.read({requestUri:"/api/odata/"+window.cmt3.conference.name+"/"+o.controller+"?trackId="+o.selectedTrackId()+"&$count=true"+e,dataType:"json"},function(e){a.userCount(e["@odata.count"]),a.selectedUserType(""),T(t).modal("show")})}}function U(o,e){var a=e,n=this;n.reviewerCount=ko.observable(0),n.filter=null,n.quota=ko.observable(0).extend({digit:!0,min:0,max:9999}).extend({trackChanges:!0}),n.showValidationWarning=ko.observable(!1),n.submitEnabled=ko.computed(function(){return 0<n.reviewerCount()}),n.changeQuota=function(){var e=!0,t=ko.validation.group(n,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e?(e={Filter:n.filter,Quota:n.quota(),TrackId:a.selectedTrackId()},e={requestUri:R.odata.getUrl(R.odata.entitySet.trackReviewers,null,"BulkChangeQuota"),method:"POST",showProgressIndicator:!0,data:{Request:e}},C.request(e,function(e){a.refresh(),setTimeout(function(){R.addMessage("The quota of selected reviewers have been changed.")},500),T(o).modal("hide")})):n.showValidationWarning(!0)},n.bind=function(){ko.applyBindings(n,o)},n.editInDialog=function(e,t){n.filter=e,n.reviewerCount(t),T(o).modal("show")}}function D(n,t){var i=this;i.bind=function(){ko.applyBindings(i,n)},i.reviewerOptions=ko.observableArray([]),i.selectedReviewerId=ko.observable(null),i.fullName=ko.observable(""),i.reviewSubmitted=ko.observable(!1),i.data=null,i.submitEnabled=ko.computed(function(){return null!=i.selectedReviewerId()}),i.editInDialog=function(e){i.data=e,i.reviewerOptions([]),i.fullName(i.data.firstName+" "+i.data.lastName),i.reviewSubmitted(0<i.data.numberOfCompleted),OData.read(R.odata.getUrl(R.odata.entitySet.trackReviewers+"?trackId="+t.selectedTrackId()+"&$select=Id,FirstName,LastName&$orderby=FirstName"),function(e){for(var t=i.reviewerOptions(),o=0;o<e.value.length;o++){var a=e.value[o];a.Id!=i.data.id&&(a=R.autoMap(new r,a),t.push(a))}i.reviewerOptions.valueHasMutated(),T(n).modal("show")})},i.transferAssignments=function(){var e={requestUri:R.odata.getUrl(R.odata.entitySet.submissions,null,"TransferAssignments"),method:"POST",showProgressIndicator:!0,data:{Request:{From:i.data.id,To:i.selectedReviewerId()||null,TrackId:t.selectedTrackId()}}};OData.request(e,function(e){0<e.Transferred?(t.refresh(),setTimeout(function(){R.addMessage("{0} papers transferred.".format(e.Transferred))},500),T(n).modal("hide")):e.ExistsConflict?R.addMessage("Could not transfer all assigned papers due to conflict.",null,"error"):e.ExceedsQuota&&R.addMessage("Could not transfer all assigned papers due to quota.",null,"error")})}}R.ReviewersStatPage=function(e,t,o,a,n,i,r,s,u,l,d){function c(t){var o=this;o.id=ko.observable().autoMap(),o.email=ko.observable().extend({required:!0,email:!0}).autoMap(),o.firstName=ko.observable().autoMap(),o.middleInitial=ko.observable().autoMap(),o.lastName=ko.observable().autoMap(),o.organization=ko.observable().autoMap(),o.isSearching=ko.observable(),o.searchedEmail=ko.observable(),o.searchResult=ko.observable();var a=null;o.userFound=ko.computed(function(){return 0<o.id()}),o.userNotFound=ko.computed(function(){return 0===o.id()}),o.search=function(){var e=ko.validation.group([o.email]);0<e().length?e.showAllMessages():(o.isSearching(!0),o.searchedEmail(o.email()),e={requestUri:R.odata.getGlobalUrl(R.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.searchedEmail()}},C.read(e,function(e){R.autoMap(o,e),o.searchResult((new A).readFromJson(e))},function(e){404===e.response.statusCode?(o.id(0),o.searchResult(null)):C.defaultError(e)}).always(function(){o.isSearching(!1)}))},o.addReviewer=function(){T(t).modal("hide");var e=new A;o.userFound()?a.resolve(o.searchResult()):((e=R.autoMap(e,{})).email=o.searchedEmail(),a.resolve(e))},o.bind=function(){ko.applyBindings(o,t)},o.editInDialog=function(){return o.id(null),o.email(""),o.email.isModified(!1),o.firstName(""),o.lastName(""),o.organization(""),o.searchedEmail(""),T(t).modal("show"),(a=T.Deferred()).promise()}}var p,m,f=this,h=((m=null)!==(p=o)&&0<p.length&&(isNaN(p)||(m=parseInt(p))),m);function g(e){return e.Name}function v(e,t){function o(e){return{Role:"Reviewer",ObjectId:e,ObjectType:"Track"}}var a={};t?(a.Add=[o(h)],a.Remove=[]):(a.Add=[],a.Remove=[o(h)]);a={requestUri:R.odata.getUrl(R.odata.entitySet.users,e,"ModifyPermissions"),method:"POST",data:{Request:a}};return C.request(a,function(){})}null===h?R.Page.call(f,e,t,"trackId=-1"):R.Page.call(f,e,t,"trackId="+h),f.importUrl=a,f.requireConflictDomains=r,f.requireIndividualConflict=s,f.allowMetaReviewerToRateReview=u,f.allowReviewerToCompareSubmission=l,f.userTypes=d,f.userTypesProvider=function(){return f.userTypes.map(g)};var w=null;f.changeQuota=function(e,t){null===w&&(w=new U(document.getElementById("changeQuotaDialog"),f)).bind(),w.editInDialog(e,t)};var b=null;f.transferAssignments=function(e,t){null===b&&(b=new D(document.getElementById("transferAssignmentsDialog"),f)).bind(),b.editInDialog(e)},f.bulkChangeQuota=function(e,t){var o=t.target,o=ko.contextFor(o),t=R.GetEventFilter(t);f.changeQuota(t,o.$root.Pager().TotalItemCount())},f.bulkSetEmergencyReviewer=function(e,t){this.bulkSetUnsetEmergencyReviewer(e,t,!0)},f.bulkUnsetEmergencyReviewer=function(e,t){this.bulkSetUnsetEmergencyReviewer(e,t,!1)},f.bulkCopyReviewer=function(e,t){if(confirm("Are you sure you want to copy reviewers?")){e={Filter:R.GetEventFilter(t),FromTrackId:f.selectedTrackId(),ToTrackId:e.id},e={requestUri:R.odata.getUrl(R.odata.entitySet.trackReviewers,null,"BulkCopyReviewer"),method:"POST",showProgressIndicator:!0,data:{Request:e}};return C.request(e,function(){R.addMessage("Reviewers have been copied successfully."),location.reload()})}},f.bulkRemoveReviewer=function(e,t){if(confirm("Are you sure you want to remove selected reviewers?")){t={Filter:R.GetEventFilter(t),TrackId:f.selectedTrackId()},t={requestUri:R.odata.getUrl(R.odata.entitySet.trackReviewers,null,"BulkRemoveReviewer"),method:"POST",showProgressIndicator:!0,data:{Request:t}};return C.request(t,function(){R.addMessage("Reviewers have been removed successfully."),location.reload()})}},f.bulkSetUnsetEmergencyReviewer=function(e,t,o){var a=o?"setting":"unsetting";confirm("Bulk {0} emergency reviewer will be performed for selected items.".format(a))&&(o={Filter:R.GetEventFilter(t),TrackId:f.selectedTrackId(),IsEmergency:o},o={requestUri:R.odata.getUrl(R.odata.entitySet.trackReviewers,null,"BulkChangeIsEmergency"),method:"POST",showProgressIndicator:!0,data:{Request:o}},C.request(o,function(){R.addMessage("Bulk {0} emergency reviewer has been completed successfully.".format(a)),location.reload()}))};var k=null;f.openAddReviewerDialog=function(){null===k&&(k=new c(document.getElementById("userSearchDialog"))).bind(),k.editInDialog().done(function(t){var o,e=t.id?v(t.id,!0):(o=T.Deferred(),T.when(createUser(t)).then(function(e){v((t=e).id,!0).done(o.resolve).fail(o.reject)}),o.promise());e.done(function(){f.show(),R.addMessage("User '{0} {1}' saved.".format(t.firstName,t.lastName))})})},f.removeReviewer=function(e){var t="Are you sure you want to remove reviewer {0} {1}".format(e.firstName,e.lastName);0<e.numberOfAssignment&&(t+=" who is assigned to {0} paper{1}".format(e.numberOfAssignment,1<e.numberOfAssignment?"s":""),0<e.numberOfCompleted&&(t+=" and has submitted {0} review{1}".format(e.numberOfCompleted,1<e.numberOfCompleted?"s":""))),t+="?",confirm(t)&&v(e.id,!1).done(function(){f.show(),R.addMessage("Reviewer has been successfully removed.")})},f.trackId=h,f.createItem=function(e){return new N(e,f)},f.changeTrack=function(e){var t="/"+window.cmt3.conference.name+"/User/Reviewers";0<=e.id&&(t=t+"?trackId="+e.id),window.location=t},f.tracks=ko.observableArray(),f.selectedTrack=ko.observable(),f.isTrackSelectionVisible=ko.pureComputed(function(){return i===R.enums.reviewersStatPageMode.chair?2<f.tracks().length:1<f.tracks().length}),f.selectedTrackId=ko.pureComputed(function(){var e=f.selectedTrack();if(e&&0<e.id)return e.id;e=f.tracks();return(e=e&&e.filter(function(e){return 0<e.id}))&&1===e.length?e[0].id:-1}),f.trackArray=ko.computed(function(){var e=f.tracks();return e&&e.filter(function(e){return 0<e.id})}),f.exportReviewers=function(e,t){var o=R.GetEventFilter(t),t=R.odata.getUrl("TrackReviewers",null,"ExportTrackReviewers"),o={TrackId:f.selectedTrackId(),Filter:o};R.page.post(t,o)},f.exportReviewerQuotas=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserQuotas",a={TrackId:f.selectedTrackId(),ForReviewer:!0};R.page.post(o,a)},f.exportReviewerSubjectAreas=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserSubjectAreas",a={TrackId:f.selectedTrackId(),ForReviewer:!0,ForSeniorMetaReviewer:!1};R.page.post(o,a)},f.exportReviewerRelevances=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserRelevances",a={TrackId:f.selectedTrackId(),ForReviewer:!0};R.page.post(o,a)},f.exportReviewerUserTypes=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserTypes",a={TrackId:f.selectedTrackId(),ForReviewer:!0};R.page.post(o,a)},f.importUserQuotas=function(e,t){var o="/"+window.cmt3.conference.name+"/Reviewer/ImportQuotas";R.url.navigateTo(o,{trackId:f.trackId})},f.importUserTypes=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTypes";R.url.navigateTo(o,{roleValue:2})},f.importUserTags=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTags";R.url.navigateTo(o,{roleValue:2})};var M,S=[];for(i===R.enums.reviewersStatPageMode.chair&&((d=new R.Track).id=-1,d.name="<All Tracks>",S.push(d),f.selectedTrack(d)),M=0;M<n.length;M++){var y=R.autoMap(new R.Track,n[M]);S.push(y)}for(f.tracks(S),M=0;M<f.tracks().length;M++)if(f.trackId===f.tracks()[M].id){f.selectedTrack(f.tracks()[M]);break}f.refresh=function(){f.show()},f.selectedTrackSubscription=f.selectedTrack.subscribe(f.changeTrack),f.users=ko.observableArray(),f.email=function(e,t){var o=R.GetEventFilter(t),t="/"+window.cmt3.conference.name+"/Reviewer/SendEmail";R.url.navigateTo(t,{filter:0<o.length?o:null,trackId:f.trackId<0?null:f.trackId})},f.show=function(){R.Page.prototype.show.call(f)},f.bulkChangeUserType=function(e,t){t=R.GetEventFilter(t);this.changeUserType(t)};var I=null;f.changeUserType=function(e){null===I&&(I=new E(document.getElementById("changeUserTypeDialog"),f)).bind(),I.editInDialog(e)},f.changeIsEmergency=function(e,t){var o=T(t.target),a=ko.contextFor(t.target),t=T(T("#isEmergencyTemplate").text());o.hide(),o.after(t);o=a.$parent.getIsEmergency(e.id,o,t);ko.applyBindings(o,t[0])},f.getIsEmergency=function(e,o,a){var n=[{name:"Yes",id:!0},{name:"No",id:!1}],t={options:ko.observableArray(n),selectedOption:ko.observable()},i="Id eq {0}".format(e);return t.selectedOption.subscribe(function(t){var e={Filter:i,TrackId:f.selectedTrackId(),IsEmergency:t[0]},e={requestUri:R.odata.getUrl(R.odata.entitySet.trackReviewers,null,"BulkChangeIsEmergency"),method:"POST",showProgressIndicator:!0,data:{Request:e}};C.request(e,function(e){a.remove(),o.text((t[0]?n[0]:n[1]).name),o.show(),R.addMessage("Changes successfully saved.")},function(e){R.addErrorMessage(R.odata.getErrorMessage(e))})}),t}},R.ReviewersStatPage.prototype=Object.create(R.Page.prototype)}(window.jQuery,window.app,window.OData),function(m,f,h,g,v,w,b,k){"use strict";var M;function S(e,t,o,a,n){this.id=e,this.title=t,this.trackId=o,this.trackName=a,this.isSingleTrackConference=n}function l(e,t,o,a,n,i,r){var s=this;function u(){function e(){var e,t=g.stringify(b.getAnswersJson(s.questions));s.lastDraft!==t?((e=m.autoMap(s)).SubmissionId=s.submission.id,e.Id=s.draftId||0,e.Draft=g.stringify(b.getAnswersJson(s.questions)),e={requestUri:m.odata.getUrl(m.odata.entitySet.authorFeedbackDrafts),method:"POST",headers:{Prefer:"return-content"},showProgressIndicator:!1,data:e},f.request(e,function(e){s.draftId=e.Id,s.lastDraftErrorDate(null),s.lastDraftDate((new Date).toLocaleString()),s.lastDraft=t},function(){s.lastDraftErrorDate((new Date).toLocaleString())}).always(s.setAutoSaveTimer)):s.setAutoSaveTimer()}function o(e){if(s.files().length+e.length>s.settings.authorFeedbackMaxFileNumber)m.addMessage("You can upload up to {0} files only.".format(s.settings.authorFeedbackMaxFileNumber),null,"error");else{for(var t=[],o=0;o<s.files().length;o++)t[s.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return m.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*s.settings.authorFeedbackMaxFileSize)return m.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,s.settings.authorFeedbackMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=s.settings.authorFeedbackAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(m.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,s.settings.authorFeedbackAllowedFileTypes),null,"error"),!1)}(n,t)||(s.uploading(s.uploading()+1),(a=h.ajaxSettings.xhr()).open("POST",M.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):m.processXmlHttpRequestError(e.target),s.uploading(s.uploading()-1)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void m.processException(e)}t=m.autoMap(new m.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),s.files.push(t)}s.showFilesMinErrorMessage=ko.observable(!1),s.showFilesMaxErrorMessage=ko.observable(!1),s.questions=[],s.submittedAnswersJson=null,s.autoSaveTimerId=null,s.draftId=null,s.loadedDraftDate=ko.observable(),s.lastDraftDate=ko.observable(),s.lastDraftErrorDate=ko.observable(null),s.lastDraft=null,s.setAutoSaveTimer=function(){return s.autoSaveTimerId&&w(s.autoSaveTimerId),s.autoSaveTimerId=v(e,m.settings.autoSaveDelay),!0},s.revertDraft=function(){!function(){if(!s.draftId)return h.Deferred().resolve().promise();var e={requestUri:m.odata.getUrl(m.odata.entitySet.authorFeedbackDrafts,s.draftId),method:"DELETE",showProgressIndicator:!1};f.request(e,function(){s.draftId=null,s.lastDraftDate(null),s.lastDraftErrorDate(null),s.lastDraft=g.stringify(b.getAnswersJson(s.questions))})}(),null!=s.submittedAnswersJson&&(b.unsubscribeAnswerChanged(s.questions),b.setAnswersFromJson(s.questions,s.submittedAnswersJson),b.subscribeAnswerChanged(s.questions,s.setAutoSaveTimer)),s.loadedDraftDate(null)},s.files=ko.observableArray(),s.removeFile=function(e){s.files.remove(e)},s.uploading=ko.observable(0),s.uploadFile=function(){var e=h('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},s.canUploadMoreFiles=ko.computed({read:function(){return 0==s.uploading()&&s.files().length<s.settings.authorFeedbackMaxFileNumber},deferEvaluation:!0}),s.xhrUploadSupported=function(){return k},s.fileUploadDragOver=function(e,t){s.canUploadMoreFiles()&&h(t.target).addClass("dragOver")},s.fileUploadDragLeave=function(e,t){s.canUploadMoreFiles()&&h(t.target).removeClass("dragOver")},s.fileUploadDrop=function(e,t){s.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),s.fileUploadDragLeave(e,t))},s.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},s.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},s.save=function(){var e=!0,t=ko.validation.group(s.questions,{deep:!0});if(0<t().length&&(t.showAllMessages(),e=!1),t=!0,s.files().length>s.settings.authorFeedbackMaxFileNumber&&(s.showFilesMaxErrorMessage(!0),t=!1),s.files().length<s.settings.authorFeedbackMinFileNumber&&(s.showFilesMinErrorMessage(!0),t=!1),e=!t?!1:e){var o=m.autoMap(s);o.SubmissionId=s.submission.id,s.createNew||(o.Id=s.id),o.Files=[];for(var a=0;a<s.files().length;a++)o.Files.push(s.files()[a].id);o.Answers=b.getAnswersJson(s.questions);e={requestUri:m.odata.getUrl(m.odata.entitySet.authorFeedbacks,s.createNew?null:s.id),method:s.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:o};f.request(e,function(){m.url.navigateTo(M.submissionList)})}}}function l(){return h.Deferred(function(t){var e=m.odata.getUrl(m.odata.entitySet.authorFeedbackSettings,s.submission.trackId);f.read({requestUri:e,showProgressIndicator:!1},function(e){m.autoMap(s.settings,e),t.resolve()})}).promise()}function d(){return h.Deferred(function(t){b.loadQuestionsDirect(m.enums.formType.authorfeedback,s.formId).done(function(e){s.questions=e,t.resolve()})}).promise()}function c(){return h.Deferred(function(t){var e=m.odata.getUrl(m.odata.entitySet.authorFeedbackDrafts,null,"GetBySubmissionId");f.read({requestUri:e,showProgressIndicator:!1,data:{Id:s.submission.id},method:"POST"},function(e){e?(s.loadedDraftDate(e.UpdateDate.toLocaleString()),s.draftId=e.Id,e=g.parse(e.Draft),b.setAnswersFromJson(s.questions,e),t.resolve(!0)):t.resolve(!1)},function(e){404==e.response.statusCode?t.resolve(!1):f.defaultError(e)})}).promise()}function p(){return h.Deferred(function(a){var e=m.odata.getUrl(m.odata.entitySet.authorFeedbacks,s.id);f.read({requestUri:e,showProgressIndicator:!1},function(t){var o;m.autoMap(s,t),u(),h.when(l(),(o=t.Files,h.Deferred(function(a){var e;0!=o.length?(e=m.odata.getUrl(m.odata.entitySet.files,{filter:m.odata.buildContainsQuery("Id",o)}),f.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(m.autoMap(new m.File,e.value[o]));s.files(t),a.resolve()})):a.resolve()}).promise()),d()).done(function(){c().done(function(e){e?s.submittedAnswersJson=t.Answers:b.setAnswersFromJson(s.questions,t.Answers),a.resolve()})})})}).promise()}s.id=e,s.formId=i,s.updateDate=m.autoMap(),s.settings={requestAllPapersForFeedback:m.autoMap(),authorFeedbackMinFileNumber:m.autoMap(),authorFeedbackMaxFileNumber:m.autoMap(),authorFeedbackAllowedFileTypes:m.autoMap(),authorFeedbackMaxFileSize:m.autoMap()},s.submission=new S(t,o,a,n,r),s.createNew=!s.id,s.bindTo=function(e){m.showProgress();var t,o=h.Deferred();s.createNew?(m.autoMap(s,{}),t=h.Deferred(),u(),h.when(l(),d()).done(function(){c().done(function(){t.resolve()})})):t=p(),t.promise().done(function(){ko.applyBindingsAndShow(s,e),s.lastDraft=g.stringify(b.getAnswersJson(s.questions)),s.setAutoSaveTimer(),o.resolve()}),o.always(m.hideProgress)}}m.authorFeedbackDetails=function(e,t,o,a,n,i,r,s,u){M=s,new l(e,t,o,a,n,i,r).bindTo(u)}}(window.app,window.OData,window.jQuery,window.JSON,window.setTimeout,window.clearTimeout,new window.app.QuestionService,null!=window.FileReader),function(c,n,t){"use strict";function i(e){var t=$("#"+e),o=$.Deferred();return t.find(".btn-primary").off("click").click(function(){o.resolve(!0),o=null,t.modal("hide")}),t.on("hidden",function(){o&&o.resolve(!1)}),t.modal("show"),o.promise()}function p(t,e,o){var a=this;a.isReplyAvailable=c.autoMap(),a.comments=ko.observableArray(),a.isReplying=ko.observable(!1),a.lastCommentId=ko.observable(null).autoMap(),a.replyBody=ko.observable(""),a.post=function(){i(e).done(function(e){e?(c.showProgress(),e={requestUri:c.odata.getUrl(c.odata.entitySet.authorFeedbackComments),showProgressIndicator:!1,headers:{"Content-Type":"application/json"},method:"POST",data:{SubmissionId:t,ReplyTo:a.lastCommentId(),Body:a.replyBody()}},n.request(e,function(){c.addMessage("Post successfully saved."),(o&&o()||$.Deferred(function(e){e.resolve()}).promise()).always(function(){c.hideProgress(),a.isReplying(!1),a.replyBody("")})}).fail(c.hideProgress)):c.addMessage("Posting was not successful.",null,"info")})}}function m(){var e=this;e.title=c.autoMap(),e.text=c.autoMap(),e.submitterLabel=c.autoMap(),e.posted=ko.observable().autoMap(),e.postedFormatted=ko.pureComputed(function(){return e.posted().toLocaleString()})}function a(e,u){var l=this;function d(e){return n.read({requestUri:c.odata.getUrl(c.odata.entitySet.authorFeedbackViews,l.id),showProgressIndicator:e},function(e){var t;for(c.autoMap(l,e),t=0;t<e.Questions.length;t++){for(var o=e.Questions[t],a=c.autoMap(new c.Question,o),n=0;n<o.Answers.length;n++)a.answers.push(c.autoMap(new c.QuestionAnswer,o.Answers[n]));l.questions.push(a)}for(t=0;t<e.Files.length;t++){var i=e.Files[t],i=c.autoMap(new c.File,i);l.files.push(i)}for(l.commentThreads([]),t=0;t<e.CommentThreads.length;t++){for(var r=e.CommentThreads[t],s=c.autoMap(new p(l.submissionId,u,d),r),n=0;n<r.Comments.length;n++)s.comments.push(c.autoMap(new m,r.Comments[n]));l.commentThreads.push(s)}})}l.id=e,l.trackName=c.autoMap(),l.submissionTitle=c.autoMap(),l.submissionId=c.autoMap(),l.isSingleTrackConference=c.autoMap(),l.isCommentingEnabled=ko.observable(!1).autoMap(),l.isCommentingAvailable=ko.observable(!1).autoMap(),l.isCommenting=ko.observable(!1),l.newCommentTitle=ko.observable(""),l.newCommentText=ko.observable(""),l.commentThreads=ko.observableArray(),l.questions=[],l.files=[],l.print=function(){t()},l.postNewComment=function(){l.newCommentTitle()?l.newCommentText()?i(u).done(function(e){e?(c.showProgress(),e={requestUri:c.odata.getUrl(c.odata.entitySet.authorFeedbackComments),showProgressIndicator:!1,headers:{"Content-Type":"application/json"},method:"POST",data:{SubmissionId:l.submissionId,Title:l.newCommentTitle(),Body:l.newCommentText()}},n.request(e,function(){c.addMessage("Post successfully saved."),d(!1).always(function(){c.hideProgress(),l.isCommenting(!1),l.newCommentTitle(""),l.newCommentText("")})}).fail(c.hideProgress)):c.addMessage("Posting was not successful.",null,"info")}):c.addMessage("Text is required.",null,"info"):c.addMessage("Title is required.",null,"info")},l.bindTo=function(e){d(!0).done(function(){ko.applyBindingsAndShow(l,e)})}}c.authorFeedbackView=function(e,t,o){new a(e,o).bindTo(t)}}(window.app,window.OData,window.print),function(d,c,p,m){"use strict";var f;function h(e,t,o,a,n){this.id=e,this.title=t,this.trackId=o,this.trackName=a,this.isSingleTrackConference=n}function l(e,t,o,a,n,i,r){var s=this;function u(){s.questions=[],s.submittedAnswersJson=null,s.save=function(){var e=!0,t=ko.validation.group(s.questions,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e&&((e=d.autoMap(s)).SubmissionId=s.submission.id,s.createNew||(e.Id=s.id),e.Answers=m.getAnswersJson(s.questions),e={requestUri:d.odata.getUrl(d.odata.entitySet.chairNotes,s.createNew?null:s.id),method:s.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:e},p.when(c.request(e,function(){})).done(function(){d.url.navigateTo(f.submissionList)}))}}function l(){return p.Deferred(function(t){m.loadQuestionsDirect(d.enums.formType.chairnote,s.formId).done(function(e){s.questions=e,t.resolve()})}).promise()}s.id=e,s.formId=i,s.submission=new h(t,o,a,n,r),s.createNew=!s.id,s.bindTo=function(e){d.showProgress();var t,o=p.Deferred();s.createNew?(t=p.Deferred(),u(),p.when(l()).done(function(){t.resolve()})):t=p.Deferred(function(t){var e=d.odata.getUrl(d.odata.entitySet.chairNotes,s.id);c.read({requestUri:e,showProgressIndicator:!1},function(e){d.autoMap(s,e),u(),p.when(l()).done(function(){m.setAnswersFromJson(s.questions,e.Answers),t.resolve()})})}).promise(),t.promise().done(function(){ko.applyBindingsAndShow(s,e),o.resolve()}),o.always(d.hideProgress)}}d.chairNoteDetails=function(e,t,o,a,n,i,r,s,u){f=s,new l(e,t,o,a,n,i,r).bindTo(u)}}(window.app,window.OData,window.jQuery,(window.JSON,window.setTimeout,window.clearTimeout,new window.app.QuestionService)),function(r,t,o){"use strict";function s(){this.details=r.autoMap(),this.answers=[]}function u(){this.text=r.autoMap(),this.value=r.autoMap()}function a(e){var i=this;i.id=e,i.trackName=r.autoMap(),i.submissionTitle=r.autoMap(),i.submissionId=r.autoMap(),i.isSingleTrackConference=r.autoMap(),i.questions=[],i.print=function(){o()},i.bindTo=function(e){t.read(r.odata.getUrl(r.odata.entitySet.chairNoteViews,i.id),function(e){r.autoMap(i,e);for(var t=0;t<e.Questions.length;t++){for(var o=e.Questions[t],a=r.autoMap(new s,o),n=0;n<o.Answers.length;n++)a.answers.push(r.autoMap(new u,o.Answers[n]));i.questions.push(a)}}).done(function(){ko.applyBindingsAndShow(i,e)})}}r.chairNoteView=function(e,t){new a(e).bindTo(t)}}(window.app,window.OData,window.print),function(h,g,v,w,b){"use strict";var k=/^[-_0-9A-Za-z]{12}$/;function M(e){if(!e||!e.toLowerCase().startsWith("https://scholar.google.com/citations"))return null;try{var t=new URL(e).searchParams.get("user");return k.test(t)&&t}catch(e){return null}}var S=/^[1-9]\d*$/;function y(e){e=e.replace(/^(?:https:\/\/www.semanticscholar.org\/author\/)?(?:.*\/)?([1-9]\d*)$/gi,"$1");return S.test(e)&&e}var I=/^\d{2,3}\/\d+(-\d+)?|[a-z]\/[a-zA-Z][0-9A-Za-z]*(-\d+)?$/;function T(e){var t=e&&e.toLowerCase();if(!t||!t.startsWith("https://dblp.org/pid")&&!t.startsWith("https://dblp.uni-trier.de/"))return null;e=e.replace(/^https:\/\/((dblp.org)|(dblp.uni-trier.de))\/pid\//,"");return I.test(e)&&e}function t(e){var t=this;t.title=ko.observable(),t.steps=ko.observableArray(),t.successNote=ko.observable(),t.openIdLinkFieldLabel=ko.observable(),t.openIdLink=ko.observable(),t.openId=ko.observable(),t.apply=function(){e(t.openId())},t.isError=ko.observable(!1),t.getId=function(){t.isError(!1),t.openId(null);var e=t.extractOpenId(t.openIdLink());e?t.openId(e):t.isError(!0)}}function R(e){t.call(this,e),this.title("Google Scholar Id"),this.openIdLinkFieldLabel("Google Scholar Id Link"),this.steps(['Type "your name google scholar" into search engine to find your Google Scholar Id link.','Copy the link into the box below and click "Get Id".','Click "Use this Id".']),this.extractOpenId=M}function C(e){t.call(this,e),this.title("Semantic Scholar Id"),this.openIdLinkFieldLabel("Semantic Scholar Id Link"),this.steps(['Type "your name semantic scholar" into search engine to find your Semantic Scholar link.','Copy the link into the box below and click "Get Id".','Click "Use this Id".']),this.successNote('After claiming your Semantic Scholar profile, you can edit the profile to add or remove papers&nbsp;(<a href="https://www.semanticscholar.org/faq#author-claim" target="_blank">learn more</a>).'),this.extractOpenId=y}function A(e){t.call(this,e),this.title("DBLP Id"),this.openIdLinkFieldLabel("DBLP Persistent URL Link"),this.steps(['Go to the DBLP page <a href="https://dblp.org/" target="_blank">https://dblp.org/</a> or <a href="https://dblp.uni-trier.de/" target="_blank">https://dblp.uni-trier.de/</a>.','Type your name in dblp search box to find your page under "Home > Persons".','In "share bibliography" dropdown next to your name, find your persistent URL.<br /><img src="https://cmt3.research.microsoft.com/docs/help/general/images/external-profile/external-profile-dblp-share-icon.png" alt="find a persistent URL in share bibliography dropdown menu, next to your name" />','Copy the persistent URL into the box below and click "Get Id".','Click "Use this Id".']),this.extractOpenId=T}function N(e,t,o){var a=this;a.firstName=e,a.lastName=t,a.email=o,a.fullName=ko.pureComputed(function(){return a.firstName+" "+a.lastName})}function E(){var e=this;e.id=h.autoMap(),e.name=h.autoMap(),e.parentSubjectAreaId=h.autoMap(),e.isChild=function(){return null!==e.parentSubjectAreaId},e.isPrimary=ko.observable(),e.isSecondary=ko.observable(),e.checkBoxId=function(){return"primary"+e.id},e.allowParentSelection=!0,e.specialType=null}function c(e,t,o,a,n,r,u,i,s,l){var d=this,c=new h.QuestionDependency(d);function p(){d.showValidationWarning=ko.observable(!1),d.subjectAreas=[],d.subjectAreaPairs=function(){return h.computeSubjectAreaColumnPairs(d.subjectAreas)},d.showPublicationUrlsErrorMessage=ko.observable(!1),d.showSubjectAreasErrorMessage=ko.observable(!1),d.questions=[],d.save=function(){if(0<ko.validation.group(d)().length)d.showValidationWarning(!0);else{var e=!0;!function(){if(d.publicationUrlsMultiLine())for(var e=h.getPublicationUrlPattern(),t=d.publicationUrlsMultiLine().split(/[\r\n]+/),o=0;o<t.length;o++){var a=t[o].trim();if(a&&!e.test(a))return d.showPublicationUrlsErrorMessage(!0),!1}return!0}()&&(e=!1),function(){if(0===d.subjectAreas.length)return!0;for(var e=[],t=!1,o=0;o<d.subjectAreas.length;o++)"customPrimary"!==d.subjectAreas[o].specialType&&"customSecondary"!==d.subjectAreas[o].specialType||e.push(d.subjectAreas[o].customValue),d.subjectAreas[o].isPrimary()&&(t=!0);var a=!0,n=ko.validation.group(e);0<n().length&&(n.showAllMessages(),a=!1);t||(d.showSubjectAreasErrorMessage(!0),a=!1);return a}()||(e=!1);for(var t=[],o=0;o<d.questions.length;o++){var a=d.questions[o];c.isHidden(a.id)||t.push(a)}var n=ko.validation.group(t,{deep:!0});if(0<n().length&&(n.showAllMessages(),e=!1),e){var i=h.autoMap(d);i.UserId=d.userId,d.createNew||(i.Id=d.id),i.SubjectAreas=[];for(var r=0;r<d.subjectAreas.length;r++){var s=d.subjectAreas[r];(s.isPrimary()||s.isSecondary())&&null===s.specialType&&(s={SubjectAreaId:s.id,IsPrimary:s.isPrimary()},i.SubjectAreas.push(s))}i.Answers=w.getAnswersJson(d.questions.filter(e=>!c.isHidden(e.id))),i.PublicationUrls=function(){var e=[];if(d.publicationUrlsMultiLine())for(var t=d.publicationUrlsMultiLine().split(/[\r\n]+/),o=0;o<t.length;o++){var a=t[o].trim();a&&e.push(a)}return 0<e.length?JSON.stringify(e):null}(),delete i.PublicationUrlsMultiLine;e={requestUri:h.odata.getUrl(h.odata.entitySet.userInformationModels,d.createNew?null:d.id),method:d.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:i};g.request(e,function(){h.addMessage("User information saved.",null,"success","text",!0),u?window.location=u:window.location.reload()},g.defaultError)}else d.showValidationWarning(!0)}}}function m(t){return v.Deferred(function(e){d.questions=w.parseQuestionsDirect(h.enums.formType.userinformation,t),c.loadQuestions(d.questions),e.resolve()}).promise()}function f(e){if(e)for(var t,o,a=null,n=0;n<e.length;n++)t=h.autoMap(new E,e[n]),null!==a&&a.id===t.parentSubjectAreaId&&!d.settings.immediateParentSelectionAllowed&&a.allowParentSelection&&(a.allowParentSelection=!1),null===t.parentSubjectAreaId&&(a=t),(o=t).isPrimary.subscribe(function(e){e&&(d.showSubjectAreasErrorMessage(!1),function(e){for(var t=0;t<d.subjectAreas.length;t++)d.subjectAreas[t].isPrimary()&&d.subjectAreas[t]!==e&&d.subjectAreas[t].isPrimary(!1)}(this),this.isSecondary(!1))},o),o.isSecondary.subscribe(function(e){if(e){if(d.settings.secondarySubjectAreaLimited)if(function(){for(var e=0,t=0;t<d.subjectAreas.length;t++)d.subjectAreas[t].isSecondary()&&++e;return e}()>d.settings.secondarySubjectAreaMaxNumber){var t=this;return void setTimeout(function(){t.isSecondary(!1)},0)}this.isPrimary(!1)}},o),d.subjectAreas.push(o)}d.id=e,d.userId=t.UserId,d.formId=o,d.customUserInformationInstruction=i&&i.UserInformationInstruction,d.openIdHelper=ko.observable(),d.showOpenIdHelper=function(t,e){var o=b.getElementById(l);if(o){var a=null;switch(e){case"GoogleScholarId":a=new R(n);break;case"SemanticScholarId":a=new C(n);break;case"DblpId":a=new A(n)}d.openIdHelper(a),v(o).modal("show")}function n(e){t(e),v(o).modal("hide")}},d.googleScholarId=ko.observable("").extend({pattern:k,maxLength:12,notify:"always"}).autoMap(),d.googleScholarIdFormatted=ko.computed({read:function(){return d.googleScholarId()},write:function(e){d.googleScholarId(M(e)||e)},owner:d}).extend({notify:"always"}),d.googleScholarIdLink=ko.pureComputed(function(){return"https://scholar.google.com/citations?user="+d.googleScholarId()}),d.googleScholarIdFormatted(t.GoogleScholarId),d.semanticScholarId=ko.observable("").extend({pattern:S,maxLength:12,notify:"always"}).autoMap(),d.semanticScholarIdFormatted=ko.computed({read:function(){return d.semanticScholarId()},write:function(e){d.semanticScholarId(y(e)||e)},owner:d}).extend({notify:"always"}),d.semanticScholarIdLink=ko.pureComputed(function(){return"https://www.semanticscholar.org/author/"+d.semanticScholarId()}),d.semanticScholarIdFormatted(t.SemanticScholarId),d.dblpId=ko.observable("").extend({pattern:I,maxLength:50,notify:"always"}).autoMap(),d.dblpIdFormatted=ko.computed({read:function(){return d.dblpId()},write:function(e){d.dblpId(T(e)||e)},owner:d}).extend({notify:"always"}),d.dblpIdLink=ko.pureComputed(function(){return"https://dblp.org/pid/"+d.dblpId()}),d.dblpIdFormatted(t.DblpId),d.openReviewId=ko.observable("").extend({required:s,pattern:/^\~(.+)\d{1}$/,maxLength:200}).autoMap(),d.openReviewId(t.OpenReviewId),d.openReviewIdLink=ko.pureComputed(function(){return"https://openreview.net/profile?id="+d.openReviewId()}),d.publicationEmails=ko.observable("").extend({maxLength:500}).autoMap(),d.publicationEmails(t.PublicationEmails),d.publicationUrlsMultiLine=ko.observable("").extend({maxLength:8e3}).autoMap(),t.PublicationUrls&&(s=JSON.parse(t.PublicationUrls),d.publicationUrlsMultiLine(s.join("\r\n"))),a&&(d.settings={trackId:h.autoMap(),secondarySubjectAreaAllowed:h.autoMap(),secondarySubjectAreaLimited:h.autoMap(),secondarySubjectAreaMaxNumber:h.autoMap(),immediateParentSelectionAllowed:h.autoMap()},h.autoMap(d.settings,a)),d.user=new N(t.FirstName,t.LastName,t.Email),d.createNew=!d.id,d.hasBranchingQuestions=function(){return c.hasDependency()},d.getQuestionDiv=function(e){return v("#uiq_"+e)},d.bindTo=function(e){h.showProgress(),p(),f(n);var i,t=v.Deferred();d.createNew?(i=v.Deferred(),v.when(m(r)).done(function(){i.resolve()})):(i=v.Deferred(),v.when(v.Deferred(function(o){var e=h.odata.getUrl(h.odata.entitySet.userInformationModels,d.id);g.read({requestUri:e,showProgressIndicator:!1},function(e){var t;h.autoMap(d,e),e.PublicationUrls&&(t=JSON.parse(e.PublicationUrls),d.publicationUrlsMultiLine(t.join("\r\n"))),o.resolve(e)})}).promise(),m(r)).done(function(e){w.setAnswersFromJson(d.questions,e.Answers);for(var t={},o=0;o<e.SubjectAreas.length;o++)t[(a=e.SubjectAreas[o]).SubjectAreaId]=a.IsPrimary;for(o=0;o<d.subjectAreas.length;o++){var a,n=t[(a=d.subjectAreas[o]).id];n?a.isPrimary(!0):!1===n&&a.isSecondary(!0)}i.resolve()})),i.promise().done(function(){ko.applyBindingsAndShow(d,e),c.init(),t.resolve()}),t.always(h.hideProgress)}}h.userInformationDetails=function(e,t,o,a,n,i,r,s,u,l,d){new c(e,t,o,a,n,i,r,s,u,l).bindTo(d)}}(window.app,window.OData,window.jQuery,new window.app.QuestionService,document),function(a,n){"use strict";function t(){var o=this;o.country=ko.observable(),o.city=ko.observable(),o.conferenceFullName=ko.observable().extend({required:{message:"Conference Full Name is required."}}),o.externalUrl=ko.observable(),o.startDate=ko.observable(),o.endDate=ko.observable(),o.acmConferenceAlias=ko.observable("").extend({pattern:/^[A-Za-z]{3,}$/,maxLength:12,message:"Invalid Alias."}),o.acmConferenceYearAlias=ko.observable("").extend({pattern:/^[A-Za-z]{3,}[0-9]{4}$/,maxLength:16,message:"Invalid Alias."}),o.acmConferenceId=ko.observable("").extend({pattern:/^[0-9]{4}-[0-9]{5,}$/,maxLength:16,message:"Invalid Conference Id."}),o.acmProceedingId=ko.observable("").extend({pattern:/^[0-9]{5,}$/,maxLength:6,message:"Invalid Proceeding Id."}),o.acmJournalId=ko.observable("").extend({pattern:/^[0-9]{3,}$/,maxLength:4,message:"Invalid Journal Id."}),o.doNotNotifyChairAccountDeletion=ko.observable(),o.doNotAllowEditUserType=ko.observable(),o.doNotAllowEmailTrackChair=ko.observable();o.instructionForIndividualConflict=ko.observable("").extend({maxLength:1e3}),o.instructionForIndividualConflictCharsLeft=ko.computed(function(){return Math.max(1e3-o.instructionForIndividualConflict().length,0)}),o.instructionForSubmissionConflict=ko.observable("").extend({maxLength:1e3}),o.instructionForSubmissionConflictCharsLeft=ko.computed(function(){return Math.max(1e3-o.instructionForSubmissionConflict().length,0)}),o.instructionForSubmissionConflictDomain=ko.observable("").extend({maxLength:1e3}),o.instructionForSubmissionConflictDomainCharsLeft=ko.computed(function(){return Math.max(1e3-o.instructionForSubmissionConflictDomain().length,0)}),o.instructionForConflictDomain=ko.observable("").extend({maxLength:1e3}),o.instructionForConflictDomainCharsLeft=ko.computed(function(){return Math.max(1e3-o.instructionForConflictDomain().length,0)}),o.save=function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;e={Country:o.country(),City:o.city(),ConferenceFullName:o.conferenceFullName(),ExternalUrl:o.externalUrl(),StartDate:new Date(o.startDate()).toISOString(),EndDate:new Date(o.endDate()).toISOString(),AcmConferenceAlias:o.acmConferenceAlias(),AcmConferenceYearAlias:o.acmConferenceYearAlias(),AcmConferenceId:o.acmConferenceId(),AcmProceedingId:o.acmProceedingId(),AcmJournalId:o.acmJournalId(),DoNotNotifyChairAccountDeletion:o.doNotNotifyChairAccountDeletion(),DoNotAllowEmailTrackChair:o.doNotAllowEmailTrackChair(),DoNotAllowEditUserType:o.doNotAllowEditUserType(),InstructionForIndividualConflict:o.instructionForIndividualConflict(),InstructionForSubmissionConflict:o.instructionForSubmissionConflict(),InstructionForSubmissionConflictDomain:o.instructionForSubmissionConflictDomain(),InstructionForConflictDomain:o.instructionForConflictDomain()},e={requestUri:a.odata.getUrl(a.odata.entitySet.generalSettings),method:"POST",data:e};return n.request(e,function(){a.addMessage("Conference Details have been saved!")}),!1},o.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(o,e)},n.read(a.odata.getUrl(a.odata.entitySet.generalSettings),function(e){o.country(e.Country),o.city(e.City),o.conferenceFullName(e.ConferenceFullName),o.externalUrl(e.ExternalUrl),o.startDate(e.StartDate.format("mm/dd/yyyy")),o.endDate(e.EndDate.format("mm/dd/yyyy")),o.acmConferenceAlias(e.AcmConferenceAlias),o.acmConferenceYearAlias(e.AcmConferenceYearAlias),o.acmConferenceId(e.AcmConferenceId),o.acmProceedingId(e.AcmProceedingId),o.acmJournalId(e.AcmJournalId),o.doNotNotifyChairAccountDeletion(e.DoNotNotifyChairAccountDeletion),o.doNotAllowEditUserType(e.DoNotAllowEditUserType),o.doNotAllowEmailTrackChair(e.DoNotAllowEmailTrackChair),o.instructionForIndividualConflict(e.InstructionForIndividualConflict||""),o.instructionForSubmissionConflict(e.InstructionForSubmissionConflict||""),o.instructionForSubmissionConflictDomain(e.InstructionForSubmissionConflictDomain||""),o.instructionForConflictDomain(e.InstructionForConflictDomain||""),t()})}}a.settingsGeneral=function(e){a.cookies.setValue("trackId",-1,0,"/"),(new t).bindTo(e)}}((window.jQuery,window.app),window.OData),function(a,n){"use strict";function t(){var o=this;o.allowDownloadCameraReadyFilesBySession=ko.observable(!1).autoMap(),o.save=function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;e=a.autoMap(o),e={requestUri:a.odata.getUrl(a.odata.entitySet.conferenceSessionSettings),method:"POST",data:e};return n.request(e,function(){a.addMessage("Session settings have been saved!")}),!1},o.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(o,e)},n.read(a.odata.getUrl(a.odata.entitySet.conferenceSessionSettings),function(e){a.autoMap(o,e),t()})}}a.settingsConferenceSession=function(e){a.cookies.setValue("trackId",-1,0,"/"),(new t).bindTo(e)}}((window.jQuery,window.app),window.OData),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.reviewers=ko.observableArray(),i.normalReviewers=ko.observableArray(),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.uploading=ko.observable(!1),i.tracks=ko.observableArray(),i.atLeastOneTrackSelected=ko.computed(function(){for(var e=!1,t=0;t<i.tracks().length;t++)e|=i.tracks()[t].checked();return e}),i.loadTracks=function(){return n.read(a.odata.getUrl(a.odata.entitySet.tracks),function(e){for(var t=0;t<e.value.length;t++){var o=a.autoMap(new a.TrackWithCheck,e.value[t]);i.tracks.push(o)}})},i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/User/Reviewers"},i.getModel=function(){for(var e=[],t=0;t<i.normalReviewers().length;t++){var o=i.normalReviewers()[t],o={FirstName:o.firstName,MiddleInitial:o.middleInitial,LastName:o.lastName,Organization:o.organization,Email:o.email};e.push(o)}for(var a=[],t=0;t<i.tracks().length;t++){var n=i.tracks()[t];n.checked()&&a.push(n.id)}return{Reviewers:e,Tracks:a,IsMeta:!1}},i.send=function(e,t){var o;i.atLeastOneTrackSelected()&&(o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.reviewers,null,"Import"),method:"POST",data:{Request:o}},n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/User/Reviewers"}))},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.reviewers.removeAll(),i.normalReviewers.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={organization:n.Organization,email:n.Email,firstName:n.FirstName,lastName:n.LastName,middleInitial:n.MiddleInitial,notice:n.Note,rawData:n.RawData,hasError:n.HasError};i.reviewers.push(n),n.hasError||i.normalReviewers.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){i.loadTracks().done(function(){ko.applyBindingsAndShow(i,e)})}}a.importReviewers=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(c,p,m,f,h){"use strict";var g=null,v=null,l=null;function d(e){this.email=e.Email,null==e.MiddleInitial||""==e.MiddleInitial?this.name=e.FirstName+" "+e.LastName:this.name=e.FirstName+" "+e.MiddleInitial+" "+e.LastName}function w(){var t=this;t.id=c.autoMap(),t.name=c.autoMap(),t.subject=c.autoMap(),t.body=c.autoMap(),t.createStub=function(e){return t.id=0,t.name=e,t.subject="",t.body="",t}}function b(e,t,r,s){var u=this;function o(e,t){var o,a,n,i="";return i="userId"===s?(o="&$filter="+g,a="&$skip="+e,n="&$top="+t,c.odata.getUrl(r,l)+"?$count=true"+o+a+n):c.odata.getUrl(r,{trackId:null==v?-1:v,filter:g,skip:e,top:t}),p.read(i,function(e){for(var t={},o=0;o<e.value.length;o++){var a=e.value[o];t[a.Id]||(t[a.Id]=!0,u.recipients.push(new d(a)))}u.showAllVisible(u.recipientCount>u.recipients().length)})}u.recipients=ko.observableArray(),u.recipientCount=t,u.showAllVisible=ko.observable(!1),u.showInDialog=function(){m(e).modal("show")},u.showAll=function(){o(10,null)},u.bind=function(){return o(0,10).done(function(){ko.applyBindings(u,e)})}}function k(t){var o=this,a=null;o.name=ko.observable().extend({required:!0}),o.editInDialog=function(){return a=m.Deferred(),o.name(""),o.name.isModified(!1),m(t).modal("show"),a.promise()},o.bind=function(){ko.applyBindings(o,t)},o.saveTemplate=function(){var e=ko.validation.group(o);0<e().length?e.showAllMessages():(a&&a.resolve(o.name()),m(t).modal("hide"))}}function M(o,t){var a=this,n=null;a.fromEmail=ko.observable().autoMap(),a.fromName=ko.observable().autoMap(),a.toEmail=ko.observable().autoMap(),a.toName=ko.observable().autoMap(),a.ccEmail=ko.observable().autoMap(),a.recipientCount=ko.observable().autoMap(),a.subject=ko.observable().autoMap(),a.body=ko.observable("").autoMap();var i=null;a.showInDialog=function(e,t){c.autoMap(a,e),i=t,m(o).modal("show")},a.sendEmails=function(){var e={requestUri:t,method:"POST",data:{Request:i}};p.request(e,function(e){e=e.value;m(o).modal("hide"),n||(n=new c.EmailProgressViewModel(f.getElementById("showProgressDialog"))).bind(),n.showInDialog(e)})},a.bind=function(){ko.applyBindings(a,o)}}function r(e,o,a,n,t,i){var r=this,s=null,u=null,l=null;function d(){var e=ko.validation.group(r);if(!(0<e().length))return 1;e.showAllMessages()}r.from=e,r.ccEmail=ko.observable("").extend({email:!0,maxLength:200}).autoMap(),r.ccSMR=ko.observable().autoMap(!1),r.recipientCount=0,r.templates=ko.observableArray(),r.selectedTemplate=ko.observable(),r.selectedTemplate.subscribe(function(e){r.subject(e.subject),r.subject.isModified(!1),r.body(e.body),r.body.isModified(!1)}),r.subject=ko.observable("").extend({required:!0}).autoMap(),r.body=ko.observable("").extend({required:!0}).autoMap(),r.showPlaceholders=ko.observable(!1),r.showRecipients=function(){alert(r.recipients)},r.previewEmail=function(){var t;d()&&((t=c.autoMap(r)).UserFilter=g,t.TrackId=v,p.request({requestUri:o,method:"POST",data:{Request:t}},function(e){e.recipientCount=r.recipientCount,function(e,t){s||(s=new M(f.getElementById("previewEmailDialog"),n)).bind();s.showInDialog(e,t)}(e,t)}))},r.saveTemplate=function(){var e;d()&&(delete(e=c.autoMap(r)).CcEmail,delete e.CcSMR,e.Name=r.selectedTemplate().name,e={requestUri:c.odata.getUrl(c.odata.entitySet.emailTemplates,r.selectedTemplate().id),method:"PUT",headers:{Prefer:"return-content"},data:e},p.request(e,function(e){r.selectedTemplate().subject=e.Subject,r.selectedTemplate().body=e.Body,c.addMessage("Template '{0}' saved.".format(r.selectedTemplate().name))}))},r.saveTemplateAs=function(){var o;d()&&(delete(o=c.autoMap(r)).CcEmail,delete o.CcSMR,u||(u=new k(f.getElementById("newTemplateNameDialog"))).bind(),u.editInDialog().done(function(t){o.Name=t;var e={requestUri:c.odata.getUrl(c.odata.entitySet.emailTemplates),method:"POST",headers:{Prefer:"return-content"},data:o};p.request(e,function(e){e=c.autoMap(new w,e);r.templates.push(e),r.selectedTemplate(e),c.addMessage("Template '{0}' created.".format(t))})}))},r.removeTemplate=function(){var e;r.selectedTemplate().id&&h("Are you sure you want to delete the template?")&&(e={requestUri:c.odata.getUrl(c.odata.entitySet.emailTemplates,r.selectedTemplate().id),method:"DELETE"},p.request(e,function(){c.addMessage("Temmplate '{0}' removed.".format(r.selectedTemplate().name)),r.templates.remove(r.selectedTemplate())}))},r.showRecipients=function(){l?l.showInDialog():(l=new b(f.getElementById("showRecipientsDialog"),r.recipientCount,t,i)).bind().done(function(){l.showInDialog()})},r.bindTo=function(e){var t;m.when(((t=c.autoMap(r)).UserFilter=g,t.TrackId=v,p.request({requestUri:a,method:"POST",data:{Request:t}},function(e){r.recipientCount=e.value})),p.read(c.odata.getUrl(c.odata.entitySet.emailTemplates,{orderby:"Name"}),function(e){r.templates.push((new w).createStub("Select predefined template")),r.templates.push((new w).createStub("Create new"));for(var t=0;t<e.value.length;t++)r.templates.push(c.autoMap(new w,e.value[t]))})).done(function(){ko.applyBindingsAndShow(r,e)})}}null!=c.url&&(g=c.url.queryString.getValue("filter"),v=c.url.queryString.getValue("trackId"),l=c.url.queryString.getValue("userId")),c.reviewerSendEmail=function(e,t,o,a,n,i){new r(e,t,o,a,n,i).bindTo("sendEmailForm")}}(window.app,window.OData,window.jQuery,window.document,window.confirm,window.setTimeout),function(h,g,v,c,p,w,m){"use strict";var b;function k(){this.userId=h.autoMap(),this.email=h.autoMap(),this.firstName=h.autoMap(),this.lastName=h.autoMap(),this.organization=h.autoMap(),this.countryCode=h.autoMap(),this.countryName=h.autoMap()}function M(e){var t=this;t.email=ko.observable().extend({required:!0,email:!0,validation:{validator:function(e,t){for(var o=0;o<t.length;o++)if(t[o].email==e)return!1;return!0},message:"Author with the same email already exists.",params:e}}),t.isEmailInvalid=ko.observable(!1),t.firstName=ko.observable().extend({required:{message:"First Name is required."},maxLength:200}),t.lastName=ko.observable().extend({required:{message:"Last Name is required."},maxLength:200}),t.organization=ko.observable().extend({required:{message:"Organization is required."},maxLength:200}),t.availableCountries=ko.observable(h.countries.getCountries()),t.countryCode=ko.observable().extend({required:{message:"Country is required."}}),t.isSearching=ko.observable(!1),t.notFound=ko.observable(!1),t.cancelAdd=function(){t.email(""),t.email.isModified(!1),t.firstName(""),t.firstName.isModified(!1),t.lastName(""),t.lastName.isModified(!1),t.organization(""),t.organization.isModified(!1),t.countryCode(void 0),t.countryCode.isModified(!1),t.notFound(!1),t.isEmailInvalid(!1)}}function S(){var e=this;e.id=h.autoMap(),e.name=h.autoMap(),e.parentSubjectAreaId=h.autoMap(),e.isChild=function(){return null!=e.parentSubjectAreaId},e.isPrimary=ko.observable(),e.isSecondary=ko.observable(),e.checkBoxId=function(){return"primary"+e.id},e.allowParentSelection=!0,e.specialType=null,e.customValue=ko.observable(null).extend({required:{onlyIf:function(){return e.isPrimary()||e.isSecondary()}}})}function y(){return{welcomeMessage:h.autoMap(),abstractAllowed:h.autoMap(),abstractMaxLength:h.autoMap(),abstractRequired:h.autoMap(),showNoneOfTheAboveSubjectArea:h.autoMap(),secondarySubjectAreaAllowed:h.autoMap(),secondarySubjectAreaLimited:h.autoMap(),secondarySubjectAreaMaxNumber:h.autoMap(),immediateParentSelectionAllowed:h.autoMap(),customPrimarySubjectAreaAllowed:h.autoMap(),customSecondarySubjectAreaAllowed:h.autoMap(),submissionMinFileNumber:h.autoMap(),submissionMaxFileNumber:h.autoMap(),submissionAllowedFileTypes:h.autoMap(),submissionMaxFileSize:h.autoMap(),disableCoAuthors:h.autoMap(),disableTitleInstruction:h.autoMap(),titleMapping:h.autoMap(),fileUploadTitleMapping:h.autoMap(),showTipUnderFiles:h.autoMap()}}function n(e,t,o){var f=this;function r(e){return e.substr(e.lastIndexOf(".")+1)}function l(e,t){for(var o=r(e).toLowerCase(),a=t.split(","),n=!1,i=0;i<a.length;i++)if(a[i].trim().toLowerCase()==o){n=!0;break}return n}function n(){function o(e){if(f.files().length+e.length>f.settings.submissionMaxFileNumber)h.addMessage("You can upload up to {0} files only.".format(f.settings.submissionMaxFileNumber),null,"error");else{for(var t=[],o=0;o<f.files().length;o++)t[f.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return h.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*f.settings.submissionMaxFileSize)return h.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,f.settings.submissionMaxFileSize),null,"error"),!1;return!!l(e.name,f.settings.submissionAllowedFileTypes)||(h.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,r(e.name),f.settings.submissionAllowedFileTypes),null,"error"),!1)}(n,t)||((a=v.ajaxSettings.xhr()).open("POST",b.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):h.processXmlHttpRequestError(e.target)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void h.processException(e)}t=h.autoMap(new h.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),f.files.push(t)}f.title=ko.observable().extend({required:!0,maxLength:1e3}).autoMap(),f.abstract=ko.observable("").extend({required:{onlyIf:function(){return f.settings.abstractAllowed&&f.settings.abstractRequired}},maxLength:f.settings.abstractMaxLength}).autoMap(),f.abstractCharsLeft=ko.computed(function(){return Math.max(f.settings.abstractMaxLength-f.abstract().length,0)}),f.trackName="",f.editConflictAllowed=!1,f.statusId=h.autoMap(),f.submissionListUrl=null,f.authorizeSendingSubmissionToTpms=ko.observable().extend({requiredCheckbox:{message:"Your agreement is required.",onlyIf:function(){return f.trackSettings.isTpmsEnabled}}}).autoMap(),f.authorizeSendingSubmissionToIThenticate=ko.observable().extend({requiredCheckbox:{message:"Your agreement is required.",onlyIf:function(){return f.trackSettings.isIThenticateEnabled}}}).autoMap(),f.submissionConflictDomainsRaw=ko.observable().extend({required:{message:"Domain conflicts are required.",onlyIf:function(){return f.trackSettings.isSubmissionConflictDomainsRequired}}}).autoMap(),f.isAuthor=ko.observable(!1),f.isAuthorRole=ko.observable(!1),f.authors=ko.observableArray(),f.showPrimaryAuthorErrorMessage=ko.observable(!1),f.showFilesMaxErrorMessage=ko.observable(!1),f.primaryEmail=ko.observable(),f.removeAuthor=function(e){f.authors.remove(e)},f.moveAuthorUp=function(e){var t=f.authors.indexOf(e);f.authors.remove(e),f.authors.splice(t-1,0,e)},f.moveAuthorDown=function(e){var t=f.authors.indexOf(e);f.authors.remove(e),f.authors.splice(t+1,0,e)},f.addAuthor=function(e){var t=ko.validation.group([e.email,e.firstName,e.lastName,e.organization,e.countryCode]);if(0<t().length)return t.showAllMessages(),void e.isEmailInvalid(!e.email.isValid());t=h.autoMap(new k,{isPrimary:!1,email:e.email(),firstName:e.firstName(),lastName:e.lastName(),organization:e.organization(),countryCode:e.countryCode(),countryName:h.countries.getCountryNameByCode(e.countryCode())});f.authors.push(t),1==f.authors().length&&(f.primaryEmail(t.email),f.showPrimaryAuthorErrorMessage(!1)),e.cancelAdd()},f.newAuthor=new M(f.authors),f.searchAuthorByEmail=function(o){var e=ko.validation.group([o.email]);if(0<e().length)return o.isEmailInvalid(!0),void e.showAllMessages();o.isEmailInvalid(!1),o.isSearching(!0);e={requestUri:h.odata.getGlobalUrl(h.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:o.email()}};g.read(e,function(e){var t=h.autoMap(new k,e);t.userId=e.Id,f.authors.push(t),1==f.authors().length&&(f.primaryEmail(t.email),f.showPrimaryAuthorErrorMessage(!1)),o.cancelAdd(),o.isSearching(!1)},function(e){o.isSearching(!1),404==e.response.statusCode?f.newAuthor.notFound(!0):g.defaultError(e)})},f.subjectAreas=[],f.subjectAreaPairs=function(){return h.computeSubjectAreaColumnPairs(f.subjectAreas)},f.showSubjectAreasErrorMessage=ko.observable(!1),f.showValidationWarning=ko.observable(!1),f.files=ko.observableArray(),f.removeFile=function(e){f.files.remove(e)},f.uploadFile=function(){var e=v('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},f.canUploadMoreFiles=ko.computed(function(){return f.files().length<f.settings.submissionMaxFileNumber}),f.xhrUploadSupported=function(){return p},f.fileUploadDragOver=function(e,t){f.canUploadMoreFiles()&&v(t.target).addClass("dragOver")},f.fileUploadDragLeave=function(e,t){f.canUploadMoreFiles()&&v(t.target).removeClass("dragOver")},f.fileUploadDrop=function(e,t){f.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),f.fileUploadDragLeave(e,t))},f.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},f.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},f.questions=[],f.questionById={},f.dependentQuestions=[],f.dependentChoicesByQuestionId={},f.questionsByDependentChoiceId={},f.appliedDependentChoicesByQuestionId={},f.hiddenQuestionIds={},f.save=function(){var e,t=!0,o=ko.validation.group(f,{deep:!1});0<o().length&&(o.showAllMessages(),t=!1),function(){for(var e=!1,t=0;t<f.authors().length;t++)if(f.authors()[t].email==f.primaryEmail()){e=!0;break}var o=!0;return e||(f.showPrimaryAuthorErrorMessage(!0),o=!1),o}()||(t=!1),function(){if(0==f.subjectAreas.length)return 1;for(var e=[],t=!1,o=0;o<f.subjectAreas.length;o++)"customPrimary"!=f.subjectAreas[o].specialType&&"customSecondary"!=f.subjectAreas[o].specialType||e.push(f.subjectAreas[o].customValue),f.subjectAreas[o].isPrimary()&&(t=!0);var a=!0,n=ko.validation.group(e);return 0<n().length&&(n.showAllMessages(),a=!1),t||(f.showSubjectAreasErrorMessage(!0),a=!1),a}()||(t=!1),e=!0,f.files().length>f.settings.submissionMaxFileNumber&&(f.showFilesMaxErrorMessage(!0),e=!1),e||(t=!1);for(var a=[],n=0;n<f.questions.length;n++){var i=f.questions[n];f.hiddenQuestionIds[i.id]||a.push(i)}if(0<(o=ko.validation.group(a,{deep:!0}))().length&&(o.showAllMessages(),t=!1),t){var r=h.autoMap(f);r.Id=f.id,r.TrackId=f.trackId,r.SubjectAreas=[],r.NoneOfAboveSubjectArea=!1,r.CustomPrimarySubjectArea=null,r.CustomSecondarySubjectArea=null;for(var s=0;s<f.subjectAreas.length;s++){var u,l=f.subjectAreas[s];(l.isPrimary()||l.isSecondary())&&(null==l.specialType?(u={SubjectAreaId:l.id,IsPrimary:l.isPrimary()},r.SubjectAreas.push(u)):"noneOfAbove"==l.specialType?r.NoneOfAboveSubjectArea=!0:"customPrimary"==l.specialType?r.CustomPrimarySubjectArea=l.customValue():"customSecondary"==l.specialType&&(r.CustomSecondarySubjectArea=l.customValue()))}r.Files=[];for(var d=0;d<f.files().length;d++)r.Files.push(f.files()[d].id);r.Answers=w.getAnswersJson(f.questions);for(var c={},p=[],n=0;n<f.authors().length;n++){var m=f.authors()[n];m.userId||m.authorId||p.push(function(t){var e=h.autoMap(t);delete e.UserId,delete e.AuthorId,delete e.IsPrimary;e={requestUri:h.odata.getUrl(h.odata.entitySet.users,null,"AddCoAuthor"),method:"POST",data:{Request:e}};return g.request(e,function(e){c[t.email]=e.value},function(e){var t;e.response.statusCode==h.enums.httpStatusCodes.failure.conflict?h.addMessage(t,"Please click Cancel and use the email box to select author.","error"):e.response.statusCode==h.enums.httpStatusCodes.failure.badRequest?(t=h.getODataErrorMessage(e).message,h.addMessage(t,"Author information invalid:","error")):g.defaultError(e)})}(m))}v.when.apply(v,p).done(function(){r.Authors=[],r.References=[];for(var e=0;e<f.authors().length;e++){var t=f.authors()[e];t.userId||t.authorId||(t.authorId=c[t.email]);t={Order:e+1,IsPrimary:t.email==f.primaryEmail(),UserId:t.userId,AuthorId:t.authorId,Email:t.email};r.Authors.push(t)}var o={requestUri:h.odata.getUrl(h.odata.entitySet.submissions,f.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:r};g.request(o,function(e){f.editConflictAllowed?h.url.navigateTo(b.submissionConflict.format(e.Id)):h.url.navigateTo(b.submissionSummary.format(e.Id))})})}else f.showValidationWarning(!0)}}function i(r,s,u){return v.Deferred(function(t){h.autoMap(f,r);var e,o=g.read(h.odata.getUrl(h.odata.entitySet.tracks,f.trackId),function(e){f.trackName=e.Name,f.editConflictAllowed=e.EditConflictAllowed}),a=function(s){for(var e=[],t=0;t<s.length;t++)e.push(s[t].UserId);return v.Deferred(function(r){e.length?g.read(h.odata.getUrl("Users",{filter:h.odata.buildContainsQuery("Id",e)}),function(e){for(var t=[],o=0;o<s.length;o++)for(var a=s[o],n=0;n<e.value.length;n++)if(a.UserId==e.value[n].Id){var i=h.autoMap(new k,e.value[n]);i.userId=e.value[n].Id,t.push(i),a.IsPrimary&&f.primaryEmail(i.email);break}f.authors(t),r.resolve()}):r.resolve()}).promise()}(r.Authors),n=v.Deferred(function(e){s.done(function(){e.resolve()})}).promise(),i=v.Deferred(function(e){u.done(function(){e.resolve()})}).promise(),e=0==(e=r.Files).length||g.read(h.odata.getUrl(h.odata.entitySet.files,{filter:h.odata.buildContainsQuery("Id",e)}),function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(h.autoMap(new h.File,e.value[o]));f.files(t)});v.when(o,a,n,i,e).done(function(){var e;!f.settings.disableCoAuthors||0<(e=f.authors.remove(function(e){return e.email!=f.primaryEmail()})).length&&e.length<f.authors().length&&(f.authors(e),f.coAuthorsRemoved(!0)),f.abstract().length>f.settings.abstractMaxLength&&(f.abstract(f.abstract().substring(0,f.settings.abstractMaxLength-1)),f.abstractTrimmed(!0)),f.files().length>f.settings.submissionMaxFileNumber&&f.filesDropped(!0),f.files().forEach(function(e){1048576*f.settings.submissionMaxFileSize<e.size&&f.filesDropped(!0),l(e.originalName,f.settings.submissionAllowedFileTypes)||f.filesDropped(!0)}),f.filesDropped()&&f.files([]),t.resolve()}),"saved"==h.url.hash.getValue()&&(h.url.hash.remove(),h.addMessage("Submission '{0}' saved!".format(f.title())))}).promise()}function s(){return g.read(h.odata.getUrl(h.odata.entitySet.subjectAreas,{orderby:"FlatIndex",filter:"TrackId eq {0}".format(h.odata.escapeParam(f.trackId))}),function(e){for(var t,o=null,a=0;a<e.value.length;a++)t=h.autoMap(new S,e.value[a]),null!=o&&o.id==t.parentSubjectAreaId&&!f.settings.immediateParentSelectionAllowed&&o.allowParentSelection&&(o.allowParentSelection=!1),null==t.parentSubjectAreaId&&(o=t),i(t);function n(e){e||(this.customValue(null),this.customValue.isModified(!1))}function i(e){e.isPrimary.subscribe(function(e){e&&(f.showSubjectAreasErrorMessage(!1),function(e){for(var t=0;t<f.subjectAreas.length;t++)f.subjectAreas[t].isPrimary()&&f.subjectAreas[t]!=e&&f.subjectAreas[t].isPrimary(!1)}(this),this.isSecondary(!1))},e),e.isSecondary.subscribe(function(e){if(e){if(f.settings.secondarySubjectAreaLimited)if(function(){for(var e=0,t=0;t<f.subjectAreas.length;t++)f.subjectAreas[t].isSecondary()&&++e;return e}()>f.settings.secondarySubjectAreaMaxNumber){var t=this;return void c(function(){t.isSecondary(!1)},0)}this.isPrimary(!1)}},e),f.subjectAreas.push(e)}f.settings.showNoneOfTheAboveSubjectArea&&((t=new S).specialType="noneOfAbove",i(t)),f.settings.customPrimarySubjectAreaAllowed&&((t=new S).specialType="customPrimary",t.isPrimary.subscribe(n,t),i(t)),f.settings.customSecondarySubjectAreaAllowed&&f.settings.secondarySubjectAreaAllowed&&((t=new S).specialType="customSecondary",t.isSecondary.subscribe(n,t),i(t))})}f.id=e,f.trackId=t,f.titleTitle="Title",f.fileUploadTitle="Files",f.oldTrackName="",f.currentProfile=null,f.settings=y(),f.oldSettings=y(),f.filesDropped=ko.observable(!1),f.abstractTrimmed=ko.observable(!1),f.coAuthorsRemoved=ko.observable(!1),f.trackSettings=o,f.choicesChange=function(e,t){"added"===t.status?a(t.value):"deleted"===t.status&&u(t.value)},f.answerChange=function(e,t,o){u(o),a(t)};var d=function(e){return v("#sq_"+e)},a=function(e){var t=f.questionsByDependentChoiceId[e];if(t&&0!==t.length)for(var o=0;o<t.length;o++){var a,n=t[o];f.appliedDependentChoicesByQuestionId[n]||(f.appliedDependentChoicesByQuestionId[n]=[]),-1<f.appliedDependentChoicesByQuestionId[n].indexOf(e)||(0===f.appliedDependentChoicesByQuestionId[n].length&&(d(n).fadeIn(1e3),(a=f.questionById[n]).required()&&(a.validationEnabled=!0),f.hiddenQuestionIds[n]&&delete f.hiddenQuestionIds[n]),f.appliedDependentChoicesByQuestionId[n].push(e))}},u=function(e){var t=f.questionsByDependentChoiceId[e];if(t&&0!==t.length)for(var o=0;o<t.length;o++){var a,n=t[o];f.appliedDependentChoicesByQuestionId[n]&&0!==f.appliedDependentChoicesByQuestionId[n].length&&(-1<(a=f.appliedDependentChoicesByQuestionId[n].indexOf(e))&&(f.appliedDependentChoicesByQuestionId[n].splice(a,1),0===f.appliedDependentChoicesByQuestionId[n].length&&(d(n).fadeOut(1e3),f.hiddenQuestionIds[n]=!0,n=f.questionById[n],-1<f.dependentQuestions.indexOf(n)&&(n.required()&&(n.validationEnabled=!1),n.answer(null)))))}};f.bindTo=function(u){v.Deferred(function(t){g.read(h.odata.getUrl(h.odata.entitySet.submissions,f.id),function(e){t.resolve(e)})}).promise().done(function(a){a&&(f.oldTrackId=a.TrackId),v.when(g.read(h.odata.getUrl(h.odata.entitySet.submissionSettings,f.trackId),function(e){h.autoMap(f.settings,e),null!=f.settings.titleMapping&&(f.titleTitle=f.settings.titleMapping),null!=f.settings.fileUploadTitleMapping&&(f.fileUploadTitle=f.settings.fileUploadTitleMapping)}),g.read(h.odata.getUrl(h.odata.entitySet.submissionSettings,f.oldTrackId),function(e){h.autoMap(f.oldSettings,e)}),g.read(h.odata.getUrl(h.odata.entitySet.tracks,f.oldTrackId),function(e){f.oldTrackName=e.Name})).done(function(){n();var e=s(),t=w.loadQuestions(h.enums.formType.submission,f.trackId).done(function(e){var t,o,a,n;for(f.questions=e,t=0;t<e.length;t++)if(a=e[t],0<(f.questionById[a.id]=a).conditionQuestionChoiceIds.length)for(f.dependentChoicesByQuestionId[a.id]=a.conditionQuestionChoiceIds,o=0;o<a.conditionQuestionChoiceIds.length;o++)n=a.conditionQuestionChoiceIds[o],f.questionsByDependentChoiceId[n]||(f.questionsByDependentChoiceId[n]=[]),f.questionsByDependentChoiceId[n].push(a.id);for(t=0;t<e.length;t++)for(a=e[t],o=0;o<a.choices.length;o++)if(f.questionsByDependentChoiceId[a.choices[o].id]){f.dependentQuestions.push(a);break}}),o=v.Deferred();m.getCurrentRoleDescriptor().done(function(e){f.submissionListUrl=e.submissionListUrl,f.isAuthorRole(e.role==h.enums.userRole.author),g.request({requestUri:h.odata.getUrl(h.odata.entitySet.users,null,"GetCurrentProfile"),method:"GET"},function(e){e.UserId=e.Id,f.currentProfile=h.autoMap(new k,e)}).done(function(){f.isAuthor(!1),o.resolve()})}),v.when(i(a,e,t),o,g.read(h.odata.getUrl("Tracks",{top:0,count:"true"}),function(e){f.isSingleTrackConference=1==e["@odata.count"]})).done(function(){for(var e in ko.applyBindingsAndShow(f,u),w.subscribeChoicesChanged(f.dependentQuestions,f.choicesChange),w.subscribeAnswerChanged(f.dependentQuestions,f.answerChange),f.dependentChoicesByQuestionId)d(e).hide(),f.hiddenQuestionIds[e]=!0;for(var t=0;t<f.dependentQuestions.length;t++){var o=f.dependentQuestions[t].selectedChoiceIds.peek();if(o)for(var a=0;a<o.length;a++){var n=o[a],i=f.questionsByDependentChoiceId[n];if(i)for(var r=0;r<i.length;r++){var s=i[r];f.appliedDependentChoicesByQuestionId[s]||(f.appliedDependentChoicesByQuestionId[s]=[]),0===f.appliedDependentChoicesByQuestionId[s].length&&(d(s).show(),delete f.hiddenQuestionIds[s]),f.appliedDependentChoicesByQuestionId[s].push(n)}}}})})})}}h.submissionChangeTrack=function(e,t,o,a){b=t,new n(e,o,a).bindTo("submissionForm")}}(window.app,window.OData,window.jQuery,window.setTimeout,null!=window.FileReader,new window.app.QuestionService,new window.app.RoleService),function(l,d,c){"use strict";function p(e){this.id=e.Id,this.title=e.Title,this.abstract=e.Abstract.htmlMultiLineEncode(),this.authors={primary:e.Author},this.authorList=e.Authors,this.track={name:e.Track,id:e.TrackId},this.isSingleTrackConference=e.IsSingleTrackConference}d.DeletedSubmissionPage=function(e,t){var o=this;o.tracks=[],o.tracksLoaded=!1,o.$element=l(e),o.conference=window.cmt3.conference.name,o.page=ko.observable(1),o.top=ko.observable(25),o.sort=ko.observable("Id"),o.controller=t,o.filters=[],o._total=ko.observable(0),o.selected=ko.observable(0),o.submissions=ko.observableArray(),o.listen(),o.Pager=ko.pager(o.selected,o.top),o.Pager().CurrentPage.subscribe(function(){o.page(o.Pager().CurrentPage()),o.show()})},d.DeletedSubmissionPage.prototype={restore:function(e){var t=this,o={requestUri:d.odata.getUrl(d.odata.entitySet.deletedSubmissions,null,"Restore"),method:"POST",data:{Request:{SubmissionId:e}}};c.request(o,function(){d.addMessage("Submission (id={0}) has been restored.".format(e)),t.show()})},bulkRestore:function(){var e=this,t={requestUri:d.odata.getUrl(d.odata.entitySet.deletedSubmissions,null,"BulkRestore"),method:"POST",data:{Request:{SubmissionFilter:e.getFilter()}}};confirm("Are you sure you want to restore selected submissions?")&&c.request(t,function(){d.addMessage("Selected submissions have been restored."),e.show()})},listen:function(){var e=this;l(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return l.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},show:function(){var u=this;if(!u.initialized)return l.Deferred().reject().promise();function a(){var a=u.sort(),n=u.top(),i=u.skip(),r=u.getFilter(),e=a?"&$orderby="+a:"",t=n?"&$top="+n:"",o=i?"&$skip="+i:"",s=r?"&$filter="+encodeURIComponent(r):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+u.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+u.conference+"/"+u.controller+"?$count=true"+e+s+o+t,method:"GET",headers:{Accept:"application/json"}}]}};return c.request(t,function(e){d.page.saveState("deleted_submissions",{sort:a,top:n,skip:i,filter:r});var t=e.responses[0].body,e=t["@odata.count"],t=t.value,o=[];l.each(t,function(e,t){o.push(new p(t))}),u.submissions(o),0==u._total()&&u._total(e),u.selected(e),l("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},c.batchHandler)}if(u.tracksLoaded)return a();var n=l.Deferred();return c.read(d.odata.getUrl(d.odata.entitySet.tracks),function(e){for(var t=0;t<e.value.length;t++){var o=d.autoMap(new d.Track,e.value[t]);u.tracks.push(o)}u.tracksLoaded=!0,a().fail(n.reject).done(n.resolve)}),n.promise()},scroll:function(){l(window).scrollTop()==l(document).height()-l(window).height()&&self.show()},showAbstract:function(e,t){ko.contextFor(t.target).$parent;var o=l(t.target),t=o.next();t.is(":visible")?(t.hide(),o.text("Show abstract")):(t.show(),o.text("Hide abstract"))},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){l.each(this.filters,function(e,t){t.reset()}),d.announce(d.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){l("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),l(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=l(t.target).attr("size"),t=parseInt(t);this.top(t),d.announce(d.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=l(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=l(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(l("th[data-sort]").each(function(){l(this).find("i").removeClass("icon-arrow-up"),l(this).find("i").removeClass("icon-arrow-down"),l(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&d.announce(d.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()}}}(window.jQuery,window.app,window.OData),function(d,c,p,m){"use strict";var f;function u(e,t,o,a,n,i){var s=this;s.id=e,s.trackName=t,s.isSingleTrackConference=o,s.fileIds=a,s.titleTitle="Title",s.labels=ko.observableArray(),s.title=d.autoMap(),s.showValidationWarning=ko.observable(!1),s.submissionListUrl=null,s.files=ko.pureComputed(function(){return s.labels().reduce(function(e,t){return e.concat(t.files())},[])});for(var r={},u=0;u<i.length;u++){var l=new d.FileLabel(s,i[u].Settings,f.fileUpload);s.labels.push(d.autoMap(l,i[u])),l.initModel(),r[i[u].Id]=l}s.settings={minFileNumber:d.autoMap(),maxFileNumber:d.autoMap(),allowedFileTypes:d.autoMap(),maxFileSize:d.autoMap()},d.autoMap(s.settings,n),s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1);for(var o=s.labels(),a=0;a<o.length;a++)o[a].validateFiles()||(e=!1);if(e){var n=d.autoMap(s);n.Id=s.id,n.Files=[];for(a=0;a<o.length;a++)for(var i=o[a].files(),r=0;r<i.length;r++)n.Files.push({FileId:i[r].id,FileLabelId:o[a].id});t={requestUri:d.odata.getUrl(d.odata.entitySet.supplementary,s.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:n};c.request(t,function(e){d.url.navigateTo(f.submissionSummary.format(e.Id))})}else s.showValidationWarning(!0)},s.bindTo=function(t){d.showProgress();var o=p.Deferred();p.when(p.Deferred(function(t){var e=d.odata.getUrl(d.odata.entitySet.supplementary,s.id);c.read({requestUri:e,showProgressIndicator:!1},function(e){t.resolve(e)})}).promise(),void m.getCurrentRoleDescriptor().done(function(e){s.submissionListUrl=e.submissionListUrl}),function(e){if(0==e.length)return!0;var t=e.map(function(e){return e.FileId}),n=e.reduce(function(e,t){return e[t.FileId]=t.FileLabelId,e},{}),t=d.odata.getUrl(d.odata.entitySet.files,{filter:d.odata.buildContainsQuery("Id",t)});return c.read({requestUri:t,showProgressIndicator:!1},function(e){for(var t,o={},a=0;a<e.value.length;a++)o[n[e.value[a].Id]]||(o[n[e.value[a].Id]]=[]),o[n[e.value[a].Id]].push(d.autoMap(new d.File,e.value[a]));for(t in o)r[t]&&r[t].files(o[t])})}(s.fileIds)).done(function(e){d.autoMap(s,e),ko.applyBindingsAndShow(s,t),o.resolve()}),o.always(d.hideProgress)}}d.supplementaryDetails=function(e,t,o,a,n,i,r,s){f=a,new u(e,t,o,n,i,r).bindTo(s)}}(window.app,window.OData,window.jQuery,new window.app.RoleService),function(u,l,d,c,p){"use strict";var m;function s(e,t,o,a,n,i){var s=this;function r(){function o(e){if(s.files().length+e.length>s.settings.submissionMaxFileNumber)u.addMessage("You can upload up to {0} files only.".format(s.settings.submissionMaxFileNumber),null,"error");else{for(var t=[],o=0;o<s.files().length;o++)t[s.files()[o].originalName.toLowerCase()]=!0;u.showProgress();for(var a=[],o=0;o<e.length;o++){var n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return u.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*s.settings.submissionMaxFileSize)return u.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,s.settings.submissionMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=s.settings.submissionAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(u.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,s.settings.submissionAllowedFileTypes),null,"error"),!1)}(n,t)||a.push(d.Deferred(function(t){var e=d.ajaxSettings.xhr();e.open("POST",m.fileUpload,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("File-Name",encodeURIComponent(n.name)),e.send(n),e.addEventListener("load",function(e){200==e.target.status?(i(e.target.responseText),t.resolve()):(u.processXmlHttpRequestError(e.target),t.reject())},!1)}).promise())}d.when.apply(d,a).always(u.hideProgress)}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void u.processException(e)}t=u.autoMap(new u.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),s.files.push(t)}s.title=u.autoMap(),s.submissionListUrl=null,s.showValidationWarning=ko.observable(!1),s.showFilesMinErrorMessage=ko.observable(!1),s.showFilesMaxErrorMessage=ko.observable(!1),s.files=ko.observableArray(),s.removeFile=function(e){s.files.remove(e)},s.uploadFile=function(){var e=d('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},s.canUploadMoreFiles=ko.computed(function(){return s.files().length<s.settings.submissionMaxFileNumber}),s.xhrUploadSupported=function(){return c},s.fileUploadDragOver=function(e,t){s.canUploadMoreFiles()&&d(t.target).addClass("dragOver")},s.fileUploadDragLeave=function(e,t){s.canUploadMoreFiles()&&d(t.target).removeClass("dragOver")},s.fileUploadDrop=function(e,t){s.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),s.fileUploadDragLeave(e,t))},s.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},s.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!1});if(0<t().length&&(t.showAllMessages(),e=!1),t=!0,s.files().length>s.settings.submissionMaxFileNumber&&(s.showFilesMaxErrorMessage(!0),t=!1),s.files().length<s.settings.submissionMinFileNumber&&(s.showFilesMinErrorMessage(!0),t=!1),e=!t?!1:e){var o=u.autoMap(s);o.Id=s.id,o.Files=[];for(var a=0;a<s.files().length;a++)o.Files.push(s.files()[a].id);e={requestUri:u.odata.getUrl(u.odata.entitySet.submissionFilesModel,s.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:o};l.request(e,function(e){u.url.navigateTo(m.submissionSummary.format(e.Id))})}else s.showValidationWarning(!0)}}s.id=e,s.trackId=null,s.trackName=o,s.isSingleTrackConference=a,s.fileIds=n,s.titleTitle="Title",s.settings={submissionMinFileNumber:u.autoMap(),submissionMaxFileNumber:u.autoMap(),submissionAllowedFileTypes:u.autoMap(),submissionMaxFileSize:u.autoMap()},u.autoMap(s.settings,i),s.bindTo=function(t){u.showProgress();var e,o=d.Deferred();r(),d.when(d.Deferred(function(t){var e=u.odata.getUrl(u.odata.entitySet.submissionFilesModel,s.id);l.read({requestUri:e,showProgressIndicator:!1},function(e){t.resolve(e)})}).promise(),void p.getCurrentRoleDescriptor().done(function(e){s.submissionListUrl=e.submissionListUrl}),0==(e=s.fileIds).length||(e=u.odata.getUrl(u.odata.entitySet.files,{filter:u.odata.buildContainsQuery("Id",e)}),l.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(u.autoMap(new u.File,e.value[o]));s.files(t)}))).done(function(e){u.autoMap(s,e),ko.applyBindingsAndShow(s,t),o.resolve()}),o.always(u.hideProgress)}}u.submissionFileDetails=function(e,t,o,a,n,i,r){m=n,new s(e,0,o,a,i,r).bindTo("submissionFileDetailsForm")}}(window.app,window.OData,window.jQuery,(window.setTimeout,null!=window.FileReader),new window.app.RoleService),function(u,r,l,t,i){"use strict";var d;function a(e){var s=this;function a(){function o(e){if(s.files().length+e.length>s.settings.inplaceRevisionMaxFileNumber)u.addMessage("You can upload up to {0} files only.".format(s.settings.inplaceRevisionMaxFileNumber),null,"error");else{for(var t=[],o=0;o<s.files().length;o++)t[s.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return u.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*s.settings.inplaceRevisionMaxFileSize)return u.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,s.settings.inplaceRevisionMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=s.settings.inplaceRevisionAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(u.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,s.settings.inplaceRevisionAllowedFileTypes),null,"error"),!1)}(n,t)||((a=l.ajaxSettings.xhr()).open("POST",d.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):u.processXmlHttpRequestError(e.target)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void u.processException(e)}t=u.autoMap(new u.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),s.files.push(t)}s.title=u.autoMap(),s.trackName="",s.submissionListUrl=null,s.showValidationWarning=ko.observable(!1),s.showFilesMinErrorMessage=ko.observable(!1),s.showFilesMaxErrorMessage=ko.observable(!1),s.files=ko.observableArray(),s.removeFile=function(e){s.files.remove(e)},s.uploadFile=function(){var e=l('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},s.canUploadMoreFiles=ko.computed(function(){return s.files().length<s.settings.inplaceRevisionMaxFileNumber}),s.xhrUploadSupported=function(){return t},s.fileUploadDragOver=function(e,t){s.canUploadMoreFiles()&&l(t.target).addClass("dragOver")},s.fileUploadDragLeave=function(e,t){s.canUploadMoreFiles()&&l(t.target).removeClass("dragOver")},s.fileUploadDrop=function(e,t){s.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),s.fileUploadDragLeave(e,t))},s.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},s.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!1});if(0<t().length&&(t.showAllMessages(),e=!1),t=!0,s.files().length>s.settings.inplaceRevisionMaxFileNumber&&(s.showFilesMaxErrorMessage(!0),t=!1),s.files().length<s.settings.inplaceRevisionMinFileNumber&&(s.showFilesMinErrorMessage(!0),t=!1),e=!t?!1:e){var o=u.autoMap(s);o.Id=s.id,o.Files=[];for(var a=0;a<s.files().length;a++)o.Files.push(s.files()[a].id);e={requestUri:u.odata.getUrl(u.odata.entitySet.inplaceRevision,s.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:o};r.request(e,function(e){u.url.navigateTo(d.submissionSummary.format(e.Id))})}else s.showValidationWarning(!0)}}function n(a){return l.Deferred(function(e){u.autoMap(s,a);var t,o=r.read(u.odata.getUrl(u.odata.entitySet.tracks,s.trackId),function(e){s.trackName=e.Name}),t=0==(t=a.Files).length||r.read(u.odata.getUrl(u.odata.entitySet.files,{filter:u.odata.buildContainsQuery("Id",t)}),function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(u.autoMap(new u.File,e.value[o]));s.files(t)});l.when(o,t).done(function(){e.resolve()}),"saved"==u.url.hash.getValue()&&(u.url.hash.remove(),u.addMessage("Revision '{0}' saved!".format(s.title)))}).promise()}s.id=e,s.trackId=null,s.titleTitle="Title",s.settings={inplaceRevisionMinFileNumber:u.autoMap(),inplaceRevisionMaxFileNumber:u.autoMap(),inplaceRevisionAllowedFileTypes:u.autoMap(),inplaceRevisionMaxFileSize:u.autoMap(),titleMapping:u.autoMap()},s.bindTo=function(o){l.Deferred(function(t){r.read(u.odata.getUrl(u.odata.entitySet.inplaceRevision,s.id),function(e){t.resolve(e)})}).promise().done(function(e){e&&(s.trackId=e.TrackId),r.read(u.odata.getUrl(u.odata.entitySet.submissionSettings,s.trackId),function(e){u.autoMap(s.settings,e),null!=s.settings.titleMapping&&(s.titleTitle=s.settings.titleMapping)}).done(function(){a();var t=l.Deferred();i.getCurrentRoleDescriptor().done(function(e){s.submissionListUrl=e.submissionListUrl,t.resolve()}),l.when(t,n(e),r.read(u.odata.getUrl("Tracks",{top:0,count:"true"}),function(e){s.isSingleTrackConference=1==e["@odata.count"]})).done(function(){ko.applyBindingsAndShow(s,o)})})})}}u.inplaceRevisionDetails=function(e,t,o){d=t,new a(e).bindTo(o)}}(window.app,window.OData,window.jQuery,(window.setTimeout,null!=window.FileReader),new window.app.RoleService),function(u,r,l,t,d){"use strict";var c;function a(e){var s=this;function n(){function o(e){if(s.files().length+e.length>s.settings.copyrightMaxFileNumber)u.addMessage("You can upload up to {0} files only.".format(s.settings.copyrightMaxFileNumber),null,"error");else{for(var t=[],o=0;o<s.files().length;o++)t[s.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return u.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*s.settings.copyrightMaxFileSize)return u.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,s.settings.copyrightMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=s.settings.copyrightAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(u.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,s.settings.copyrightAllowedFileTypes),null,"error"),!1)}(n,t)||(s.uploading(s.uploading()+1),(a=l.ajaxSettings.xhr()).open("POST",c.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):u.processXmlHttpRequestError(e.target),s.uploading(s.uploading()-1)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void u.processException(e)}t=u.autoMap(new u.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),s.files.push(t)}s.title=u.autoMap(),s.trackName="",s.submissionListUrl=null,s.showFilesMinErrorMessage=ko.observable(!1),s.showFilesMaxErrorMessage=ko.observable(!1),s.showValidationWarning=ko.observable(!1),s.files=ko.observableArray(),s.removeFile=function(e){s.files.remove(e)},s.uploading=ko.observable(0),s.uploadFile=function(){var e=l('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},s.canUploadMoreFiles=ko.computed(function(){return 0==s.uploading()&&s.files().length<s.settings.copyrightMaxFileNumber}),s.xhrUploadSupported=function(){return t},s.fileUploadDragOver=function(e,t){s.canUploadMoreFiles()&&l(t.target).addClass("dragOver")},s.fileUploadDragLeave=function(e,t){s.canUploadMoreFiles()&&l(t.target).removeClass("dragOver")},s.fileUploadDrop=function(e,t){s.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),s.fileUploadDragLeave(e,t))},s.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},s.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!1});if(0<t().length&&(t.showAllMessages(),e=!1),t=!0,s.files().length>s.settings.copyrightMaxFileNumber&&(s.showFilesMaxErrorMessage(!0),t=!1),s.files().length<s.settings.copyrightMinFileNumber&&(s.showFilesMinErrorMessage(!0),t=!1),e=!t?!1:e){var o=u.autoMap(s);o.Id=s.id,o.Files=[];for(var a=0;a<s.files().length;a++)o.Files.push(s.files()[a].id);e={requestUri:u.odata.getUrl(u.odata.entitySet.copyrights,s.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:o};r.request(e,function(e){u.url.navigateTo(s.submissionListUrl)})}else s.showValidationWarning(!0)}}function i(a){return l.Deferred(function(e){u.autoMap(s,a);var t=(o=u.odata.getUrl(u.odata.entitySet.tracks,s.trackId),r.read({requestUri:o,showProgressIndicator:!1},function(e){s.trackName=e.Name})),o=function(e){if(0==e.length)return!0;e=u.odata.getUrl(u.odata.entitySet.files,{filter:u.odata.buildContainsQuery("Id",e)});return r.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(u.autoMap(new u.File,e.value[o]));s.files(t)})}(a.Files);l.when(t,o).done(function(){e.resolve()}),"saved"==u.url.hash.getValue()&&(u.url.hash.remove(),u.addMessage("Copyright Form '{0}' saved!".format(s.title)))}).fail(function(){dfr.reject()}).promise()}s.id=e,s.titleTitle="Title",s.settings={copyrightMinFileNumber:u.autoMap(),copyrightMaxFileNumber:u.autoMap(),copyrightAllowedFileTypes:u.autoMap(),copyrightMaxFileSize:u.autoMap(),titleMapping:u.autoMap()},s.ecfUrl=function(){return c.ecf.format(s.id)},s.bindTo=function(o){u.showProgress();var a=l.Deferred();l.Deferred(function(t){var e=u.odata.getUrl(u.odata.entitySet.copyrights,s.id);r.read({requestUri:e,showProgressIndicator:!1},function(e){t.resolve(e)}).fail(function(){t.reject()})}).promise().done(function(t){var e;t&&(s.trackId=t.TrackId),e=u.odata.getUrl(u.odata.entitySet.cameraReadySubmissionSettings,s.trackId),r.read({requestUri:e,showProgressIndicator:!1},function(e){u.autoMap(s.settings,e),null!=s.settings.titleMapping&&(s.titleTitle=s.settings.titleMapping)}).done(function(){var e;n(),l.when(d.getCurrentRoleDescriptor(),i(t),(e=u.odata.getUrl("Tracks",{top:0,count:"true"}),r.read({requestUri:e,showProgressIndicator:!1},function(e){s.isSingleTrackConference=1==e["@odata.count"]}))).done(function(e){s.submissionListUrl=e.submissionListUrl,ko.applyBindingsAndShow(s,o)}).always(a.resolve)})}),a.always(u.hideProgress)}}u.copyrightDetails=function(e,t,o){c=t,new a(e).bindTo(o)}}(window.app,window.OData,window.jQuery,(window.setTimeout,null!=window.FileReader),new window.app.RoleService),function(u,r,l,t,i){"use strict";var d;function a(e){var s=this;function a(){function o(e){if(s.files().length+e.length>s.settings.referenceMaxFileNumber)u.addMessage("You can upload up to {0} files only.".format(s.settings.referenceMaxFileNumber),null,"error");else{for(var t=[],o=0;o<s.files().length;o++)t[s.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return u.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*s.settings.referenceMaxFileSize)return u.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,s.settings.referenceMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=s.settings.referenceAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(u.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,s.settings.referenceAllowedFileTypes),null,"error"),!1)}(n,t)||((a=l.ajaxSettings.xhr()).open("POST",d.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):u.processXmlHttpRequestError(e.target)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void u.processException(e)}t=u.autoMap(new u.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),s.files.push(t)}s.title=u.autoMap(),s.trackName="",s.showValidationWarning=ko.observable(!1),s.showFilesMinErrorMessage=ko.observable(!1),s.showFilesMaxErrorMessage=ko.observable(!1),s.files=ko.observableArray(),s.removeFile=function(e){s.files.remove(e)},s.uploadFile=function(){var e=l('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},s.canUploadMoreFiles=ko.computed(function(){return s.files().length<s.settings.referenceMaxFileNumber}),s.xhrUploadSupported=function(){return t},s.fileUploadDragOver=function(e,t){s.canUploadMoreFiles()&&l(t.target).addClass("dragOver")},s.fileUploadDragLeave=function(e,t){s.canUploadMoreFiles()&&l(t.target).removeClass("dragOver")},s.fileUploadDrop=function(e,t){s.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),s.fileUploadDragLeave(e,t))},s.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},s.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},s.cancel=function(){u.url.navigateTo(d.referenceConsole)},s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!1});if(0<t().length&&(t.showAllMessages(),e=!1),t=!0,s.files().length>s.settings.referenceMaxFileNumber&&(s.showFilesMaxErrorMessage(!0),t=!1),s.files().length<s.settings.referenceMinFileNumber&&(s.showFilesMinErrorMessage(!0),t=!1),e=!t?!1:e){var o=u.autoMap(s);o.Id=s.id,o.Files=[];for(var a=0;a<s.files().length;a++)o.Files.push(s.files()[a].id);e={requestUri:u.odata.getUrl(u.odata.entitySet.referenceModels,s.id),method:"PUT",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:o};r.request(e,function(e){u.url.navigateTo(d.referenceConsole)})}else s.showValidationWarning(!0)}}function n(a){return l.Deferred(function(e){u.autoMap(s,a);var t,o=r.read(u.odata.getUrl(u.odata.entitySet.tracks,s.trackId),function(e){s.trackName=e.Name}),t=0==(t=a.Files).length||r.read(u.odata.getUrl(u.odata.entitySet.files,{filter:u.odata.buildContainsQuery("Id",t)}),function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(u.autoMap(new u.File,e.value[o]));s.files(t)});l.when(o,t).done(function(){e.resolve()}),"saved"==u.url.hash.getValue()&&(u.url.hash.remove(),u.addMessage("Reference '{0}' saved!".format(s.title)))}).promise()}s.id=e,s.trackId=null,s.titleTitle="Title",s.settings={referenceMinFileNumber:u.autoMap(),referenceMaxFileNumber:u.autoMap(),referenceAllowedFileTypes:u.autoMap(),referenceMaxFileSize:u.autoMap(),titleMapping:u.autoMap()},s.bindTo=function(o){l.Deferred(function(t){r.read(u.odata.getUrl(u.odata.entitySet.referenceModels,s.id),function(e){t.resolve(e)})}).promise().done(function(e){e&&(s.trackId=e.TrackId),r.read(u.odata.getUrl(u.odata.entitySet.submissionSettings,s.trackId),function(e){u.autoMap(s.settings,e),null!=s.settings.titleMapping&&(s.titleTitle=s.settings.titleMapping)}).done(function(){a();var t=l.Deferred();i.getCurrentRoleDescriptor().done(function(e){t.resolve()}),l.when(t,n(e),r.read(u.odata.getUrl("Tracks",{top:0,count:"true"}),function(e){s.isSingleTrackConference=1==e["@odata.count"]})).done(function(){ko.applyBindingsAndShow(s,o)})})})}}u.referenceDetails=function(e,t,o){d=t,new a(e).bindTo(o)}}(window.app,window.OData,window.jQuery,(window.setTimeout,null!=window.FileReader),new window.app.RoleService),function(a,n){"use strict";function t(){var o=this;o.emailNotificationNewSubmission=ko.observable(!1).autoMap(),o.emailNotificationUpdateSubmission=ko.observable(!1).autoMap(),o.emailNotificationDeleteSubmission=ko.observable(!1).autoMap(),o.emailNotificationInplaceRevision=ko.observable(!1).autoMap(),o.emailNotificationDiscussion=ko.observable(!1).autoMap(),o.emailNotificationReview=ko.observable(!1).autoMap(),o.emailNotificationMetaReview=ko.observable(!1).autoMap(),o.ccChairsOnMyEmail=ko.observable(!1).autoMap(),o.showOneMessagePerSession=ko.observable(!1).autoMap(),o.seniorMetaReviewerEmailNotificationDiscussionOff=ko.observable(!1).autoMap(),o.metaReviewerEmailNotificationDiscussionOff=ko.observable(!1).autoMap(),o.metaReviewerEmailNotificationReviewOff=ko.observable(!1).autoMap(),o.save=function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;e=a.autoMap(o),e={requestUri:a.odata.getUrl(a.odata.entitySet.userSettingsModels,-1),method:"PUT",data:e};return n.request(e,function(){a.addMessage("User settings have been saved!")}),!1},o.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(o,e)},n.read(a.odata.getUrl(a.odata.entitySet.userSettingsModels,-1),function(e){a.autoMap(o,e),t()})}}a.userSettings=function(e){(new t).bindTo(e)}}((window.jQuery,window.app),window.OData),function(l,d,c,p){"use strict";function m(){var e=this;e.id=d.autoMap(),e.name=d.autoMap(),e.reviewVisibleToAuthor=d.autoMap(),e.metaReviewVisibleToAuthor=d.autoMap(),e.isRevision=d.autoMap(),e.isDeskReject=d.autoMap(),e.isWithdrawn=d.autoMap(),e.isMajorRevision=d.autoMap(),e.isShepherding=d.autoMap(),e.embedded=d.autoMap(),e.autoEnableCameraReadySubmission=d.autoMap(),e.isEditFocused=ko.observable(!1)}function f(o,a){var n=this;n.id=null,n.trackId=a,n.name=ko.observable().extend({required:"Please, enter a name"}).autoMap(),n.reviewVisibleToAuthor=ko.observable().autoMap(),n.metaReviewVisibleToAuthor=ko.observable().autoMap(),n.embedded=ko.observable().autoMap(),n.autoEnableCameraReadySubmission=ko.observable().autoMap(),n.createNew=ko.observable();var i=null;n.editInDialog=function(e){return n.id=e.id,d.autoMap(n,e),n.createNew(!e.id),o.modal("show"),(i=l.Deferred()).promise()},n.save=function(){var e=!0,t=ko.validation.group(n,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e&&(e=d.autoMap(n),n.createNew()?e.TrackId=a:e.Id=n.id,e={requestUri:d.odata.getUrl(d.odata.entitySet.statuses,n.createNew()?null:n.id),method:n.createNew()?"POST":"PUT",data:e},c.request(e,function(){o.modal("hide"),d.addMessage("Status '{0}' saved!".format(n.name())),i&&i.resolve()},function(e){c.defaultError(e)}))},n.bind=function(){ko.applyBindings(n,o[0])}}function o(e){var n=this,a=null,i=null,r=null;n.trackId=e,n.statuses=ko.observableArray(),n.delete=function(e){s(n,e,!1)};var s=function(o,a,e){(e||p("Are you sure you want to delete the status?"))&&(e={requestUri:d.odata.getUrl(d.odata.entitySet.statuses,a.id),method:"DELETE"},c.request(e,function(){n.statuses.remove(a)},function(e){var t;409===e.response.statusCode?p("The status is assigned to papers. Deleting it will reset status of papers to Awaiting Decision. Are you sure you want to proceed?")&&(t={requestUri:d.odata.getUrl(d.odata.entitySet.trackStatuses,a.id,"UnassignStatus"),method:"POST"},OData.request(t,function(){s(o,a,!0)})):c.defaultError(e)}))};function o(e,t){i=l("#editDialog"),r=l(t.target).closest("a,button"),i.on("hidden",function(){r.focus()}),a||(a=new f(i,n.trackId)).bind();var o=e.id;return a.editInDialog(e).then(u).then(function(){o?function(e){for(var t=n.statuses(),o=0;o<t.length;o++)if(t[o].id===e){t[o].isEditFocused(!0);break}}(o):r.focus()})}function u(){return c.read(d.odata.getUrl(d.odata.entitySet.statuses+"?$filter=TrackId eq "+e),function(e){n.statuses.removeAll();for(var t=0;t<e.value.length;t++)n.statuses.push(d.autoMap(new m,e.value[t]))})}n.edit=function(e,t){o(e,t)},n.addStatus=function(e,t){o(d.autoMap(new m,{ReviewVisibleToAuthor:!0,MetaReviewVisibleToAuthor:!0,AutoEnableCameraReadySubmission:!1}),t)},n.bindTo=function(e){u().done(function(){ko.applyBindingsAndShow(n,e),l("#menuSiteFeatures").addClass("in")})}}d.formStatus=function(e,t){new o(e).bindTo(t)}}(window.jQuery,window.app,window.OData,(window.document,window.confirm)),function(i,r,s,u,l){"use strict";function d(){this.id=r.autoMap(),this.name=r.autoMap(),this.visibleToAuthor=r.autoMap(),this.visibleToMetaReviewer=r.autoMap()}function c(o){var a=this;a.id=null,a.name=ko.observable().extend({required:"Please, enter a name"}).autoMap(),a.visibleToAuthor=ko.observable().autoMap(),a.visibleToMetaReviewer=ko.observable().autoMap(),a.createNew=ko.observable();var n=null;a.editInDialog=function(e){return a.id=e.id,r.autoMap(a,e),a.createNew(!e.id),i(o).modal("show"),(n=i.Deferred()).promise()},a.save=function(){var e=!0,t=ko.validation.group(a,{deep:!0});0<t().length&&(t.showAllMessages(),e=!1),e&&(e=r.autoMap(a),a.createNew()||(e.Id=a.id),e={requestUri:r.odata.getUrl(r.odata.entitySet.userTypeOptions,a.createNew()?null:a.id),method:a.createNew()?"POST":"PUT",data:e},s.request(e,function(){i(o).modal("hide"),r.addMessage("UserType '{0}' saved!".format(a.name())),n&&n.resolve()},function(e){s.defaultError(e)}))},a.bind=function(){ko.applyBindings(a,o)}}function t(){var o=this,t=null;function a(e){t||(t=new c(u.getElementById("editDialog"))).bind(),t.editInDialog(e).done(n)}function n(){return s.read(r.odata.getUrl(r.odata.entitySet.userTypeOptions),function(e){o.userTypes.removeAll();for(var t=0;t<e.value.length;t++)o.userTypes.push(r.autoMap(new d,e.value[t]))})}o.userTypes=ko.observableArray(),o.delete=function(e){var t;l("Are you sure?")&&(t={requestUri:r.odata.getUrl(r.odata.entitySet.userTypeOptions,e.id),method:"DELETE"},s.request(t,function(){o.userTypes.remove(e)},function(e){409==e.response.statusCode?r.addMessage("User type that you are trying to delete is being used, please contact CMT.",null,"error"):s.defaultError(e)}))},o.edit=function(e){a(e)},o.addUserType=function(){a(r.autoMap(new d,{}))},o.bindTo=function(e){n().done(function(){ko.applyBindingsAndShow(o,e),i("#menuConferenceDetails").addClass("in")})}}r.formUserType=function(e){r.cookies.setValue("trackId",-1,0,"/"),(new t).bindTo(e)}}(window.jQuery,window.app,window.OData,window.document,window.confirm),function(r,s,u){function a(e,t,o){var a,n,i=this;for(a of o)if(0===a.Id){a.Name="(Blank)";break}i.userTypeOptions=o,i.userTypeOptionId=ko.observable(""),i.save=function(){var e={requestUri:r.odata.getUrl(r.odata.entitySet.userTypes),method:"POST",data:{UserId:t,UserTypeOptionId:i.userTypeOptionId()}};u.request(e,function(){r.addMessage("User type saved.",null,"success","text",!0),window.location.reload()},u.defaultError)},n={requestUri:r.odata.getUrl(r.odata.entitySet.userTypes,t),method:"GET"},u.request(n,function(e){i.userTypeOptionId(e.UserTypeOptionId)},function(e){404!=e.response.statusCode&&u.defaultError(e)}),ko.applyBindings(i,s.getElementById(e))}r.selectUserTypePage=function(e,t,o){new a(e,t,o)}}(window.app,window.document,window.OData),function(a,n,i){"use strict";function t(){var t=this,o=null;t.subject=ko.observable("").extend({required:!0}).autoMap(),t.body=ko.observable("").extend({required:!0}).autoMap(),t.subject("PLEASE WRITE QUICK DESCRIPTION"),t.sendEmail=function(){var e;!function(){var e=ko.validation.group(t);if(0<e().length)return e.showAllMessages(),!1;return!0}()||(e=a.autoMap(t),e={requestUri:a.odata.getUrl(a.odata.entitySet.emails,null,"ChairsSend"),method:"POST",data:{Request:e}},n.request(e,function(e){e=e.value;o||(o=new a.EmailProgressViewModel(i.getElementById("showProgressDialog"))).bind(),o.showInDialog(e)}))},t.bindTo=function(e){ko.applyBindingsAndShow(t,e)}}a.chairsSendEmail=function(e){(new t).bindTo(e)}}(window.app,window.OData,(window.jQuery,window.document),(window.confirm,window.setTimeout)),function(a,n,i){"use strict";function e(){var t=this,o=null;t.subject=ko.observable("").extend({required:!0}).autoMap(),t.body=ko.observable("").extend({required:!0}).autoMap(),t.subject("PLEASE WRITE QUICK DESCRIPTION"),t.sendEmail=function(){var e;!function(){var e=ko.validation.group(t);if(0<e().length)return e.showAllMessages(),!1;return!0}()||(e=a.autoMap(t),e={requestUri:a.odata.getUrl(a.odata.entitySet.emails,null,"SupportSend"),method:"POST",data:{Request:e}},n.request(e,function(e){e=e.value;o||(o=new a.EmailProgressViewModel(i.getElementById("showProgressDialog"))).bind(),o.showInDialog(e)}))},t.bindTo=function(e){ko.applyBindingsAndShow(t,e)}}a.supportSendEmail=function(){(new e).bindTo("sendEmailForm")}}(window.app,window.OData,(window.jQuery,window.document)),function(i,r,s,u){"use strict";function l(o){var a=this,t=null;a.fromEmail=ko.observable().autoMap(),a.fromName=ko.observable().autoMap(),a.toEmail=ko.observable().autoMap(),a.toName=ko.observable().autoMap(),a.subject=ko.observable().autoMap(),a.body=ko.observable("").autoMap();var n=null;a.showInDialog=function(e,t){i.autoMap(a,e),n=t,s(o).modal("show")},a.sendEmail=function(){var e={requestUri:i.odata.getUrl(i.odata.entitySet.emails,null,"ExternalReviewerSend"),method:"POST",data:{Request:n}};r.request(e,function(e){e=e.value;s(o).modal("hide"),t||(t=new i.EmailProgressViewModel(u.getElementById("showProgressDialog"))).bind(),t.showInDialog(e)})},a.bind=function(){ko.applyBindings(a,o)}}function n(e,t,o){var a=this,n=null;a.submissionId=e,a.externalReviewerEmail=t,a.to=o,a.subject=ko.observable("").extend({required:!0}).autoMap(),a.body=ko.observable("").extend({required:!0}).autoMap(),a.showPlaceholders=ko.observable(!1),a.previewEmail=function(){var o,e;!function(){var e=ko.validation.group(a);if(!(0<e().length))return 1;e.showAllMessages()}()||((o=i.autoMap(a)).SubmissionId=a.submissionId,o.ExternalReviewerEmail=a.externalReviewerEmail,e={requestUri:i.odata.getUrl(i.odata.entitySet.emails,null,"ExternalReviewerPreview"),method:"POST",data:{Request:o}},r.request(e,function(e){var t;t=e,e=o,n||(n=new l(u.getElementById("previewEmailDialog"))).bind(),n.showInDialog(t,e)}))},a.bindTo=function(e){s.when(r.request({requestUri:i.odata.getUrl(i.odata.entitySet.emailTemplates,null,"GetByName"),data:{Name:"External reviewer"},method:"POST"},function(e){a.subject(e.Subject),a.body(e.Body)})).done(function(){ko.applyBindingsAndShow(a,e)})}}i.externalReviewerSendEmail=function(e,t,o,a){new n(e,t,o).bindTo(a)}}(window.app,window.OData,window.jQuery,window.document,(window.confirm,window.setTimeout)),function(n,i,r){"use strict";function t(t){var o=this,a=null;o.subject=ko.observable("").extend({required:!0}).autoMap(),o.body=ko.observable("").extend({required:!0}).autoMap(),o.subject(window.cmt3.conference.name+": Reviewer Inquiry About Paper #"+t),o.sendEmail=function(){var e;!function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=n.autoMap(o)).SubmissionId=t,e={requestUri:n.odata.getUrl(n.odata.entitySet.emails,null,"ReviewerSendMetaReviewer"),method:"POST",data:{Request:e}},i.request(e,function(e){e=e.value;a||(a=new n.EmailProgressViewModel(r.getElementById("showProgressDialog"))).bind(),a.showInDialog(e)}))},o.bindTo=function(e){ko.applyBindingsAndShow(o,e)}}n.reviewerSendMetaReviewerEmail=function(e){new t(e).bindTo("sendEmailForm")}}(window.app,window.OData,(window.jQuery,window.document)),function(i,r,s){"use strict";function a(t,o){var a=this,n=null;a.subject=ko.observable("").extend({required:!0}).autoMap(),a.body=ko.observable("").extend({required:!0}).autoMap(),a.subject(window.cmt3.conference.name+": Author Inquiry About Paper #"+t),a.sendEmail=function(){var e;!function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=i.autoMap(a)).SubmissionId=t,e={requestUri:i.odata.getUrl(i.odata.entitySet.emails,null,o?"AuthorSendSeniorMetaReviewer":"AuthorSendMetaReviewer"),method:"POST",data:{Request:e}},r.request(e,function(e){e=e.value;n||(n=new i.EmailProgressViewModel(s.getElementById("showProgressDialog"))).bind(),n.showInDialog(e)}))},a.bindTo=function(e){ko.applyBindingsAndShow(a,e)}}i.authorSendMetaReviewerEmail=function(e,t,o){new a(e,t).bindTo(o)}}(window.app,window.OData,(window.jQuery,window.document)),function(i,r,s){"use strict";function o(t,o){var a=this,n=null;a.subject=ko.observable("").extend({required:!0}).autoMap(),a.body=ko.observable("").extend({required:!0}).autoMap(),a.subject(window.cmt3.conference.name+" Paper #"+t),a.sendEmail=function(){var e;!function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=i.autoMap(a)).SubmissionId=t,e={requestUri:i.odata.getUrl(i.odata.entitySet.emails,null,o?"MetaReviewerSendSeniorMetaReviewer":"ReviewerSendSeniorMetaReviewer"),method:"POST",data:{Request:e}},r.request(e,function(e){e=e.value;n||(n=new i.EmailProgressViewModel(s.getElementById("showProgressDialog"))).bind(),n.showInDialog(e)}))},a.bindTo=function(e){ko.applyBindingsAndShow(a,e)}}i.sendSeniorMetaReviewerEmail=function(e,t){new o(e,t).bindTo("sendEmailForm")}}(window.app,window.OData,(window.jQuery,window.document)),function(n,i,r){"use strict";function o(t){var o=this,a=null;o.subject=ko.observable("").extend({required:!0}).autoMap(),o.body=ko.observable("").extend({required:!0}).autoMap(),o.subject(window.cmt3.conference.name+" Paper #"+t),o.sendEmail=function(){var e;!function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=n.autoMap(o)).SubmissionId=t,e={requestUri:n.odata.getUrl(n.odata.entitySet.emails,null,"MetaReviewerSendAuthor"),method:"POST",data:{Request:e}},i.request(e,function(e){e=e.value;a||(a=new n.EmailProgressViewModel(r.getElementById("showProgressDialog"))).bind(),a.showInDialog(e)}))},o.bindTo=function(e){ko.applyBindingsAndShow(o,e)}}n.sendAuthorEmail=function(e,t){new o(e).bindTo("sendEmailForm")}}(window.app,window.OData,(window.jQuery,window.document)),function(r,s,u){"use strict";function a(t,o,a){var n=this,i=null;n.subject=ko.observable("").extend({required:!0}).autoMap(),n.body=ko.observable("").extend({required:!0}).autoMap(),n.subject(window.cmt3.conference.name+" Paper #"+o),n.sendEmail=function(){var e;!function(){var e=ko.validation.group(n);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=r.autoMap(n)).SubmissionId=o,e.ReviewerId=a,e={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,t===r.enums.trackUserType.reviewer?"SendReviewer":t===r.enums.trackUserType.metaReviewer?"SendMetaReviewer":null),method:"POST",data:{Request:e}},s.request(e,function(e){e=e.value;i||(i=new r.EmailProgressViewModel(u.getElementById("showProgressDialog"))).bind(),i.showInDialog(e)}))},n.bindTo=function(e){ko.applyBindingsAndShow(n,e)}}r.sendReviewerEmail=function(e,t,o){new a(e,t,o).bindTo("sendEmailForm")}}(window.app,window.OData,(window.jQuery,window.document)),function(r,s,u){"use strict";function a(t,o,a){var n=this,i=null;n.subject=ko.observable("").extend({required:!0}).autoMap(),n.body=ko.observable("").extend({required:!0}).autoMap(),n.subject(window.cmt3.conference.name+" Paper #"+t),n.sendEmail=function(){var e;!function(){var e=ko.validation.group(n);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=r.autoMap(n)).SubmissionId=t,e.HiddenNumber=o,e={requestUri:r.odata.getUrl(r.odata.entitySet.emails,null,a?"SendAssignedMetaReviewer":"SendAssignedReviewer"),method:"POST",data:{Request:e}},s.request(e,function(e){e=e.value;i||(i=new r.EmailProgressViewModel(u.getElementById("showProgressDialog"))).bind(),i.showInDialog(e)}))},n.bindTo=function(e){ko.applyBindingsAndShow(n,e)}}r.sendAssignedReviewerEmail=function(e,t,o){new a(e,t,o).bindTo("sendEmailForm")}}(window.app,window.OData,(window.jQuery,window.document)),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.changes=ko.observableArray(),i.normalChanges=ko.observableArray(),i.uploading=ko.observable(!1),i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},i.getModel=function(){for(var e=[],t=0;t<i.normalChanges().length;t++){var o=i.normalChanges()[t],o={SubmissionId:o.id,NewStatusId:o.newStatusId};e.push(o)}return{Changes:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.submissions,null,"BulkChangePaperStatus"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Submissions/GetBulkChangePaperStatusTemplate";a.page.post(o,{})},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.changes.removeAll(),i.normalChanges.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={id:n.Id,title:n.Title,currentStatusId:n.CurrentStatusId,newStatusId:n.NewStatusId,currentStatus:n.CurrentStatus,newStatus:n.NewStatus,status:n.Status,hasError:n.HasError,lineNumber:n.LineNumber};i.changes.push(n),n.hasError||i.normalChanges.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.bulkChangePaperStatus=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(x,Y,K){"use strict";function X(a){var e,n=this;function i(){r(),e=n.isChecked.subscribe(t)}function r(){e&&"function"==typeof e.dispose&&e.dispose()}function t(){void 0===n.initialState?n.initialState=n.isChecked():function(){var e=this;e.isToggleInProgress(!0);var t={ReasonId:n.id()};t.Type=e.isChecked()?"Add":"Remove";var o=x.Deferred(function(e){window.setTimeout(e.resolve,500)}),t=K.request({requestUri:Y.odata.getUrl(Y.odata.entitySet.submissions,a,"ModifyConflict"),method:"POST",showProgressIndicator:!1,data:{Request:t}},function(){},function(e){r(),n.isChecked(!n.isChecked()),i(),Y.addErrorMessage("Unable to edit conflict."+Y.odata.getErrorMessage(e))});x.when(t,o).always(function(){e.isToggleInProgress(!1)})}.call(n)}n.id=ko.observable().autoMap(),n.name=Y.autoMap(),n.isChecked=ko.observable(),n.initialState=void 0,n.isToggleInProgress=ko.observable(!1),i()}function R(){this.id=Y.autoMap(),this.trackId=Y.autoMap(),this.name=Y.autoMap()}function Z(e){var t=this;t.id=Y.autoMap(),t.reviewerName=Y.autoMap(),t.hiddenNumber=Y.autoMap(),t.googleScholarId=Y.autoMap(),t.semanticScholarId=Y.autoMap(),t.dblpId=Y.autoMap(),t.googleScholarUrl=function(){return Y.enums.externalProfile.googleScholar.format(t.googleScholarId)},t.semanticScholarUrl=function(){return Y.enums.externalProfile.semanticScholar.format(t.semanticScholarId)},t.dblpUrl=function(){return Y.enums.externalProfile.dblp.format(t.dblpId)},t.reviewPreview=e}function ee(e){this.id=Y.autoMap(),this.metaReviewerName=Y.autoMap(),this.hiddenNumber=Y.autoMap(),this.metaReviewPreview=e}function te(){this.trackId=Y.autoMap(),this.groupId=Y.autoMap(),this.groupName=Y.autoMap(),this.isImplicit=Y.autoMap(),this.peerName=Y.autoMap()}function O(e,t,o,a,n,i,r,s,u,l,d,c,p,m,f,h,g,v,w,b,k,M,S,y){var I=this;I.id=e.Id,I.title=e.Title,I.abstract=e.Abstract,I.originalSubmissionId=e.OriginalSubmissionId,I.track=e.Track,I.trackId=e.TrackId,I.primarySubject=e.PrimarySubject,I.secondarySubject=e.SecondarySubject,I.relevance=e.Relevance,I.tpmsRank=e.TpmsRank,I.customAffinityRank=e.CustomAffinityRank,I.metaBid=e.MetaBid,I.assigned=e.Assigned,I.metaReviewId=e.MetaReviewId,I.authorFeedbackId=e.AuthorFeedbackId,I.isMetaReviewReadOnly=e.IsMetaReviewReadOnly,I.isAuthorFeedback=ko.observable(e.IsAuthorFeedback),I.isCameraReadyPosted=e.IsCameraReadyPosted,I.metaBiddingEnabled=e.MetaBiddingEnabled,I.metaReviewingEnabled=e.MetaReviewingEnabled,I.notificationComplete=e.NotificationComplete,I.discussionEnabled=e.DiscussionEnabled,I.assignedSeniorMetaReviewer=e.AssignedSeniorMetaReviewer,I.submissionEnabledForDiscussion=ko.observable(e.SubmissionEnabledForDiscussion),I.filesUploaded=e.FilesUploaded,I.messages=e.Messages,I.authors=e.AuthorsJson?JSON.parse(e.AuthorsJson):[],I.metaReviewers=e.MetaReviewersJson?JSON.parse(e.MetaReviewersJson):[],I.seniorMetaReviewers=e.SeniorMetaReviewersJson?JSON.parse(e.SeniorMetaReviewersJson):[],I.completed=e.Completed,I.percentage=e.Percentage,I.numberOfReviewerNotes=e.NumberOfReviewerNotes,I.assignment=e.Assignment,I.completedReviewRating=e.CompletedReviewRating,I.percentageReviewRating=e.PercentageReviewRating,I.metaReviewerNoteId=e.MetaReviewerNoteId,I.metaReviewerNoteSubmitted=e.MetaReviewerNoteSubmitted,I.allowMetaReviewerToSeeReviewingDataAfterReviewing=e.AllowMetaReviewerToSeeReviewingDataAfterReviewing,I.doNotAllowMetaReviewerToEditNote=e.DoNotAllowMetaReviewerToEditNote,I.doNotEnableMetaReviewerNote=e.DoNotShowMetaReviewerNote,I.showMetaReviewerIdentityToReviewer=a,I.showReviewerIdentityToMetaReviewer=n,I.showMetaReviewerIdentityToOtherMetaReviewer=i,I.suggestionsEnabled=r,I.editSuggestionNotAllowed=s,I.allowMetaReviewerToAssignSubmissionToReviewer=u,I.allowMetaReviewerToInviteReviewers=l,I.allowMetaReviewerToEnableDiscussion=d,I.allowMetaReviewerToEnableAuthorFeedback=c,I.allowMetaReviewerToSeeOtherMetaReview=p,I.allowMetaReviewerToEmailAuthor=m,I.doNotAllowSharedMetaReviewerToEditRecommendation=w,I.doNotAllowMetaReviewerToEmailReviewer=f,I.doNotAllowMetaReviewerToEmailReviewerForWithdrawn=h,I.doNotAllowMetaReviewerToEmailReviewerForDeskReject=g,I.doNotAllowMetaReviewerToEmailSeniorMetaReviewer=v,I.reviewQuestions=S,I.metaReviewQuestions=y,I.sharedMetaReviewerRecommendation=ko.observable(e.SharedMetaReviewerRecommendation).autoMap(),I.sharedMetaReviewerRecommendationOptionId=ko.observable(e.SharedMetaReviewerRecommendationOptionId).autoMap(),I.agreeWithMetaReview=ko.observable(e.AgreeWithMetaReview).autoMap(),I.recommendationComment=ko.observable(e.RecommendationComment).autoMap(),I.lastReviewUpdateDate=ko.pureComputed(function(){return e.LastReviewUpdateDate&&Y.formatUndefinableDateTime(e.LastReviewUpdateDate)||null}),I.chairNoteColumns=[],null!==e.CNQ01Id?I.chairNoteColumns.push(new Y.QuestionResponseColumn(e.CNQ01Id,e.CNQ01Text)):I.chairNoteColumns.push(null),null!==e.CNQ02Id?I.chairNoteColumns.push(new Y.QuestionResponseColumn(e.CNQ02Id,e.CNQ02Text)):I.chairNoteColumns.push(null),null!==e.CNQ03Id?I.chairNoteColumns.push(new Y.QuestionResponseColumn(e.CNQ03Id,e.CNQ03Text)):I.chairNoteColumns.push(null),null!==e.CNQ04Id?I.chairNoteColumns.push(new Y.QuestionResponseColumn(e.CNQ04Id,e.CNQ04Text)):I.chairNoteColumns.push(null);for(var T=0,R=[],T=0;T<b.length;T++)R.push(I.chairNoteColumns[T]);I.chairNoteColumns=R;var C={};null!==e.MRNQ01Id&&(C[1]=new Y.QuestionResponseColumn(e.MRNQ01Id,e.MRNQ01Text)),null!==e.MRNQ02Id&&(C[2]=new Y.QuestionResponseColumn(e.MRNQ02Id,e.MRNQ02Text)),null!==e.MRNQ03Id&&(C[3]=new Y.QuestionResponseColumn(e.MRNQ03Id,e.MRNQ03Text)),null!==e.MRNQ04Id&&(C[4]=new Y.QuestionResponseColumn(e.MRNQ04Id,e.MRNQ04Text)),null!==e.MRNQ05Id&&(C[5]=new Y.QuestionResponseColumn(e.MRNQ05Id,e.MRNQ05Text)),null!==e.MRNQ06Id&&(C[6]=new Y.QuestionResponseColumn(e.MRNQ06Id,e.MRNQ06Text)),null!==e.MRNQ07Id&&(C[7]=new Y.QuestionResponseColumn(e.MRNQ07Id,e.MRNQ07Text)),null!==e.MRNQ08Id&&(C[8]=new Y.QuestionResponseColumn(e.MRNQ08Id,e.MRNQ08Text)),null!==e.MRNQ09Id&&(C[9]=new Y.QuestionResponseColumn(e.MRNQ09Id,e.MRNQ09Text)),null!==e.MRNQ10Id&&(C[10]=new Y.QuestionResponseColumn(e.MRNQ10Id,e.MRNQ10Text));var A=[];for(T=0;T<k.length;T++)A.push(C[k[T].Order]);I.metaReviewerNoteColumns=A,I.aggregateColumns=[],I.sharedSubmissionInfo=[];var N=e.SharedSubmissionInfoJson&&JSON.parse(e.SharedSubmissionInfoJson);if(N)for(T=0;T<N.length;T++)I.sharedSubmissionInfo.push(Y.autoMap(new te,N[T]));for(T=0;T<M.length;T++){var E="Q0"+M[T].Order;null!==e[E+"Id"]?I.aggregateColumns.push(new Y.AggregateColumn(E,e[E+"Id"],e[E+"Avg"],e[E+"Min"],e[E+"Max"],e[E+"Spread"])):I.aggregateColumns.push(new Y.AggregateColumn(E,null,null,null,null,null))}var U=e&&e.InlineReviewJson&&JSON.parse(e.InlineReviewJson)||[],D={};for(T=0;T<U.length;T++)D[U[T].HiddenNumber]=U[T];var q=e&&e.InlineMetaReviewJson&&JSON.parse(e.InlineMetaReviewJson)||[],F={};for(T=0;T<q.length;T++)F[q[T].HiddenNumber]=q[T];I.suggestions=[];var P=e.SuggestionsJson?JSON.parse(e.SuggestionsJson):[];if(P&&0<P.length)for(T=0;T<P.length;T++){var x=P[T];x&&I.suggestions.push(new Y.Suggestion(x))}var O,B,Q,j,V=0,L=e.ReviewersJson?JSON.parse(e.ReviewersJson):[];if(I.reviewers=[],L&&0<L.length)for(T=0;T<L.length;T++){var $=L[T];if($){if(O=[],I.reviewQuestions&&0<I.reviewQuestions.length){for(Q=D[$.HiddenNumber]&&D[$.HiddenNumber].Question||[],B={},V=0;V<Q.length;V++)B[(j=Q[V]).QuestionOrder]=j;for(V=0;V<I.reviewQuestions.length;V++){var z=I.reviewQuestions[V];O.push(B[z.Order])}}$=Y.autoMap(new Z(O),$);I.reviewers.push($)}}var J=e.MetaReviewersJson?JSON.parse(e.MetaReviewersJson):[];if(I.metaReviewers=[],J&&0<J.length)for(T=0;T<J.length;T++){var G=J[T];if(G){if(O=[],I.metaReviewQuestions&&0<I.metaReviewQuestions.length){for(Q=F[G.HiddenNumber]&&F[G.HiddenNumber].Question||[],B={},V=0;V<Q.length;V++)B[(j=Q[V]).QuestionOrder]=j;for(V=0;V<I.metaReviewQuestions.length;V++){var H=I.metaReviewQuestions[V];O.push(B[H.Order])}}G=Y.autoMap(new ee(O),G);I.metaReviewers.push(G)}}if(I.status=e.Status,I.statusPropertyIsRevision=e.StatusPropertyIsRevision,I.statusPropertyIsWithdrawn=e.StatusPropertyIsWithdrawn,I.statusPropertyIsDeskReject=e.StatusPropertyIsDeskReject,I.allowOnlyRevisionForReviewing=e.AllowOnlyRevisionForReviewing,I.metaReviewerLabel=function(){return e.HiddenNumber?"Meta-Reviewer #"+e.HiddenNumber:""},I.metaReviewerTags=e.MetaReviewerTags,I.downloadLink=function(){return(I.isShared()?t.sharedSubmissionFileWithSupplemental:t.submissionFileWithSupplemental).format(I.id)},I.editMetaReviewUrl=function(){return I.metaReviewId?t.metaReviewDetails.format(I.metaReviewId):t.metaReviewCreate.format(I.id)},I.editMetaReviewerNoteUrl=function(){return I.metaReviewerNoteId?t.metaReviewerNoteDetails.format(I.metaReviewerNoteId):t.metaReviewerNoteCreate.format(I.id)},I.editMetaReviewerNoteText=function(){return I.metaReviewerNoteSubmitted?"Edit":"Add"},I.editMetaReviewerNoteTooltip=function(){return I.reviewerNoteSubmitted?"Edit note":"Add note"},I.viewMetaReviewerNoteUrl=function(){return I.metaReviewerNoteId?t.metaReviewerNoteView.format(I.metaReviewerNoteId):""},I.editSuggestionsUrl=function(){return t.suggestions.format(I.id)},I.assignReviewersUrl=function(){return t.assignReviewers.format(I.id)},I.viewMetaReviewUrl=function(){return I.metaReviewId?t.metaReviewView.format(I.metaReviewId):null},I.isShared=ko.pureComputed(function(){return this.sharedSubmissionInfo&&0<this.sharedSubmissionInfo.length},I),I.allowAccessFeed=ko.pureComputed(function(){return(this.assigned||this.isShared())&&this.submissionEnabledForDiscussion()&&(this.discussionEnabled||this.allowMetaReviewerToSeeReviewingDataAfterReviewing)},I),I.allowDiscussion=ko.pureComputed(function(){return(this.assigned||this.isShared())&&this.submissionEnabledForDiscussion()&&this.discussionEnabled},I),I.allowContactingReviewerForDiscussion=ko.pureComputed(function(){return this.assigned&&this.submissionEnabledForDiscussion()&&this.discussionEnabled},I),I.viewAllMetaReviewsUrl=function(){return I.allowMetaReviewerToSeeOtherMetaReview||I.isShared()?t.metaReviewViewAll.format(I.id):null},I.reviewingDetailsUrl=function(){return I.allowAccessFeed()?t.reviewingDetailsUrl.format(I.id):null},I.viewUrl=function(){return t.submissionSummary.format(I.id)},I.viewOriginalUrl=function(){return I.originalSubmissionId?t.submissionSummary.format(I.originalSubmissionId):null},I.cameraReadySummaryUrl=function(){return t.cameraReadySummary.format(I.id)},I.inviteReviewerUrl=function(){return t.inviteReviewer.format(I.id)},I.reviewerEmailUrl=function(e){return t.reviewerEmail.format(I.id,e)},I.assignedReviewerEmailUrl=function(e){return t.assignedReviewerEmail.format(I.id,e)},I.metaReviewerEmailUrl=function(e){return t.metaReviewerEmail.format(I.id,e)},I.assignedMetaReviewerEmailUrl=function(e){return t.assignedMetaReviewerEmail.format(I.id,e)},I.seniorMetaReviewerEmailUrl=function(){return t.seniorMetaReviewerEmail.format(I.id)},I.canSendMetaReviewerEmail=function(e){return I.id!==e},I.authorEmailUrl=function(){return t.authorEmail.format(I.id)},I.showFeed=function(){return t.feed.format(I.id)},I.viewAuthorFeedbackUrl=function(){return I.authorFeedbackId&&(I.assigned||I.isShared())?t.feedback.format(I.authorFeedbackId):null},I.setAuthorFeedbackEnable=function(e){var t=!e.isAuthorFeedback(),o={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"EnableDisableAuthorFeedback"),method:"POST",showProgressIndicator:!0,data:{Enable:t,SubmissionId:e.id}};K.request(o,function(){e.isAuthorFeedback(t),Y.addMessage("Author feedback for submission {0} has been {1}!".format(e.id,t?"enabled":"disabled"))})},I.setDiscussionEnable=function(e){var t=!e.submissionEnabledForDiscussion(),o={requestUri:Y.odata.getUrl(Y.odata.entitySet.submissions,null,"EnableDisableDiscussion"),method:"POST",showProgressIndicator:!0,data:{Enable:t,SubmissionId:e.id}};K.request(o,function(){e.submissionEnabledForDiscussion(t),Y.addMessage("Discussion for submission {0} has been {1}!".format(e.id,t?"enabled":"disabled"))})},I.emailTrackChairUrl=function(){return t.emailTrackChair.format(I.id)},I.emailAllReviewersUrl=function(e){var t="Id eq {0}".format(I.id);e.navigateEmailReviewersUrl(t,!0,!1)},I.emailNotCompletedReviewersUrl=function(e){var t="Id eq {0}".format(I.id);e.navigateEmailReviewersUrl(t,!1,!1)},I.emailNoPostsReviewersUrl=function(e){var t="Id eq {0}".format(I.id);e.navigateEmailReviewersUrl(t,!1,!0)},I.isConflictSelectedText=ko.pureComputed(function(){for(var e=0;e<I.metaReviewerConflictReasons.length;e++)if(I.metaReviewerConflictReasons[e].isChecked())return"Yes";return"No"}),I.metaReviewerConflictReasons=[],o&&o.conflictDeclarationAllowedTracks&&!0===o.conflictDeclarationAllowedTracks[I.trackId]&&o.conflictReasons)for(T=0;T<o.conflictReasons.length;T++){var W=o.conflictReasons[T],_=Y.autoMap(new X(I.id),W);_.isChecked(e&&e.ConflictReasonIds&&-1<e.ConflictReasonIds.indexOf(W.Id)),I.metaReviewerConflictReasons.push(_)}}function C(t,o){var a=o,n=this;n.submissionCount=ko.observable(0),n.selectedMetaBid=ko.observable(1),n.metaBidOptions=[{name:"Not Entered",id:1},{name:"Not Willing",id:2},{name:"In A Pinch",id:3},{name:"Willing",id:4},{name:"Eager",id:5}],n.submitEnabled=ko.computed(function(){return!(n.submissionCount()<=0)&&(null!==n.selectedMetaBid()&&void 0!==n.selectedMetaBid())}),n.changeMetaBid=function(){var e={Filter:n.filter,MetaBid:n.selectedMetaBid(),ShowMetaBidding:o.showMetaBidding(),ShowMetaReviewing:o.showMetaReviewing()},e={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"BulkChangeMetaBid"),method:"POST",showProgressIndicator:!0,data:{Request:e}};K.request(e,function(e){a.refresh(),setTimeout(function(){Y.addMessage("The bid of selected submissions have been changed.")},500),x(t).modal("hide")})},n.bind=function(){ko.applyBindings(n,t)},n.filter=null,n.editInDialog=function(e){e={Filter:n.filter=e,ShowMetaBidding:o.showMetaBidding(),ShowMetaReviewing:o.showMetaReviewing()},e={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"SubmissionCountFilteredMetaBidding"),method:"POST",data:{Request:e}};K.request(e,function(e){n.submissionCount(e.value),n.selectedMetaBid(null),x(t).modal("show")})}}function A(o,a){var e=this;e.submissionCount=ko.observable(0),e.bind=function(){ko.applyBindings(e,o)},e.editInDialog=function(e){e={Filter:e,ShowMetaBidding:a.showMetaBidding(),ShowMetaReviewing:a.showMetaReviewing()},e={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"BidSummaryFilteredMetaBidding"),method:"POST",data:{Request:e}};K.request(e,function(e){null!=a.bidChart&&a.bidChart.destroy();var t=x("#bidChart").get(0).getContext("2d");a.bidChart=new Chart(t,{type:"bar",data:{labels:e.XLabels,datasets:[{data:e.YValues,backgroundColor:["blue","blue","blue","blue","blue"]}]},options:{plugins:{legend:{display:!1}},scales:{y:{display:!0,type:"logarithmic"}}}}),x(o).modal("show")})}}Y.MetaBiddingPage=function(e,t,o,a,n,i,r,s,u,l,d,c,p,m,f,h,g,v,w,b,k){var M=this;M.bidChart=null,M.chairNoteQuestions=s,M.metaReviewerNoteQuestions=u,M.questions=l,M.$element=x(e),M.conference=window.cmt3.conference.name,M.page=ko.observable(1),M.top=ko.observable(25),M.sort=ko.observable("Id"),M.controller=t,M.metaReviewerId=i,M.filters=[],M._total=ko.observable(0),M.selected=ko.observable(0),M.metaBiddingModels=ko.observableArray(),M.metaBid=ko.observable(),M.editingMetaBid=ko.observable(!1),M.listen(),M.Pager=ko.pager(M.selected,M.top),M.Pager().CurrentPage.subscribe(function(){M.page(M.Pager().CurrentPage()),M.show()}),M.pageUrls=a,M.showMetaReviewerIdentityToReviewer=ko.observable(!1),M.showReviewerIdentityToMetaReviewer=ko.observable(!1),M.showMetaReviewerIdentityToOtherMetaReviewer=ko.observable(!1),M.suggestionsEnabled=ko.observable(!1),M.allowMetaReviewerToEnableDiscussion=ko.observable(!1),M.allowMetaReviewerToEnableAuthorFeedback=ko.observable(!1),M.allowMetaReviewerToRateReview=ko.observable(!1),M.doNotAllowSharedMetaReviewerToEditRecommendation=ko.observable(!1),M.doNotAllowMetaReviewerToEmailReviewer=ko.observable(!1),M.toggleableColumnsContainer=new Y.ToggleableColumnsContainer(M.key),M.reviewQuestions=d,M.metaReviewQuestions=p,M.toggleableColumnsContainer.setDefaultHiddenColumnKeys(o),M.showInlineReview=function(e){return c&&0<c.length&&(!e||-1!==c.indexOf(e))},M.showReviewingDataAfterReviewing=function(e){return h&&-1!==h.indexOf(e)},M.hasMetaReviewerNoteQuestion=function(e){return v&&-1!==v.indexOf(e)},M.hasMetaReviewerQuestion=function(e){return w&&-1!==w.indexOf(e)},M.hasReviewerNoteQuestion=function(e){return g&&-1!==g.indexOf(e)},M.showInlineMetaReview=function(e){return m&&0<m.length&&(!e||-1!==m.indexOf(e))},M.showTags=function(){return f&&0<f.length},M.tagOptionNamesProvider=function(){return f},M.importMetaReviewsLink=function(){return M.pageUrls.importMetaReviews},M.hasTrackChair=function(e){return b&&-1!==b.indexOf(e)},M.downloadSubmissionFileLink=function(){return(M.isShared()?M.pageUrls.sharedSubmissionFile:M.pageUrls.submissionFile).format("")},M.downloadAllLink=function(){return(M.isShared()?M.pageUrls.sharedSubmissionFileWithSupplemental:M.pageUrls.submissionFileWithSupplemental).format("")},M.showWelcomeMessage=function(){x(document.getElementById("welcomeMessageDialog")).modal("show")},M.submissionComparisonLink=function(){return M.pageUrls.submissionComparison.format("")};var S=null;M.changeMetaBid=function(e){null===S&&(S=new C(document.getElementById("changeMetaBidDialog"),M)).bind(),S.editInDialog(e)},M.isShared=function(){return"MetaSharedModels"===M.controller},M.showMetaBidding=function(){return"MetaBiddingModels"===M.controller||"MetaBiddingReviewModels"===M.controller},M.showMetaReviewing=function(){return"MetaReviewModels"===M.controller||"MetaBiddingReviewModels"===M.controller};var y=null;M.metaBidSummary=function(e){null===y&&(y=new A(document.getElementById("metaBidSummaryDialog"),M)).bind(),y.editInDialog(e)},M.params=n,M.recommendationOptionsProvider=ko.pureComputed(function(){return r}),M.subjectAreasProvider=ko.pureComputed(function(){return k});var I=null;function T(n){var i=this;i.recommendationComment=ko.observable("").extend({maxLength:300}),i.bind=function(){ko.applyBindings(i,n)},i.recommendationOptions=ko.observableArray([]),i.viewRecommendationOptions={},i.selectedSharedMetaReviewerRecommendation=ko.observable(null),i.sid=ko.observable(0),i.agreeWithMetaReview=ko.observable(!1),i.data=null,i.editInDialog=function(a){i.data=a,i.recommendationComment(a.recommendationComment()),i.sid(a.id),i.recommendationOptions([]),i.viewRecommendationOptions={},i.agreeWithMetaReview(!1),K.read(Y.odata.getUrl(Y.odata.entitySet.sharedMetaReviewerRecommendationOptions+"?$filter=TrackId eq "+a.trackId),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t],o=Y.autoMap(new R,o);i.recommendationOptions.push(o),i.viewRecommendationOptions[o.id]=o}i.selectedSharedMetaReviewerRecommendation(a.sharedMetaReviewerRecommendationOptionId()),i.agreeWithMetaReview(a.agreeWithMetaReview()),x(n).modal("show")})},i.saveRecommendation=function(){var e={requestUri:Y.odata.getUrl(Y.odata.entitySet.submissions,null,"ChangeSharedMetaReviewerRecommendation"),method:"POST",showProgressIndicator:!0,data:{Request:{SubmissionId:i.sid(),RecommendationOptionId:i.selectedSharedMetaReviewerRecommendation()||null,AgreeWithMetaReview:i.agreeWithMetaReview(),RecommendationComment:i.recommendationComment()}}};K.request(e,function(e){e&&(i.data.sharedMetaReviewerRecommendation(i.viewRecommendationOptions[e.value].name),i.data.sharedMetaReviewerRecommendationOptionId(e.value),i.data.agreeWithMetaReview(i.agreeWithMetaReview()),i.data.recommendationComment(i.recommendationComment())),x(n).modal("hide")})}}M.selectSharedMetaReviewerRecommendationWithComment=function(e,t){null===I&&(I=new T(document.getElementById("editRecommendationDialog"))).bind(),I.editInDialog(e)}},Y.MetaBiddingPage.prototype={key:"metabiddings",listen:function(){var e=this;x(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o,a="";return x.each(this.filters,function(e,t){t.getValue()&&(o=t.getValue(),"Title"===t.field&&(o="({0} or {1})".format(o,o.replace("Title","Abstract"))),a+=""===a?o:" and "+o)}),a},odataRequest:function(e,o,t){e={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",showProgressIndicator:t,method:"POST",data:{requests:[{url:e,method:"GET",headers:{Accept:"application/json"}}]}};K.request(e,function(e){var t=e.responses[0].body,e=t["@odata.count"],t=t.value;o(t,e)},function(e){window.cmt3.logger.log(e.message)},K.batchHandler)},show:function(){var U=this;if(!U.initialized)return x.Deferred().reject().promise();Y.showProgress();var D=U.sort(),q=U.top(),F=U.skip(),P=U.getFilter(),e=D?"&$orderby="+D:"",t=q?"&$top="+q:"",o=F?"&$skip="+F:"",a=P?"&$filter="+encodeURIComponent(P):"",n=new x.Deferred(function(){U.odataRequest("/api/odata/"+U.conference+"/"+U.controller+"?$count=true"+e+a+o+t,function(e,t){n.resolve({items:e,count:t})},!1)}),i=new x.Deferred(function(){U.odataRequest(Y.odata.getUrl(Y.odata.entitySet.metaReviewSettings),function(e,t){i.resolve({settings:e,settingsCount:t})},!1)});return x.when(n,i).done(function(e,t){var o=t.settings,t=e.items;Y.page.appendToState(U.key,{sort:D,top:q,skip:F,filter:P});var a=[],n=[],i=[],r=[],s=[],u=[],l=[],d=[],c=[],p=[],m=[],f=[],h=[],g=[],v=[],w=[],b=[],k=[],M=[],S=!1,y=!1,I=!1,T=!1,R=!1,C=!1,A=!1,N=!1,E=!1;x.each(o,function(e,t){i[t.TrackId]=t.ShowMetaReviewerIdentityToReviewer,r[t.TrackId]=t.ShowReviewerIdentityToMetaReviewer,s[t.TrackId]=t.ShowMetaReviewerIdentityToOtherMetaReviewer,u[t.TrackId]=t.AllowMetaReviewerToAssignSubmissionToReviewer,l[t.TrackId]=t.AllowMetaReviewerToInviteReviewers,d[t.TrackId]=t.AllowMetaReviewerToEnableDiscussion,c[t.TrackId]=t.AllowMetaReviewerToEnableAuthorFeedback,p[t.TrackId]=t.AllowMetaReviewerToSeeOtherMetaReview,m[t.TrackId]=t.AllowMetaReviewerToEmailAuthor,w[t.TrackId]=t.DoNotAllowMetaReviewerToEmailReviewer,b[t.TrackId]=t.DoNotAllowMetaReviewerToEmailReviewerForWithdrawn,k[t.TrackId]=t.DoNotAllowMetaReviewerToEmailReviewerForDeskReject,f[t.TrackId]=t.AllowMetaReviewerToRateReview,h[t.TrackId]=t.SuggestionsEnabled,g[t.TrackId]=t.EditSuggestionNotAllowed,v[t.TrackId]=t.DoNotAllowSharedMetaReviewerToEditRecommendation,M[t.TrackId]=t.DoNotAllowMetaReviewerToEmailSeniorMetaReviewer}),x.each(t,function(e,t){var o=new O(t,U.pageUrls,U.params,i[t.TrackId],r[t.TrackId],s[t.TrackId],h[t.TrackId],g[t.TrackId],u[t.TrackId],l[t.TrackId],d[t.TrackId],c[t.TrackId],p[t.TrackId],m[t.TrackId],w[t.TrackId],b[t.TrackId],k[t.TrackId],M[t.TrackId],v[t.TrackId],U.chairNoteQuestions,U.metaReviewerNoteQuestions,U.questions,U.reviewQuestions&&U.reviewQuestions[t.TrackId],U.metaReviewQuestions&&U.metaReviewQuestions[t.TrackId]);a[o.id]=o,n.push(o),S|=i[t.TrackId],y|=r[t.TrackId],I|=s[t.TrackId],T|=h[t.TrackId],R|=d[t.TrackId],C|=c[t.TrackId],A|=f[t.TrackId],N|=v[t.TrackId],E|=w[t.TrackId]}),U.showMetaReviewerIdentityToReviewer(S),U.showReviewerIdentityToMetaReviewer(y),U.showMetaReviewerIdentityToOtherMetaReviewer(I),U.suggestionsEnabled(T),U.allowMetaReviewerToEnableDiscussion(R),U.allowMetaReviewerToEnableAuthorFeedback(C),U.allowMetaReviewerToRateReview(A),U.doNotAllowSharedMetaReviewerToEditRecommendation(N),U.doNotAllowMetaReviewerToEmailReviewer(E),U.metaBiddingModels(n),0===U._total()&&U._total(e.count),U.selected(e.count),U.toggleableColumnsContainer&&U.toggleableColumnsContainer.loadState(),U.$element.show()}).always(Y.hideProgress)},scroll:function(){x(window).scrollTop()===x(document).height()-x(window).height()&&self.show()},selectMetaBid:function(e,t){var o=x(t.target),a=ko.contextFor(t.target),t=x(x("#metaBidTemplate").text());o.hide(),o.after(t);o=a.$parent.getMetaBids(e.id,o,t);ko.applyBindings(o,t[0]),t.find("select").focus()},getMetaBids:function(t,o,a){var n=[{name:"Not Entered",id:1},{name:"Not Willing",id:2},{name:"In A Pinch",id:3},{name:"Willing",id:4},{name:"Eager",id:5}],e={options:ko.observableArray(n),selectedMetaBid:ko.observable()};return e.selectedMetaBid.subscribe(function(e){e={requestUri:"/api/odata/"+window.cmt3.conference.name+"/MetaBiddingModels("+t+")",method:"PATCH",headers:{Prefer:"return-content"},progressIndicatorTimeout:0,data:{MetaBidId:e[0]}};K.request(e,function(e){a.remove(),o.text(n[e.MetaBidId-1].name),o.show()})}),e},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){x.each(this.filters,function(e,t){t.reset()}),Y.announce(Y.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){x("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),x(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=x(t.target).attr("size"),t=parseInt(t);this.top(t),Y.announce(Y.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!==this.top()&&1!==this.page()&&(this.page(this.page()-1),this.show())},next:function(){0===this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=x(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=x(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(x("th[data-sort]").each(function(){x(this).find("i").removeClass("icon-arrow-up"),x(this).find("i").removeClass("icon-arrow-down"),x(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&Y.announce(Y.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()},showAbstract:function(e,t){ko.contextFor(t.target).$parent;var o=x(t.target),t=o.next();t.is(":visible")?(t.hide(),o.text("Show abstract")):(t.show(),o.text("Hide abstract"))},bulkChangeMetaBid:function(e,t){t=Y.GetEventFilter(t);this.changeMetaBid(t)},showMetaBidSummary:function(e,t){t=Y.GetEventFilter(t);this.metaBidSummary(t)},bulkEnableDisableAuthorFeedback:function(e,t,o){var a=o?"enabling":"disabling";confirm("Bulk author feedback {0} will be performed for selected items you are assigned to.".format(a))&&(t=Y.GetEventFilter(t),o={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"BulkEnableDisableAuthorFeedback"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},K.request(o,function(){Y.addMessage("Bulk author feedback {0} has been completed successfully.".format(a)),location.reload()}))},openAllReviews:function(e,t,o,a){t=Y.GetEventFilter(t),a={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"GetIds"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Shared:a}};K.request(a,function(e){var t=e.value.join("/"),e="/"+window.cmt3.conference.name+"/Submission/"+(o?"AllReviewsSideBySide":"AllReviews");Y.url.navigateTo(e,{ids:t})})},bulkEnableDisableDiscussion:function(e,t,o){var a=o?"enabled":"disabled";confirm("The selected assignments will be {0} for discussion.".format(a))&&(t=Y.GetEventFilter(t),o={requestUri:Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"BulkDiscussionEnableDisable"),method:"POST",showProgressIndicator:!0,data:{Filter:t,Enable:o}},K.request(o,function(){Y.addMessage("Bulk discussion {0} has been completed successfully.".format(a)),location.reload()}))},exportReviewerSubmissionComparisons:function(e,t){var o=Y.GetEventFilter(t),t=Y.odata.getUrl(Y.odata.entitySet.metaBiddingReviewModels,null,"ExportReviewerSubmissionComparisons");Y.page.post(t,{Filter:o,Shared:!1})},navigateEmailReviewersUrl:function(e,t,o){var a="/"+window.cmt3.conference.name+"/Submission/SendEmail/3";Y.url.navigateTo(a,{filter:0<e.length?e:null,all:t,checkDiscussion:o})},bulkEmailAllReviewers:function(e,t){t=Y.GetEventFilter(t);this.navigateEmailReviewersUrl(t,!0,!1)},bulkEmailNotCompletedReviewers:function(e,t){t=Y.GetEventFilter(t);this.navigateEmailReviewersUrl(t,!1,!1)},bulkEnableAuthorFeedback:function(e,t){this.bulkEnableDisableAuthorFeedback(e,t,!0)},bulkDisableAuthorFeedback:function(e,t){this.bulkEnableDisableAuthorFeedback(e,t,!1)},bulkEnableDiscussion:function(e,t){this.bulkEnableDisableDiscussion(e,t,!0)},bulkDisableDiscussion:function(e,t){this.bulkEnableDisableDiscussion(e,t,!1)},openAllReviewsPrinterFriendly:function(e,t){this.openAllReviews(e,t,!1,!1)},openAllReviewsSideBySide:function(e,t){this.openAllReviews(e,t,!0,!1)},openAllReviewsPrinterFriendlyShared:function(e,t){this.openAllReviews(e,t,!1,!0)},openAllReviewsSideBySideShared:function(e,t){this.openAllReviews(e,t,!0,!0)}}}(window.jQuery,window.app,window.OData),function(r,s,o){"use strict";function u(e,t){var o=this;o.meta=t,o.conference=window.cmt3.conference.name,o.controller=o.meta?"MetaPapersDetails":"PapersDetails",o._sort=ko.observable("Id"),o._total=ko.observable(0),o._selected=ko.observable(0),o._items=ko.observableArray(e),o.filters=[],o.bind(),o.start()}function l(e,t){var o=this;o.meta=t,o.conference=window.cmt3.conference.name,o.controller=o.controller=o.meta?"MetaReviewersDetails":"ReviewersDetails",o._sort=ko.observable("Id"),o._total=ko.observable(0),o._selected=ko.observable(0),o._items=ko.observableArray(e),o.filters=[],o.bind(),o.start()}s.ConfirmationPage=function(e){this.meta=e,this.conference=window.cmt3.conference.name,this.start()},s.ConfirmationPage.prototype={prefix:function(){return this.meta?"Meta":""},start:function(){var t=this;t.show("papers"),r('a[data-toggle="tab"]').on("shown.bs.tab",function(e){t.filters=[];e=r(e.target).attr("href").substring(1);t.show(e)})},assign:function(){r.when(r.ajax({url:"/"+this.conference+"/Assignment/{0}Assign".format(this.prefix()),dataType:"json"}))},go:function(e){window.location="/"+this.conference+"/Assignment/"+e},again:function(){var t=this;r.when(r.ajax({type:"POST",url:"/"+t.conference+"/Assignment/{0}StartOver".format(t.prefix())})).done(function(e){e.code&&("error"==e.code&&window.cmt3.logger.warn("[start] server return: "+e.message),"redirect"==e.code&&t.go(e.action)),window.cmt3.logger.error("[start] unexpected response")}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})},update:function(){},show:function(n){var i=this;r.when(r.ajax({url:"/"+i.conference+"/Assignment/{0}".format(i.prefix())+s.capitalize(n)+"Detail",dataType:"json"})).done(function(e){var t,o,a;e?e.code?("error"==e.code&&window.cmt3.logger.info("["+n+"] server said: "+e.message),"redirect"==e.code&&i.go(e.action),window.cmt3.logger.info("["+n+"] unexpected response")):(t=s.capitalize(n)+"Detail",a=r("#"+n),o=r(a.text()),a=null,a=new("PapersDetail"==t?u:l)(e,i.meta),r(".grid:visible").empty().append(o),ko.applyBindings(a,o[0]),window.cmt3.logger.info("["+n+"] view succefully changed")):window.cmt3.logger.info("["+n+"] empty response")}).fail(function(e){window.cmt3.logger.error("["+n+"] server side error: "+e.status)})}},u.prototype={bind:function(){r(document).on("data.filter",r.proxy(this.render,this))},start:function(){var t=this;o.read({requestUri:"/api/odata/"+t.conference+"/"+t.controller+"?$count=true&$top=0",dataType:"json"},function(e){t._total(e["@odata.count"])},function(e){window.cmt3.logger.error("[start] server side error: "+e.message)})},sort:function(e,t){var o=this,a=r(t.currentTarget),t=a.attr("sortby");a.hasClass("selected")?o._sort().match("desc$")?(o._sort(t+" asc"),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up")):(o._sort(t+" desc"),a.find("i").removeClass("icon-chevron-up"),a.find("i").addClass("icon-chevron-down")):(r("th[sortby]").each(function(){r(o).find("i").removeClass("icon-chevron-up"),r(o).find("i").removeClass("icon-chevron-down"),r(o).removeClass("selected")}),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up"),a.addClass("selected"),o._sort(t+" asc")),o.render()},getFilter:function(){var o="";return r.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},render:function(){var n=this,e="&$orderby="+n._sort(),t=""!=n.getFilter()?"&$filter="+encodeURIComponent(n.getFilter()):"",t={method:"POST",requestUri:"/api/odata/"+n.conference+"/$batch",headers:{Accept:"application/json"},data:{requests:[{method:"GET",url:"/api/odata/"+n.conference+"/"+n.controller+"?"+("$count=true"+e+t)+"&$select=Id,Title,AssignedCount,NewCount&$expand=New($select=Email,Name),Assigned($select=Email,Name)",headers:{Accept:"application/json"}}]}};o.request(t,function(e){var t=e&&e.responses&&e.responses[0]&&e.responses[0].body,o=t&&t["@odata.count"],a=t&&t.value,e=!0;t?(o?(n._selected(o),n.saved=!1):(window.cmt3.logger.warn("[batch] can't calculate response count"),e=!1),a&&r.inArray(a)?(n._items([]),n._items(a),n.saved=!1):(window.cmt3.logger.warn("[batch] resquest doesn't contain data"),e=!1),e&&window.cmt3.logger.info("[batch] data updated successfully")):window.cmt3.logger.error("[batch] unexpected response")},function(e){window.cmt3.logger.error("[batch] server side error: "+e.message)},o.batchHandler)}},l.prototype={bind:function(){r(document).on("data.filter",r.proxy(this.render,this))},start:function(){var t=this;o.read({requestUri:"/api/odata/"+t.conference+"/"+t.controller+"?$count=true&$select=Id",dataType:"json"},function(e){t._total(e["@odata.count"])},function(e){window.cmt3.logger.error("[start] server side error: "+e.message)})},sort:function(e,t){var o=this,a=r(t.currentTarget),t=a.attr("sortby");a.hasClass("selected")?o._sort().match("desc$")?(o._sort(t+" asc"),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up")):(o._sort(t+" desc"),a.find("i").removeClass("icon-chevron-up"),a.find("i").addClass("icon-chevron-down")):(r("th[sortby]").each(function(){r(o).find("i").removeClass("icon-chevron-up"),r(o).find("i").removeClass("icon-chevron-down"),r(o).removeClass("selected")}),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up"),a.addClass("selected"),o._sort(t+" asc")),o.render()},getFilter:function(){var o="";return r.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},render:function(){var n=this,e="&$orderby="+n._sort(),t=""!=n.getFilter()?"&$filter="+encodeURIComponent(n.getFilter()):"",t={method:"POST",requestUri:"/api/odata/"+n.conference+"/$batch",headers:{Accept:"application/json"},data:{requests:[{method:"GET",url:"/api/odata/"+n.conference+"/"+n.controller+"?"+("$count=true"+e+t)+"&$select=Id,Name,Email,AssignedCount,NewCount&$expand=New($select=Id,Title),Assigned($select=Id,Title)",headers:{Accept:"application/json"}}]}};o.request(t,function(e){var t=e&&e.responses&&e.responses[0]&&e.responses[0].body,o=t&&t["@odata.count"],a=t&&t.value,e=!0;t?(o?(n._selected(o),n.saved=!1):(window.cmt3.logger.warn("[batch] can't calculate response count"),e=!1),a&&r.inArray(a)?(n._items([]),n._items(a),n.saved=!1):(window.cmt3.logger.warn("[batch] resquest doesn't contain data"),e=!1),e&&window.cmt3.logger.info("[batch] data updated successfully")):window.cmt3.logger.error("[batch] unexpected response")},function(e){window.cmt3.logger.error("[batch] server side error: "+e.message)},o.batchHandler)}}}(window.jQuery,window.app,window.OData),function(r,a,o){"use strict";function s(e){this.id=e.Id,this.title=e.Title,this.track=e.Track,this.status=e.Status,this.assigned=e.Assigned,this.completed=e.Percentage}a.PapersPage=function(e,t,o){var a=this;a.meta=o,a.$element=r(e),a.conference=window.cmt3.conference.name,a.controller=t,a.scope="autoa",a.state={},a.filters=[],a.saved=!1,a._sort=ko.observable("Id"),a._total=ko.observable(0),a._selected=ko.observable(0),a._items=ko.observableArray([]),a._assign=ko.observable(0),a._assign.hasError=ko.observable(!1),a._increase=ko.observable(0),a._increase.hasError=ko.observable(!1),a._direction=ko.observable("inc"),a.bind(),a.start()},a.PapersPage.prototype={getKey:function(){return this.meta?"METAAUTOA_PAPERS_STATE":"AUTOA_PAPERS_STATE"},prefix:function(){return this.meta?"Meta":""},bind:function(){r(document).on("data.filter",r.proxy(this.render,this))},start:function(){var t=this;o.read({requestUri:"/api/odata/"+t.conference+"/"+t.controller+"?$count=true&$top=0",dataType:"json"},function(e){t._total(e["@odata.count"])},function(e){window.cmt3.logger.error("[start] server side error: "+e.message)}),r.when(r.ajax({type:"GET",url:"/"+t.conference+"/Assignment/GetState",data:{scope:t.scope,key:t.getKey()},dataType:"json",contentType:"application/json; charset=utf-8"})).done(function(e){e.code?"error"==e.code&&window.cmt3.logger.info("[start] can't restore state: "+e.message):t.setState(e)}).done(function(){t.render()}).fail(function(e){window.cmt3.logger.error("[start] server side error: <"+e.status+"> "+e.statusText)})},setState:function(e){var o=this;if(e){var t=JSON.parse(e.sort);t&&"string"==r.type(t)&&0<t.length?o._sort(t):window.cmt3.logger.info("[state] can't restore sort value");t=JSON.parse(e.total);t&&r.isNumeric(t)?o._total(t):window.cmt3.logger.info("[state] can't restore total value");t=JSON.parse(e.selected);t&&r.isNumeric(t)?o._selected(t):window.cmt3.logger.info("[state] can't restore selected value");var a=e.filters;r.isArray(a)?r.each(o.filters,function(e,t){t.state(a[e])}):window.cmt3.logger.info("[state] can't restore filters");e=JSON.parse(e.state);return e&&"object"==r.type(e)?r.each(e,function(e,t){o.state[e]=ko.observable(t),o.state[e].hasError=ko.observable(!1)}):window.cmt3.logger.info("[state] can't restore ids value"),!0}return!1},render:function(){var i=this,e="&$orderby="+i._sort(),t=""!=i.getFilter()?"&$filter="+encodeURIComponent(i.getFilter()):"",t={method:"POST",requestUri:"/api/odata/"+i.conference+"/$batch",headers:{Accept:"application/json"},data:{requests:[{method:"GET",url:"/api/odata/"+i.conference+"/"+i.controller+"?"+("$count=true"+e+t),headers:{Accept:"application/json"}}]}};o.request(t,function(e){var a,t=e&&e.responses&&e.responses[0]&&e.responses[0].body,o=t&&t["@odata.count"],n=t&&t.value,e=!0;t?(o?(i._selected(o),i.saved=!1):(window.cmt3.logger.warn("[batch] can't calculate response count"),e=!1),n&&r.inArray(n)?(i._items([]),a=[],r.each(n,function(e,t){var o=t.Id;i.state[o]||(i.state[o]=ko.observable(t.Assigned),i.state[o].hasError=ko.observable(!1)),a.push(new s(t))}),i._items(a),i.saved=!1):(window.cmt3.logger.warn("[batch] resquest doesn't contain data"),e=!1),e&&(i.save(),window.cmt3.logger.info("[batch] data updated successfully"))):window.cmt3.logger.error("[batch] unexpected response")},function(e){window.cmt3.logger.error("[batch] server side error: "+e.message)},o.batchHandler)},getState:function(){var o={sort:ko.toJSON(this._sort),total:ko.toJSON(this._total),selected:ko.toJSON(this._selected),state:ko.toJSON(this.state),filters:[]};return r.each(this.filters,function(e,t){o.filters.push(t.state())}),o},getFilter:function(){var o="";return r.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},scroll:function(){r(window).scrollTop()==r(document).height()-r(window).height()&&this.render()},resetFilters:function(){r.each(this.filters,function(e,t){t.reset()}),this.render()},sort:function(e,t){var o=this,a=r(t.currentTarget),t=a.attr("sortby");null==t&&(t=(a=r(a.context.parentNode)).attr("sortby")),a.hasClass("selected")?o._sort().match("desc$")?(o._sort(t+" asc"),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up")):(o._sort(t+" desc"),a.find("i").removeClass("icon-chevron-up"),a.find("i").addClass("icon-chevron-down")):(r("th[sortby]").each(function(){r(o).find("i").removeClass("icon-chevron-up"),r(o).find("i").removeClass("icon-chevron-down"),r(o).removeClass("selected")}),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up"),a.addClass("selected"),o._sort(t+" asc")),o.render()},next:function(){var o=this;r.when(o.submit(),o.saveState()).done(function(e){var t=e[0];if(t)switch(t.code){case"error":a.addMessage(t.message,"Appliction Error:","error"),window.cmt3.logger.log("[next] server return: "+t.message);break;case"redirect":t.action?o.go(t.action):(a.addMessage("Server returns empty action to redirect. Please, contact your suystem administrator.","Appliction Error:","error"),window.cmt3.logger.log("[next] server return: no action to redirect"))}}).fail(function(e){a.addMessage(e.statusText,"System error:","error"),window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})},previous:function(){this.go("Papers")},go:function(e){window.location="/"+this.conference+"/Assignment/"+e},begin:function(){var t=this;r.when(r.ajax({type:"POST",url:"/"+t.conference+"/Assignment/{0}StartOver".format(t.prefix())})).done(function(e){e.code&&("error"==e.code&&window.cmt3.logger.warn("[start] server return: "+e.message),"redirect"==e.code&&t.go(e.action)),window.cmt3.logger.error("[start] unexpected response")}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})},submit:function(){return r.ajax({type:"POST",url:"/"+this.conference+"/Assignment/{0}SavePapers".format(this.prefix()),data:JSON.stringify({papers:this.getResult()}),contentType:"application/json; charset=utf-8"})},assign:function(){var a=this,n=parseInt(a._assign());n<0||isNaN(n)?a._assign.hasError(!0):(r.each(a._items(),function(e,t){var o=a.state[t.id];t.assigned>n?(o.hasError(!0),o(t.assigned)):(o(n),o.hasError(!1))}),a.save(),a._assign.hasError(!1))},increase:function(){var n=this,i=parseInt(n._increase());i<0||isNaN(i)?n._increase.hasError(!0):("dec"==n._direction()&&(i=0-i),r.each(n._items(),function(e,t){var o=n.state[t.id],a=parseInt(o());a<0||isNaN(a)?o.hasError(!0):(a+=i,t.assigned>a?(o.hasError(!0),o(t.assigned)):(o(a),o.hasError(!1)))}),n.save(),n._increase.hasError(!1))},blur:function(e,t){var o=ko.contextFor(t.target).$root,a=o.state[e.id],t=parseInt(a());e.assigned>t||isNaN(t)?a.hasError(!0):(o.save(),a.hasError(!1))},getResult:function(){var o=this,a=[];return r.each(o._items(),function(e,t){t.assigned<o.state[t.id]()&&a.push({Id:t.id,Assigned:t.assigned,Reviewers:o.state[t.id]()})}),a},saveState:function(){return r.ajax({type:"POST",url:"/"+this.conference+"/Assignment/SetState",dataType:"json",data:{scope:this.scope,key:this.getKey(),value:JSON.stringify(this.getState())}})},save:function(){r.when(this.saveState()).done(function(e){e.code?("error"==e.code&&window.cmt3.logger.error("[batch] server return: "+e.message),"ok"==e.code&&window.cmt3.logger.info("[batch] state saved succefully!")):window.cmt3.logger.error("[batch] unexpected response: "+e)}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})}}}(window.jQuery,window.app,window.OData),function(e,o){"use strict";o.ProgressPage=function(e){var t=this;t.meta=e,t.timer=null,t.conference=window.cmt3.conference.name,t.progress=ko.observable(0),t.eta=ko.observable(null),t.error=ko.observable(!1),t.completed=ko.observable(!1),t.message=ko.observable(""),t.listen(),t.etaText=ko.pureComputed(function(){var e=t.eta();return null!=e?"ETA: "+e:null},t)},o.ProgressPage.prototype={prefix:function(){return this.meta?"Meta":""},listen:function(){this.timer=setInterval(e.proxy(this.update,this),1e3)},candidates:function(){this.go("{0}Confirmation".format(this.prefix()))},previous:function(){this.go("{0}Settings".format(this.prefix()))},go:function(e){window.location="/"+this.conference+"/Assignment/"+e},begin:function(){var t=this;e.when(e.ajax({type:"POST",url:"/"+t.conference+"/Assignment/{0}StartOver".format(t.prefix())})).done(function(e){e.code&&("error"==e.code&&window.cmt3.logger.warn("[start] server return: "+e.message),"redirect"==e.code&&t.go(e.action)),window.cmt3.logger.error("[start] unexpected response")}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})},update:function(){var t=this;e.get("/"+t.conference+"/Assignment/{0}GetProgress".format(t.prefix())).done(function(e){e.code||e.Progress&&(t.progress(e.Progress),t.eta(e.ETA),100<=e.Progress&&100==e.Progress&&(e.HasError&&(t.error(!0),e.Message&&o.addMessage(e.Message,"Calculation error:","error")),clearInterval(t.timer)))})}}}(window.jQuery,window.app),function(r,e,o){"use strict";function s(e){var t=this;t.id=e.Id,t.name=e.Name,t.surname=e.Surname,t.email=e.Email,t.tracks=e.Tracks,t.trackList=e.TrackList,t.assigned=e.Assigned,t.completed=e.Completed,t.percentage=e.Percentage,t.quota=e.Quota,t.quotaString=null==t.quota?"-":t.quota,t.userType=e.UserType,t.hasError=ko.observable(!1)}e.ReviewersPage=function(e,t,o,a){var n=this;n.meta=o,n.$element=r(e),n.conference=window.cmt3.conference.name,n.controller=t,n.scope="autoa",n.desc=!0,n.state={},n.filters=[],n.saved=!1,n._sort=ko.observable("Id"),n._total=ko.observable(0),n._selected=ko.observable(0),n._items=ko.observableArray([]),n._assign=ko.observable(0),n._assign.hasError=ko.observable(!1),n._increase=ko.observable(0),n._increase.hasError=ko.observable(!1),n._direction=ko.observable("inc"),n.bind(),n.start(),n.userTypes=a,n.userTypesProvider=function(){return n.userTypes}},e.ReviewersPage.prototype={getKey:function(){return this.meta?"METAAUTOA_REVIEWERS_STATE":"AUTOA_REVIEWERS_STATE"},prefix:function(){return this.meta?"Meta":""},bind:function(){r(document).on("data.filter",r.proxy(this.render,this))},start:function(){var t=this;o.read({requestUri:"/api/odata/"+t.conference+"/"+t.controller+"?$count=true&$top=0",dataType:"json"},function(e){t._total(e["@odata.count"])},function(e){window.cmt3.logger.error("[start] server side error: "+e.message)}),r.when(r.ajax({type:"GET",url:"/"+t.conference+"/Assignment/GetState",data:{scope:t.scope,key:t.getKey()},dataType:"json",contentType:"application/json; charset=utf-8"})).done(function(e){e.code?"error"==e.code&&window.cmt3.logger.info("[start] can't restore state: "+e.message):t.setState(e)}).done(function(){t.render()}).fail(function(e){window.cmt3.logger.error("[start] server side error: <"+e.status+"> "+e.statusText)})},setState:function(e){var o=this;if(e){var t=JSON.parse(e.sort);t&&"string"==r.type(t)&&0<t.length?o._sort(t):window.cmt3.logger.info("[state] can't restore sort value");t=JSON.parse(e.total);t&&r.isNumeric(t)?o._total(t):window.cmt3.logger.info("[state] can't restore total value");t=JSON.parse(e.selected);t&&r.isNumeric(t)?o._selected(t):window.cmt3.logger.info("[state] can't restore selected value");var a=e.filters;r.isArray(a)?r.each(o.filters,function(e,t){t.state(a[e])}):window.cmt3.logger.info("[state] can't restore filters");e=JSON.parse(e.state);return e&&"object"==r.type(e)?r.each(e,function(e,t){o.state[e]=ko.observable(t),o.state[e].hasError=ko.observable(!1)}):window.cmt3.logger.info("[state] can't restore ids value"),!0}return!1},render:function(){var i=this,e="&$orderby="+i._sort(),t=""!=i.getFilter()?"&$filter="+encodeURIComponent(i.getFilter()):"",t={method:"POST",requestUri:"/api/odata/"+i.conference+"/$batch",headers:{Accept:"application/json"},data:{requests:[{method:"GET",url:"/api/odata/"+i.conference+"/"+i.controller+"?"+("$count=true"+e+t),headers:{Accept:"application/json"}}]}};o.request(t,function(e){var a,t=e&&e.responses&&e.responses[0]&&e.responses[0].body,o=t&&t["@odata.count"],n=t&&t.value,e=!0;t?(o?(i._selected(o),i.saved=!1):(window.cmt3.logger.warn("[batch] can't calculate response count"),e=!1),n&&r.inArray(n)?(i._items([]),a=[],r.each(n,function(e,t){var o=t.Id;i.state[o]||(i.state[o]=ko.observable(t.Assigned),i.state[o].hasError=ko.observable(!1)),a.push(new s(t))}),i._items(a),i.saved=!1):(window.cmt3.logger.warn("[batch] resquest doesn't contain data"),e=!1),e&&(i.save(),window.cmt3.logger.info("[batch] data updated successfully"))):window.cmt3.logger.error("[batch] unexpected response")},function(e){window.cmt3.logger.error("[batch] server side error: "+e.message)},o.batchHandler)},getState:function(){var o={sort:ko.toJSON(this._sort),total:ko.toJSON(this._total),selected:ko.toJSON(this._selected),state:ko.toJSON(this.state),filters:[]};return r.each(this.filters,function(e,t){o.filters.push(t.state())}),o},getFilter:function(){var o="";return r.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},scroll:function(){r(window).scrollTop()==r(document).height()-r(window).height()&&this.render()},resetFilters:function(){r.each(this.filters,function(e,t){t.reset()}),this.render()},sort:function(e,t){var o=this,a=r(t.currentTarget),t=a.attr("sortby");null==t&&(t=(a=r(a.context.parentNode)).attr("sortby")),a.hasClass("selected")?o._sort().match("desc$")?(o._sort(t+" asc"),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up")):(o._sort(t+" desc"),a.find("i").removeClass("icon-chevron-up"),a.find("i").addClass("icon-chevron-down")):(r("th[sortby]").each(function(){r(o).find("i").removeClass("icon-chevron-up"),r(o).find("i").removeClass("icon-chevron-down"),r(o).removeClass("selected")}),a.find("i").removeClass("icon-chevron-down"),a.find("i").addClass("icon-chevron-up"),a.addClass("selected"),o._sort(t+" asc")),o.render()},next:function(){var t=this;r.when(t.submit(),t.saveState()).done(function(e){e[0]&&("error"==e[0].code&&window.cmt3.logger.log("[next] server return: "+e[0].message),"redirect"==e[0].code&&t.go(e[0].action))}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})},previous:function(){this.go("{0}Papers".format(this.prefix()))},go:function(e){window.location="/"+this.conference+"/Assignment/"+e},begin:function(){var t=this;r.when(r.ajax({type:"POST",url:"/"+t.conference+"/Assignment/{0}StartOver".format(t.prefix())})).done(function(e){e.code&&("error"==e.code&&window.cmt3.logger.warn("[start] server return: "+e.message),"redirect"==e.code&&t.go(e.action)),window.cmt3.logger.error("[start] unexpected response")}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})},submit:function(){return r.ajax({type:"POST",url:"/"+this.conference+"/Assignment/{0}SaveReviewers".format(this.prefix()),data:JSON.stringify({reviewers:this.getResult()}),contentType:"application/json; charset=utf-8"})},assign:function(){var a=this,n=parseInt(a._assign());n<0||isNaN(n)?a._assign.hasError(!0):(r.each(a._items(),function(e,t){var o=a.state[t.id];t.assigned>n?(o.hasError(!0),o(t.assigned)):null!=t.quota&&t.assigned<=t.quota&&n>t.quota?(o.hasError(!0),o(t.quota)):(o(n),o.hasError(!1))}),a.save(),a._assign.hasError(!1))},increase:function(){var n=this,i=parseInt(n._increase());i<0||isNaN(i)?n._increase.hasError(!0):("dec"==n._direction()&&(i=0-i),r.each(n._items(),function(e,t){var o=n.state[t.id],a=parseInt(o());a<0||isNaN(a)?o.hasError(!0):(a+=i,t.assigned>a?(o.hasError(!0),o(t.assigned)):null!=t.quota&&t.assigned<=t.quota&&a>t.quota?(o.hasError(!0),o(t.quota)):(o(a),o.hasError(!1)))}),n.save(),n._increase.hasError(!1))},blur:function(e,t){var o=ko.contextFor(t.target).$root,a=o.state[e.id],t=parseInt(a());e.assigned>t||isNaN(t)?a.hasError(!0):null!=e.quota&&e.assigned<=e.quota&&t>e.quota?(a.hasError(!0),a(e.quota)):(o.save(),a.hasError(!1))},getResult:function(){var o=this,a=[];return r.each(o._items(),function(e,t){a.push({Id:t.id,Assigned:t.assigned,Papers:o.state[t.id]()})}),a},saveState:function(){return r.ajax({type:"POST",url:"/"+this.conference+"/Assignment/SetState",dataType:"json",data:{scope:this.scope,key:this.getKey(),value:JSON.stringify(this.getState())}})},save:function(){r.when(this.saveState()).done(function(e){e.code?("error"==e.code&&window.cmt3.logger.error("[batch] server return: "+e.message),"ok"==e.code&&window.cmt3.logger.info("[batch] state saved succefully!")):window.cmt3.logger.error("[batch] unexpected response: "+e)}).fail(function(e){window.cmt3.logger.error("[batch] server side error: <"+e.status+"> "+e.statusText)})}}}(window.jQuery,window.app,window.OData),function(r,s){"use strict";s.SettingsPage=function(e){var t=this;t.meta=e,t.conference=window.cmt3.conference.name,t.customWeights=ko.observable("default"),t.customWeights.subscribe(t.checkWeights,t),t.bids=ko.observable(""),t.bids.hasError=ko.observable(!1),t.suggestions=ko.observable(""),t.suggestions.hasError=ko.observable(!1),t.relevance=ko.observable(""),t.relevance.hasError=ko.observable(!1),t.tpms=ko.observable(""),t.tpms.hasError=ko.observable(!1),t.loadBalanced=ko.observable(!0),t.loadBalanced.subscribe(t.resetBalanceFactor,t),t.balanceFactor=ko.observable(1),t.balanceFactor.hasError=ko.observable(!1),t.showWeightDetails=ko.observable(!0),t.showAssignmentsDetails=ko.observable(!0),t.valid=ko.observable(!0)},s.SettingsPage.prototype={prefix:function(){return this.meta?"Meta":""},run:function(){var e,t,o,a,n,i=this;i.validate()&&(n=a=o=t=e=-1,"custom"==i.customWeights()&&(e=i.bids()?parseFloat(i.bids()):-1,t=i.suggestions()?parseFloat(i.suggestions()):-1,o=i.relevance()?parseFloat(i.relevance()):-1,a=i.tpms()?parseFloat(i.tpms()):-1,n=i.balanceFactor()?parseFloat(i.balanceFactor()):1),n={bids:e,suggestions:t,relevance:o,tpms:a,loadBalanced:i.loadBalanced(),balanceFactor:n},r.ajax({type:"POST",url:"/"+i.conference+"/Assignment/{0}Run".format(i.prefix()),data:JSON.stringify(n),contentType:"application/json; charset=UTF-8"}).done(function(e){"error"==e.code&&(window.cmt3.logger.log(e.message),s.addMessage(e.message,"Application error:","error")),"redirect"==e.code&&(window.location="/"+i.conference+"/Assignment/"+e.action)}).fail(function(e){window.cmt3.logger.error("[run] server side error: <"+e.status+"> "+e.statusText),s.addMessage(e.message,"Application error:","error")}))},reviewers:function(){window.location="/"+this.conference+"/Assignment/{0}Reviewers".format(this.prefix())},again:function(){var t=this;r.ajax({type:"POST",url:"/"+t.conference+"/Assignment/{0}StartOver".format(t.prefix())}).done(function(e){"error"==e.code&&(s.addMessage(e.message,"Application error:","error"),window.cmt3.logger.log(e.message)),"redirect"==e.code&&(window.location="/"+t.conference+"/Assignment/"+e.action)})},resetBalanceFactor:function(){this.balanceFactor(1),this.balanceFactor.hasError(!1)},resetWeights:function(){this.bids(""),this.suggestions(""),this.relevance(""),this.tpms(""),this.bids.hasError(!1),this.suggestions.hasError(!1),this.relevance.hasError(!1),this.tpms.hasError(!1)},checkWeights:function(e){"default"==e&&this.resetWeights(),this.validate()},validate:function(){this.valid(!0);var e=!0;return(e=(e="custom"==this.customWeights()?this.validateWeights():e)&&this.loadBalanced()?this.validateWeight(r("input.balanceFactor")):e)||this.valid(!1),e},validateWeights:function(){var t=this,o=!0;return r("input.weight").each(function(){var e=t.validateWeight.apply(t,[this]);o=o&&e}),o=o&&t.validateWeightsSum()},validateWeight:function(e){var t=r(e).attr("id"),e=this[t]();if(e="string"==typeof e?e.trim():e){e=parseFloat(e);return!isNaN(e)&&(0==e||0<e&&e<=1)?this.good(t):this.bad(t)}return this.good(t)},validateWeightsSum:function(){var o=0,a=this,n=!0;return r.each(["bids","suggestions","relevance","tpms"],function(e,t){t=a[t]().trim();t&&(n=!1,o+=parseFloat(t))}),!n&&(!(o<=0||1<o)||a.badSum())},badSum:function(){var o=this;return s.addMessage("The sum of 'Bids', 'Suggestions' and 'Relevance' must be greater than 0 and not greater than 1","Incorrect input:","error"),r.each(["bids","suggestions","relevance","tpms"],function(e,t){o[t].hasError(!0)}),!1},bad:function(e){return s.addMessage("Weight for the '"+s.capitalize(e)+"'  must be a numeric value between 0 and 1","Incorrect input:","error"),this[e].hasError(!0),!1},good:function(e){return this[e].hasError(!1),!0}}}(window.jQuery,window.app),function(r){function s(e){var t=this;if(!e)return t.currentRank=ko.observable(null),void(t.order=ko.observable(null));t.id=e.Id,t.order=ko.observable(e.Order),t.currentRank=ko.observable(null==t.order()?null:e.CurrentRank),t.userFirstName=e.UserFirstName,t.userLastName=e.UserLastName,t.userEmail=e.UserEmail,t.tpmsRank=e.TpmsRank,t.customAffinityRank=e.CustomAffinityRank,t.suggestionModel=null}function u(e){var t=this;t.id=e.Id,t.order=ko.observable(e.Order),t.currentRank=ko.observable(null==t.order()?null:e.CurrentRank),t.userFirstName=e.UserFirstName,t.userLastName=e.UserLastName,t.userEmail=e.UserEmail,t.userId=e.UserId,t.primarySubject=e.PrimarySubject,t.secondarySubject=e.SecondarySubject,t.relevance=e.Relevance,t.tpmsRank=e.TpmsRank,t.customAffinityRank=e.CustomAffinityRank,t.bid=e.Bid,t.numberOfPapersSuggested=ko.observable(e.NumberOfPapersSuggested),t.numberOfAssignment=e.NumberOfAssignment,t.addAsCandidateClicked=!1,t.userType=e.UserType,t.isAssigned=e.IsAssigned,t.googleScholarId=e.GoogleScholarId,t.googleScholarUrl=function(){return r.enums.externalProfile.googleScholar.format(t.googleScholarId)},t.semanticScholarId=e.SemanticScholarId,t.semanticScholarUrl=function(){return r.enums.externalProfile.semanticScholar.format(t.semanticScholarId)},t.dblpId=e.DblpId,t.dblpUrl=function(){return r.enums.externalProfile.dblp.format(t.dblpId)},t.isAssignedText=ko.pureComputed(function(){return t.isAssigned?"Yes":"No"})}function a(){this.isCustomAffinityEnabledForMetaReviewer=ko.observable(!1).autoMap(),this.isTpmsEnabled=ko.observable(!1).autoMap()}function l(t){var o=this;o.id=t,o.trackId=ko.observable().autoMap(),o.trackName=ko.observable().autoMap(),o.title=ko.observable().autoMap(),o.isSingleTrackConference=ko.observable().autoMap(),o.primarySubjectAreas=ko.observableArray([]),o.secondarySubjectAreas=ko.observableArray([]),o.trackData=ko.observable(new a),o.loadData=function(){var e=r.odata.getUrl(r.odata.entitySet.submissionViews,t,"GetSimpleView");return OData.request({requestUri:e,showProgressIndicator:!1,method:"POST",headers:{"Content-Type":"application/json"}},function(e){r.autoMap(o,e),o.primarySubjectAreas(JSON.parse(e.PrimarySubjectAreas)),o.secondarySubjectAreas(JSON.parse(e.SecondarySubjectAreas)),o.trackData(r.autoMap(new a,e.TrackData?JSON.parse(e.TrackData):{}))})}}function d(e,t,o,a,n,i){var r=this;r.submissionId=t,r.submission=new l(t),r.metaReviewerId=o,r.userTypes=a,r.userTypesProvider=function(){return r.userTypes},r.$element=$(e),r.conference=window.cmt3.conference.name,r.page=ko.observable(1),r.top=ko.observable(25),r.sort=ko.observable("CurrentRank, UserFirstName, UserLastName, UserEmail"),r.controller="SuggestionModels",r.customAffinityRankString=i&&i["Custom Affinity Rank"],r.customAffinityRankString||(r.customAffinityRankString="Custom Affinity Rank"),r.filters=[],r._total=ko.observable(0),r.selected=ko.observable(0),r.suggestions=ko.observableArray(),r.candidates=ko.observableArray(),r.candidatesLoaded=!1,r.submissionDetailsLoaded=!1,r.listen(),r.Pager=ko.pager(r.selected,r.top),r.Pager().CurrentPage.subscribe(function(){r.page(r.Pager().CurrentPage()),r.show()}),r.bidNamesProvider=function(){return n.sort(),n}}d.prototype={addCandidate:function(e){var o=this,a=o.suggestions()[e];a.addAsCandidateClicked||(a.addAsCandidateClicked=!0,e={requestUri:r.odata.getUrl(r.odata.entitySet.suggestionModels,null,"AddCandidate"),method:"POST",showProgressIndicator:!1,data:{Request:{SubmissionId:o.submissionId,MetaReviewerId:o.metaReviewerId,UserId:a.userId}}},OData.request(e,function(e){var t=new s;a.id=e.SuggestionId,a.currentRank(o.candidates().length+1),a.order(e.Order),a.numberOfPapersSuggested(a.numberOfPapersSuggested()+1),t.id=a.id,t.order(a.order()),t.currentRank(a.currentRank()),t.suggestionModel=a,t.userFirstName=a.userFirstName,t.userLastName=a.userLastName,t.userEmail=a.userEmail,t.tpmsRank=a.tpmsRank,t.customAffinityRank=a.customAffinityRank,o.candidates().push(t),o.candidates.valueHasMutated()},function(e){a.addAsCandidateClicked=!1,OData.defaultError(e)}))},removeCandidate:function(a){var n=this,i=n.candidates()[a],e={requestUri:r.odata.getUrl(r.odata.entitySet.suggestionModels,i.id),method:"DELETE"};OData.request(e,function(){var e=i.suggestionModel;null!=e&&(e.id=0,e.currentRank(null),e.order(null),e.numberOfPapersSuggested(e.numberOfPapersSuggested()-1));var t=n.candidates();t.splice(a,1);for(var o=a;o<t.length;o++)null!=(e=(i=t[o]).suggestionModel)&&e.currentRank(e.currentRank()-1),i.currentRank(i.currentRank()-1);n.candidates.valueHasMutated(),e&&(e.addAsCandidateClicked=!1)},function(e){OData.defaultError(e)})},updateSuggestion:function(e){var t=e.suggestionModel;null!=t&&(t.currentRank(e.currentRank()),t.order(e.order()))},swapCandidates:function(t,o,a,n){var i=this,e={Id1:t.id,Id2:o.id},e={requestUri:r.odata.getUrl(r.odata.entitySet.suggestionModels,null,"SwapOrder"),method:"POST",data:{Request:e}};OData.request(e,function(){var e=t.order();t.order(o.order()),o.order(e),e=t.currentRank(),t.currentRank(o.currentRank()),o.currentRank(e),i.updateSuggestion(t),i.updateSuggestion(o);e=i.candidates();e[a]=o,e[n]=t,i.candidates.valueHasMutated()},function(e){OData.defaultError(e)})},moveCandidateUp:function(e){var t,o,a;e<=0||(o=(t=e)-1,a=this.candidates()[t],e=this.candidates()[o],this.swapCandidates(a,e,t,o))},moveCandidateDown:function(e){var t,o,a;e>=this.candidates().length-1||(o=(t=e)+1,a=this.candidates()[t],e=this.candidates()[o],this.swapCandidates(e,a,o,t))},listen:function(){var e=this;$(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return $.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},odataRequest:function(t){var a=this;return $.Deferred(function(o){var e={headers:{Accept:"application/json"},showProgressIndicator:!1,requestUri:"/api/odata/"+a.conference+"/$batch",method:"POST",data:{requests:[{url:t,method:"GET",headers:{Accept:"application/json"}}]}};OData.request(e,function(e){var t=e.responses[0].body,e=t["@odata.count"],t=t.value;o.resolve({items:t,count:e})},function(e){window.cmt3.logger.log(e.message),o.reject(e)},OData.batchHandler)}).promise()},show:function(){var i=this;if(!i.initialized)return $.Deferred().reject().promise();r.showProgress();var e,t,o,a,n=i.submissionDetailsLoaded?$.Deferred().resolve().promise():i.submission.loadData();return $.when(n,(e="&$orderby="+i.sort(),t=0!=i.top()?"&$top="+i.top():"",o=0!=i.skip()?"&$skip="+i.skip():"",a=""!=i.getFilter()?"&$filter="+encodeURIComponent(i.getFilter()):"",i.odataRequest("/api/odata/"+i.conference+"/"+i.controller+"?id="+i.submissionId+"&metaReviewerId="+i.metaReviewerId+"&$count=true"+e+a+o+t+"&caller=suggestions")),function(){if(i.candidatesLoaded){var t=i.candidates();return $.Deferred(function(e){var o=[];$.each(t,function(e,t){(o[t.id]=t).suggestionModel=null}),e.resolve(o)}).promise()}var a=$.Deferred();return i.odataRequest("/api/odata/"+i.conference+"/"+i.controller+"?id="+i.submissionId+"&metaReviewerId="+i.metaReviewerId+"&$count=true&$filter="+encodeURIComponent("(Order ne null)")+"&caller=suggestions").done(function(e){var o=[];$.each(e.items,function(e,t){t=new s(t);o[t.id]=t}),i.candidatesLoaded=!0,a.resolve(o)}).fail(a.reject),a.promise()}()).done(function(e,t,o){i.submissionDetailsLoaded=!0;var a=[];$.each(t.items,function(e,t){t=new u(t);a.push(t),null!=t.currentRank()&&null!=o[t.id]&&(o[t.id].suggestionModel=t)});var n=[];$.each(o,function(e,t){t&&n.push(t)}),n.sort(function(e,t){return e.currentRank()-t.currentRank()}),i.candidates(n),i.suggestions(a),0==i._total()&&i._total(t.count),i.selected(t.count),i.$element.show()}).always(r.hideProgress)},scroll:function(){$(window).scrollTop()==$(document).height()-$(window).height()&&self.show()},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},reset:function(){$.each(this.filters,function(e,t){t.reset()}),r.announce(r.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){$("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),$(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=$(t.target).attr("size"),t=parseInt(t);this.top(t),r.announce(r.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=$(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=$(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):($("th[data-sort]").each(function(){$(this).find("i").removeClass("icon-arrow-up"),$(this).find("i").removeClass("icon-arrow-down"),$(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&r.announce(r.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()}},r.suggestionsPage=function(e,t,o,a,n,i){return new d(e,t,o,a,n,i)}}(window.app),function(f,h,g,v,w,b,k,M){"use strict";var S;function y(e,t,o,a,n){this.id=e,this.title=t,this.trackId=o,this.trackName=a,this.isSingleTrackConference=n}function d(e,t,a,o,n,i,r,s){var u=this;function l(){function e(){var e,t=v.stringify(k.getAnswersJson(u.questions));u.lastDraft!==t?((e=f.autoMap(u)).SubmissionId=u.submission.id,e.Id=u.draftId||0,e.Draft=t,e={requestUri:f.odata.getUrl(f.odata.entitySet.metaReviewDrafts),method:"POST",headers:{Prefer:"return-content"},showProgressIndicator:!1,data:e},h.request(e,function(e){u.draftId=e.Id,u.lastDraftErrorDate(null),u.lastDraftDate((new Date).toLocaleString()),u.lastDraft=t},function(){u.lastDraftErrorDate((new Date).toLocaleString())}).always(u.setAutoSaveTimer)):u.setAutoSaveTimer()}function o(e){if(u.files().length+e.length>u.settings.metaReviewMaxFileNumber)f.addMessage("You can upload up to {0} files only.".format(u.settings.metaReviewMaxFileNumber),null,"error");else{for(var t=[],o=0;o<u.files().length;o++)t[u.files()[o].originalName.toLowerCase()]=!0;for(o=0;o<e.length;o++){var a,n=e[o];!function(e,t){var o=e.name.toLowerCase();{if(void 0!==t[o])return f.addMessage("Found at least two files with the same name: '{0}'.".format(e.name),null,"error"),!1;t[o]=!0}if(e.size>1048576*u.settings.metaReviewMaxFileSize)return f.addMessage("File '{0}' is bigger than maximum allowed size of {1} Mb.".format(e.name,u.settings.metaReviewMaxFileSize),null,"error"),!1;for(var a=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),n=u.settings.metaReviewAllowedFileTypes.split(","),i=!1,r=0;r<n.length;r++)if(n[r].trim().toLowerCase()==a){i=!0;break}return!!i||(f.addMessage("File '{0}' has type '{1}' which is not accepted. We accept '{2}' only.".format(e.name,a,u.settings.metaReviewAllowedFileTypes),null,"error"),!1)}(n,t)||(u.uploading(u.uploading()+1),(a=g.ajaxSettings.xhr()).open("POST",S.fileUpload,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("File-Name",encodeURIComponent(n.name)),a.send(n),a.addEventListener("load",function(e){200==e.target.status?i(e.target.responseText):f.processXmlHttpRequestError(e.target),u.uploading(u.uploading()-1)},!1))}}}function i(e){try{var t=ko.utils.parseJson(e)}catch(e){return void f.processException(e)}t=f.autoMap(new f.File,t);t.uploadDate=new Date(t.uploadDate),isNaN(t.uploadDate)&&(t.uploadDate=new Date),u.files.push(t)}u.showFilesMinErrorMessage=ko.observable(!1),u.showFilesMaxErrorMessage=ko.observable(!1),u.questions=[],u.submittedAnswersJson=null,u.autoSaveTimerId=null,u.draftId=null,u.loadedDraftDate=ko.observable(),u.lastDraftDate=ko.observable(),u.lastDraftErrorDate=ko.observable(null),u.lastDraft=null,u.setAutoSaveTimer=function(){return u.autoSaveTimerId&&b(u.autoSaveTimerId),u.autoSaveTimerId=w(e,f.settings.autoSaveDelay),!0},u.revertDraft=function(){!function(){if(!u.draftId)return g.Deferred().resolve().promise();var e={requestUri:f.odata.getUrl(f.odata.entitySet.metaReviewDrafts,u.draftId),method:"DELETE",showProgressIndicator:!1};h.request(e,function(){u.draftId=null,u.lastDraftDate(null),u.lastDraftErrorDate(null),u.lastDraft=v.stringify(k.getAnswersJson(u.questions))})}(),null!=u.submittedAnswersJson&&(k.unsubscribeAnswerChanged(u.questions),k.setAnswersFromJson(u.questions,u.submittedAnswersJson),k.subscribeAnswerChanged(u.questions,u.setAutoSaveTimer)),u.loadedDraftDate(null)},u.files=ko.observableArray(),u.removeFile=function(e){u.files.remove(e)},u.uploading=ko.observable(0),u.uploadFile=function(){var e=g('<input type="file" accept="*" multiple="" />');e.on("change",function(){o(this.files)}),e.trigger("click")},u.canUploadMoreFiles=ko.computed({read:function(){return 0==u.uploading()&&u.files().length<u.settings.metaReviewMaxFileNumber},deferEvaluation:!0}),u.xhrUploadSupported=function(){return M},u.fileUploadDragOver=function(e,t){u.canUploadMoreFiles()&&g(t.target).addClass("dragOver")},u.fileUploadDragLeave=function(e,t){u.canUploadMoreFiles()&&g(t.target).removeClass("dragOver")},u.fileUploadDrop=function(e,t){u.canUploadMoreFiles()&&(o(t.originalEvent.dataTransfer.files),u.fileUploadDragLeave(e,t))},u.uploadSingleFile=function(e,t){""!=t.target.value&&t.target.form.submit()},u.parseSingleUploadResult=function(e,t){i(t.target.contentDocument.body.innerText)},u.save=function(){var e=!0,t=ko.validation.group(u.questions,{deep:!0});if(0<t().length&&(t.showAllMessages(),e=!1),t=!0,u.files().length>u.settings.metaReviewMaxFileNumber&&(u.showFilesMaxErrorMessage(!0),t=!1),u.files().length<u.settings.metaReviewMinFileNumber&&(u.showFilesMinErrorMessage(!0),t=!1),e=!t?!1:e){var o=f.autoMap(u);o.SubmissionId=u.submission.id,u.createNew||(o.Id=u.id),o.Files=[];for(var a=0;a<u.files().length;a++)o.Files.push(u.files()[a].id);o.Answers=k.getAnswersJson(u.questions);e={requestUri:f.odata.getUrl(f.odata.entitySet.metaReviews,u.createNew?null:u.id),method:u.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:o};h.request(e,function(){f.url.navigateTo(S.returnConsole)})}}}function d(){return g.Deferred(function(t){var e=f.odata.getUrl(f.odata.entitySet.metaReviewSettings,u.submission.trackId);h.read({requestUri:e,showProgressIndicator:!1},function(e){f.autoMap(u.settings,e),t.resolve()})}).promise()}function c(){return g.when(g.Deferred(function(t){k.loadQuestionsDirect(f.enums.formType.metareview,u.formId).done(function(e){u.questions=e,t.resolve()})}).promise(),g.Deferred(function(o){var e=f.odata.getUrl(f.odata.entitySet.questionInvisibleByTags,{filter:"SubmissionId eq {0}".format(f.odata.escapeParam(u.submission.id))});h.read({requestUri:e,showProgressIndicator:!1},function(e){u.questionInvisibleByTagsMap={},u.questionInvisibleByTags=e.value;for(var t=0;t<u.questionInvisibleByTags.length;t++)u.questionInvisibleByTagsMap[u.questionInvisibleByTags[t].QuestionId]=u.questionInvisibleByTags[t];o.resolve(!0)})}).promise()).done(function(){for(var e=[],t=0;t<u.questions.length;t++){var o=u.questions[t];u.questionInvisibleByTagsMap[o.id]||e.push(o)}u.questions=e})}function p(o){return g.Deferred(function(t){var e=f.odata.getUrl(f.odata.entitySet.metaReviewDrafts,null,"GetBySubmissionIdAndMetaReviewerId");h.read({requestUri:e,showProgressIndicator:!1,data:{SubmissionId:u.submission.id,MetaReviewerId:u.metaReviewerId},method:"POST"},function(e){if(!e)return o&&k.setAnswersFromJson(u.questions,o.Answers),void t.resolve(!1);u.loadedDraftDate(e.UpdateDate.toLocaleString()),u.draftId=e.Id;e=v.parse(e.Draft);k.setAnswersFromJson(u.questions,e),o&&(u.submittedAnswersJson=o.Answers),t.resolve(!0)},function(e){404===e.response.statusCode?(o&&k.setAnswersFromJson(u.questions,o.Answers),t.resolve(!1)):h.defaultError(data)})}).promise()}function m(){return g.Deferred(function(o){l(),g.when(g.Deferred(function(t){var e=f.odata.getUrl(f.odata.entitySet.metaReviews,u.id);h.read({requestUri:e,showProgressIndicator:!1},function(e){f.autoMap(u,e),t.resolve(e)})}).promise(),d(),c()).done(function(e){var t;g.when((t=e,g.Deferred(function(a){var e;0!=t.Files.length?(e=f.odata.getUrl(f.odata.entitySet.files,{filter:f.odata.buildContainsQuery("Id",t.Files)}),h.read({requestUri:e,showProgressIndicator:!1},function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(f.autoMap(new f.File,e.value[o]));u.files(t),a.resolve()})):a.resolve()}).promise()),p(e)).done(function(){o.resolve()})})}).promise()}u.id=e,u.formId=r,u.metaReviewerId=f.autoMap(),u.updateDate=f.autoMap(),u.settings={metaWelcomeMessage:f.autoMap(),metaReviewMinFileNumber:f.autoMap(),metaReviewMaxFileNumber:f.autoMap(),metaReviewAllowedFileTypes:f.autoMap(),metaReviewMaxFileSize:f.autoMap()},u.submission=new y(t,o,n,i,s),u.createNew=!u.id,u.bindTo=function(e){f.showProgress();var t,o=g.Deferred();u.createNew?(f.autoMap(u,{metaReviewerId:a}),t=g.Deferred(),l(),g.when(d(),c()).done(function(){p().done(function(){t.resolve()})})):t=m(),t.promise().done(function(){ko.applyBindingsAndShow(u,e),u.lastDraft=v.stringify(k.getAnswersJson(u.questions)),u.setAutoSaveTimer(),o.resolve()}),o.always(f.hideProgress)}}f.metaReviewDetails=function(e,t,o,a,n,i,r,s,u,l){S=u,new d(e,t,o,a,n,i,r,s).bindTo(l)}}(window.app,window.OData,window.jQuery,window.JSON,window.setTimeout,window.clearTimeout,new window.app.QuestionService,null!=window.FileReader),function(s,t,o){"use strict";function a(e){var r=this;r.id=e,r.trackName=s.autoMap(),r.submissionTitle=s.autoMap(),r.submissionId=s.autoMap(),r.isSingleTrackConference=s.autoMap(),r.questions=[],r.files=[],r.print=function(){o()},r.bindTo=function(e){t.read(s.odata.getUrl(s.odata.entitySet.metaReviewViews,r.id),function(e){s.autoMap(r,e);for(var t=0;t<e.Questions.length;t++){for(var o=e.Questions[t],a=s.autoMap(new s.Question,o),n=0;n<o.Answers.length;n++)a.answers.push(s.autoMap(new s.QuestionAnswer,o.Answers[n]));r.questions.push(a)}for(t=0;t<e.Files.length;t++){var i=e.Files[t],i=s.autoMap(new s.File,i);r.files.push(i)}}).done(function(){ko.applyBindingsAndShow(r,e)})}}s.metaReviewView=function(e,t){new a(e).bindTo(t)}}(window.app,window.OData,window.print),function(m,f,h,g){"use strict";var v;function w(e,t,o,a,n){this.id=e,this.title=t,this.trackId=o,this.trackName=a,this.isSingleTrackConference=n}function d(e,t,a,o,n,i,r,s){var u=this,l=new m.QuestionDependency(u);function d(){u.questions=[],u.submittedAnswersJson=null,u.save=function(){for(var e=!0,t=[],o=0;o<u.questions.length;o++){var a=u.questions[o];l.isHidden(a.id)||t.push(a)}var n=ko.validation.group(t,{deep:!0});0<n().length&&(n.showAllMessages(),e=!1),e&&((e=m.autoMap(u)).SubmissionId=u.submission.id,u.createNew||(e.Id=u.id),e.Answers=g.getAnswersJson(u.questions.filter(e=>!l.isHidden(e.id))),e={requestUri:m.odata.getUrl(m.odata.entitySet.reviewerNotes,u.createNew?null:u.id),method:u.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:e},f.request(e,function(){m.url.navigateTo(v.submissionReviewConsole)}))}}function c(){return h.when(h.Deferred(function(t){g.loadQuestionsDirect(m.enums.formType.reviewernote,u.formId).done(function(e){u.questions=e,l.loadQuestions(e),t.resolve()})}).promise()).done(function(){for(var e=[],t=0;t<u.questions.length;t++){var o=u.questions[t];e.push(o)}u.questions=e})}function p(){return h.Deferred(function(t){d(),h.when(h.Deferred(function(t){var e=m.odata.getUrl(m.odata.entitySet.reviewerNotes,u.id);f.read({requestUri:e,showProgressIndicator:!1},function(e){m.autoMap(u,e),t.resolve(e)})}).promise(),c()).done(function(e){e&&g.setAnswersFromJson(u.questions,e.Answers),t.resolve()})}).promise()}u.id=e,u.formId=r,u.reviewerId=m.autoMap(),u.updateDate=m.autoMap(),u.submission=new w(t,o,n,i,s),u.createNew=!u.id,u.hasBranchingQuestions=function(){return l.hasDependency()},u.getQuestionDiv=function(e){return h("#nq_"+e)},u.bindTo=function(e){m.showProgress();var t,o=h.Deferred();u.createNew?(m.autoMap(u,{reviewerId:a}),t=h.Deferred(),d(),h.when(c()).done(function(){t.resolve()})):t=p(),t.promise().done(function(){ko.applyBindingsAndShow(u,e),l.init(),o.resolve()}),o.always(m.hideProgress)}}m.reviewNoteDetails=function(e,t,o,a,n,i,r,s,u,l){v=u,new d(e,t,o,a,n,i,r,s).bindTo(l)}}(window.app,window.OData,window.jQuery,(window.JSON,new window.app.QuestionService)),function(m,f,h,g){"use strict";var v;function w(e,t,o,a,n){this.id=e,this.title=t,this.trackId=o,this.trackName=a,this.isSingleTrackConference=n}function d(e,t,a,o,n,i,r,s){var u=this,l=new m.QuestionDependency(u);function d(){u.questions=[],u.submittedAnswersJson=null,u.save=function(){for(var e=!0,t=[],o=0;o<u.questions.length;o++){var a=u.questions[o];l.isHidden(a.id)||t.push(a)}var n=ko.validation.group(t,{deep:!0});0<n().length&&(n.showAllMessages(),e=!1),e&&((e=m.autoMap(u)).SubmissionId=u.submission.id,u.createNew||(e.Id=u.id),e.Answers=g.getAnswersJson(u.questions.filter(e=>!l.isHidden(e.id))),e={requestUri:m.odata.getUrl(m.odata.entitySet.metaReviewerNotes,u.createNew?null:u.id),method:u.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:e},f.request(e,function(){m.url.navigateTo(v.submissionMetaReviewConsole)}))}}function c(){return h.when(h.Deferred(function(t){g.loadQuestionsDirect(m.enums.formType.metareviewernote,u.formId).done(function(e){u.questions=e,l.loadQuestions(e),t.resolve()})}).promise()).done(function(){for(var e=[],t=0;t<u.questions.length;t++){var o=u.questions[t];e.push(o)}u.questions=e})}function p(){return h.Deferred(function(t){d(),h.when(h.Deferred(function(t){var e=m.odata.getUrl(m.odata.entitySet.metaReviewerNotes,u.id);f.read({requestUri:e,showProgressIndicator:!1},function(e){m.autoMap(u,e),t.resolve(e)})}).promise(),c()).done(function(e){e&&g.setAnswersFromJson(u.questions,e.Answers),t.resolve()})}).promise()}u.id=e,u.formId=r,u.metaReviewerId=m.autoMap(),u.updateDate=m.autoMap(),u.submission=new w(t,o,n,i,s),u.createNew=!u.id,u.hasBranchingQuestions=function(){return l.hasDependency()},u.getQuestionDiv=function(e){return h("#nq_"+e)},u.bindTo=function(e){m.showProgress();var t,o=h.Deferred();u.createNew?(m.autoMap(u,{metaReviewerId:a}),t=h.Deferred(),d(),h.when(c()).done(function(){t.resolve()})):t=p(),t.promise().done(function(){ko.applyBindingsAndShow(u,e),l.init(),o.resolve()}),o.always(m.hideProgress)}}m.metaReviewNoteDetails=function(e,t,o,a,n,i,r,s,u,l){v=u,new d(e,t,o,a,n,i,r,s).bindTo(l)}}(window.app,window.OData,window.jQuery,(window.JSON,new window.app.QuestionService)),function(m,f,h,g){"use strict";var v;function w(e,t,o,a,n){this.id=e,this.title=t,this.trackId=o,this.trackName=a,this.isSingleTrackConference=n}function d(e,t,a,o,n,i,r,s){var u=this,l=new m.QuestionDependency(u);function d(){u.questions=[],u.submittedAnswersJson=null,u.save=function(){for(var e=!0,t=[],o=0;o<u.questions.length;o++){var a=u.questions[o];l.isHidden(a.id)||t.push(a)}var n=ko.validation.group(t,{deep:!0});0<n().length&&(n.showAllMessages(),e=!1),e&&((e=m.autoMap(u)).SubmissionId=u.submission.id,u.createNew||(e.Id=u.id),e.Answers=g.getAnswersJson(u.questions.filter(e=>!l.isHidden(e.id))),e={requestUri:m.odata.getUrl(m.odata.entitySet.seniorMetaReviewerNotes,u.createNew?null:u.id),method:u.createNew?"POST":"PUT",progressIndicatorTimeout:0,data:e},f.request(e,function(){m.url.navigateTo(v.submissionSeniorMetaReviewConsole)}))}}function c(){return h.when(h.Deferred(function(t){g.loadQuestionsDirect(m.enums.formType.seniormetareviewernote,u.formId).done(function(e){u.questions=e,l.loadQuestions(e),t.resolve()})}).promise()).done(function(){for(var e=[],t=0;t<u.questions.length;t++){var o=u.questions[t];e.push(o)}u.questions=e})}function p(){return h.Deferred(function(t){d(),h.when(h.Deferred(function(t){var e=m.odata.getUrl(m.odata.entitySet.seniorMetaReviewerNotes,u.id);f.read({requestUri:e,showProgressIndicator:!1},function(e){m.autoMap(u,e),t.resolve(e)})}).promise(),c()).done(function(e){e&&g.setAnswersFromJson(u.questions,e.Answers),t.resolve()})}).promise()}u.id=e,u.formId=r,u.seniorMetaReviewerId=m.autoMap(),u.updateDate=m.autoMap(),u.submission=new w(t,o,n,i,s),u.createNew=!u.id,u.hasBranchingQuestions=function(){return l.hasDependency()},u.getQuestionDiv=function(e){return h("#nq_"+e)},u.bindTo=function(e){m.showProgress();var t,o=h.Deferred();u.createNew?(m.autoMap(u,{seniorMetaReviewerId:a}),t=h.Deferred(),d(),h.when(c()).done(function(){t.resolve()})):t=p(),t.promise().done(function(){ko.applyBindingsAndShow(u,e),l.init(),o.resolve()}),o.always(m.hideProgress)}}m.seniorMetaReviewNoteDetails=function(e,t,o,a,n,i,r,s,u,l){v=u,new d(e,t,o,a,n,i,r,s).bindTo(l)}}(window.app,window.OData,window.jQuery,(window.JSON,new window.app.QuestionService)),function(m,o,t){"use strict";function f(){this.id=m.autoMap(),this.originalName=m.autoMap(),this.size=m.autoMap(),this.formattedSize=m.autoMap(),this.uploadDate=m.autoMap(),this.downloadLink=m.autoMap()}function h(){this.order=m.autoMap(),this.details=m.autoMap(),this.answers=[]}function g(){this.text=m.autoMap(),this.value=m.autoMap()}function v(){var t=this;t.id=m.autoMap(),t.metaReviewerNumber=m.autoMap(),t.metaReviewerId=m.autoMap(),t.metaReviewerName=m.autoMap(),t.userType=m.autoMap(),t.isSubmitted=m.autoMap(),t.questions=[],t.files=[],t.deleteMetaReview=function(){var e;t.id&&t.metaReviewerName&&confirm("You will not be able to revert this action. Are you sure you want to delete meta-review submitted by {0}?".format(t.metaReviewerName))&&(e={requestUri:m.odata.getUrl(m.odata.entitySet.metaReviews,t.id),method:"DELETE"},o.request(e,function(){window.location.reload()},function(e){OData.defaultError(e)}))}}function a(e){var p=this;p.id=e,p.trackName=null,p.title=null,p.isSingleTrackConference=null,p.metaReviews=[],p.print=function(){t()},p.bindTo=function(e){o.read(m.odata.getUrl(m.odata.entitySet.submissions,p.id,"MetaReviews"),function(e){for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o];0===o&&(p.trackName=a.TrackName,p.title=a.SubmissionTitle,p.isSingleTrackConference=a.IsSingleTrackConference);for(var n=m.autoMap(new v,a),i=0;i<a.Questions.length;i++){for(var r=a.Questions[i],s=m.autoMap(new h,r),u=0;u<r.Answers.length;u++)s.answers.push(m.autoMap(new g,r.Answers[u]));n.questions.push(s)}for(i=0;i<a.Files.length;i++){var l=a.Files[i],l=m.autoMap(new f,l);n.files.push(l)}(0<n.metaReviewerNumber?p.metaReviews:t).push(n)}for(var d=0===p.metaReviews.length?1:p.metaReviews[p.metaReviews.length-1].metaReviewerNumber+1,c=0;c<t.length;c++)t[c].metaReviewerNumber=d++,p.metaReviews.push(t[c])}).done(function(){ko.applyBindingsAndShow(p,e)})}}m.submissionMetaReviews=function(e){new a(e).bindTo("submissionForm")}}(window.app,window.OData,window.print),function(i,k,M){"use strict";function r(){var e=this;e.id=k.autoMap(),e.firstName=k.autoMap(),e.lastName=k.autoMap(),e.name=ko.pureComputed(function(){return e.firstName+" "+e.lastName})}function S(e,o){var a=this;e?(a.id=e.Id,a.firstName=e.FirstName,a.middleInitial=e.MiddleInitial,a.lastName=e.LastName,a.email=e.Email,a.organization=e.Organization,a.numberOfBids=e.NumberOfBids,a.numberOfSuggestedSubmissions=e.NumberOfSuggestedSubmissions,a.numberOfSuggestedReviewers=e.NumberOfSuggestedReviewers,a.numberOfAssignment=e.NumberOfAssignment,a.numberOfCompleted=e.NumberOfCompleted,a.percentageOfCompleted=e.PercentageOfCompleted,a.numberOfNotes=e.NumberOfNotes,a.percentageOfCompletedNote=e.PercentageOfCompletedNote,a.numberOfComparisons=e.NumberOfComparisons,a.conflictDomainsEntered=e.ConflictDomainsEntered,a.individualConflictsEntered=e.IndividualConflictsEntered,a.userType=e.UserType,a.quota=e.Quota,a.subjectAreaSelected=e.SubjectAreaSelected,a.primarySubject=e.PrimarySubject,a.secondarySubject=e.SecondarySubject,a.seniorMetaReviewers=e.SeniorMetaReviewers,a.userTagJson=e.UserTagJson):(a.id=k.autoMap(),a.firstName=k.autoMap(),a.middleInitial=k.autoMap(),a.lastName=k.autoMap(),a.email=k.autoMap(),a.organization=k.autoMap(),a.numberOfBids=k.autoMap(),a.numberOfSuggestedSubmissions=k.autoMap(),a.numberOfSuggestedReviewers=k.autoMap(),a.numberOfAssignment=k.autoMap(),a.numberOfCompleted=k.autoMap(),a.percentageOfCompleted=k.autoMap(),a.numberOfNotes=k.autoMap(),a.percentageOfCompletedNote=k.autoMap(),a.numberOfComparisons=k.autoMap(),a.conflictDomainsEntered=k.autoMap(),a.individualConflictsEntered=k.autoMap(),a.userType=k.autoMap(),a.quota=k.autoMap(),a.subjectAreaSelected=k.autoMap(),a.primarySubject=k.autoMap(),a.secondarySubject=k.autoMap(),a.seniorMetaReviewers=k.autoMap(),a.userTagJson=k.autoMap()),a.userTags=[];var t=a.userTagJson&&JSON.parse(a.userTagJson);if(t)for(var n=0;n<t.length;n++)a.userTags.push(k.autoMap(new k.UserTag,t[n]));a.individualConflictsEnteredText=ko.pureComputed(function(){return!0===a.individualConflictsEntered?"Yes":"No"}),a.exportBids=function(){var e=k.odata.getUrl("MetaBiddingModels",null,"ExportToTabDelimitedFile"),t={UserId:a.id,TrackId:o.selectedTrackId()};k.page.post(e,t)},a.impersonate=function(e){confirm("Are you sure to impersonate as {0} {1}?".format(e.firstName,e.lastName))&&(e={requestUri:k.odata.getUrl("Users",e.id,"Impersonate"),method:"POST"},M.request(e,function(e){k.odata.processRedirectResponse(e)}))},a.removeMetaReviewer=function(e){o.removeMetaReviewer(e)}}function y(t,e){var o=e,a=this;a.filter=null,a.userCount=ko.observable(0),a.selectedUserType=ko.observable(""),a.userTypes=o.userTypes,a.submitEnabled=ko.computed(function(){return!(a.userCount()<=0)&&(null!==a.selectedUserType()&&void 0!==a.selectedUserType())}),a.changeUserType=function(){var e={Filter:a.filter,UserTypeOptionId:a.selectedUserType(),TrackId:o.selectedTrackId()},e={requestUri:k.odata.getUrl(o.controller,null,"BulkChangeUserType"),method:"POST",showProgressIndicator:!0,data:{Request:e}};M.request(e,function(e){o.refresh(),setTimeout(function(){k.addMessage("The user types of selected meta-reviewers have been changed.")},500),i(t).modal("hide")})},a.bind=function(){ko.applyBindings(a,t)},a.editInDialog=function(e){e=(a.filter=e)?"&$filter="+encodeURIComponent(e):"";M.read({requestUri:"/api/odata/"+window.cmt3.conference.name+"/"+o.controller+"?trackId="+o.selectedTrackId()+"&$count=true"+e,dataType:"json"},function(e){a.userCount(e["@odata.count"]),a.selectedUserType(""),i(t).modal("show")})}}function I(a,t){var n=this;n.bind=function(){ko.applyBindings(n,a)},n.metaReviewerOptions=ko.observableArray([]),n.selectedMetaReviewerId=ko.observable(null),n.fullName=ko.observable(""),n.metaReviewSubmitted=ko.observable(!1),n.data=null,n.submitEnabled=ko.computed(function(){return null!=n.selectedMetaReviewerId()}),n.editInDialog=function(e){n.data=e,n.metaReviewerOptions([]),n.fullName(n.data.firstName+" "+n.data.lastName),n.metaReviewSubmitted(0<n.data.numberOfCompleted),OData.read(k.odata.getUrl(k.odata.entitySet.trackMetaReviewers+"?trackId="+t.selectedTrackId()+"&$select=Id,FirstName,LastName&$orderby=FirstName"),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t];o.Id!=n.data.id&&(o=k.autoMap(new r,o),n.metaReviewerOptions.push(o))}i(a).modal("show")})},n.transferAssignments=function(){var e={requestUri:k.odata.getUrl(k.odata.entitySet.submissions,null,"TransferMetaAssignments"),method:"POST",showProgressIndicator:!0,data:{Request:{From:n.data.id,To:n.selectedMetaReviewerId()||null,TrackId:t.selectedTrackId()}}};OData.request(e,function(e){0<e.Transferred?(t.refresh(),setTimeout(function(){k.addMessage("{0} papers transferred.".format(e.Transferred))},500),i(a).modal("hide")):e.ExistsConflict&&k.addMessage("Could not transfer all assigned papers due to conflict.",null,"error")})}}k.MetaReviewersStatPage=function(e,t,o,a,n,i,r,s,u,l){var d,c,p=((c=null)!==(d=o)&&0<d.length&&(isNaN(d)||(c=parseInt(d))),c);null==p?k.Page.call(this,e,t,"trackId=-1"):k.Page.call(this,e,t,"trackId="+p);var m=this;function f(e,t){function o(e){return{Role:"MetaReviewer",ObjectId:e,ObjectType:"Track"}}var a={};t?(a.Add=[o(p)],a.Remove=[]):(a.Add=[],a.Remove=[o(p)]);a={requestUri:k.odata.getUrl(k.odata.entitySet.users,e,"ModifyPermissions"),method:"POST",data:{Request:a}};return M.request(a,function(){})}m.controller=t,m.removeMetaReviewer=function(e){var t="Are you sure you want to remove meta-reviewer {0} {1}".format(e.firstName,e.lastName);0<e.numberOfAssignment&&(t+=" who is assigned to {0} paper{1}".format(e.numberOfAssignment,1<e.numberOfAssignment?"s":""),0<e.numberOfCompleted&&(t+=" and has submitted {0} meta-review{1}".format(e.numberOfCompleted,1<e.numberOfCompleted?"s":""))),t+="?",confirm(t)&&f(e.id,!1).done(function(){m.show(),k.addMessage("Meta-Reviewer has been successfully removed.")})};var h=null;function g(e){return e.Name}m.transferAssignments=function(e,t){null===h&&(h=new I(document.getElementById("transferAssignmentsDialog"),m)).bind(),h.editInDialog(e)},m.trackId=p,m.requireConflictDomains=n,m.requireIndividualConflict=i,m.suggestionsEnabled=r,m.useSeniorMetaReviewer=s,m.allowMetaReviewerToCompareSubmission=u,m.userTypes=l,m.userTypesProvider=function(){return m.userTypes.map(g)},m.createItem=function(e){return new S(e,m)},m.changeTrack=function(e){var t="/"+window.cmt3.conference.name+"/User/MetaReviewers";0<=e.id&&(t=t+"?trackId="+e.id),window.location=t},m.tracks=ko.observableArray(),m.selectedTrack=ko.observable(),m.selectedTrackId=ko.pureComputed(function(){var e=m.selectedTrack();if(e&&0<e.id)return e.id;e=m.tracks();return(e=e&&e.filter(function(e){return 0<e.id}))&&1===e.length?e[0].id:-1}),1<a.length&&((l=new k.Track).id=-1,l.name="<All Tracks>",m.tracks.push(l),m.selectedTrack(l));for(var v=0;v<a.length;v++){var w=k.autoMap(new k.Track,a[v]);m.tracks.push(w)}for(v=0;v<m.tracks().length;v++)if(m.trackId==m.tracks()[v].id){m.selectedTrack(m.tracks()[v]);break}m.trackArray=ko.computed(function(){var e=m.tracks();return e&&e.filter(function(e){return 0<e.id})}),m.refresh=function(){m.show()},m.selectedTrackSubscription=m.selectedTrack.subscribe(m.changeTrack),m.users=ko.observableArray(),m.exportMetaReviewers=function(e,t){var o=k.GetEventFilter(t),t=k.odata.getUrl("TrackMetaReviewers",null,"ExportTrackMetaReviewers"),o={TrackId:m.selectedTrackId(),Filter:o};k.page.post(t,o)},m.exportMetaReviews=function(e,t){var o=k.GetEventFilter(t),t="/api/odata/"+window.cmt3.conference.name+"/SubmissionViews/ExportMetaReviews2",o=null!=m.trackId?{Filter:o,TrackId:m.trackId}:{Filter:o};k.page.post(t,o)},m.bulkCopyMetaReviewer=function(e,t){e={Filter:k.GetEventFilter(t),FromTrackId:m.selectedTrackId(),ToTrackId:e.id},e={requestUri:k.odata.getUrl(k.odata.entitySet.trackMetaReviewers,null,"BulkCopyMetaReviewer"),method:"POST",showProgressIndicator:!0,data:{Request:e}};return M.request(e,function(){k.addMessage("Meta-Reviewers have been copied successfully."),location.reload()})},m.bulkRemoveMetaReviewer=function(e,t){if(confirm("Are you sure you want to remove selected meta-reviewers?")){t={Filter:k.GetEventFilter(t),TrackId:m.selectedTrackId()},t={requestUri:k.odata.getUrl(k.odata.entitySet.trackMetaReviewers,null,"BulkRemoveMetaReviewer"),method:"POST",showProgressIndicator:!0,data:{Request:t}};return M.request(t,function(){k.addMessage("Meta-Reviewers have been removed successfully."),location.reload()})}},m.bulkChangeUserType=function(e,t){t=k.GetEventFilter(t);this.changeUserType(t)};var b=null;m.changeUserType=function(e){null===b&&(b=new y(document.getElementById("changeUserTypeDialog"),m)).bind(),b.editInDialog(e)},m.exportMetaReviewerQuotas=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserQuotas",a={TrackId:m.trackId,ForReviewer:!1};k.page.post(o,a)},m.exportMetaReviewerRelevances=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserRelevances",a={TrackId:m.selectedTrackId(),ForReviewer:!1};k.page.post(o,a)},m.exportMetaReviewerSubjectAreas=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserSubjectAreas",a={TrackId:m.selectedTrackId(),ForReviewer:!1,ForSeniorMetaReviewer:!1};k.page.post(o,a)},m.exportMetaReviewerUserTypes=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserTypes",a={TrackId:m.selectedTrackId(),ForReviewer:!1};k.page.post(o,a)},m.importUserQuotas=function(e,t){var o="/"+window.cmt3.conference.name+"/MetaReviewer/ImportQuotas";k.url.navigateTo(o,{trackId:m.trackId})},m.importUserTypes=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTypes";k.url.navigateTo(o,{roleValue:8})},m.importUserTags=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTags";k.url.navigateTo(o,{roleValue:8})},m.email=function(e,t){var o=k.GetEventFilter(t),t="/"+window.cmt3.conference.name+"/MetaReviewer/SendEmail";k.url.navigateTo(t,{filter:0<o.length?o:null,trackId:m.trackId<0?null:m.trackId})}},k.MetaReviewersStatPage.prototype=Object.create(k.Page.prototype)}(window.jQuery,window.app,window.OData),function(i,w,b){"use strict";function r(){var e=this;e.id=w.autoMap(),e.firstName=w.autoMap(),e.lastName=w.autoMap(),e.name=ko.pureComputed(function(){return e.firstName+" "+e.lastName})}function k(e){var t=this;e?(t.id=e.Id,t.firstName=e.FirstName,t.middleInitial=e.MiddleInitial,t.lastName=e.LastName,t.email=e.Email,t.organization=e.Organization,t.numberOfBids=e.NumberOfBids,t.numberOfAssignment=e.NumberOfAssignment,t.numberOfNotes=e.NumberOfNotes,t.numberOfRatings=e.NumberOfRatings,t.percentageOfCompletedNote=e.PercentageOfCompletedNote,t.percentageOfCompletedRating=e.PercentageOfCompletedRating,t.conflictDomainsEntered=e.ConflictDomainsEntered,t.individualConflictsEntered=e.IndividualConflictsEntered,t.userType=e.UserType,t.subjectAreaSelected=e.SubjectAreaSelected,t.primarySubject=e.PrimarySubject,t.secondarySubject=e.SecondarySubject,t.userTagJson=e.UserTagJson):(t.id=w.autoMap(),t.firstName=w.autoMap(),t.middleInitial=w.autoMap(),t.lastName=w.autoMap(),t.email=w.autoMap(),t.organization=w.autoMap(),t.numberOfAssignment=w.autoMap(),t.numberOfBids=w.autoMap(),t.numberOfNotes=w.autoMap(),t.numberOfRatings=w.autoMap(),t.percentageOfCompletedNote=w.autoMap(),t.percentageOfCompletedRating=w.autoMap(),t.conflictDomainsEntered=w.autoMap(),t.individualConflictsEntered=w.autoMap(),t.userType=w.autoMap(),t.subjectAreaSelected=w.autoMap(),t.primarySubject=w.autoMap(),t.secondarySubject=w.autoMap(),t.userTagJson=w.autoMap()),t.userTags=[];var o=t.userTagJson&&JSON.parse(t.userTagJson);if(o)for(var a=0;a<o.length;a++)t.userTags.push(w.autoMap(new w.UserTag,o[a]));t.individualConflictsEnteredText=ko.pureComputed(function(){return!0===t.individualConflictsEntered?"Yes":"No"}),t.impersonate=function(e){confirm("Are you sure to impersonate as {0} {1}?".format(e.firstName,e.lastName))&&(e={requestUri:w.odata.getUrl("Users",e.id,"Impersonate"),method:"POST"},b.request(e,function(e){w.odata.processRedirectResponse(e)}))}}function M(t,e){var o=e,a=this;a.filter=null,a.userCount=ko.observable(0),a.selectedUserType=ko.observable(""),a.userTypes=o.userTypes,a.submitEnabled=ko.computed(function(){return!(a.userCount()<=0)&&(null!==a.selectedUserType()&&void 0!==a.selectedUserType())}),a.changeUserType=function(){var e={Filter:a.filter,UserTypeOptionId:a.selectedUserType(),TrackId:o.selectedTrackId()},e={requestUri:w.odata.getUrl(o.controller,null,"BulkChangeUserType"),method:"POST",showProgressIndicator:!0,data:{Request:e}};b.request(e,function(e){o.refresh(),setTimeout(function(){w.addMessage("The user types of selected senior meta-reviewers have been changed.")},500),i(t).modal("hide")})},a.bind=function(){ko.applyBindings(a,t)},a.editInDialog=function(e){e=(a.filter=e)?"&$filter="+encodeURIComponent(e):"";b.read({requestUri:"/api/odata/"+window.cmt3.conference.name+"/"+o.controller+"?trackId="+o.selectedTrackId()+"&$count=true"+e,dataType:"json"},function(e){a.userCount(e["@odata.count"]),a.selectedUserType(""),i(t).modal("show")})}}function S(a,t){var n=this;n.bind=function(){ko.applyBindings(n,a)},n.seniorMetaReviewerOptions=ko.observableArray([]),n.selectedSeniorMetaReviewerId=ko.observable(null),n.fullName=ko.observable(""),n.assignedText=ko.observable(""),n.data=null,n.submitEnabled=ko.computed(function(){return null!=n.selectedSeniorMetaReviewerId()}),n.editInDialog=function(e){n.data=e,n.seniorMetaReviewerOptions([]),n.fullName(n.data.firstName+" "+n.data.lastName),t.assignSubmissionIndirectlyToSMR?n.assignedText("meta-reviewers"):n.assignedText("papers"),OData.read(w.odata.getUrl(w.odata.entitySet.trackSeniorMetaReviewers+"?trackId="+t.selectedTrackId()+"&$select=Id,FirstName,LastName&$orderby=FirstName"),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t];o.Id!=n.data.id&&(o=w.autoMap(new r,o),n.seniorMetaReviewerOptions.push(o))}i(a).modal("show")})},n.transferAssignments=function(){var e={requestUri:t.assignSubmissionIndirectlyToSMR?w.odata.getUrl(w.odata.entitySet.seniorMetaReviewerBiddingModels,null,"TransferAssignedMetaReviewers"):w.odata.getUrl(w.odata.entitySet.submissions,null,"TransferSeniorMetaAssignments"),method:"POST",showProgressIndicator:!0,data:{Request:{From:n.data.id,To:n.selectedSeniorMetaReviewerId()||null,TrackId:t.selectedTrackId()}}};OData.request(e,function(e){t.assignSubmissionIndirectlyToSMR?(t.refresh(),setTimeout(function(){w.addMessage("The transfer has been completed.")},500),i(a).modal("hide")):0<e.Transferred?(t.refresh(),setTimeout(function(){w.addMessage("{0} papers transferred.".format(e.Transferred))},500),i(a).modal("hide")):e.ExistsConflict&&w.addMessage("Could not transfer all assigned papers due to conflict.",null,"error")})}}w.SeniorMetaReviewersStatPage=function(e,t,o,a,n,i,r,s){var u,l,d=((l=null)!==(u=o)&&0<u.length&&(isNaN(u)||(l=parseInt(u))),l);null===d?w.Page.call(this,e,t,"trackId=-1"):w.Page.call(this,e,t,"trackId="+d);var c=this;function p(e){return e.Name}function m(e,t){function o(e){return{Role:"SeniorMetaReviewer",ObjectId:e,ObjectType:"Track"}}var a={};t?(a.Add=[o(d)],a.Remove=[]):(a.Add=[],a.Remove=[o(d)]);a={requestUri:w.odata.getUrl(w.odata.entitySet.users,e,"ModifyPermissions"),method:"POST",data:{Request:a}};return b.request(a,function(){})}c.trackId=d,c.userTypes=s,c.userTypesProvider=function(){return c.userTypes.map(p)},c.requireConflictDomains=n,c.requireIndividualConflict=i,c.assignSubmissionIndirectlyToSMR=r,c.removeSeniorMetaReviewer=function(e){var t="Are you sure you want to remove senior meta-reviewer {0} {1}".format(e.firstName,e.lastName);0<e.numberOfAssignment&&(c.assignSubmissionIndirectlyToSMR?t+=" who is assigned to {0} meta-reviewer{1}".format(e.numberOfAssignment,1<e.numberOfAssignment?"s":""):t+=" who is assigned to {0} paper{1}".format(e.numberOfAssignment,1<e.numberOfAssignment?"s":"")),t+="?",confirm(t)&&m(e.id,!1).done(function(){c.show(),w.addMessage("Senior Meta-Reviewer has been successfully removed.")})},c.createItem=function(e){return new k(e)},c.changeTrack=function(e){var t="/"+window.cmt3.conference.name+"/User/SeniorMetaReviewers";0<=e.id&&(t=t+"?trackId="+e.id),window.location=t},c.tracks=ko.observableArray(),c.selectedTrack=ko.observable();r=null;if(1<a.length?((r=new w.Track).id=-1,r.name="<All Tracks>"):0<a.length&&(r=w.autoMap(new w.Track,a[0]),c.trackId=r.id),c.tracks.push(r),c.selectedTrack(r),c.selectedTrackId=ko.pureComputed(function(){var e=c.selectedTrack();if(e&&0<e.id)return e.id;e=c.tracks();return(e=e&&e.filter(function(e){return 0<e.id}))&&1===e.length?e[0].id:-1}),1<a.length){for(var f=0;f<a.length;f++){var h=w.autoMap(new w.Track,a[f]);c.tracks.push(h)}for(f=0;f<c.tracks().length;f++)if(c.trackId===c.tracks()[f].id){c.selectedTrack(c.tracks()[f]);break}c.selectedTrackSubscription=c.selectedTrack.subscribe(c.changeTrack)}c.users=ko.observableArray(),c.importUserTypes=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTypes";w.url.navigateTo(o,{roleValue:256})},c.importUserTags=function(e,t){var o="/"+window.cmt3.conference.name+"/User/ImportUserTags";w.url.navigateTo(o,{roleValue:256})},c.email=function(e,t){var o=w.GetEventFilter(t),t="/"+window.cmt3.conference.name+"/SeniorMetaReviewer/SendEmail";w.url.navigateTo(t,{filter:0<o.length?o:null,trackId:c.trackId<0?null:c.trackId})},c.importSeniorMetaReviewerAssignments=function(e,t){var o="/"+window.cmt3.conference.name+"/SeniorMetaReviewer/ImportAssignments";w.url.navigateTo(o,{trackId:c.trackId})},c.exportSeniorMetaReviewers=function(e,t){var o=w.GetEventFilter(t),t=w.odata.getUrl("TrackSeniorMetaReviewers",null,"ExportTrackSeniorMetaReviewers"),o={TrackId:c.trackId,Filter:o};w.page.post(t,o)},c.exportSeniorMetaReviewerBids=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportSeniorMetaReviewerBids",a={TrackId:c.trackId};w.page.post(o,a)},c.exportSeniorMetaReviewerAssignments=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportSeniorMetaReviewerAssignments",a={TrackId:c.trackId};w.page.post(o,a)},c.exportSeniorMetaReviewerSubjectAreas=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/ExportUserSubjectAreas",a={TrackId:c.trackId,ForReviewer:!1,ForSeniorMetaReviewer:!0};w.page.post(o,a)},c.bulkChangeUserType=function(e,t){t=w.GetEventFilter(t);this.changeUserType(t)};var g=null;c.changeUserType=function(e){null===g&&(g=new M(document.getElementById("changeUserTypeDialog"),c)).bind(),g.editInDialog(e)};var v=null;c.transferAssignments=function(e,t){null===v&&(v=new S(document.getElementById("transferAssignmentsDialog"),c)).bind(),v.editInDialog(e)},c.refresh=function(){c.show()}},w.SeniorMetaReviewersStatPage.prototype=Object.create(w.Page.prototype)}(window.jQuery,window.app,window.OData),function(s,u,l,d){"use strict";var n=null==s.url?null:s.url.queryString.getValue("filter");function i(n,e){var i=this,r=null;i.parent=e,i.fromEmail=ko.observable(),i.fromName=ko.observable(),i.toEmail=ko.observable(),i.toName=ko.observable(),i.subject=ko.observable(),i.body=ko.observable(""),i.previewIndex=ko.observable(0),i.showInDialog=function(){i.previewIndex(0),i.refreshPreview(function(){l(n).modal("show")})},i.isPreviousEnabled=ko.pureComputed(function(){return 0<this.previewIndex()},i),i.isNextEnabled=ko.pureComputed(function(){return this.previewIndex()+1<this.parent.emails().length},i),i.previousClick=function(){0<i.previewIndex()&&(i.previewIndex(i.previewIndex()-1),i.refreshPreview())},i.nextClick=function(){i.previewIndex()+1<i.parent.emails().length&&(i.previewIndex(i.previewIndex()+1),i.refreshPreview())},i.refreshPreview=function(t){var e=i.parent.emails()[i.previewIndex()],e={InviteType:i.parent.inviteType,ReviewerInvitationId:e,Subject:i.parent.subject(),Body:i.parent.body()},e={requestUri:s.odata.getUrl(s.odata.entitySet.emails,null,"ResendInvitesPreview"),method:"POST",data:{Request:e}};u.request(e,function(e){i.fromEmail(e.FromEmail),i.fromName(e.FromName),i.toEmail(e.ToEmail),i.toName(e.ToName),i.subject(e.Subject),i.body(e.Body),t&&t()})},i.sendEmails=function(){for(var e=[],t=0;t<i.parent.emails().length;t++){var o=i.parent.emails()[t];e.push(o)}var a={InviteType:i.parent.inviteType,Invites:e,Subject:i.parent.subject(),Body:i.parent.body()},a={requestUri:s.odata.getUrl(s.odata.entitySet.emails,null,"ResendInvites"),method:"POST",data:{Request:a}};u.request(a,function(e){e=e.value;l(n).modal("hide"),r||(r=new s.EmailProgressViewModel(d.getElementById("showProgressDialog"))).bind(),r.showInDialog(e)})},i.bind=function(){ko.applyBindings(i,n)}}function a(e,o){var a=this,t=null;a.inviteType=o,a.from=e,a.subject=ko.observable("").extend({required:!0}).autoMap(),a.body=ko.observable("").extend({required:!0}).autoMap(),a.emails=ko.observableArray(),a.showPlaceholders=ko.observable(!1),a.previewEnabled=ko.pureComputed(function(){return 0<this.emails().length},a),a.previewEmail=function(){a.emails().length<=0||!function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;return!0}()||function(){t||(t=new i(d.getElementById("previewEmailDialog"),a)).bind();t.showInDialog()}()},a.bindTo=function(e){var t;l.when((t={InvitesFilter:n,InviteType:o},t={requestUri:s.odata.getUrl(s.odata.entitySet.emails,null,"ResendInvitesInfo"),method:"POST",data:{Request:t}},u.request(t,function(e){for(var t=0;t<e.Invites.length;t++)a.emails.push(e.Invites[t]);a.subject(e.Subject),a.body(e.Body)}))).done(function(){ko.applyBindingsAndShow(a,e)})}}s.resendInvites=function(e,t,o){new a(e,t).bindTo(o)}}(window.app,window.OData,window.jQuery,window.document),ExternalReviewPage.prototype={listen:function(){var e=this;$(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return $.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},show:function(){var a=this;if(!a.initialized)return $.Deferred().reject().promise();var n=a.sort(),i=a.top(),r=a.skip(),s=a.getFilter(),e=n?"&$orderby="+n:"",t=i?"&$top="+i:"",o=r?"&$skip="+r:"",u=s?"&$filter="+encodeURIComponent(s):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+this.conference+"/"+a.controller+"?$count=true"+e+u+o+t,method:"GET",headers:{Accept:"application/json"}}]}};return OData.request(t,function(e){app.page.saveState("externalReviewModels",{sort:n,top:i,skip:r,filter:s});var t=e.responses[0].body,e=t["@odata.count"],t=t.value,o=[];$.each(t,function(e,t){o.push(new ExternalReviewModel(t,a.pageUrls))}),a.externalReviewModels(o),0==a._total()&&a._total(e),a.selected(e),$("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},OData.batchHandler)},scroll:function(){$(window).scrollTop()==$(document).height()-$(window).height()&&self.show()},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){$.each(this.filters,function(e,t){t.reset()}),app.announce(app.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){$("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),$(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=$(t.target).attr("size"),t=parseInt(t);this.top(t),app.announce(app.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=$(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=$(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):($("th[data-sort]").each(function(){$(this).find("i").removeClass("icon-arrow-up"),$(this).find("i").removeClass("icon-arrow-down"),$(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&app.announce(app.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()},showAbstract:function(e,t){ko.contextFor(t.target).$parent;var o=$(t.currentTarget),t=o.next();t.is(":visible")?(t.hide(),o.text("Show abstract")):(t.show(),o.text("Hide abstract"))}},function(r,a,s){"use strict";function o(e){this.number=e.Number,this.errorMessage=e.ErrorMessage}function u(e){if(this.reviewId=e.ReviewId,this.submissionId=e.SubmissionId,this.title=e.Title,this.errorMessage=e.ErrorMessage,this.questions=[],null!==e.BadQuestions)for(var t=0;t<e.BadQuestions.length;t++)this.questions.push(new o(e.BadQuestions[t]))}function n(e,t){this.id=e.Id,this.title=e.Title,this.track=e.Track,this.selected=ko.observable(!1),this.enabled=t?e.MetaReviewingEnabled:e.ReviewingEnabled||e.DiscussionEnabled&&e.SubmissionEnabledForDiscussion}function i(e,t){var i=this;i.isMeta=e,i.models=ko.observableArray(),i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.uploading=ko.observable(!1),i.goodPapers=ko.observableArray(),i.badPapers=ko.observableArray(),i.file=ko.observable(null),i.getReviewUrl=function(e){return(i.isMeta?t.metaReviewView:t.reviewView).format(e)},i.getSubmissionUrl=function(e){return t.submissionView.format(e)},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=s.parseJSON(s("#singleFileUploadFrame").contents().text());if(i.goodPapers.removeAll(),i.badPapers.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=new u(o.Models[a]);(null===n.reviewId?i.badPapers:i.goodPapers).push(n)}i.isFileUploaded(!0),i.uploading(!1),i.file(null)},i.downloadClick=function(){for(var e=[],t=0;t<i.models().length;t++){var o=i.models()[t];o.selected()&&e.push(o.id)}var a=e.join(","),n="/api2/"+window.cmt3.conference.name+"/ExportReviewTemplate",a={Ids:a,IsMeta:i.isMeta};r.page.post(n,a)},i.atLeastOneSubmissionSelected=ko.computed(function(){for(var e=!1,t=0;t<i.models().length;t++)e|=i.models()[t].selected();return e}),i.bindTo=function(e){var o;s.when((o=i.isMeta,a.request({requestUri:r.odata.getUrl((o?r.odata.entitySet.metaReviewModels:r.odata.entitySet.reviewModels)+"?$filter=Assigned eq true")},function(e){for(var t=0;t<e.value.length;t++)i.models.push(new n(e.value[t],o))}))).done(function(){ko.applyBindingsAndShow(i,e)})}}r.importReviews=function(e,t,o){new i(e,t).bindTo(o)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.metaReviewers=ko.observableArray(),i.normalMetaReviewers=ko.observableArray(),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.uploading=ko.observable(!1),i.tracks=ko.observableArray(),i.atLeastOneTrackSelected=ko.computed(function(){for(var e=!1,t=0;t<i.tracks().length;t++)e|=i.tracks()[t].checked();return e}),i.loadTracks=function(){return n.read(a.odata.getUrl(a.odata.entitySet.tracks),function(e){for(var t=0;t<e.value.length;t++){var o=a.autoMap(new a.TrackWithCheck,e.value[t]);i.tracks.push(o)}})},i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/User/MetaReviewers"},i.getModel=function(){for(var e=[],t=0;t<i.normalMetaReviewers().length;t++){var o=i.normalMetaReviewers()[t],o={FirstName:o.firstName,MiddleInitial:o.middleInitial,LastName:o.lastName,Organization:o.organization,Email:o.email};e.push(o)}for(var a=[],t=0;t<i.tracks().length;t++){var n=i.tracks()[t];n.checked()&&a.push(n.id)}return{Reviewers:e,Tracks:a,IsMeta:!0,IsSenior:!1}},i.send=function(e,t){var o;i.atLeastOneTrackSelected()&&(o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.reviewers,null,"Import"),method:"POST",data:{Request:o}},n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/User/MetaReviewers"}))},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.metaReviewers.removeAll(),i.normalMetaReviewers.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={organization:n.Organization,email:n.Email,firstName:n.FirstName,lastName:n.LastName,middleInitial:n.MiddleInitial,notice:n.Note,rawData:n.RawData,hasError:n.HasError};i.metaReviewers.push(n),n.hasError||i.normalMetaReviewers.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){i.loadTracks().done(function(){ko.applyBindingsAndShow(i,e)})}}a.importMetaReviewers=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.seniorMetaReviewers=ko.observableArray(),i.normalSeniorMetaReviewers=ko.observableArray(),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.uploading=ko.observable(!1),i.tracks=ko.observableArray(),i.atLeastOneTrackSelected=ko.computed(function(){for(var e=!1,t=0;t<i.tracks().length;t++)e|=i.tracks()[t].checked();return e}),i.loadTracks=function(){return n.read(a.odata.getUrl(a.odata.entitySet.tracks),function(e){for(var t=0;t<e.value.length;t++){var o=a.autoMap(new a.TrackWithCheck,e.value[t]);i.tracks.push(o)}})},i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/User/SeniorMetaReviewers"},i.getModel=function(){for(var e=[],t=0;t<i.normalSeniorMetaReviewers().length;t++){var o=i.normalSeniorMetaReviewers()[t],o={FirstName:o.firstName,MiddleInitial:o.middleInitial,LastName:o.lastName,Organization:o.organization,Email:o.email};e.push(o)}for(var a=[],t=0;t<i.tracks().length;t++){var n=i.tracks()[t];n.checked()&&a.push(n.id)}return{Reviewers:e,Tracks:a,IsMeta:!0,IsSenior:!0}},i.send=function(e,t){var o;i.atLeastOneTrackSelected()&&(o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.reviewers,null,"Import"),method:"POST",data:{Request:o}},n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/User/SeniorMetaReviewers"}))},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.seniorMetaReviewers.removeAll(),i.normalSeniorMetaReviewers.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={organization:n.Organization,email:n.Email,firstName:n.FirstName,lastName:n.LastName,middleInitial:n.MiddleInitial,notice:n.Note,rawData:n.RawData,hasError:n.HasError};i.seniorMetaReviewers.push(n),n.hasError||i.normalSeniorMetaReviewers.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){i.loadTracks().done(function(){ko.applyBindingsAndShow(i,e)})}}a.importSeniorMetaReviewers=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.bids=ko.observableArray(),i.normalBids=ko.observableArray(),i.uploading=ko.observable(!1),i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},i.getModel=function(){for(var e=[],t=0;t<i.normalBids().length;t++){var o=i.normalBids()[t],o={Email:o.email,SubmissionId:o.id,BidValue:o.bidValue};e.push(o)}return{Bids:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.metaBiddingModels,null,"Import"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/MetaBiddingModels/GetImportTemplate";a.page.post(o,{})},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.bids.removeAll(),i.normalBids.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,id:n.Id,bid:n.Bid,bidValue:n.BidValue,status:n.Status,hasError:n.HasError,lineNumber:n.LineNumber};i.bids.push(n),n.hasError||i.normalBids.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importMetaBids=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm,window.setTimeout)),function(l,d,c){"use strict";function p(e,t){var o=this;o.id=e.Id,o.title=e.Title,o.track=e.Track,o.referenceFiles=[],o.uploadReferenceUrl=function(){return t.referenceDetails.format(o.id)},o.uploadReferenceLinkVisible=function(){return!0},o.referenceLinkTitle=function(){return 0<o.referenceFiles.length?"Update":"Upload"}}d.ReferencePage=function(e,t){var o=this;o.$element=l(e),o.conference=window.cmt3.conference.name,o.page=ko.observable(1),o.top=ko.observable(25),o.sort=ko.observable("Id"),o.controller="ReferenceModels",o.filters=[],o._total=ko.observable(0),o.selected=ko.observable(0),o.referenceModels=ko.observableArray(),o.listen(),o.Pager=ko.pager(o.selected,o.top),o.Pager().CurrentPage.subscribe(function(){o.page(o.Pager().CurrentPage()),o.show()}),o.pageUrls=t,o.showWelcomeMessage=function(){l(document.getElementById("welcomeMessageDialog")).modal("show")}},d.ReferencePage.prototype={listen:function(){var e=this;l(document).on("data.filter",function(){e.Pager().CurrentPage()<2?e.show():e.Pager().CurrentPage(1)})},getFilter:function(){var o="";return l.each(this.filters,function(e,t){t.getValue()&&(o+=""==o?t.getValue():" and "+t.getValue())}),o},show:function(){var i=this;if(!i.initialized)return l.Deferred().reject().promise();var o=i.sort(),a=i.top(),r=i.skip(),s=i.getFilter(),e=o?"&$orderby="+o:"",t=a?"&$top="+a:"",n=r?"&$skip="+r:"",u=s?"&$filter="+encodeURIComponent(s):"",t={headers:{Accept:"application/json"},requestUri:"/api/odata/"+this.conference+"/$batch",method:"POST",data:{requests:[{url:"/api/odata/"+this.conference+"/"+i.controller+"?$count=true"+e+u+n+t,method:"GET",headers:{Accept:"application/json"}}]}};return c.request(t,function(e){d.page.saveState("referenceModels",{sort:o,top:a,skip:r,filter:s});var t=e.responses[0].body,e=t["@odata.count"],t=t.value,n=[];l.each(t,function(e,t){for(var o=new p(t,i.pageUrls),a=0;a<t.ReferenceFiles.length;a++)o.referenceFiles.push(d.autoMap(new d.File,t.ReferenceFiles[a]));n.push(o)}),i.referenceModels(n),0==i._total()&&i._total(e),i.selected(e),l("html,body").scrollTop(0)},function(e){window.cmt3.logger.log(e.message)},c.batchHandler)},scroll:function(){l(window).scrollTop()==l(document).height()-l(window).height()&&self.show()},post:function(e,t,o){o=o||"post";var a,n,i=document.createElement("form");for(a in i.setAttribute("method",o),i.setAttribute("action",e),t)t.hasOwnProperty(a)&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),i.appendChild(n));document.body.appendChild(i),i.submit(),document.body.removeChild(i)},stub:function(){alert("Sorry, this feature is not implemented yet.")},reset:function(){l.each(this.filters,function(e,t){t.reset()}),d.announce(d.narratorMessages.allFiltersCleared),this.show()},size:function(e,t){l("a",".show").removeClass("btn-success").css("color","#999999").attr("href","#"),l(t.currentTarget).addClass("btn-success").css("color","white").removeAttr("href");t=l(t.target).attr("size"),t=parseInt(t);this.top(t),d.announce(d.narratorMessages.showingNumberItemsPerPage.format(t||"all"));t=this.Pager().CurrentPage();this.Pager().CurrentPage(1),1===t&&this.show()},skip:function(){return(this.page()-1)*this.top()},prev:function(){0!=this.top()&&1!=this.page()&&(this.page(this.page()-1),this.show())},next:function(){0==this.top()||this.page()>this.selected()/this.top()||(this.page(this.page()+1),this.show())},setSort:function(e,t){var o=l(t.currentTarget),t=o.attr("data-sort");null==t&&(t=(o=l(o.context.parentNode)).attr("data-sort"));var a=o.children("a.sortlink").text(),n=null;o.hasClass("selected")?n=this.sort().match(" desc$")?(this.sort(t+" asc"),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),"ascending"):(this.sort(t+" desc"),o.find("i").removeClass("icon-arrow-up"),o.find("i").addClass("icon-arrow-down"),"descending"):(l("th[data-sort]").each(function(){l(this).find("i").removeClass("icon-arrow-up"),l(this).find("i").removeClass("icon-arrow-down"),l(this).removeClass("selected")}),o.find("i").removeClass("icon-arrow-down"),o.find("i").addClass("icon-arrow-up"),n="ascending",o.addClass("selected"),this.sort(t+" asc")),this.show().done(function(){n&&d.announce(d.narratorMessages.sortedBy.format(a,n))})},refresh:function(){this.show()}}}(window.jQuery,window.app,window.OData),function(n,i,r,s){function o(t,o,e){var a=this;a.parentViewModel=t,a.conflictViewModel=e,a.disputeReason=ko.observable(e.disputeReason).extend({required:!0}),a.dispute=function(){var e;!function(){var e=ko.validation.group(a);if(0<e().length)return e.showAllMessages(),!1;return!0}()||(e={requestUri:n.odata.getUrl(n.odata.entitySet.userDisputeConflicts),method:"POST",data:{SubmissionId:a.conflictViewModel.submissionId,DisputeReason:a.disputeReason()}},r.request(e,function(){$(o).modal("hide"),t.refresh()},function(e){t.showODataError(e),t.refresh()}))},$(o).modal("show")}function t(e){var t=this;t.disputeId=e.DisputeId,t.submissionId=e.SubmissionId,t.submissionTitle=e.SubmissionTitle,t.submissionAuthors=e.SubmissionAuthors.split("\r\n"),t.trackId=e.TrackId,t.trackName=e.TrackName,t.conflictReasons=e.ConflictReasons.split("\r\n"),t.disputeStatus=ko.observable(e.DisputeStatus),t.disputeStatusText=ko.pureComputed(function(){return n.enums.disputedConflictStatus[t.disputeStatus()]||"Unknown"}),t.disputeReason=e.DisputeReason}function a(e){var t=this;t.disputeId=e.DisputeId,t.submissionId=e.SubmissionId,t.submissionTitle=e.SubmissionTitle,t.submissionAuthors=e.SubmissionAuthors&&e.SubmissionAuthors.split("\r\n"),t.trackId=e.TrackId,t.reviewerId=e.ReviewerId,t.reviewerName=e.ReviewerName,t.reviewerEmail=e.ReviewerEmail,t.reviewerOrganization=e.ReviewerOrganization,t.trackName=e.TrackName,t.conflictReasons=e.ConflictReasons&&e.ConflictReasons.split("\r\n"),t.disputeStatus=ko.observable(e.DisputeStatus),t.disputeStatusText=ko.pureComputed(function(){return n.enums.disputedConflictStatus[t.disputeStatus()]||"Unknown"}),t.disputeReason=e.DisputeReason}function u(e,t){var a=this;if(a.conference=s.name,a.savedState=a.loadState(),a.submissionId=t,a.total=ko.observable(0),a.page=ko.observable(a.savedState.page),a.top=ko.observable(a.savedState.top),a.skip=ko.computed(function(){return(a.page()-1)*a.top()}),a.pager=ko.pager(a.total,a.top),a.pager().CurrentPage.subscribe(function(){a.page(a.pager().CurrentPage()),a.loadData()}),a.conflicts=ko.observableArray(),a.filters=[],a.sortableColumns={},a.sorting=ko.observable(a.savedState.sorting),$.each(a.sortableColumns,function(e,t){t.property()!==savedState.sorting.property?t.direction(null):t.direction(savedState.sorting.direction)}),$(i).on("data.filter",function(){a.pager().CurrentPage()<2?a.loadData():a.pager().CurrentPage(1)}),ko.applyBindingsAndShow(a,e),a.savedState&&a.savedState.sorting&&a.savedState.sorting.property&&a.sortableColumns&&a.sortableColumns[a.savedState.sorting.property])for(var o in a.sortableColumns)a.sortableColumns[o].direction(o!==a.savedState.sorting.property?null:a.savedState.sorting.direction);$.each(a.savedState.filters,function(e,o){$.each(a.filters,function(e,t){t.field===o.property&&t.setValue(o.value)})}),a.loadData()}function l(e,t,o){this.controller=n.odata.entitySet.chairDisputeConflicts,u.call(this,e,t),this.pageUrl=o}function d(e,t){this.controller=n.odata.entitySet.userDisputeConflicts,u.call(this,e),this.disputeDialogElementId=t}u.prototype={loadState:function(){var e={page:1,top:25,sorting:{property:"SubmissionId",direction:"asc"},filters:[]};return sessionStorage&&JSON.parse(sessionStorage.getItem(this.controller))||e},saveState:function(){var a,e;sessionStorage&&(a=[],$.each(this.filters,function(e,t){var o=t.getValue();o&&a.push({property:t.field,value:o})}),e={page:this.page(),top:this.top(),sorting:this.sorting(),filters:a},sessionStorage.setItem(this.controller,JSON.stringify(e)))},size:function(e){this.top(e),n.announce(n.narratorMessages.showingNumberItemsPerPage.format(e||"all")),this.loadData()},sort:function(e){this.sorting({property:e.property(),direction:e.direction()}),this.loadData();var t=e.direction();!t||"asc"!==t&&"desc"!==t||n.announce(n.narratorMessages.sortedBy.format(e.title,t+="ending"))},resetFilters:function(){$.each(this.filters,function(e,t){t.reset()}),n.announce(n.narratorMessages.allFiltersCleared),this.pager().CurrentPage()<2?this.loadData():this.pager().CurrentPage(1)},refresh:function(){this.loadData()},loadData:function(){var i=this,e=i.sorting(),t=e?"&$orderby="+encodeURIComponent(e.property+" "+e.direction):"",o=i.skip()?"&$skip="+i.skip():"",e=i.top()?"&$top="+i.top():"",a="";$.each(i.filters,function(e,t){t.getValue()&&(a+=a?" and "+t.getValue():t.getValue())}),i.submissionId&&(a+=a?" and ":"",a+="(SubmissionId eq "+i.submissionId+")");a=a&&"&$filter="+encodeURIComponent(a),e={headers:{Accept:"application/json"},requestUri:"/api/odata/"+s.name+"/$batch",method:"POST",data:{requests:[{url:n.odata.getUrl(i.controller)+"?$count=true"+a+t+o+e,method:"GET",headers:{Accept:"application/json"}}]}};r.request(e,function(e){for(var t=e.responses[0].body,e=t["@odata.count"],o=t.value,a=[],n=0;n<o.length;n++)a.push(i.getConflictViewModel(o[n]));i.conflicts(a),i.total(e),i.saveState()},function(e){i.showODataError(e)},OData.batchHandler)},showODataError:function(e){e&&e.response&&e.response.body&&((e=$.parseJSON(e.response.body))&&e.error&&e.error.message&&(e=e.error.message,n.addMessage(e,null,"error")))}},l.prototype=$.extend({},u.prototype,{getConflictViewModel:function(e){return new a(e)},changeStatus:function(e){var t=this;"Kept"!==e.disputeStatus()&&"Deleted"!==e.disputeStatus()||(e={requestUri:n.odata.getUrl(n.odata.entitySet.chairDisputeConflicts,e.disputeId),method:"PATCH",data:{DisputeStatus:e.disputeStatus()}},r.request(e,function(){},function(e){t.showODataError(e),t.refresh()}))},emailReviewer:function(e){var t="Id eq {0}".format(e.reviewerId),e="/"+this.conference+"/User/SendEmail/";n.url.navigateTo(e,{filter:t,returnTo:this.pageUrl})},emailAuthors:function(e){var t="Id eq {0}".format(e.submissionId),e="/"+this.conference+"/Submission/SendEmail/2";n.url.navigateTo(e,{filter:t,returnTo:this.pageUrl})}}),d.prototype=$.extend({},u.prototype,{getConflictViewModel:function(e){return new t(e)},dispute:function(e){var t=i.getElementById(this.disputeDialogElementId);this.disputeDialog?this.disputeDialog(new o(this,t,e)):(this.disputeDialog=ko.observable(new o(this,t,e)),ko.applyBindings(this.disputeDialog,t))},withdraw:function(e){var t=this,e={requestUri:n.odata.getUrl(n.odata.entitySet.userDisputeConflicts,e.disputeId),method:"DELETE"};r.request(e,function(){t.refresh()},function(e){t.showODataError(e),t.refresh()})}}),n.userDisputeConflictsPage=function(e,t){new d(e,t)},n.chairManageDisputedConflictsPage=function(e,t,o){new l(e,t,o)}}(window.app,window.document,window.OData,window.cmt3.conference),function(n,i,r){function o(e,t){var o,a=this;a.conflictDomains=ko.observable(),a.save=function(){var e={requestUri:n.odata.getUrl(n.odata.entitySet.conflictDomains),method:"POST",data:{UserId:t,DomainNames:a.conflictDomains()}};r.request(e,function(){n.addMessage("Domain conflicts saved.",null,"success","text",!0),window.location.reload()},r.defaultError)},o={requestUri:n.odata.getUrl(n.odata.entitySet.conflictDomains,t),method:"GET"},r.request(o,function(e){a.conflictDomains(e.DomainNames)},r.defaultError),ko.applyBindings(a,i.getElementById(e))}n.conflictDomainsPage=function(e,t){new o(e,t)}}(window.app,window.document,window.OData),function(s,r,a){"use strict";function u(o){var e,a=this;function n(){i(),e=a.isConflicting.subscribe(t)}function i(){e&&"function"==typeof e.dispose&&e.dispose()}function t(){void 0===a.initialState?a.initialState=a.isConflicting():function(){var t=this;t.isToggleInProgress(!0);var e={UserId:t.id};e.Type=t.isConflicting()?"Add":"Remove",OData.request({requestUri:s.odata.getUrl(s.odata.entitySet.individualConflictViews,o,"Modify"),method:"POST",showProgressIndicator:!1,data:{Request:e}},function(){t.isConflicting()===t.initialState?a.css(""):a.css(t.isConflicting()?"success":"error")},function(e){i(),a.isConflicting(!a.isConflicting()),n(),s.addErrorMessage("Unable to mark conflict with '"+t.firstName+" "+t.lastName+"'. "+s.odata.getErrorMessage(e))}).always(function(){t.isToggleInProgress(!1)})}.call(a)}a.id=s.autoMap(),a.name=s.autoMap(),a.firstName=s.autoMap(),a.lastName=s.autoMap(),a.organization=s.autoMap(),a.isConflicting=ko.observable().autoMap(),a.initialState=void 0,a.css=ko.observable(""),a.isToggleInProgress=ko.observable(!1),n()}function n(e,t){var o,a=this;function n(){i(),o=a.isAttested.subscribe(r)}function i(){o&&"function"==typeof o.dispose&&o.dispose()}function r(){!function(){var t=this;t.isToggleInProgress(!0),OData.request({requestUri:s.odata.getUrl(s.odata.entitySet.individualConflictViews,null,"SetAttestState"),method:"POST",showProgressIndicator:!1,data:{UserId:t.userId,IsAttested:t.isAttested()}},function(){t.css("success")},function(e){i(),t.isAttested(!t.isAttested()),n(),t.css("error"),s.addErrorMessage("Unable to change attest state. "+s.odata.getErrorMessage(e))}).always(function(){t.isToggleInProgress(!1)})}.call(a)}a.userId=e,a.isAttested=ko.observable(t).autoMap(),a.users=ko.observableArray([]),a.initialState=t,a.css=ko.observable(""),a.isToggleInProgress=ko.observable(!1),n(),s.DataTable.call(a)}function i(e,t,o){s.showProgress(),this.table=new n(e,t),ko.applyBindings(this,a.getElementById(o)),$.when(this.table.loadData(!0)).then(function(){$("#"+o).show()}).always(s.hideProgress)}n.prototype=$.extend({},s.DataTable.prototype,{getStorageKey:function(){return"IndividualConflicts"},getDefaultSorting:function(){return{property:"IsConflicting",direction:"desc"}},loadData:function(e){var n=this;(e=!0===e)&&n.applyState();var t=n.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=n.skip()?"&$skip="+n.skip():"",t=n.top()?"&$top="+n.top():"",i="";$.each(n.filters,function(e,t){t.getValue()&&(i+=i?" and "+t.getValue():t.getValue())});i=i&&"&$filter="+encodeURIComponent(i),e={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.individualConflictViews,n.userId)+"?$count=true"+i+o+a+t,showProgressIndicator:!e};return r.request(e,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=s.autoMap(new u(n.userId),a);t.push(a)}n.users(t),n.saveState()},function(e){s.addErrorMessage(s.odata.getErrorMessage(e))})}}),s.individualConflicts=function(e,t,o){new i(e,t,o)}}(window.app,window.OData,window.document),function(d,c,p){function m(e){this.id=e.Id,this.firstName=e.FirstName,this.lastName=e.LastName,this.email=e.Email,this.organization=e.Organization}function s(e,n,t,o,a,i,r){var s=this;s.allowEditConflictDomains=t,s.allowEditIndividualConflicts=o,s.oneChanceToEditConflicts=a,s.conflictDomains=ko.observable().extend({required:!0,maxLength:1e3}).autoMap(),s.conflictingUsers=ko.observableArray(),s.nonCMTConflictingUsers=ko.observableArray();var u,l,i=i?$.parseJSON(i):[];s.nonCMTConflictingUsers(i),s.to=ko.observable(null).extend({required:{onlyIf:function(){return s.validationEnabled&&""!==s.answer()}},email:!0,maxLength:200}),s.showValidationWarning=ko.observable(!1),s.isSearching=ko.observable(),s.searched=ko.observable(!1),s.userFound=ko.observable(!1),s.userNotFound=ko.observable(!1),s.newNonCMTConflictUser=new function(e){var t=this;t.firstName=ko.observable().extend({required:{message:"First Name is required."},maxLength:200}),t.lastName=ko.observable().extend({required:{message:"Last Name is required."},maxLength:200}),t.organization=ko.observable().extend({required:{message:"Organization is required."},maxLength:200}),t.email=ko.observable().extend({email:!0,required:{message:"Email is required."},maxLength:200,validation:{validator:function(e,t){for(var o=0;o<t.length;o++)if(t[o].email===e)return!1;return!0},message:"Author with the same email already exists.",params:e}}),t.cancelAdd=function(){t.firstName(""),t.firstName.isModified(!1),t.lastName(""),t.lastName.isModified(!1),t.organization(""),t.organization.isModified(!1),t.email(""),t.email.isModified(!1)}}(s.nonCMTConflictingUsers),s.search=function(){var e=ko.validation.group([s.to]);0<e().length?e.showAllMessages():(s.isSearching(!0),e={requestUri:d.odata.getGlobalUrl(d.odata.entitySet.users,null,"SearchByEmail"),method:"POST",showProgressIndicator:!1,data:{Email:s.to()}},OData.read(e,function(e){var t=new m(e),e=s.conflictingUsers();e.push(t),e.sort(function(e,t){return e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase())}),s.conflictingUsers(e),s.conflictingUsers.valueHasMutated(),s.userNotFound(!1),s.isSearching(!1),s.to(null)},function(e){s.isSearching(!1),404===e.response.statusCode?s.userNotFound(!0):OData.defaultError(e)}))},s.removeConflictUser=function(e){this.conflictingUsers().splice(e,1),this.conflictingUsers.valueHasMutated()},s.addNonCMTConflictUser=function(e){var t,o=ko.validation.group([e.firstName,e.lastName,e.email,e.organization]);0<o().length?o.showAllMessages():(t=new m({FirstName:e.firstName(),LastName:e.lastName(),Email:e.email(),Organization:e.organization()}),(o=s.nonCMTConflictingUsers()).push(t),o.sort(function(e,t){return e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase())}),s.nonCMTConflictingUsers(o),s.nonCMTConflictingUsers.valueHasMutated(),e.cancelAdd())},s.removeNonCMTConflictUser=function(e){this.nonCMTConflictingUsers().splice(e,1),this.nonCMTConflictingUsers.valueHasMutated()},s.confirmSave=function(){var e=!0,t=ko.validation.group(s,{deep:!1});0<t().length&&(t.showAllMessages(),e=!1),e?(s.showValidationWarning(!1),e=c.getElementById("saveConflictsDialog"),$(e).modal("show")):s.showValidationWarning(!0)},s.save=function(){var e=!0,t=ko.validation.group(s,{deep:!1});if(0<t().length&&(t.showAllMessages(),e=!1),e){if(s.showValidationWarning(!1),s.allowEditConflictDomains){t=null;if(s.allowEditIndividualConflicts){for(var o=[],a=0;a<s.conflictingUsers().length;a++)o.push(s.conflictingUsers()[a].id);e={UserIds:o,WriteInConflicts:ko.toJSON(s.nonCMTConflictingUsers()),DomainNames:s.conflictDomains()},t={requestUri:d.odata.getUrl(d.odata.entitySet.individualConflictViews,n,"BulkAddIndividualConflict"),method:"POST",showProgressIndicator:!1,data:{Request:e}}}else t={requestUri:d.odata.getUrl(d.odata.entitySet.conflictDomains),method:"POST",data:{UserId:n,DomainNames:s.conflictDomains()}};p.request(t,function(){window.location.reload(),setTimeout(function(){d.addMessage("Personal conflicts saved.",null,"success","text",!0)},300)},function(e){d.addErrorMessage(d.odata.getErrorMessage(e))})}}else s.showValidationWarning(!0)},$.when((l={requestUri:d.odata.getUrl(d.odata.entitySet.conflictDomains,n),method:"GET"},void p.request(l,function(e){e.DomainNames&&s.conflictDomains(e.DomainNames)},p.defaultError)),(u={headers:{Accept:"application/json"},requestUri:d.odata.getUrl(d.odata.entitySet.individualConflictViews,null,"GetConflictingUsers"),method:"POST",showProgressIndicator:!1,data:{UserId:n}},void p.request(u,function(e){for(var t=[],o=0;o<e.value.length;o++){var a=new m(e.value[o]);t.push(a)}t.sort(function(e,t){return e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase())}),s.conflictingUsers(t),s.conflictingUsers.valueHasMutated()},p.defaultError))).done(function(){ko.applyBindingsAndShow(s,e)})}d.personalConflictsPage=function(e,t,o,a,n,i,r){new s(e,t,o,a,n,i)}}(window.app,window.document,window.OData),function(s,u,i,l){function d(){var e=this;e.Id=u.autoMap(),e.Title=u.autoMap(),e.Authors=u.autoMap(),e.TrackId=u.autoMap(),e.Track=u.autoMap(),e.Status=u.autoMap(),e.IsCameraReadyPosted=u.autoMap(),e.NumberOfCameraReadyFiles=u.autoMap(),e.CameraReadyFileUploadDate=u.autoMap(),e.IsCopyrightFormPosted=u.autoMap(),e.LastCameraReadyFileUploadDateFormatted=function(){return u.formatUndefinableDateTime(e.CameraReadyFileUploadDate)}}function o(e,t){var o,r=this;if(r.tracks=t,r.conference=l.name,r.controller=u.odata.entitySet.proceedingEditorModels,r.savedState=(o={page:1,top:25,sorting:{property:"Id",direction:"asc"},filters:[]},sessionStorage&&JSON.parse(sessionStorage.getItem(r.controller))||o),r.total=ko.observable(0),r.page=ko.observable(r.savedState.page),r.top=ko.observable(r.savedState.top),r.skip=ko.computed(function(){return(r.page()-1)*r.top()}),r.pager=ko.pager(r.total,r.top),r.pager().CurrentPage.subscribe(function(){r.page(r.pager().CurrentPage()),n()}),r.submissions=ko.observableArray(),r.filters=[],r.sortableColumns={},r.sorting=ko.observable(r.savedState.sorting),s.each(r.sortableColumns,function(e,t){t.property()!==savedState.sorting.property?t.direction(null):t.direction(savedState.sorting.direction)}),s(document).on("data.filter",function(){r.pager().CurrentPage()<2?n():r.pager().CurrentPage(1)}),r.sort=function(e){r.sorting({property:e.property(),direction:e.direction()}),n()},r.getFilterString=function(){var o="";return s.each(r.filters,function(e,t){t.getValue()&&(o+=o?" and "+t.getValue():t.getValue())}),o},r.resetFilters=function(){s.each(r.filters,function(e,t){t.reset()}),r.pager().CurrentPage()<2?n():r.pager().CurrentPage(1)},r.refresh=function(){n()},r.size=function(e){r.top(e),n()},r.email=function(e,t){var o=t.target,t=(ko.contextFor(o),parseInt(s(o).attr("sid"))),o=s(o).attr("recipientType"),t=t?"Id eq {0}".format(t):r.getFilterString(),o="/"+r.conference+"/Submission/SendEmail/"+o;u.url.navigateTo(o,{filter:0<t.length?t:null})},r.downloadFiles=function(e,t){var o=t.target,a=s(o).attr("href"),o=r.getFilterString(),o={requestUri:u.odata.getUrl(u.odata.entitySet.proceedingEditorModels,null,"GetIds"),method:"POST",showProgressIndicator:!0,data:{filter:o}};OData.request(o,function(e){e=e.value.join("/");u.page.post(a,{Ids:e})}),t.preventDefault()},r.exportCameraReadySubmissions=function(e,t){var o=t.target,t=(ko.contextFor(o),parseInt(s(o).attr("sid"))),o=t?"Id eq {0}".format(t):r.getFilterString(),t="/api/odata/"+window.cmt3.conference.name+"/CameraReadySubmissionViews/Export";u.page.post(t,{Filter:o})},ko.applyBindingsAndShow(r,e),r.savedState&&r.savedState.sorting&&r.savedState.sorting.property&&r.sortableColumns&&r.sortableColumns[r.savedState.sorting.property])for(var a in r.sortableColumns)r.sortableColumns[a].direction(a!==r.savedState.sorting.property?null:r.savedState.sorting.direction);function n(){var e=r.sorting(),t=e?"&$orderby="+encodeURIComponent(e.property+" "+e.direction):"",o=r.skip()?"&$skip="+r.skip():"",a=r.top()?"&$top="+r.top():"",e=(e=r.getFilterString())&&"&$filter="+encodeURIComponent(e),a={headers:{Accept:"application/json"},requestUri:"/api/odata/"+r.conference+"/$batch",method:"POST",data:{requests:[{url:u.odata.getUrl(u.odata.entitySet.proceedingEditorModels)+"?$count=true"+e+t+o+a,method:"GET",headers:{Accept:"application/json"}}]}};i.request(a,function(e){for(var a,t=e.responses[0].body,e=t["@odata.count"],o=t.value,n=[],i=0;i<o.length;i++)n.push(u.autoMap(new d,o[i]));r.submissions(n),r.total(e),sessionStorage&&(a=[],s.each(r.filters,function(e,t){var o=t.getValue();o&&a.push({property:t.field,value:o})}),e={page:r.page(),top:r.top(),sorting:r.sorting(),filters:a},sessionStorage.setItem(r.controller,JSON.stringify(e)))},function(e){(e=e)&&e.response&&e.response.body&&((e=s.parseJSON(e.response.body))&&e.error&&e.error.message&&(e=e.error.message,u.addMessage(e,null,"error")))},OData.batchHandler)}s.each(r.savedState.filters,function(e,o){s.each(r.filters,function(e,t){t.field===o.property&&t.setValue(o.value)})}),n()}u.proceedingEditorList=function(e,t){new o(e,t)}}(window.jQuery,window.app,window.OData,window.cmt3.conference),function(i,r,s,u){function l(t,o){var a=this;a.userName=ko.observable(""),a.password=ko.observable(""),a.save=function(){var e={requestUri:r.odata.getUrl(r.odata.entitySet.tpmsSettings,null,"UpdateTpmsAuthentication"),method:"POST",data:{Request:{UserName:a.userName(),Password:a.password()}}};s.request(e,function(e){!0===e.value?(o&&"function"==typeof o&&o(!0),i(u.getElementById(t)).modal("hide")):r.addMessage("Unable to authenticate!",null,"error")})}}function a(o,a){var n=this;n.isEnabled=ko.observable().autoMap(),n.depositAuthor=ko.observable().autoMap(),n.isEnsuringAuthentication=ko.observable().autoMap(),n.showAdditionalFields=ko.pureComputed(function(){return n.isEnabled()&&!n.isEnsuringAuthentication()}),n.isEnabled.subscribe(function(e){var t;e&&(n.isEnsuringAuthentication(!0),t=i.Deferred(),e={requestUri:r.odata.getUrl(r.odata.entitySet.tpmsSettings,null,"VerifyTpmsAuthentication"),method:"POST"},s.request(e,function(e){t.resolve(e.value)},function(){t.reject()}),t.promise().done(function(e){e||(e=u.getElementById(a),null==n.tpmsAuthenticationFormViewModel&&(n.tpmsAuthenticationFormViewModel=new l(a,function(e){e&&n.isEnabled(!0)}),ko.applyBindings(n.tpmsAuthenticationFormViewModel,e)),i(e).modal("show"),n.isEnabled(!1))}).fail(function(){n.isEnabled(!1)}).always(function(){n.isEnsuringAuthentication(!1)}))}),n.save=function(){var e={requestUri:r.odata.getUrl(r.odata.entitySet.tpmsSettings,o),method:"PATCH",data:{IsEnabled:n.isEnabled(),DepositAuthor:n.depositAuthor()}};return s.request(e,function(){r.addMessage("TPMS settings have been saved!")}),!1},n.bindTo=function(e){var t;t=function(){ko.applyBindingsAndShow(n,e),i("#menuSiteFeatures").addClass("in")},s.read(r.odata.getUrl(r.odata.entitySet.tpmsSettings,o),function(e){r.autoMap(n,e),t()})}}r.settingsTpmsPage=function(e,t,o){new a(e,o).bindTo(t)}}(window.jQuery,window.app,window.OData,window.document),function(i,a){function n(e){var o=this;o.successCount=ko.observable(null).autoMap(),o.errorCount=ko.observable(null).autoMap(),o.failedSubmissionIds=ko.observableArray(e),o.failedSubmissionIdsText=ko.pureComputed(function(){var e=o.failedSubmissionIds();return e&&e.join(", ")}),o.totalCount=ko.observable(null).autoMap(),o.finishedAt=ko.observable(null).autoMap(),o.processedCount=ko.pureComputed(function(){return o.errorCount()+o.successCount()}),o.percentage=ko.pureComputed(function(){var e=o.totalCount(),t=o.processedCount();return e&&null!==t?Math.round(t/e*100):null})}function t(){var t=this;function o(){var e;e={requestUri:i.odata.getUrl(i.odata.entitySet.tpmsSubmissions,null,"GetProgress"),showProgressIndicator:!1,method:"POST"},OData.request(e,function(e){t.progress(i.autoMap(new n(e.FailedSubmissionIds),e))},function(e){(e&&e.response&&e.response.statusCode)!==i.enums.httpStatusCodes.failure.notFound?a.defaultError(e):t.progress(null)}).done(function(){var e=t.progress()&&t.progress().finishedAt();e||setTimeout(o,1e3)})}t.progress=ko.observable(null),t.visible=ko.pureComputed(function(){return null!=t.progress()}),t.done=function(){var e={requestUri:i.odata.getUrl(i.odata.entitySet.tpmsSubmissions,null,"ClearProgress"),showProgressIndicator:!1,method:"POST"};OData.request(e,function(){t.progress(null)})},t.refresh=function(){o()},o()}function r(){var e=this;e.trackId=i.autoMap(),e.trackName=i.autoMap(),e.numberOfSubmissions=ko.observable(0).autoMap(),e.checked=ko.observable(!1),e.isDisabled=ko.computed(function(){return e.numberOfSubmissions()<1})}function o(e){var t=this;t.submissionId=ko.observable().extend({required:!0,pattern:"^[0-9]+$"}),t.progressViewModel=e,t.isSubmitDisabled=ko.pureComputed(function(){return!t.submissionId.isValid()}),t.submit=function(){if(t.submissionId.isValid()){var e={requestUri:i.odata.getUrl(i.odata.entitySet.tpmsSubmissions,t.submissionId(),"SendSubmissionToTpms"),method:"POST"};return OData.request(e,function(e){t.progressViewModel.refresh()})}}}function s(e){var t,n=this;function o(){var e=n.tracks(),t=[];if(1===e.length&&!e[0].isDisabled())return t.push(e[0].trackId),t;for(var o=0;o<e.length;o++)e[o].checked()&&!e[o].isDisabled()&&t.push(e[o].trackId);return t}n.progressViewModel=e,n.isSingleTrackConference=ko.observable(!1),n.tracks=ko.observableArray([]),n.selectedCount=ko.computed(function(){return o().length}),n.isSubmitDisabled=ko.computed(function(){return n.selectedCount()<1}),n.isSingleTrackConference=ko.pureComputed(function(){return n.tracks().length<2}),n.toggleAllChecked=ko.pureComputed({read:function(){for(var e=n.tracks(),t=0;t<e.length;t++)if(!e[t].checked()&&!e[t].isDisabled())return!1;return!0},write:function(e){for(var t=!n.toggleAllChecked(),o=n.tracks(),a=0;a<o.length;a++)!0!==o[a].isDisabled()&&o[a].checked(t);return!1}}),n.submit=function(){var e={requestUri:i.odata.getUrl(i.odata.entitySet.tpmsSubmissions,null,"SendSubmissionsToTpms"),method:"POST",data:{Request:{TrackIds:o()}}};return OData.request(e,function(e){n.progressViewModel.refresh()})},t={requestUri:i.odata.getUrl(i.odata.entitySet.tpmsSubmissions,null,"GetTpmsTracksInfo"),method:"POST"},OData.request(t,function(e){for(var t=[],o=0;o<e.value.length;o++){var a=i.autoMap(new r,e.value[o]);t.push(a)}t.sort(function(e,t){return e.trackId<t.trackId?-1:e.trackId>t.trackId?1:0}),n.tracks(t)})}function u(){var e=this;e.progress=new t,e.submissions=new s(e.progress),e.submission=new o(e.progress),e.submissionsVisible=ko.pureComputed(function(){return!e.progress.visible()})}i.tpmsSubmissions=function(e){ko.applyBindings(new u,document.getElementById(e))}}(window.app,window.OData),function(r){function s(){var e=this;e.trackId=r.autoMap(),e.trackName=r.autoMap(),e.numberOfReviewers=r.autoMap(),e.numberOfMetaReviewers=r.autoMap(),e.numberOfSeniorMetaReviewers=r.autoMap(),e.isReviewersChecked=ko.observable(!1),e.isMetaReviewersChecked=ko.observable(!1),e.isSeniorMetaReviewersChecked=ko.observable(!1),e.isReviewersDisabled=ko.pureComputed(function(){return e.numberOfReviewers<1}),e.isMetaReviewersDisabled=ko.pureComputed(function(){return e.numberOfMetaReviewers<1}),e.isSeniorMetaReviewersDisabled=ko.pureComputed(function(){return e.numberOfSeniorMetaReviewers<1})}function o(n){var e,i=this;i.tracks=ko.observableArray([]),i.isSingleTrackConference=ko.pureComputed(function(){return i.tracks().length<2}),i.selectedTracksData=ko.pureComputed(function(){for(var e=i.tracks(),t=[],o=0;o<e.length;o++){var a=e[o];(!a.isReviewersDisabled()&&a.isReviewersChecked()||!a.isMetaReviewersDisabled()&&a.isMetaReviewersChecked()||!a.isSeniorMetaReviewersDisabled()&&a.isSeniorMetaReviewersChecked())&&t.push({TrackId:a.trackId,IsReviewersChecked:a.isReviewersChecked(),IsMetaReviewersChecked:a.isMetaReviewersChecked(),IsSeniorMetaReviewersChecked:a.isSeniorMetaReviewersChecked()})}return t}),i.isSubmitDisabled=ko.pureComputed(function(){return i.selectedTracksData().length<1}),i.submit=function(){for(var e=i.selectedTracksData(),t=[],o=0;o<e.length;o++){var a=e[o],a={requestUri:r.odata.getUrl(r.odata.entitySet.tpmsMatchingRequests),method:"POST",data:a};t.push(OData.request(a,function(){}))}$.when.apply($,t).then(function(){r.url.navigateTo(n,"requestSent")})},e={requestUri:r.odata.getUrl(r.odata.entitySet.tpmsMatchingRequests,null,"GetTpmsReviewersTrackInfo"),method:"POST"},OData.request(e,function(e){for(var t=[],o=0;o<e.value.length;o++){var a=r.autoMap(new s,e.value[o]);t.push(a)}t.sort(function(e,t){return e.trackId<t.trackId?-1:e.trackId>t.trackId?1:0}),i.tracks(t)})}r.tpmsSendMatchingRequest=function(e,t){ko.applyBindingsAndShow(new o(t),e)}}(window.app),function(r,a){function s(e){$parent=e;var t=this;function o(e){return e?"Yes":"No"}t.created=r.autoMap(),t.id=r.autoMap(),t.trackId=r.autoMap(),t.isReviewersChecked=r.autoMap(),t.isMetaReviewersChecked=r.autoMap(),t.isSeniorMetaReviewersChecked=r.autoMap(),t.isResultRetrieved=r.autoMap(),t.isRetrievingResult=r.autoMap(),t.lastRequestStatus=r.autoMap(),t.track=ko.pureComputed(function(){return e.dictTrack[t.trackId]}),t.statusMessage=ko.pureComputed(function(){if(t.isResultRetrieved)return"";switch(t.lastRequestStatus){case"Pending":return"TPMS result is not ready yet, please try again later.";case"Error":return"Error, please try again later or contact CMT support."}return""}),t.createdFormatted=ko.pureComputed(function(){return r.formatUndefinableDateTime(t.created)}),t.isReviewersCheckedText=ko.pureComputed(function(){return o(t.isReviewersChecked)}),t.isMetaReviewersCheckedText=ko.pureComputed(function(){return o(t.isMetaReviewersChecked)}),t.isSeniorMetaReviewersCheckedText=ko.pureComputed(function(){return o(t.isSeniorMetaReviewersChecked)}),t.getScores=function(){var e={showProgressIndicator:!1,headers:{Accept:"application/json"},requestUri:r.odata.getUrl(r.odata.entitySet.tpmsMatchingRequests,t.id,"RetrieveScores"),method:"POST"};r.showProgress(),a.request(e,function(e,t){t.statusCode===r.enums.httpStatusCodes.success.ok&&$parent.reload(!1),t.statusCode===r.enums.httpStatusCodes.success.noContent&&r.addMessage("TPMS result is not ready yet, please try again later.","","warning")}).always(r.hideProgress)}}function o(e){var i=this;function t(e){e={showProgressIndicator:!1!==e,headers:{Accept:"application/json"},requestUri:r.odata.getUrl("$batch"),method:"POST",data:{requests:[{url:r.odata.getUrl(r.odata.entitySet.tpmsMatchingRequests),method:"GET",headers:{Accept:"application/json"}}]}};return a.request(e,function(e){for(var t=e.responses[0].body.value,o=[],a=0;a<t.length;a++){var n=r.autoMap(new s(i),t[a]);o.push(n)}i.requests(o)},function(e){window.cmt3.logger.log(e.message)},a.batchHandler)}i.dictTrack=e.reduce(function(e,t){return e[t.Id]=t.Name,e},{}),i.requests=ko.observableArray([]),i.reload=t,"requestSent"===r.url.hash.getValue()&&(r.url.hash.remove(),r.addMessage("Request has been submitted to TPMS, please allow some time for the request to be processed.")),t(),setInterval(function(){t(!1)},6e4)}r.tpmsManageMatchingRequests=function(e,t){ko.applyBindings(new o(t),document.getElementById(e))}}(window.app,window.OData),function(a,i){function n(){this.id=a.autoMap(),this.name=a.autoMap(),this.isChecked=ko.observable(!1)}function o(e){var o=this;o.type=ko.observable("reviewer"),o.tracks=[];for(var t=0;t<e.length;t++)o.tracks.push(a.autoMap(new n,e[t]));1==o.tracks.length&&o.tracks[0].isChecked(!0),o.isDownloadButtonEnabled=ko.pureComputed(function(){if(!o.tracks||o.tracks.length<2)return!0;for(var e=0;e<o.tracks.length;e++)if(o.tracks[e].isChecked&&o.tracks[e].isChecked())return!0;return!1}),o.download=function(){for(var e=[],t=0;t<o.tracks.length;t++)o.tracks[t].isChecked()&&e.push(o.tracks[t].id);!function(e,t){var o=i.createElement("form");if(o.setAttribute("method","post"),o.setAttribute("action",e),t)for(var a=0;a<t.length;a++){var n=i.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","tracks"),n.setAttribute("value",t[a]),o.appendChild(n)}i.body.appendChild(o),o.submit(),i.body.removeChild(o)}(a.odata.getUrl(a.odata.entitySet.tpmsScores,null,"seniorMetaReviewer"===o.type()?"DownloadSeniorMetaReviewerScores":"metaReviewer"===o.type()?"DownloadMetaReviewerScores":"DownloadReviewerScores"),e)}}a.tpmsDownloadScoresPage=function(e,t){ko.applyBindings(new o(t),i.getElementById(e))}}(window.app,window.document),function(s,u){"use strict";function l(){var t=this;t.id=s.autoMap(),t.submissionId=s.autoMap(),t.name=s.autoMap(),t.track=s.autoMap(),t.description=s.autoMap(),t.presenters=s.autoMap(),t.durationInMinutes=ko.observable().extend({required:!1,number:!0}).autoMap(),t.sessionId=ko.observable().autoMap(),t.session=s.autoMap(),t.isAssigned=s.autoMap(),t.isAssignedText=ko.pureComputed(function(){return t.isAssigned.toYesNo()}),t.save=function(){var e=t.id,e={method:"PATCH",requestUri:s.odata.getUrl(s.odata.entitySet.presentations,e||null),showProgressIndicator:!1,data:{SessionId:$.isNumeric(t.sessionId())?t.sessionId():null,DurationInMinutes:$.isNumeric(t.durationInMinutes())?t.durationInMinutes():null}};return u.request(e)}}function t(){this.presentations=ko.observableArray([]),s.DataTable.call(this)}function o(e,t){function i(){this.id=s.autoMap(),this.name=s.autoMap()}var r=this;r.presentation=ko.observable(),r.sessions=ko.observableArray();var o=$(document.getElementById(e));r.edit=function(e){var t=r.sessions();(t&&0!==t.length?$.Deferred().resolve().promise():(t={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.sessions)+"?$select=Id,Name"},u.request(t).done(function(e){if(e.value){for(var t=e.value,o=[],a=0;a<t.length;a++){var n=t[a],n=s.autoMap(new i,n);o.push(n)}r.sessions(o)}}))).done(function(){e=e&&e.constructor===l?s.autoMap(new l,e):new l,r.presentation(e),o.modal("show")})},r.save=function(){var e=r.presentation();e&&"function"==typeof e.save&&(s.showProgress(),$.when(e.save()).then(function(){return o.modal("hide"),t.loadData(!1,!0)}).always(s.hideProgress))}}function a(e){var a=this;a.table=new t,a.editDialog=new o(e,a.table),a.table.loadData(),a.exportSessionPresentations=function(e,t){var o=a.table.getFilterForURIComponent(),o={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.presentations)+"?$count=true&$select=Id"+o,showProgressIndicator:!0};OData.request(o,function(e){for(var t=e.value,o=[],a=0;a<t.length;a++){var n=t[a];o.push(n.Id)}var i={PresentationIds:o.join(",")},e=s.odata.getUrl(s.odata.entitySet.presentations,null,"ExportPresentationSessions");s.page.post(e,i)}),t.preventDefault()},a.bulkUnassignFromSession=function(e,t){var o;confirm("Bulk unassigning will be performed for selected presentations.")&&(o=a.table.getFilterString(),o={requestUri:s.odata.getUrl(s.odata.entitySet.presentations,null,"BulkUnassignFromSession"),method:"POST",showProgressIndicator:!0,data:{Filter:o}},u.request(o,function(){s.addMessage("Bulk unassigning has been completed successfully.",null,"success","text",!0),location.reload()}))},a.bulkAutoAssign=function(e,t){var o;confirm("Automatic assignment will be performed for selected presentations.")&&(o=a.table.getFilterString(),o={requestUri:s.odata.getUrl(s.odata.entitySet.presentations,null,"BulkAutoAssign"),method:"POST",showProgressIndicator:!0,data:{Filter:o}},u.request(o,function(e){e.value?s.addMessage("Automatic assignment has been completed successfully.",null,"success","text",!0):s.addMessage("Automatic assignment could not be completed.",null,"error","text",!0),location.reload()}))}}t.prototype=$.extend({},s.DataTable.prototype,{getDefaultSorting:function(){return{property:"Id",direction:"asc"}},getFilterString:function(){var o="";return $.each(this.filters,function(e,t){t.getValue()&&(o+=o?" and "+t.getValue():t.getValue())}),o},getFilterForURIComponent:function(){var e=this.getFilterString();return e=e&&"&$filter="+encodeURIComponent(e)},loadData:function(e){var n=this;(e=!0===e)&&n.applyState();var t=n.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=n.skip()?"&$skip="+n.skip():"",i=n.top()?"&$top="+n.top():"",t=n.getFilterForURIComponent(),e={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.presentations)+"?$count=true"+t+o+a+i,showProgressIndicator:!e};return u.request(e,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=s.autoMap(new l,a);t.push(a)}n.presentations(t),n.saveState()},function(e){s.addErrorMessage(s.odata.getErrorMessage(e))})}}),s.sessionPlanningPresentationsPage=function(e,t){ko.applyBindingsAndShow(new a(t),e)}}(window.app,window.OData),function(r,a,s,u){var l=[];function d(){this.id=s.autoMap(),this.name=s.autoMap()}function c(e){var o=this;o.id=ko.observable().autoMap(),o.name=ko.observable().extend({required:!0}).autoMap(),o.description=ko.observable().autoMap(),o.start=ko.observable().autoMap(),o.durationInMinutes=ko.observable().extend({required:!1,number:!0}).autoMap(),o.end=ko.observable().autoMap(),o.roomId=ko.observable().autoMap(),o.roomName=ko.observable().autoMap(),o.presentations=[],o.chair=ko.observable().autoMap(),o.quota=ko.observable().extend({required:!1,number:!0}).autoMap(),o.isSelected=ko.observable(e),o.save=function(){var e=o.id(),t=o.start(),t={method:e?"PATCH":"POST",requestUri:s.odata.getUrl(s.odata.entitySet.sessions,e||null),showProgressIndicator:!1,data:{Name:o.name(),Start:t&&0<t.length?t:null,RoomId:r.isNumeric(o.roomId())?o.roomId():null,DurationInMinutes:r.isNumeric(o.durationInMinutes())?o.durationInMinutes():null,Chair:o.chair(),Quota:r.isNumeric(o.quota())?o.quota():null}};return u.request(t)},o.remove=function(){var e={method:"DELETE",requestUri:s.odata.getUrl(s.odata.entitySet.sessions,o.id()),showProgressIndicator:!1};return u.request(e)}}function o(){this.controller=s.odata.entitySet.sessions,this.sessions=ko.observableArray([]),s.DataTable.call(this)}function n(e,t){var i=this;i.session=ko.observable(),i.rooms=ko.observableArray(),i.addEditText=ko.pureComputed(function(){var e=i.session();return e&&e.id()?"Edit":"Add"});var o=r(a.getElementById(e));i.addEditSession=function(e){var t=i.rooms();(t&&0!==t.length?r.Deferred().resolve().promise():(t={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.rooms)+"?$select=Id,Name"},u.request(t).done(function(e){if(e.value){for(var t=e.value,o=[],a=0;a<t.length;a++){var n=t[a],n=s.autoMap(new d,n);o.push(n)}i.rooms(o)}}))).done(function(){e=e&&e.constructor===c?s.autoMap(new c,e):new c(i),i.session(e),o.modal("show")})},i.save=function(){var e=i.session();e&&"function"==typeof e.save&&(s.showProgress(),r.when(e.save()).then(function(){return o.modal("hide"),t.loadData(!1,!0)}).always(s.hideProgress))}}function i(e){var n=this,i=r(a.getElementById(e));n.conflicts=ko.observableArray(),n.sessions=ko.observableArray(),n.delete=function(e){if(l[e.id()]){for(var t=n.sessions(),o=-1,a=0;a<t.length;a++)if(t[a].id()===e.id()){o=a;break}-1<o&&(t.splice(o,1),e.isSelected(!1),n.sessions(t)),l[e.id()]=!1}},n.add=function(e){l[e.id()]||(n.sessions.push(e),e.isSelected(!0),l[e.id()]=e)},n.check=function(){for(var e=[],t=n.sessions(),o=0;o<t.length;o++)e.push(t[o].id());var a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.sessions,null,"CheckConflicts"),data:{Request:{SessionIds:e}}};u.request(a).done(function(e){n.conflicts(e.value),i.modal("show")})}}function p(e,t){var a=this;a.table=new o,a.addEditDialog=new n(e,a.table),a.selectedSessions=new i(t),a.table.loadData(),a.selectSession=function(e){if(!e||e.constructor!==c)return!1;a.selectedSessions.add(e)},a.deselectSession=function(e){if(!e||e.constructor!==c)return!1;a.selectedSessions.delete(e)},a.removeSession=function(e){return!(!e||e.constructor!==c)&&(!!window.confirm("Are you sure you want to remove this session?")&&(s.showProgress(),void r.when(e.remove()).then(function(){return a.table.loadData(!1,!0)}).always(s.hideProgress)))},a.invokeBulk=function(e,t){var o=t.target,i=r(o).attr("href"),o=a.table.getFilterForURIComponent(),o={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.sessions)+"?$count=true&$select=Id"+o,showProgressIndicator:!0};OData.request(o,function(e){for(var t=e.value,o=[],a=0;a<t.length;a++){var n=t[a];o.push(n.Id)}e=o.join("/");s.page.post(i,{Ids:e})}),t.preventDefault()},a.exportSessionPresentations=function(e,t){var o=a.table.getFilterForURIComponent(),o={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.sessions)+"?$count=true&$select=Id"+o,showProgressIndicator:!0};OData.request(o,function(e){for(var t=e.value,o=[],a=0;a<t.length;a++){var n=t[a];o.push(n.Id)}var i={SessionIds:o.join(",")},e=s.odata.getUrl(s.odata.entitySet.sessions,null,"ExportSessionPresentations");s.page.post(e,i)}),t.preventDefault()},a.bulkUnassignPresentation=function(e,t){var o;confirm("Bulk unassigning will be performed for selected sessions.")&&(o=a.table.getFilterString(),o={requestUri:s.odata.getUrl(s.odata.entitySet.sessions,null,"BulkUnassignPresentation"),method:"POST",showProgressIndicator:!0,data:{Filter:o}},u.request(o,function(){s.addMessage("Bulk unassigning has been completed successfully.",null,"success","text",!0),location.reload()}))}}o.prototype=r.extend({},s.DataTable.prototype,{getDefaultSorting:function(){return{property:"Id",direction:"asc"}},getFilterString:function(){var o="";return r.each(this.filters,function(e,t){t.getValue()&&(o+=o?" and "+t.getValue():t.getValue())}),o},getFilterForURIComponent:function(){var e=this.getFilterString();return e=e&&"&$filter="+encodeURIComponent(e)},loadData:function(e,t){var n=this;(e=!0===e)&&n.applyState();var o=n.sorting(),a=o?"&$orderby="+encodeURIComponent(o.property+" "+o.direction):"",i=n.skip()?"&$skip="+n.skip():"",r=n.top()?"&$top="+n.top():"",o=n.getFilterForURIComponent(),t={method:"GET",headers:{Accept:"application/json"},requestUri:s.odata.getUrl(s.odata.entitySet.sessions)+"?$count=true"+o+a+i+r,showProgressIndicator:!e&&!t};return u.request(t,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=s.autoMap(new c(l[a.Id]),a);t.push(a)}n.sessions(t),n.saveState()},function(e){s.addErrorMessage(s.odata.getErrorMessage(e))})}}),s.sessionPlanningSessionsPage=function(e,t,o){ko.applyBindingsAndShow(new p(t,o),e)}}($,document,window.app,window.OData),function(s,o,n,u,l){function d(){var t=this;t.id=ko.observable(0).autoMap(),t.name=ko.observable("").extend({required:!0}).autoMap(),t.size=ko.observable().extend({required:!1,number:!0}).autoMap(),t.save=function(){var e=t.id(),e={method:e?"PATCH":"POST",requestUri:u.odata.getUrl(u.odata.entitySet.rooms,e||null),showProgressIndicator:!1,data:{Name:t.name(),Size:s.isNumeric(t.size())?t.size():null}};return l.request(e)},t.remove=function(){var e={method:"DELETE",requestUri:u.odata.getUrl(u.odata.entitySet.rooms,t.id()),showProgressIndicator:!1};return l.request(e)}}function a(){this.rooms=ko.observableArray([]),u.DataTable.call(this)}function i(e,t){var o=this;o.room=ko.observable(),o.addEditText=ko.pureComputed(function(){var e=o.room();return e&&e.id()?"Edit":"Add"});var a=s(n.getElementById(e));o.addEditRoom=function(e){e=e&&e.constructor===d?u.autoMap(new d,e):new d,o.room(e),a.modal("show")},o.save=function(){var e=o.room();e&&"function"==typeof e.save&&(u.showProgress(),s.when(e.save()).then(function(){return a.modal("hide"),t.loadData(!1,!0)}).always(u.hideProgress))}}function r(e){var t=this;t.table=new a,t.addEditDialog=new i(e,t.table),t.table.loadData(),t.removeRoom=function(e){return!(!e||e.constructor!==d)&&(!!o.confirm("Are you sure you want to remove this room?")&&(u.showProgress(),void s.when(e.remove()).then(function(){return t.table.loadData(!1,!0)}).always(u.hideProgress)))}}a.prototype=s.extend({},u.DataTable.prototype,{getDefaultSorting:function(){return{property:"Id",direction:"asc"}},loadData:function(e,t){var n=this;(e=!0===e)&&n.applyState();var o=n.sorting(),a=o?"&$orderby="+encodeURIComponent(o.property+" "+o.direction):"",i=n.skip()?"&$skip="+n.skip():"",o=n.top()?"&$top="+n.top():"",r="";s.each(n.filters,function(e,t){t.getValue()&&(r+=r?" and "+t.getValue():t.getValue())});r=r&&"&$filter="+encodeURIComponent(r),t={method:"GET",headers:{Accept:"application/json"},requestUri:u.odata.getUrl(u.odata.entitySet.rooms)+"?$count=true"+r+a+i+o,showProgressIndicator:!e&&!t};return l.request(t,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=u.autoMap(new d,a);t.push(a)}n.rooms(t),n.saveState()},function(e){u.addErrorMessage(u.odata.getErrorMessage(e))})}}),u.sessionPlanningRoomsPage=function(e,t){ko.applyBindingsAndShow(new r(t),e)}}($,window,document,window.app,window.OData),function(){function a(e,t){var o=this;o.number=ko.observable(e),o.name=ko.observable(t),o.left=ko.pureComputed(function(){return 150*o.number()+"px"})}function n(e){var t=this;t.hour=ko.observable(e),t.top=ko.pureComputed(function(){return 60*t.hour()+"px"})}function t(){this.rooms=ko.observableArray([]),this.hours=ko.observableArray([]);for(var e=[],t=0;t<25;t++)e.push(new n(t));this.hours(e);for(var o=[],t=0;t<5;t++)o.push(new a(t,"Room "+(t+1)));this.rooms(o)}window.app.sessionPlanningPreviewPage=function(e){ko.applyBindingsAndShow(new t,e)}}(),function(e,o,a){function t(){var t=this;t.sessions=ko.observableArray([]),t.getStartDate=function(e){if(!e)return"?";e=new Date(e);return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"UTC",hour12:!1}).format(e)},t.getEndDate=function(e){if(!e)return"?";e=new Date(e);return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"UTC",hour12:!1}).format(e)},a.showProgress(),e.get("/api/"+(o.cmt3&&o.cmt3.conference?o.cmt3.conference.name:null)+"/contents").done(function(e){t.sessions(e.Sessions)}).always(a.hideProgress)}a.sessionPlanningContentsPage=function(e){ko.applyBindingsAndShow(new t,e)}}($,window,window.app),function(l,r){"use strict";function d(){var e=this;e.id=l.autoMap(),e.name=l.autoMap(),e.parentSubjectAreaId=l.autoMap(),e.isChild=function(){return null!==e.parentSubjectAreaId},e.isPrimary=ko.observable(),e.isSecondary=ko.observable(),e.checkBoxId=function(){return"primary"+e.id},e.allowParentSelection=!0,e.specialType=null}function i(n,e,t,o){var u=this;function a(){u.showValidationWarning=ko.observable(!1),u.subjectAreas=[],u.subjectAreaPairs=function(){return l.computeSubjectAreaColumnPairs(u.subjectAreas)},u.showSubjectAreasErrorMessage=ko.observable(!1),u.save=function(){if(0<ko.validation.group(u)().length)u.showValidationWarning(!0);else{var e=!0;if(e=!function(){if(0===u.subjectAreas.length)return!0;for(var e=[],t=!1,o=0;o<u.subjectAreas.length;o++)"customPrimary"!==u.subjectAreas[o].specialType&&"customSecondary"!==u.subjectAreas[o].specialType||e.push(u.subjectAreas[o].customValue),u.subjectAreas[o].isPrimary()&&(t=!0);var a=!0,n=ko.validation.group(e);0<n().length&&(n.showAllMessages(),a=!1);t||(u.showSubjectAreasErrorMessage(!0),a=!1);return a}()?!1:e){for(var t=[],o=0;o<u.subjectAreas.length;o++){var a=u.subjectAreas[o];(a.isPrimary()||a.isSecondary())&&null===a.specialType&&(a={SubjectAreaId:a.id,IsPrimary:a.isPrimary()},t.push(a))}e={requestUri:l.odata.getUrl(l.odata.entitySet.sessions,null,"UpdateSubjectAreas"),method:"POST",showProgressIndicator:!0,data:{Request:{SessionId:n,SubjectAreas:t}}};r.request(e,function(){l.addMessage("Subject areas saved for session.",null,"success","text",!0),location.reload()})}else u.showValidationWarning(!0)}}}function i(e,t){for(var o,a=null,n=0;n<e.length;n++)i=l.autoMap(new d,e[n]),null!==a&&a.id===i.parentSubjectAreaId&&!u.settings.immediateParentSelectionAllowed&&a.allowParentSelection&&(a.allowParentSelection=!1),null===i.parentSubjectAreaId&&(a=i),(o=i).isPrimary.subscribe(function(e){e&&(u.showSubjectAreasErrorMessage(!1),function(e){for(var t=0;t<u.subjectAreas.length;t++)u.subjectAreas[t].isPrimary()&&u.subjectAreas[t]!==e&&u.subjectAreas[t].isPrimary(!1)}(this),this.isSecondary(!1))},o),o.isSecondary.subscribe(function(e){if(e){if(u.settings.secondarySubjectAreaLimited)if(function(){for(var e=0,t=0;t<u.subjectAreas.length;t++)u.subjectAreas[t].isSecondary()&&++e;return e}()>u.settings.secondarySubjectAreaMaxNumber){var t=this;return void setTimeout(function(){t.isSecondary(!1)},0)}this.isPrimary(!1)}},o),u.subjectAreas.push(o);var i,r={};for(n=0;n<t.length;n++)r[(i=t[n]).SubjectAreaId]=i.IsPrimary;for(n=0;n<u.subjectAreas.length;n++){var s=r[(i=u.subjectAreas[n]).id];s?i.isPrimary(!0):!1===s&&i.isSecondary(!0)}}u.sessionId=n,u.settings={secondarySubjectAreaAllowed:l.autoMap(),secondarySubjectAreaLimited:l.autoMap(),secondarySubjectAreaMaxNumber:l.autoMap(),immediateParentSelectionAllowed:l.autoMap()},l.autoMap(u.settings,e),u.bindTo=function(e){a(),i(t,o),ko.applyBindingsAndShow(u,e)}}l.sessionSubjectAreas=function(e,t,o,a,n){new i(e,t,o,a).bindTo(n)}}(window.app,window.OData,(window.jQuery,document)),function(f,c){function p(e){this.id=f.autoMap(),this.name=f.autoMap(),this.reviewPreview=e}function m(){this.id=f.autoMap(),this.trackId=f.autoMap(),this.name=f.autoMap()}function h(t,e,o,a,n,i,r,s,u){var l=this;function d(e,t){for(var o=[],a=t&&JSON.parse(t)||[],n=0;n<a.length;n++){var i=a[n],r=[];if(0<(e=e||[]).length){for(var s=i.Question||[],u={},l=0;l<s.length;l++){var d=s[l];u[d.QuestionOrder]=d}for(l=0;l<e.length;l++){var c=e[l];r.push(u[c.Order]||[])}}i=f.autoMap(new p(r),i);o.push(i)}return o}l.questions=[],l.id=f.autoMap(),l.title=f.autoMap(),l.abstract=f.autoMap(),l.authors=f.autoMap(),l.primarySubject=f.autoMap(),l.secondarySubject=f.autoMap(),l.reviewersJson=f.autoMap(),l.assigned=f.autoMap(),l.completed=f.autoMap(),l.percentage=f.autoMap(),l.bids=f.autoMap(),l.metaReviewersJson=f.autoMap(),l.metaAssigned=f.autoMap(),l.metaCompleted=f.autoMap(),l.metaPercentage=f.autoMap(),l.metaBids=f.autoMap(),l.messages=f.autoMap(),l.messagesRead=f.autoMap(),l.discussionEnabled=ko.observable().autoMap(),l.status=f.autoMap(),l.seniorMetaReviewerRating=ko.observable().autoMap(),l.seniorMetaReviewerRatingOptionId=ko.observable().autoMap(),l.ratingComment=ko.observable("").autoMap(),l.isAuthorFeedback=f.autoMap(),l.isAuthorFeedbackPosted=f.autoMap(),l.authorFeedbackId=f.autoMap(),l.completedReviewRating=f.autoMap(),l.percentageReviewRating=f.autoMap(),l.numberOfReviewerNotes=f.autoMap(),l.numberOfMetaReviewerNotes=f.autoMap(),l.seniorMetaReviewerNoteSubmitted=f.autoMap(),l.seniorMetaReviewerNoteId=f.autoMap(),l.track=o,l.trackId=e,l.isAbstractVisible=ko.observable(!1),l.toggleAbstract=function(){return l.isAbstractVisible(!l.isAbstractVisible()),!1},l.isAuthorFeedbackText=ko.pureComputed(function(){return l.isAuthorFeedback?"Yes":"No"}),l.isAuthorFeedbackPostedText=ko.pureComputed(function(){return l.isAuthorFeedbackPosted?"Yes":"No"}),l.isCameraReadyPosted=f.autoMap(),l.isCameraReadyPostedBool=ko.pureComputed(function(){return"Yes"===l.isCameraReadyPosted}),l.reviewQuestions=ko.pureComputed(function(){return a}),l.inlineReviews=ko.pureComputed(function(){return d(a,n)}),l.metaReviewQuestions=ko.pureComputed(function(){return i}),l.inlineMetaReviews=ko.pureComputed(function(){return d(i,r)}),l.metaReviewerNoteQuestions=ko.pureComputed(function(){return s}),l.inlineMetaReviewerNotes=ko.pureComputed(function(){return d(s,u)}),l.hasSeniorMetaReviewerNoteQuestion=ko.pureComputed(function(){return o&&o.hasSeniorMetaReviewerNoteQuestion}),l.showInlineReviewForSeniorMetaReviewer=ko.pureComputed(function(){return o&&o.showInlineReviewForSeniorMetaReviewer}),l.showInlineMetaReviewForSeniorMetaReviewer=ko.pureComputed(function(){return o&&o.showInlineMetaReviewForSeniorMetaReviewer}),l.showInlineMetaReviewerNoteForSeniorMetaReviewer=ko.pureComputed(function(){return o&&o.showInlineMetaReviewerNoteForSeniorMetaReviewer}),l.allowSeniorMetaReviewerToEmailAuthor=ko.pureComputed(function(){return o&&o.allowSeniorMetaReviewerToEmailAuthor}),l.allowSeniorMetaReviewerToViewPaperStatus=ko.pureComputed(function(){return o&&o.allowSeniorMetaReviewerToViewPaperStatus}),l.allowSeniorMetaReviewerToChangePaperStatus=ko.pureComputed(function(){return o&&o.allowSeniorMetaReviewerToChangePaperStatus}),l.allowSeniorMetaReviewerToRateSubmission=ko.pureComputed(function(){return o&&o.allowSeniorMetaReviewerToRateSubmission}),l.allowSeniorMetaReviewerToEnterRatingComment=ko.pureComputed(function(){return o&&o.allowSeniorMetaReviewerToEnterRatingComment}),l.allowSeniorMetaReviewerToInviteReviewers=ko.pureComputed(function(){return o&&o.allowSeniorMetaReviewerToInviteReviewers}),l.doNotAllowSeniorMetaReviewerToEditNote=ko.pureComputed(function(){return o&&o.doNotAllowSeniorMetaReviewerToEditNote}),l.doNotAllowSeniorMetaReviewerToEditReviewAssignment=ko.pureComputed(function(){return o&&o.doNotAllowSeniorMetaReviewerToEditReviewAssignment}),l.doNotAllowSeniorMetaReviewerToEditMetaReviewAssignment=ko.pureComputed(function(){return o&&o.doNotAllowSeniorMetaReviewerToEditMetaReviewAssignment}),l.doNotAllowSeniorMetaReviewerToEnableDiscussion=ko.pureComputed(function(){return o&&o.doNotAllowSeniorMetaReviewerToEnableDiscussion}),l.doNotEnableReviewerNote=ko.pureComputed(function(){return o&&o.doNotEnableReviewerNote}),l.doNotEnableMetaReviewerNote=ko.pureComputed(function(){return o&&o.doNotEnableMetaReviewerNote}),l.doNotEnableSeniorMetaReviewerNote=ko.pureComputed(function(){return o&&o.doNotEnableSeniorMetaReviewerNote}),l.reviewers=ko.pureComputed(function(){var e=[],t=l.reviewersJson?JSON.parse(l.reviewersJson):[];if(t&&0<t.length)for(var o=0;o<t.length;o++){var a=t[o];a&&(a=f.autoMap(new p,a),e.push(a))}return e}),l.metaReviewers=ko.pureComputed(function(){var e=[],t=l.metaReviewersJson?JSON.parse(l.metaReviewersJson):[];if(t&&0<t.length)for(var o=0;o<t.length;o++){var a=t[o];a&&(a=f.autoMap(new p,a),e.push(a))}return e}),l.editSeniorMetaReviewerNoteUrl=function(){return l.seniorMetaReviewerNoteId?t.seniorMetaReviewerNoteDetails.format(l.seniorMetaReviewerNoteId):t.seniorMetaReviewerNoteCreate.format(l.id)},l.editSeniorMetaReviewerNoteText=function(){return l.seniorMetaReviewerNoteSubmitted?"Edit":"Add"},l.editSeniorMetaReviewerNoteTooltip=function(){return l.seniorMetaReviewerNoteSubmitted?"Edit note":"Add note"},l.seniorMetaReviewerNoteSubmittedText=ko.pureComputed(function(){return l.seniorMetaReviewerNoteSubmitted?"Yes":"No"}),l.viewSeniorMetaReviewerNoteUrl=function(){return l.seniorMetaReviewerNoteId?t.seniorMetaReviewerNoteView.format(l.seniorMetaReviewerNoteId):""},l.inviteReviewerUrl=function(e){return t.inviteReviewer.format(l.id,e)},l.reviewerEmailUrl=function(e){return t.reviewerEmail.format(l.id,e)},l.metaReviewerEmailUrl=function(e){return t.metaReviewerEmail.format(l.id,e)},l.PopulateAggregates=function(e,t){this.aggregateColumns=[];for(var o=0;o<e.length;o++){var a=e[o],n="Q0"+a.Order;null!=t[(n=a.IsMeta?"M"+n:n)+"Id"]?this.aggregateColumns.push(new f.AggregateColumn(n,t[n+"Id"],t[n+"Avg"],t[n+"Min"],t[n+"Max"],t[n+"Spread"])):this.aggregateColumns.push(new f.AggregateColumn(n,null,null,null,null,null))}},l.PopulateSeniorMetaReviewerNoteColumns=function(e,t){var o={};null!==t.SMRNQ01Id&&(o[1]=new f.QuestionResponseColumn(t.SMRNQ01Id,t.SMRNQ01Text)),null!==t.SMRNQ02Id&&(o[2]=new f.QuestionResponseColumn(t.SMRNQ02Id,t.SMRNQ02Text)),null!==t.SMRNQ03Id&&(o[3]=new f.QuestionResponseColumn(t.SMRNQ03Id,t.SMRNQ03Text)),null!==t.SMRNQ04Id&&(o[4]=new f.QuestionResponseColumn(t.SMRNQ04Id,t.SMRNQ04Text)),null!==t.SMRNQ05Id&&(o[5]=new f.QuestionResponseColumn(t.SMRNQ05Id,t.SMRNQ05Text)),null!==t.SMRNQ06Id&&(o[6]=new f.QuestionResponseColumn(t.SMRNQ06Id,t.SMRNQ06Text)),null!==t.SMRNQ07Id&&(o[7]=new f.QuestionResponseColumn(t.SMRNQ07Id,t.SMRNQ07Text)),null!==t.SMRNQ08Id&&(o[8]=new f.QuestionResponseColumn(t.SMRNQ08Id,t.SMRNQ08Text)),null!==t.SMRNQ09Id&&(o[9]=new f.QuestionResponseColumn(t.SMRNQ09Id,t.SMRNQ09Text)),null!==t.SMRNQ10Id&&(o[10]=new f.QuestionResponseColumn(t.SMRNQ10Id,t.SMRNQ10Text)),null!==t.SMRNQ11Id&&(o[11]=new f.QuestionResponseColumn(t.SMRNQ11Id,t.SMRNQ11Text)),null!==t.SMRNQ12Id&&(o[12]=new f.QuestionResponseColumn(t.SMRNQ12Id,t.SMRNQ12Text)),null!==t.SMRNQ13Id&&(o[13]=new f.QuestionResponseColumn(t.SMRNQ13Id,t.SMRNQ13Text)),null!==t.SMRNQ14Id&&(o[14]=new f.QuestionResponseColumn(t.SMRNQ14Id,t.SMRNQ14Text)),null!==t.SMRNQ15Id&&(o[15]=new f.QuestionResponseColumn(t.SMRNQ15Id,t.SMRNQ15Text)),null!==t.SMRNQ16Id&&(o[16]=new f.QuestionResponseColumn(t.SMRNQ16Id,t.SMRNQ16Text)),null!==t.SMRNQ17Id&&(o[17]=new f.QuestionResponseColumn(t.SMRNQ17Id,t.SMRNQ17Text)),null!==t.SMRNQ18Id&&(o[18]=new f.QuestionResponseColumn(t.SMRNQ18Id,t.SMRNQ18Text)),null!==t.SMRNQ19Id&&(o[19]=new f.QuestionResponseColumn(t.SMRNQ19Id,t.SMRNQ19Text)),null!==t.SMRNQ20Id&&(o[20]=new f.QuestionResponseColumn(t.SMRNQ20Id,t.SMRNQ20Text)),null!==t.SMRNQ21Id&&(o[21]=new f.QuestionResponseColumn(t.SMRNQ21Id,t.SMRNQ21Text)),null!==t.SMRNQ22Id&&(o[22]=new f.QuestionResponseColumn(t.SMRNQ22Id,t.SMRNQ22Text)),null!==t.SMRNQ23Id&&(o[23]=new f.QuestionResponseColumn(t.SMRNQ23Id,t.SMRNQ23Text)),null!==t.SMRNQ24Id&&(o[24]=new f.QuestionResponseColumn(t.SMRNQ24Id,t.SMRNQ24Text)),null!==t.SMRNQ25Id&&(o[25]=new f.QuestionResponseColumn(t.SMRNQ25Id,t.SMRNQ25Text));for(var a=[],n=0;n<e.length;n++)a.push(o[e[n].Order]);l.seniorMetaReviewerNoteColumns=a},l.PopulateChairNoteColumns=function(e,t){var o={};null!==t.CNQ01Id&&(o[1]=new f.QuestionResponseColumn(t.CNQ01Id,t.CNQ01Text)),null!==t.CNQ02Id&&(o[2]=new f.QuestionResponseColumn(t.CNQ02Id,t.CNQ02Text)),null!==t.CNQ03Id&&(o[3]=new f.QuestionResponseColumn(t.CNQ03Id,t.CNQ03Text)),null!==t.CNQ04Id&&(o[4]=new f.QuestionResponseColumn(t.CNQ04Id,t.CNQ04Text)),null!==t.CNQ05Id&&(o[5]=new f.QuestionResponseColumn(t.CNQ05Id,t.CNQ05Text)),null!==t.CNQ06Id&&(o[6]=new f.QuestionResponseColumn(t.CNQ06Id,t.CNQ06Text)),null!==t.CNQ07Id&&(o[7]=new f.QuestionResponseColumn(t.CNQ07Id,t.CNQ07Text)),null!==t.CNQ08Id&&(o[8]=new f.QuestionResponseColumn(t.CNQ08Id,t.CNQ08Text));for(var a=[],n=0;n<e.length;n++)a.push(o[e[n].Order]);l.chairNoteColumns=a},l.setEnable=function(e){var t=!e.discussionEnabled(),o={requestUri:f.odata.getUrl(f.odata.entitySet.submissions,null,"EnableDisableDiscussion"),method:"POST",showProgressIndicator:!0,data:{Enable:t,SubmissionId:e.id}};c.request(o,function(){e.discussionEnabled(t),f.addMessage("Discussion for submission {0} has been {1}!".format(e.id,t?"enabled":"disabled"))})}}function g(n){var i=this;i.ratingComment=ko.observable("").extend({maxLength:4e3}),i.bind=function(){ko.applyBindings(i,n)},i.ratingOptions=ko.observableArray([]),i.viewRatingOptions={},i.selectedSeniorMetaReviewerRating=ko.observable(null),i.sid=ko.observable(0),i.data=null,i.editInDialog=function(a){i.data=a,i.ratingComment(a.ratingComment()),i.sid(a.id),i.ratingOptions([]),i.viewRatingOptions={},OData.read(f.odata.getUrl(f.odata.entitySet.seniorMetaReviewerRatingOptions+"?$filter=TrackId eq "+a.trackId),function(e){for(var t=0;t<e.value.length;t++){var o=e.value[t],o=f.autoMap(new m,o);i.ratingOptions.push(o),i.viewRatingOptions[o.id]=o}i.selectedSeniorMetaReviewerRating(a.seniorMetaReviewerRatingOptionId()),$(n).modal("show")})},i.saveRating=function(){var e={requestUri:f.odata.getUrl(f.odata.entitySet.submissions,null,"ChangeSeniorMetaReviewerRating"),method:"POST",showProgressIndicator:!0,data:{Request:{SubmissionId:i.sid(),RatingOptionId:i.selectedSeniorMetaReviewerRating()||null,RatingComment:i.ratingComment()}}};OData.request(e,function(e){e&&(i.data.seniorMetaReviewerRating(i.viewRatingOptions[e.value].name),i.data.seniorMetaReviewerRatingOptionId(e.value),i.data.ratingComment(i.ratingComment())),$(n).modal("hide")})}}function v(e,o,t,a,n,i,r,s,u,l,d,c){var p=this;p.key=e,p.tracks=o,p.pageUrls=t,p.questions=r,p.reviewQuestions=s,p.metaReviewQuestions=u,p.metaReviewerNoteQuestions=l,p.seniorMetaReviewerNoteQuestions=d,p.chairNoteQuestions=c,p.submissions=ko.observableArray([]),p.editRatingVm=null,p.submissionStatusNamesProvider=ko.pureComputed(function(){return a}),p.subjectAreasProvider=ko.pureComputed(function(){return n}),p.submissionSeniorMetaReviewerRatingOptionsProvider=ko.pureComputed(function(){return i}),p.trackNamesProvider=ko.pureComputed(function(){var e,t=[];for(e in o)o.hasOwnProperty(e)&&t.push(o[e].name);return t}),p.reviewerAllowedToCompareSubmission=ko.computed(function(){for(var e in o)if(o.hasOwnProperty(e)&&o[e].allowReviewerToCompareSubmission)return!0;return!1}),p.metaReviewerAllowedToCompareSubmission=ko.computed(function(){for(var e in o)if(o.hasOwnProperty(e)&&o[e].allowMetaReviewerToCompareSubmission)return!0;return!1}),p.exportReviewerSubmissionComparisons=function(e,t){var o=this.getFilterString(),a=f.odata.getUrl(f.odata.entitySet.submissionModels,null,"ExportReviewerSubmissionComparisons");f.page.post(a,{Filter:o})},p.exportMetaReviewerSubmissionComparisons=function(e,t){var o=this.getFilterString(),a=f.odata.getUrl(f.odata.entitySet.submissionModels,null,"ExportMetaReviewerSubmissionComparisons");f.page.post(a,{Filter:o})};var m=null;p.selectSeniorMetaReviewerRatingWithComment=function(e,t){null===m&&(m=new g(document.getElementById("editRatingDialog"))).bind(),m.editInDialog(e)},p.email=function(e,t){var o=t.target,a=parseInt($(o).attr("sid")),n=$(o).attr("recipientType"),i=$(o).attr("all"),t=$(o).attr("checkNote"),o=$(o).attr("checkDiscussion"),a=a?"Id eq {0}".format(a):this.getFilterString(),n="/"+window.cmt3.conference.name+"/Submission/SendEmail/"+n,a={filter:0<a.length?a:null};i&&(a.all=i),t&&(a.checkNote=t),o&&(a.checkDiscussion=o),f.url.navigateTo(n,a)},p.downloadAllLink=function(){return t.submissionFile.format("")},p.downloadFiles=function(e,t){var o=t.target,n=$(o).attr("href"),o=(o=this.getFilterString())&&"&$filter="+encodeURIComponent(o),o={method:"GET",headers:{Accept:"application/json"},requestUri:f.odata.getUrl(f.odata.entitySet.submissionModels)+"?$select=Id"+o,showProgressIndicator:!0};OData.request(o,function(e){for(var t=e.value,o=[],a=0;a<t.length;a++)o.push(t[a].Id);e=o.join("/");f.page.post(n,{Ids:e})}),t.preventDefault()},f.DataTable.call(p)}v.prototype=$.extend({},f.DataTable.prototype,{getStorageKey:function(){return this.key},getDefaultSorting:function(){return{property:"Id",direction:"asc"}},getFilterString:function(){var o="";return $.each(this.filters,function(e,t){t.getValue()&&(o+=o?" and "+t.getValue():t.getValue())}),o},selectStatus:function(e,t){var o=$(t.target),t=ko.contextFor(t.target),a=$($("#statusTemplate").text());o.hide(),o.after(a),t.$parent.getStatuses(e.id,e.track.id,o,a).done(function(e){ko.applyBindings(e,a[0])})},getStatuses:function(r,s,u,l){var d=$.Deferred();return OData.read(f.odata.getUrl(f.odata.entitySet.submissionStatuses),function(e){for(var t=[],o={},a=0;a<e.value.length;a++){var n=e.value[a],n=f.autoMap(new f.SubmissionStatus,n);n.trackId==s&&(t.push(n),o[n.id]=n)}var i={options:ko.observableArray(t),selectedStatus:ko.observable()};i.selectedStatus.subscribe(function(e){e={requestUri:f.odata.getUrl(f.odata.entitySet.submissions,null,"ChangeStatus"),method:"POST",showProgressIndicator:!0,data:{Request:{SubmissionId:r,StatusId:e[0]}}};OData.request(e,function(e){l.remove(),u.text(o[e.value].name),u.show()})}),d.resolve(i)}),d.promise()},selectSeniorMetaReviewerRating:function(e,t){var o=$(t.target),t=ko.contextFor(t.target),a=$($("#seniorMetaReviewerRatingTemplate").text());o.hide(),o.after(a),t.$parent.getSeniorMetaReviewerRatingOptions(e.id,e.track.id,e.seniorMetaReviewerRatingOptionId,o,a).done(function(e){ko.applyBindings(e,a[0])})},getSeniorMetaReviewerRatingOptions:function(r,e,s,u,l){var d=$.Deferred();return OData.read(f.odata.getUrl(f.odata.entitySet.seniorMetaReviewerRatingOptions+"?$filter=TrackId eq "+e),function(e){for(var t=[],o={},a=0;a<e.value.length;a++){var n=e.value[a],n=f.autoMap(new m,n);t.push(n),o[n.id]=n}var i={options:ko.observableArray(t),selectedSeniorMetaReviewerRating:ko.observable(s())};i.selectedSeniorMetaReviewerRating.subscribe(function(e){e!=s()&&(e={requestUri:f.odata.getUrl(f.odata.entitySet.submissions,null,"ChangeSeniorMetaReviewerRating"),method:"POST",showProgressIndicator:!0,data:{Request:{SubmissionId:r,RatingOptionId:e||null}}},OData.request(e,function(e){s(e&&e.value),l.remove(),e?u.text(o[e.value].name):u.text("Not Rated"),u.show()}))}),d.resolve(i)}),d.promise()},loadData:function(e){var d=this;(e=!0===e)&&d.applyState();e=function(l){var e=d.sorting(),t=e?"&$orderby="+encodeURIComponent(e.property+" "+e.direction):"",o=d.skip()?"&$skip="+d.skip():"",a=d.top()?"&$top="+d.top():"",e=(e=d.getFilterString())&&"&$filter="+encodeURIComponent(e),a={method:"GET",headers:{Accept:"application/json"},requestUri:f.odata.getUrl(f.odata.entitySet.submissionModels)+"?"+(l?"$count=true&$top=0"+e:t+e+o+a)};return c.request(a,function(e){if(l)d.total(e["@odata.count"]||0);else{for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],n=a.TrackId,i=d.tracks&&d.tracks[n],r=d.reviewQuestions&&d.reviewQuestions[n],s=d.metaReviewQuestions&&d.metaReviewQuestions[n],u=d.metaReviewerNoteQuestions&&d.metaReviewerNoteQuestions[n],u=f.autoMap(new h(d.pageUrls,n,i,r,a.InlineReviewJson,s,a.InlineMetaReviewJson,u,a.InlineMetaReviewerNoteJson),a);u.PopulateAggregates(d.questions,a),u.PopulateSeniorMetaReviewerNoteColumns(d.seniorMetaReviewerNoteQuestions,a),u.PopulateChairNoteColumns(d.chairNoteQuestions,a),t.push(u)}d.submissions(t)}d.saveState()},function(e){f.addErrorMessage(f.odata.getErrorMessage(e))})};return $.when(e(!1),e(!0)).done(function(){$("html,body").scrollTop(0)})},openAllReviews:function(e,t,i,r){var o=(o=this.getFilterString())&&"&$filter="+encodeURIComponent(o),o={method:"GET",headers:{Accept:"application/json"},requestUri:f.odata.getUrl(f.odata.entitySet.submissionModels)+"?$select=Id"+o,showProgressIndicator:!0};OData.request(o,function(e){for(var t=e.value,o=[],a=0;a<t.length;a++)o.push(t[a].Id);var n=o.join("/"),e="/"+window.cmt3.conference.name+"/Submission/"+(i?r?"AllReviewsSideBySide":"AllReviews":"AllMetaReviews");f.url.navigateTo(e,{ids:n})})},openAllReviewsPrinterFriendly:function(e,t){this.openAllReviews(e,t,!0,!1)},openAllReviewsSideBySide:function(e,t){this.openAllReviews(e,t,!0,!0)},openAllMetaReviewsPrinterFriendly:function(e,t){this.openAllReviews(e,t,!1)}}),f.seniorMetaReviewerSubmissionsPage=function(e,t,o,a,n,i,r,s,u,l,d,c,p,m){var f=new v(t,n,a,i,r,s,u,l,d,c,p,m);f.toggleableColumnsContainer&&f.toggleableColumnsContainer.setDefaultHiddenColumnKeys(o);var h=document.getElementById(e);ko.applyBindings(f,h),f.loadData(!0).done(function(){f.toggleableColumnsContainer&&f.toggleableColumnsContainer.loadState(),$(h).show()})}}(window.app,window.OData),function(a,n,r){"use strict";function i(e,t){var i=this;i.trackId=t,i.isFileUploaded=ko.observable(!1),i.users=ko.observableArray(),i.normalUsers=ko.observableArray(),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.uploading=ko.observable(!1),i.userId=e,i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.users.removeAll(),i.normalUsers.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,userId:n.UserId,bid:n.Bid,notice:n.Note,hasError:n.HasError,rawData:n.RawData};i.users.push(n),n.hasError||i.normalUsers.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.getModel=function(){for(var e=[],t=0;t<i.normalUsers().length;t++){var o=i.normalUsers()[t],o={UserId:o.userId,Bid:o.bid};e.push(o)}return{UserId:i.userId,TrackId:i.trackId,Bids:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.seniorMetaReviewerBiddingModels,null,"Import"),method:"POST",data:{Request:o}};n.request(o,function(){window.location="/"+window.cmt3.conference.name+"/User/SeniorMetaBidding"})},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importSeniorMetaReviewerBids=function(e,t,o){new i(e,t).bindTo(o)}}(window.app,window.OData,window.jQuery,(window.document,window.confirm)),function(r,s,a){function u(o){var e,a=this;function n(){i(),e=a.isAssigned.subscribe(t)}function i(){e&&"function"==typeof e.dispose&&e.dispose()}function t(){void 0===a.initialState?a.initialState=a.isAssigned():function(){var t=this;t.isToggleInProgress(!0);var e={UserId:t.userId};e.Type=t.isAssigned()?"Assign":"Remove",OData.request({requestUri:r.odata.getUrl(r.odata.entitySet.trackMetaReviewerGroups,o,"AssignMetaReviewer"),method:"POST",showProgressIndicator:!1,data:{Request:e}},function(){t.isAssigned()===t.initialState?a.css(""):a.css(t.isAssigned()?"success":"error")},function(e){i(),a.isAssigned(!a.isAssigned()),n(),r.addErrorMessage("Unable to edit assignment for '"+t.firstName+" "+t.lastName+"'. "+r.odata.getErrorMessage(e))}).always(function(){t.isToggleInProgress(!1)})}.call(a)}a.userId=r.autoMap(),a.firstName=r.autoMap(),a.lastName=r.autoMap(),a.email=r.autoMap(),a.organization=r.autoMap(),a.primarySubjectArea=r.autoMap(),a.secondarySubjectAreas=r.autoMap(),a.quota=r.autoMap(),a.trackSubmissionCount=r.autoMap(),a.conferenceSubmissionCount=r.autoMap(),a.userType=r.autoMap(),a.isAssigned=ko.observable().autoMap(),a.initialState=void 0,a.css=ko.observable(""),a.isToggleInProgress=ko.observable(!1),n()}function n(e,t){var o=this;o.groupId=e,o.showAssignedOnly=ko.observable("false"),o.showAssignedOnly.subscribe(o.loadData,o),o.metaReviewers=ko.observableArray([]),o.userTypes=t,o.userTypesProvider=function(){return o.userTypes},r.DataTable.call(o)}function i(t){var o=this;o.id=t,o.trackId=ko.observable().autoMap(),o.track=ko.observable().autoMap(),o.groupName=ko.observable().autoMap(),o.isSingleTrackConference=ko.observable().autoMap(),o.loadData=function(){var e=r.odata.getUrl(r.odata.entitySet.trackMetaReviewerGroups,t);return s.request({requestUri:e,showProgressIndicator:!1,method:"GET"},function(e){r.autoMap(o,e)})}}function l(e,t,o){r.showProgress(),this.metaReviewerGroup=new i(e),this.table=new n(e,o),ko.applyBindings(this,a.getElementById(t)),$.when(this.table.loadData(!0),this.metaReviewerGroup.loadData()).then(function(){$("#"+t).show()}).always(r.hideProgress)}n.prototype=$.extend({},r.DataTable.prototype,{getStorageKey:function(){return"MetaReviewerGroupAssignMetaReviewers"},getDefaultSorting:function(){return{property:"IsAssigned",direction:"desc"}},loadData:function(e){var n=this;(e=!0===e)&&n.applyState();var t=n.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",a=n.skip()?"&$skip="+n.skip():"",t=n.top()?"&$top="+n.top():"",i="";$.each(n.filters,function(e,t){t.getValue()&&(i+=i?" and "+t.getValue():t.getValue())}),"true"===n.showAssignedOnly()&&(i+=(i?" and":"")+" IsAssigned eq true");i=i&&"&$filter="+encodeURIComponent(i),e={method:"GET",headers:{Accept:"application/json"},requestUri:r.odata.getUrl(r.odata.entitySet.trackMetaReviewerGroups,n.groupId,"MetaReviewers")+"?$count=true"+i+o+a+t,showProgressIndicator:!e};return s.request(e,function(e){n.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++){var a=e.value[o],a=r.autoMap(new u(n.groupId),a);t.push(a)}n.metaReviewers(t),n.saveState()},function(e){r.addErrorMessage(r.odata.getErrorMessage(e))})}}),r.metaReviewerGroupAssignMetaReviewers=function(e,t,o){new l(e,t,o)}}(window.app,window.OData,window.document),function(r,s,u){function l(){var t=this;t.id=r.autoMap(),t.trackId=r.autoMap(),t.trackName=r.autoMap(),t.submissionId=r.autoMap(),t.submissionTitle=r.autoMap(),t.fileId=r.autoMap(),t.fileName=r.autoMap(),t.fileType=r.autoMap(),t.fileTypeString=ko.pureComputed(function(){return r.enums.iThenticateFileTypeSubstitutions[t.fileType]}),t.status=r.autoMap(),t.percentMatch=r.autoMap(),t.getSimilarityReport=function(){var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},requestUri:r.odata.getUrl(r.odata.entitySet.iThenticateResults,t.id,"GetSimilarityReport"),showProgressIndicator:!0};s.request(e,function(e){window.location=e.value})}}function t(){this.results=ko.observableArray([]),r.DataTable.call(this)}function o(e){r.showProgress(),this.table=new t,ko.applyBindings(this,document.getElementById(e)),this.table.loadData(!0).done(function(){u("#"+e).show()}).always(r.hideProgress)}t.prototype=u.extend({},r.DataTable.prototype,{controller:r.odata.entitySet.iThenticateResults,getDefaultSorting:function(){return{property:"SubmissionId",direction:"asc"}},loadData:function(e){var a=this;(e=!0===e)&&a.applyState();var t=a.sorting(),o=t?"&$orderby="+encodeURIComponent(t.property+" "+t.direction):"",n=a.skip()?"&$skip="+a.skip():"",t=a.top()?"&$top="+a.top():"",i="";u.each(a.filters,function(e,t){t.getValue()&&(i+=i?" and "+t.getValue():t.getValue())});i=i&&"&$filter="+encodeURIComponent(i),e={method:"GET",headers:{Accept:"application/json"},requestUri:r.odata.getUrl(a.controller)+"?$count=true"+i+o+n+t,showProgressIndicator:!e};return s.request(e,function(e){a.total(e["@odata.count"]||0);for(var t=[],o=0;o<e.value.length;o++)t.push(r.autoMap(new l,e.value[o]));a.results(t),a.saveState()},function(e){r.addErrorMessage(r.odata.getErrorMessage(e))})}}),r.iThenticateResultsPage=function(e){new o(e)}}(window.app,window.OData,window.$),function(a){function o(){var o=this;function t(){var e;e={requestUri:a.odata.getUrl(a.odata.entitySet.iThenticateRetrieveResults),showProgressIndicator:!1,method:"GET"},OData.request(e,function(e,t){o.id(e.Id),o.startedAt(e.StartedAt),o.finishedAt(e.FinishedAt),o.pendingCount(e.PendingCount),o.doneCount(e.DoneCount),o.errorCount(e.ErrorCount)},function(e){e===a.enums.httpStatusCodes.failure.notFound&&(o.id(null),o.startedAt(null),o.finishedAt(null),o.pendingCount(null),o.doneCount(null),o.errorCount(null))}).done(function(){o.finished()||setTimeout(t,1e3)})}o.id=ko.observable(null),o.startedAt=ko.observable(null),o.finishedAt=ko.observable(null),o.pendingCount=ko.observable(null),o.doneCount=ko.observable(null),o.errorCount=ko.observable(null),o.visible=ko.pureComputed(function(){return o.id()}),o.finished=ko.pureComputed(function(){return o.id()&&o.finishedAt()}),o.done=function(){var e={requestUri:a.odata.getUrl(a.odata.entitySet.iThenticateRetrieveResults,o.id()),showProgressIndicator:!1,method:"DELETE"};OData.request(e,function(){window.location.reload()})},o.refresh=function(){t()},t()}function t(e){var t=this;t.IThenticateRetrieveResultSession=ko.observable(),t.progressDialog=new o,t.retrieveResults=function(){var e={requestUri:a.odata.getUrl(a.odata.entitySet.iThenticateRetrieveResults),showProgressIndicator:!1,method:"POST"};return OData.request(e).done(t.progressDialog.refresh)},ko.applyBindings(t,document.getElementById(e))}a.iThenticateRetrieveResultsPage=function(e){new t(e)}}(window.app,(window.OData,window.$)),function(s){function a(){var o=this;o.successCount=ko.observable(null).autoMap(),o.errorCount=ko.observable(null).autoMap(),o.totalCount=ko.observable(null).autoMap(),o.status=ko.observable(null).autoMap(),o.finishedAt=ko.observable(null).autoMap(),o.processedCount=ko.pureComputed(function(){return o.errorCount()+o.successCount()}),o.percentage=ko.pureComputed(function(){var e=o.totalCount(),t=o.processedCount();return e&&null!==t?Math.round(t/e*100):null})}function t(){var t=this;function o(){var e;e={requestUri:s.odata.getUrl(s.odata.entitySet.iThenticateSubmissions,null,"GetProgress"),showProgressIndicator:!1,method:"POST"},OData.request(e,function(e){t.progress(s.autoMap(new a,e))},function(e){(e&&e.response&&e.response.statusCode)===s.enums.httpStatusCodes.failure.notFound&&t.progress(null)}).done(function(){var e=t.progress()&&t.progress().finishedAt();e||setTimeout(o,1e3)})}t.progress=ko.observable(null),t.visible=ko.pureComputed(function(){return null!=t.progress()}),t.done=function(){var e={requestUri:s.odata.getUrl(s.odata.entitySet.iThenticateSubmissions,null,"ClearProgress"),showProgressIndicator:!1,method:"POST"};OData.request(e,function(){t.progress(null)})},t.refresh=function(){o()},o()}function u(){this.trackId=s.autoMap(),this.trackName=s.autoMap(),this.statuses=s.autoMap()}function l(){var e=this;e.trackId=s.autoMap(),e.trackName=s.autoMap(),e.statusId=s.autoMap(),e.statusName=s.autoMap(),e.submissionsCount=s.autoMap(),e.submissionFilesCount=s.autoMap(),e.cameraReadyFilesCount=s.autoMap(),e.checked=ko.observable(!1),e.isDisabled=ko.computed(function(){return e.submissionFilesCount<1})}function o(e){var t=this;t.submissionId=ko.observable().extend({required:!0,pattern:"^[0-9]+$"}),t.progressViewModel=e,t.isSubmitDisabled=ko.pureComputed(function(){return!t.submissionId.isValid()}),t.submit=function(){if(t.submissionId.isValid()){var e={requestUri:s.odata.getUrl(s.odata.entitySet.iThenticateSubmissions,null,"SendSingle"),method:"POST",data:{Request:{SubmissionId:t.submissionId()}}};return OData.request(e,function(e){t.progressViewModel.refresh()})}}}function n(e){var t,r=this;function o(){for(var e=r.tracks(),t=[],o=0;o<e.length;o++)for(var a=e[o].statuses,n=0;n<a.length;n++)a[n].checked()&&!a[n].isDisabled()&&t.push({TrackId:a[n].trackId,StatusId:a[n].statusId});return t}r.progressViewModel=e,r.tracks=ko.observableArray([]),r.selectedCount=ko.computed(function(){return o().length}),r.isSubmitDisabled=ko.computed(function(){return r.selectedCount()<1}),r.isSingleTrackConference=ko.pureComputed(function(){return r.tracks().length<2}),r.submit=function(){var e={requestUri:s.odata.getUrl(s.odata.entitySet.iThenticateSubmissions,null,"Send"),method:"POST",data:{Request:{Items:o()}}};return OData.request(e,function(e){r.progressViewModel.refresh()})},t={requestUri:s.odata.getUrl(s.odata.entitySet.iThenticateSubmissions),method:"GET"},OData.request(t,function(e){for(var t,o=[],a={},n=0;n<e.value.length;n++){var i=s.autoMap(new l,e.value[n]);a[i.trackId]?a[i.trackId].Statuses.push(i):a[i.trackId]={TrackId:i.trackId,TrackName:i.trackName,Statuses:[i]}}for(t in a)a.hasOwnProperty(t)&&o.push(s.autoMap(new u,a[t]));o.sort(function(e,t){return e.trackId<t.trackId?-1:e.trackId>t.trackId?1:0}),r.tracks(o)})}function i(){var e=this;e.progressDialog=new t,e.submissions=new n(e.progressDialog),e.submission=new o(e.progress),e.submissionsVisible=ko.pureComputed(function(){return!e.progressDialog.visible()})}s.iThenticateSendSubmissions=function(e){ko.applyBindings(new i,document.getElementById(e))}}(window.app),function(l,d,c,t){function p(t,e,o){var a=this;a.id=ko.observable(0).autoMap(),a.left=ko.observable(0).autoMap(),a.right=ko.observable(0).autoMap(),a.operator=ko.observable("").autoMap(),a.leftTitle=ko.pureComputed(function(){var e=t[a.left()];return e&&e.title||"Unknown paper"}),a.rightTitle=ko.pureComputed(function(){var e=t[a.right()];return e&&e.title||"Unknown paper"}),a.operatorTitle=ko.pureComputed(function(){return e[a.operator()]}),a.isEditable=ko.pureComputed(function(){var e=t[a.left()];return e&&o.has(e.id)})}function m(){this.id=d.autoMap(),this.title=d.autoMap()}function f(){this.rowComparisons=ko.observableArray()}function h(t,e,o){this.leftSubmissions=ko.pureComputed(function(){return(e||[]).map(function(e){return{id:e,title:t[e]&&t[e].title||"Unknown paper"}})}),this.operatorTitle=o}function i(a,n,e){var i=this,r={},o={Comparable:"~",PreferredOver:">"},s=new Set,u=new Set(e);i.isEditing=ko.observable(!1),i.editViewModel=ko.observable(null),i.comparisons=ko.observableArray(),i.submissions=ko.observableArray(),i.toBeDeleted=ko.observable(null),i.aggregateComparisons=ko.observableArray(),i.operators=ko.pureComputed(function(){return Object.keys(o).map(function(e){return{value:e,name:o[e]}})}),i.add=function(){i.editViewModel(new p),i.isEditing(!0)},i.save=function(){i.aggregateComparisons([]),d.showProgress();var t=l.Deferred(),e=d.autoMap(i.editViewModel()),e={requestUri:d.odata.getUrl(n===d.enums.assignmentType.metaReviewer?d.odata.entitySet.metaReviewerSubmissionComparisons:d.odata.entitySet.reviewerSubmissionComparisons),method:"POST",showProgressIndicator:!1,headers:{Prefer:"return-content"},data:e};return c.request(e,function(e){i.loadData(!1).done(function(){i.isEditing(!1),t.resolve()}).always(d.hideProgress)}).fail(d.hideProgress),t.promise()},i.delete=function(o){var e,t;i.toBeDeleted(o),e=l(document.getElementById(a)),t=l.Deferred(),e.find(".btn-primary").off("click").click(function(){t.resolve(!0),t=null,e.modal("hide")}),e.on("hidden",function(){t&&t.resolve(!1)}),e.modal("show"),t.promise().done(function(e){if(e){i.aggregateComparisons([]),d.showProgress();var t=l.Deferred(),e={requestUri:d.odata.getUrl(n===d.enums.assignmentType.metaReviewer?d.odata.entitySet.metaReviewerSubmissionComparisons:d.odata.entitySet.reviewerSubmissionComparisons,o.id()),showProgressIndicator:!1,method:"DELETE"};return c.request(e,function(e){i.loadData(!1).done(function(){t.resolve()}).always(d.hideProgress)}).fail(d.hideProgress),t.promise()}})},i.showSummary=function(){var e={requestUri:d.odata.getUrl(n===d.enums.assignmentType.metaReviewer?d.odata.entitySet.metaReviewerSubmissionComparisons:d.odata.entitySet.reviewerSubmissionComparisons,null,"GetSummary"),method:"GET"};c.request(e,function(e){i.aggregateComparisons([]);e=JSON.parse(e.value);l.each(e,function(e,t){for(var o=new f,a=0;a<t.length;a++){var n=a==t.length-1?new h(r,t[a]):new h(r,t[a],">");o.rowComparisons.push(n)}i.aggregateComparisons.push(o)})})},i.loadData=function(e){e={requestUri:"/api/odata/"+t.name+"/$batch",method:"POST",showProgressIndicator:e,data:{requests:[{url:d.odata.getUrl(n===d.enums.assignmentType.metaReviewer?d.odata.entitySet.metaReviewModels:d.odata.entitySet.reviewModels)+"?$select=Id,Title,TrackId",method:"GET",headers:{Accept:"application/json"}},{url:d.odata.getUrl(n===d.enums.assignmentType.metaReviewer?d.odata.entitySet.metaReviewerSubmissionComparisons:d.odata.entitySet.reviewerSubmissionComparisons),method:"GET",headers:{Accept:"application/json"}}]}};return c.request(e,function(e){var t=e&&e.responses&&e.responses[0]&&e.responses[0].body&&e.responses[0].body.value||[],e=e&&e.responses&&e.responses[1]&&e.responses[1].body&&e.responses[1].body.value||[];i.submissions([]),r={},s.clear(),l.each(t,function(e,t){r[t.Id]=d.autoMap(new m,t),u.has(t.TrackId)&&(s.add(t.Id),i.submissions.push(r[t.Id]))}),i.comparisons([]),l.each(e,function(e,t){i.comparisons.push(d.autoMap(new p(r,o,s),t))})})}}d.submissionComparison=function(e,t,o,a){var n=new i(t,o,a);n.loadData(!0).done(function(){ko.applyBindingsAndShow(n,e)})}}(window.jQuery,window.app,window.OData,window.cmt3.conference),function(t,o,n,i){"use strict";function r(){var e=!1;this.id=ko.observable(0).autoMap(),this.name=ko.observable("").extend({required:!0}).autoMap(),this.isEditing=ko.observable(!1),this.isEditButtonFocused=ko.observable(!1),this.focus=function(){e=!0},this.isFocused=ko.pureComputed=function(){return e}}function a(){var a=this;a.tracks=ko.observableArray([]),a.createNew=function(){var e;confirm('Are you sure subject area is not the better option? Click "OK" only if you understand the complexity to manage tracks.')&&(e=o.autoMap(new r,{}),a.tracks.unshift(e),a.edit(e))},a.edit=function(o){t.each(a.tracks(),function(e,t){t!==o&&a.cancel(t)}),o.isEditing(!0),o.focus()},a.save=function(e){var t=ko.validation.group(e);if(0<t().length)return t.showAllMessages(),!1;t=o.autoMap(e),t={requestUri:o.odata.getUrl(o.odata.entitySet.tracks,t.Id),method:t.Id?"PATCH":"POST",headers:{Accept:"application/json"},data:t};n.request(t,function(){e.isEditing(!1),e.isEditButtonFocused(!0),i.location.reload()})},a.delete=function(e){1!=a.tracks().length?confirm("Are you sure you want to delete this track? Papers in the track will no longer be accessible.")&&(e={requestUri:o.odata.getUrl(o.odata.entitySet.tracks,e.id()),method:"DELETE"},n.request(e,function(){i.location.reload()})):alert("Sorry, you cannot delete the only track in a conference.")},a.cancel=function(e){var t;e&&(e.id()?(e.name(e.name.originalValue),e.isEditing(!1)):-1<(t=a.tracks.indexOf(e))&&a.tracks.splice(t,1),e.isEditButtonFocused(!0))},a.bindTo=function(e){n.read(o.odata.getUrl(o.odata.entitySet.tracks),function(e){e=e&&e.value;t.each(e,function(e,t){t=o.autoMap(new r,t);t.name.extend({trackChanges:!0}),a.tracks.push(t)})}).done(function(){ko.applyBindingsAndShow(a,e)})}}o.settingsTrackManagement=function(e){(new a).bindTo(e)}}(window.jQuery,window.app,window.OData,window),function(h,m,o){"use strict";function g(t,e){var o=this;o.context=e,o.id=t.Id,o.isSelf=t.IsSelf,o.replyAuthor=t.ReplyAuthor,o.replyDate=t.ReplyDate,o.date=t.Date,o.topicId=t.TopicId,o.topic=t.Topic,o.message=t.Text.htmlMultiLineEncode(),o.replying=ko.observable(!1),o.text=ko.observable(),o.reviewer=ko.pureComputed(function(){var e=null;return t.RoleAssignmentNumber&&(e=m.enums.userRole.reviewer===t.Role?"Reviewer #"+t.RoleAssignmentNumber:m.enums.userRole.metaReviewer===t.Role?"Meta-Reviewer #"+t.RoleAssignmentNumber:m.enums.userRole.seniorMetaReviewer===t.Role?"Senior Meta-Reviewer #"+t.RoleAssignmentNumber:m.enums.userRole.chair===t.Role?"Chair #"+t.RoleAssignmentNumber:"User #"+t.RoleAssignmentNumber),t.IsMasked||m.enums.userRole.reviewer!==t.Role&&m.enums.userRole.metaReviewer!==t.Role?e:t.FirstName+" "+t.LastName+" ("+e+")"}),o.dateFormatted=function(){var e=o.date.toString();return e.substring(0,e.indexOf(".")).replace("T"," ")},o.replyDateFormatted=function(){if(o.replyDate){var e=o.replyDate.toString();return e.substring(0,e.indexOf(".")).replace("T"," ")}return""},o.deleteMessage=function(){var e;o.id&&confirm("You will not be able to revert this action. Are you sure you want to delete the message?")&&(e={requestUri:window.app.odata.getUrl(m.odata.entitySet.discussionMessages,null,"DeleteMessage"),method:"POST",data:{Id:o.id}},window.OData.request(e,function(){window.location.reload()},function(e){OData.defaultError(e)}))}}function v(e,t){this.hiddenNumber=e,this.reviewPreview=t}g.prototype={form:function(){this.replying(!0)},reply:function(e,t){var o=this.context,a=h(t.target);m.disableLink(a);t={requestUri:window.app.odata.getUrl(m.odata.entitySet.discussionMessages,null,"Reply"),method:"POST",data:{TopicId:this.topicId,AnswerTo:this.id,Text:this.text()}};OData.request(t,function(){o.render(),m.addMessage("Reply successfully saved."),m.enableLink(a)},function(e){m.addMessage(e.response.statusCode,"Error:","error"),m.enableLink(a)})},cancel:function(){this.text(""),this.replying(!1)}};function a(e){var p=this;p.isCreatingNewTopic=ko.observable(!1),p.newTopicTitle=ko.observable(""),p.newTopicText=ko.observable(""),p.submissionId=parseInt(h("#sid").text()),p._items=ko.observableArray(),p._sort=ko.observable("Date desc"),p._selected=ko.observable(),p._filter=ko.observable(""),p._reviewQuestions=e,p._reviewers=ko.observableArray(),p._reviews=ko.observableArray(),p.bindTo=function(e){p.render(),ko.applyBindingsAndShow(p,e)},p.postNewTopic=function(e,t){var o=h(t.target);m.disableLink(o);t={requestUri:window.app.odata.getUrl(m.odata.entitySet.discussionMessages,null,"CreateTopic"),showProgressIndicator:!1,headers:{"Content-Type":"application/json"},method:"POST",data:{SubmissionId:p.submissionId,Title:p.newTopicTitle(),Description:p.newTopicText()}};OData.request(t,function(){p.render(),p.isCreatingNewTopic(!1),p.newTopicTitle(""),p.newTopicText(""),m.addMessage("Topic successfully created."),m.enableLink(o)},function(e){m.addMessage(e.response.statusCode,"Error:","error"),m.enableLink(o)})},p.cancelNewTopic=function(){p.isCreatingNewTopic(!1),p.newTopicTitle(""),p.newTopicText("")},p.inlineReviewsLoaded=ko.observable(!1),p.inlineReviewsVisible=ko.observable(!1),p.toggleInlineReviews=function(){return p.inlineReviewsLoaded()?p.inlineReviewsVisible(!p.inlineReviewsVisible()):h.when(OData.read(m.odata.getUrl(m.odata.entitySet.submissions,p.submissionId,"Reviews"),function(e){for(var t=[],o=0;o<e.value.length;o++){for(var a=e.value[o],n=m.autoMap(new m.Review,a),i=0;i<a.Questions.length;i++){for(var r=a.Questions[i],s=m.autoMap(new m.Question,r),u=0;u<r.Answers.length;u++)s.answers.push(m.autoMap(new m.QuestionAnswer,r.Answers[u]));n.questions.push(s)}for(i=0;i<a.Files.length;i++){var l=a.Files[i],l=m.autoMap(new m.File,l);n.files.push(l)}(0<n.reviewerNumber?p._reviews:t).push(n)}for(var d=0===p._reviews.length?1:p._reviews[p._reviews.length-1].reviewerNumber+1,c=0;c<t.length;c++)t[c].reviewerNumber=d++,p._reviews.push(t[c])})).done(function(){p.inlineReviewsLoaded(!0),p.inlineReviewsVisible(!0)}),!1}}a.prototype={render:function(){var f=this,e="&$orderby="+f._sort(),t=""!=f.getFilter()?"&$filter="+encodeURIComponent(f.getFilter()):"",t={method:"POST",requestUri:"/api/odata/"+o+"/$batch",headers:{Accept:"application/json"},data:{requests:[{method:"GET",url:"/api/odata/"+o.name+"/"+m.odata.entitySet.discussionMessages+"?id="+f.submissionId+"&"+("$count=true"+e+t),headers:{Accept:"application/json"}},{method:"GET",url:m.odata.getUrl(m.odata.entitySet.reviewViews,null,"GetAggregatableReviews")+"(id="+f.submissionId+")",headers:{Accept:"application/json"}}]}};OData.request(t,function(e){var t,o,a=e&&e.responses&&e.responses[0]&&e.responses[0].body;a&&(t=a&&a["@odata.count"],a=a&&a.value,f._items([]),t&&f._selected(t),a&&h.inArray(a)&&(o=[],h.each(a,function(e,t){o.push(new g(t,f))}),f._items(o)));e=e&&e.responses&&e.responses[1]&&e.responses[1].body;if(e){var n,i,r,s,u=e.value&&JSON.parse(e.value)||[];f._reviewers([]);for(var l=[],d=0;d<u.length;d++){var c=u[d],p=[];if(f._reviewQuestions&&0<f._reviewQuestions.length){for(r=c&&c.Question||[],i={},n=0;n<r.length;n++)i[(s=r[n]).QuestionOrder]=s;for(n=0;n<f._reviewQuestions.length;n++){var m=f._reviewQuestions[n];p.push(i[m.Order])}}c=new v(c.HiddenNumber,p);l.push(c)}f._reviewers(l)}},function(e){window.cmt3.logger.error("[batch] server side error: "+e.message)},OData.batchHandler)},getFilter:function(){var o=h(".search-box > input").val();if("Search Discussion for text"==o||""==o)return"";var a="";return h.each(["Text","Topic","FirstName","LastName","Email"],function(e,t){a+=(""==a?"":" or ")+"contains(tolower("+t+"),tolower('"+m.odata.escapeParam(o)+"'))"}),a},sort:function(e,t){var o=h(t.currentTarget),a=o.attr("data-sort");null==a&&(a=(o=h(o.context.parentNode)).attr("data-sort"));t="";o.hasClass("selected")?t=this._sort().match(" desc$")?(this._sort(a+" asc"),o.next().removeClass("icon-arrow-down"),o.next().addClass("icon-arrow-up"),"ascending"):(this._sort(a+" desc"),o.next().removeClass("icon-arrow-up"),o.next().addClass("icon-arrow-down"),"desscending"):(h("a[data-sort]").each(function(){h(this).next().removeClass("icon-arrow-up"),h(this).next().removeClass("icon-arrow-down"),h(this).removeClass("selected")}),o.next().removeClass("icon-arrow-down"),o.next().addClass("icon-arrow-up"),t="ascending",o.addClass("selected"),this._sort(a+" asc")),this.render(),m.announce(m.narratorMessages.sortedBy.format(o.text(),t))},search:function(e,t){13==t.keyCode&&(h(t.target).blur(),this.render(),m.announce(m.narratorMessages.searchingFor.format(this._filter()||"empty string")),h(t.target).focus())}},m.showDiscussion=function(e,t){new a(t).bindTo(e)}}(window.jQuery,window.app,window.cmt3.conference),function(s,n){function t(o,e,t){var a,n=this,o=o,i=null;!e||(a=o.availableFilters[e])&&(i=new s.filtering[a.type](e,$.extend({},a.config,t))),n.filter=ko.observable(i),n.property=ko.observable(e),n.property.subscribe(function(e){var t;e&&(t=o.availableFilters[e],n.filter(new s.filtering[t.type](e,t.config)))}),n.availableFilters=ko.pureComputed(function(){return Object.keys(o.availableFilters)}),n.getFilterString=ko.pureComputed(function(){return n.filter()?n.filter().getFilterString():""})}function e(e){var o=this;o.availableFilters={Id:{property:"Id",type:"NumericFilter"},Status:{property:"Status",type:"OptionsFilter",config:{options:["Awaiting Decision","Complete","Desk Reject"]}},Name:{property:"Name",type:"StringFilter"}},o.appliedFilters=ko.observableArray([new t(o,"Status",{operator:s.filtering.operators.is,value:"Awaiting Decision"})]),o.addFilter=function(){o.appliedFilters.push(new t(o))},o.updateFilter=function(e){},o.removeFilter=function(e){var t=o.appliedFilters();t.splice(t.indexOf(e),1),o.appliedFilters(t)},o.getFilterString=function(){return o.appliedFilters().map(function(e){return e&&e.getFilterString()}).filter(function(e){return e&&""!==e}).join(" and ")}}function u(){this.id=ko.observable().autoMap(),this.title=ko.observable().autoMap(),this.heading=ko.observable().autoMap(),this.answers=ko.observableArray([]),this.details=null}function l(){this.text=ko.observable().autoMap()}function d(){var e=this;e.id=s.autoMap(),e.firstName=ko.observable().autoMap(),e.lastName=ko.observable().autoMap(),e.email=ko.observable().autoMap(),e.organization=ko.observable().autoMap(),e.textFormatted=ko.pureComputed(function(){return e.firstName()+" "+e.lastName()+" ("+e.organization()+") <"+e.email()+">"})}function c(e,t){var i=this;function o(e){var t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(t){var o=parseInt(t[1],10),a=parseInt(t[2],10),e=parseInt(t[3],10);if(12<o)return null;t=(new Date).getFullYear();return e<t||t+2<e?null:new Date(e,o-1,a)}return null}i.city=ko.observable().autoMap(),i.country=ko.observable().autoMap(),i.name=ko.observable().autoMap(),i.shortName=ko.observable().extend({isEditable:!0}).autoMap(),i.startDate=ko.observable().autoMap(),i.endDate=ko.observable().autoMap(),i.createSubmissionDeadline=ko.observable().autoMap(),i.externalUrl=ko.observable().autoMap(),i.logoBlobName=s.autoMap(),i.Chairs=e,i.startDateFormatted=ko.pureComputed({read:function(){var e=i.startDate();return e&&e.format("mm/dd/yyyy")||null},write:function(e){e=o(e);e&&i.startDate(e)}}),i.endDateFormatted=ko.pureComputed({read:function(){var e=i.endDate();return e&&e.format("mm/dd/yyyy")||null},write:function(e){e=o(e);e&&i.endDate(e)}}),i.createSubmissionDeadlineFormatted=ko.pureComputed({read:function(){var e=i.createSubmissionDeadline();return e&&e.format("mm/dd/yyyy")||null},write:function(e){e=o(e);e&&i.createSubmissionDeadline(e)}});var a=[];$.each(t||[],function(e,t){a.push(ko.observable(t))}),i.tracks=ko.observableArray(a),i.addTrack=function(){i.tracks.push(ko.observable("Track "+(i.tracks().length+1)))},i.deleteTrack=function(e){if(window.confirm("Are you sure?")){for(var t=-1,o=i.tracks(),a=0;a<o.length;a++){var n=o[a];if("function"==typeof n&&n()===e){t=a;break}}-1!==t&&i.tracks.splice(t,1)}}}function p(o){var a=this;a.id=s.autoMap(),a.name=s.autoMap(),a.status=s.autoMap(),a.chairsJson=s.autoMap(),a.chairs=ko.observableArray([]),a.requestors=ko.observableArray([]),a.questions=ko.observableArray([]),a.creationViewModel=ko.observable(),a.isExpanded=ko.observable(!1),a.create=function(){if(window.confirm("Are you sure?")){var e=a.creationViewModel(),t=e.shortName().trim();if(!t.match(/(\S{1,})(\s{1,})(\S{1,})/)&&t.match(/(\d{4})/)){e={requestUri:s.odata.getGlobalUrl(s.odata.entitySet.conferenceRequests,null,"CreateConference"),method:"POST",data:{Request:{RequestId:a.id,ShortName:e.shortName().trim(),Name:e.name(),City:e.city(),Country:e.country(),StartDate:e.startDate(),EndDate:e.endDate(),CreateSubmissionDeadline:e.createSubmissionDeadline(),Chairs:e.Chairs,ExternalUrl:e.externalUrl(),LogoBlobName:e.logoBlobName,Tracks:e.tracks().map(function(e){return"function"==typeof e?e():null}).filter(function(e){return null!==e})}}};return n.request(e,function(e){o.updateItem(a,e)})}alert("Conference short name is invalid")}},a.reject=function(){var e;window.confirm("Are you sure?")&&(e={requestUri:s.odata.getGlobalUrl(s.odata.entitySet.conferenceRequests,a.id,"Reject"),method:"POST"},n.request(e,function(e){o.updateItem(a,e)}))}}function o(){var r=this;function a(e){var t=s.autoMap(new p(r),e),o=s.autoMap(new c(e.ConferenceCreationModel.Chairs,e.ConferenceCreationModel.Tracks),e.ConferenceCreationModel);t.creationViewModel(o);var o=e.RequestorsJson&&JSON.parse(e.RequestorsJson),a=[];$.each(o,function(e,t){a.push(s.autoMap(new d,t))}),t.requestors(a);var o=e.ChairsJson&&JSON.parse(e.ChairsJson),n=[];$.each(o,function(e,t){n.push(s.autoMap(new d,t))}),t.chairs(n);var e=e.QuestionsJson&&JSON.parse(e.QuestionsJson),i=[];return $.each(e,function(e,t){var o=s.autoMap(new u,t),t=t.Answers,a=[];$.each(t,function(e,t){a.push(s.autoMap(new l,t))}),o.answers(a),i.push(o)}),t.questions(i),t}r.filteringViewModel=new e,r.conferences=ko.observableArray([]),r.applyFilters=function(){r.reload()},r.reload=function(){return function(){var e=r.filteringViewModel.getFilterString(),t="?$orderby=Created desc&$top=25";e&&(t+="&$filter="+e);t={requestUri:s.odata.getGlobalUrl(s.odata.entitySet.conferenceRequests)+t};return n.request(t)}().done(function(e){var o=[],e=e&&e.value||[];$.each(e,function(e,t){o.push(a(t))}),r.conferences(o)})},r.updateItem=function(e,t){e=r.conferences.indexOf(e);t?(t=a(t),r.conferences.splice(e,1,t)):r.reload()},r.initialize=function(e){r.reload().done(function(){ko.applyBindingsAndShow(r,e)})}}s.conferenceRequests=function(e){return(new o).initialize(e)}}(window.app,window.OData),function(a,o){function n(){var t=this;t.id=a.autoMap(),t.firstName=a.autoMap(),t.lastName=a.autoMap(),t.email=a.autoMap(),t.country=a.autoMap(),t.reason=a.autoMap(),t.status=a.autoMap(),t.textFormatted=ko.pureComputed(function(){return t.firstName+" "+t.lastName+" <"+t.email+"> ("+t.country+")"}),t.deleteAccount=function(){var e;window.confirm("Are you sure?")&&(e={requestUri:a.odata.getGlobalUrl(a.odata.entitySet.accountProcessingRequests,t.id,"Process"),method:"POST"},o.request(e,function(e){window.location.reload(),a.addMessage("Account deletion submitted for processing.")}))},t.cancelRequest=function(){var e;window.confirm("Are you sure?")&&(e={requestUri:a.odata.getGlobalUrl(a.odata.entitySet.accountProcessingRequests,t.id,"Cancel"),method:"POST"},o.request(e,function(e){window.location.reload(),a.addMessage("Account deletion request canceled.")}))}}function t(){var t=this;t.requests=ko.observableArray([]),t.bindTo=function(e){o.read(a.odata.getUrl(a.odata.entitySet.accountProcessingRequests),function(e){var o=[],e=e&&e.value||[];$.each(e,function(e,t){t=a.autoMap(new n,t);o.push(t)}),t.requests(o)}).done(function(){ko.applyBindingsAndShow(t,e)})}}a.accountDeletionProcessing=function(e){return(new t).bindTo(e)}}(window.app,window.OData),function(n,i){function r(e){this.firstName=e.FirstName,this.lastName=e.LastName,this.email=e.Email,this.organization=e.Organization}function s(e){var o=this;o.id=e.Id,o.status=e.Status,o.user=new r(e.User),o.mergingUsers=[];for(var t=0;t<e.MergingUsers.length;t++)o.mergingUsers.push(new r(e.MergingUsers[t]));function a(e){return e.firstName+" "+e.lastName+"("+e.organization+") <"+e.email+">"}o.requestUserFormatted=ko.pureComputed(function(){return a(o.user)}),o.mergeActionText=ko.pureComputed(function(){return"Confirmed"==o.status?"Merge Accounts":"Failed"==o.status?"Retry Merging":""}),o.mergingUsersFormatted=ko.pureComputed(function(){for(var e="",t=0;t<o.mergingUsers.length;t++)""!=e&&(e+="; "),e+=a(o.mergingUsers[t]);return e}),o.mergeAccounts=function(){var e;window.confirm("Are you sure?")&&(e={requestUri:n.odata.getGlobalUrl(n.odata.entitySet.accountMergingRequests,o.id,"Process"),method:"POST"},i.request(e,function(e){window.location.reload(),n.addMessage("Account merging submitted for processing.")}))},o.cancelRequest=function(){var e;window.confirm("Are you sure?")&&(e={requestUri:n.odata.getGlobalUrl(n.odata.entitySet.accountMergingRequests,o.id,"Cancel"),method:"POST"},i.request(e,function(e){window.location.reload(),n.addMessage("Account merging request canceled.")}))}}function t(){var a=this;a.requests=ko.observableArray([]),a.bindTo=function(e){i.read(n.odata.getUrl(n.odata.entitySet.accountMergingRequests),function(e){for(var t=[],o=0;o<e.value.length;o++)t.push(new s(e.value[o]));a.requests(t)},function(e){n.addErrorMessage(n.odata.getErrorMessage(e))}).done(function(){ko.applyBindingsAndShow(a,e)})}}n.accountMerging=function(e){return(new t).bindTo(e)}}(window.app,window.OData),function(o,e){"use strict";function t(){}t.prototype={primary:function(e,t){o("input.primary:checked").prop("checked",!1),o(t.target).prop("checked",!0);t=o(t.target).attr("name").replace("Primary","Secondary");return o("input[name='"+t+"']").prop("checked",!1),!0},secondary:function(e,t){t=o(t.target).attr("name").replace("Secondary","Primary");return o("input[name='"+t+"']").prop("checked",!1),!0}},e.userSubjectAreaPage=function(){ko.applyBindings(new t,o("#subjects")[0])}}(window.jQuery,window.app),function(a,n,r){"use strict";function t(){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.individualConflicts=ko.observableArray(),i.normalIndividualConflicts=ko.observableArray(),i.uploading=ko.observable(!1),i.getModel=function(){for(var e=[],t=0;t<i.normalIndividualConflicts().length;t++){var o=i.normalIndividualConflicts()[t],o={Email:o.email,ConflictingUserEmail:o.conflictingUserEmail};e.push(o)}return{IndividualConflicts:e}},i.saveConflicts=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"ImportIndividualConflicts"),method:"POST",data:{Request:o}};n.request(o,function(){a.addMessage("Conflicts successfully saved.")},function(e){a.addErrorMessage(a.odata.getErrorMessage(e))})},i.deleteConflicts=function(e,t){var o=i.getModel(),o={requestUri:a.odata.getUrl(a.odata.entitySet.users,null,"DeleteIndividualConflicts"),method:"POST",data:{Request:o}};n.request(o,function(){a.addMessage("Conflicts successfully deleted.")},function(e){a.addErrorMessage(a.odata.getErrorMessage(e))})},i.downloadTemplate=function(e,t){var o="/api/odata/"+window.cmt3.conference.name+"/Users/GetImportIndividualConflictsTemplate";a.page.post(o,null,"GET")},i.uploadFile=function(e,t){""!==t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=r.parseJSON(r("#singleFileUploadFrame").contents().text());if(i.individualConflicts.removeAll(),i.normalIndividualConflicts.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={email:n.Email,conflictingUserEmail:n.ConflictingUserEmail,status:n.Status,notice:n.ErrorText,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.individualConflicts.push(n),n.hasError||i.normalIndividualConflicts.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}a.importIndividualConflicts=function(e){(new t).bindTo(e)}}(window.app,window.OData,window.jQuery),function(n,r,s){"use strict";function o(a){var i=this;i.isFileUploaded=ko.observable(!1),i.hasError=ko.observable(!1),i.errorText=ko.observable(),i.metaReviewerOrderAssignments=ko.observableArray(),i.normalMetaReviewerOrderAssignments=ko.observableArray(),i.uploading=ko.observable(!1),i.cancel=function(e,t){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"},i.getModel=function(){for(var e=[],t=0;t<i.normalMetaReviewerOrderAssignments().length;t++){var o=i.normalMetaReviewerOrderAssignments()[t],o={SubmissionId:o.submissionId,Email:o.email};e.push(o)}return{Assignments:e}},i.send=function(e,t){var o=i.getModel(),o={requestUri:n.odata.getUrl(n.odata.entitySet.submissions,null,"ImportMetaReviewerOrder"),method:"POST",data:{Order:a,Request:o}};r.request(o,function(){window.location="/"+window.cmt3.conference.name+"/Submission/Manage"})},i.uploadFile=function(e,t){""!=t.target.value&&(i.uploading(!0),t.target.form.submit())},i.parseUploadResult=function(e,t){var o=s.parseJSON(s("#singleFileUploadFrame").contents().text());if(i.metaReviewerOrderAssignments.removeAll(),i.normalMetaReviewerOrderAssignments.removeAll(),i.hasError(o.HasError),i.errorText(o.ErrorText),!i.hasError())for(var a=0;a<o.Models.length;a++){var n=o.Models[a],n={submissionId:n.SubmissionId,email:n.Email,status:n.Status,hasError:n.HasError,rawData:n.RawData,lineNumber:n.LineNumber};i.metaReviewerOrderAssignments.push(n),n.hasError||i.normalMetaReviewerOrderAssignments.push(n)}i.isFileUploaded(!0),i.uploading(!1)},i.bindTo=function(e){ko.applyBindingsAndShow(i,e)}}n.importMetaReviewerOrder=function(e,t){new o(e).bindTo(t)}}(window.app,window.OData,window.jQuery),function(n,i,r){"use strict";function a(t,e){var o=this,a=null;o.subject=ko.observable("").extend({required:!0}).autoMap(),o.body=ko.observable("").extend({required:!0}).autoMap(),o.subject(window.cmt3.conference.name+": "+e+" Inquiry About Paper #"+t),o.sendEmail=function(){var e;!function(){var e=ko.validation.group(o);if(0<e().length)return e.showAllMessages(),!1;return!0}()||((e=n.autoMap(o)).SubmissionId=t,e={requestUri:n.odata.getUrl(n.odata.entitySet.emails,null,"EmailTrackChairForSubmission"),method:"POST",data:{Request:e}},i.request(e,function(e){e=e.value;a||(a=new n.EmailProgressViewModel(r.getElementById("showProgressDialog"))).bind(),a.showInDialog(e)}))},o.bindTo=function(e){ko.applyBindingsAndShow(o,e)}}n.emailTrackChairForSubmission=function(e,t,o){new a(e,t).bindTo(o)}}(window.app,window.OData,(window.jQuery,window.document));